function V0(u,h){for(var l=0;l<h.length;l++){const g=h[l];if(typeof g!="string"&&!Array.isArray(g)){for(const y in g)if(y!=="default"&&!(y in u)){const x=Object.getOwnPropertyDescriptor(g,y);x&&Object.defineProperty(u,y,x.get?x:{enumerable:!0,get:()=>g[y]})}}}return Object.freeze(Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}))}(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))g(y);new MutationObserver(y=>{for(const x of y)if(x.type==="childList")for(const b of x.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&g(b)}).observe(document,{childList:!0,subtree:!0});function l(y){const x={};return y.integrity&&(x.integrity=y.integrity),y.referrerPolicy&&(x.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?x.credentials="include":y.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function g(y){if(y.ep)return;y.ep=!0;const x=l(y);fetch(y.href,x)}})();var Cl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bl(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var od={exports:{}},sa={},ad={exports:{}},ft={};var Bh;function S1(){if(Bh)return ft;Bh=1;var u=Symbol.for("react.element"),h=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),b=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),k=Symbol.iterator;function O(B){return B===null||typeof B!="object"?null:(B=k&&B[k]||B["@@iterator"],typeof B=="function"?B:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,F={};function V(B,ee,ve){this.props=B,this.context=ee,this.refs=F,this.updater=ve||X}V.prototype.isReactComponent={},V.prototype.setState=function(B,ee){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ee,"setState")},V.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function Y(){}Y.prototype=V.prototype;function R(B,ee,ve){this.props=B,this.context=ee,this.refs=F,this.updater=ve||X}var N=R.prototype=new Y;N.constructor=R,q(N,V.prototype),N.isPureReactComponent=!0;var M=Array.isArray,D=Object.prototype.hasOwnProperty,Z={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function Q(B,ee,ve){var be,Oe={},Ce=null,Me=null;if(ee!=null)for(be in ee.ref!==void 0&&(Me=ee.ref),ee.key!==void 0&&(Ce=""+ee.key),ee)D.call(ee,be)&&!z.hasOwnProperty(be)&&(Oe[be]=ee[be]);var fe=arguments.length-2;if(fe===1)Oe.children=ve;else if(1<fe){for(var De=Array(fe),Ke=0;Ke<fe;Ke++)De[Ke]=arguments[Ke+2];Oe.children=De}if(B&&B.defaultProps)for(be in fe=B.defaultProps,fe)Oe[be]===void 0&&(Oe[be]=fe[be]);return{$$typeof:u,type:B,key:Ce,ref:Me,props:Oe,_owner:Z.current}}function he(B,ee){return{$$typeof:u,type:B.type,key:ee,ref:B.ref,props:B.props,_owner:B._owner}}function Ae(B){return typeof B=="object"&&B!==null&&B.$$typeof===u}function we(B){var ee={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ve){return ee[ve]})}var xe=/\/+/g;function le(B,ee){return typeof B=="object"&&B!==null&&B.key!=null?we(""+B.key):ee.toString(36)}function ne(B,ee,ve,be,Oe){var Ce=typeof B;(Ce==="undefined"||Ce==="boolean")&&(B=null);var Me=!1;if(B===null)Me=!0;else switch(Ce){case"string":case"number":Me=!0;break;case"object":switch(B.$$typeof){case u:case h:Me=!0}}if(Me)return Me=B,Oe=Oe(Me),B=be===""?"."+le(Me,0):be,M(Oe)?(ve="",B!=null&&(ve=B.replace(xe,"$&/")+"/"),ne(Oe,ee,ve,"",function(Ke){return Ke})):Oe!=null&&(Ae(Oe)&&(Oe=he(Oe,ve+(!Oe.key||Me&&Me.key===Oe.key?"":(""+Oe.key).replace(xe,"$&/")+"/")+B)),ee.push(Oe)),1;if(Me=0,be=be===""?".":be+":",M(B))for(var fe=0;fe<B.length;fe++){Ce=B[fe];var De=be+le(Ce,fe);Me+=ne(Ce,ee,ve,De,Oe)}else if(De=O(B),typeof De=="function")for(B=De.call(B),fe=0;!(Ce=B.next()).done;)Ce=Ce.value,De=be+le(Ce,fe++),Me+=ne(Ce,ee,ve,De,Oe);else if(Ce==="object")throw ee=String(B),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return Me}function G(B,ee,ve){if(B==null)return B;var be=[],Oe=0;return ne(B,be,"","",function(Ce){return ee.call(ve,Ce,Oe++)}),be}function J(B){if(B._status===-1){var ee=B._result;ee=ee(),ee.then(function(ve){(B._status===0||B._status===-1)&&(B._status=1,B._result=ve)},function(ve){(B._status===0||B._status===-1)&&(B._status=2,B._result=ve)}),B._status===-1&&(B._status=0,B._result=ee)}if(B._status===1)return B._result.default;throw B._result}var oe={current:null},ce={transition:null},Se={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:ce,ReactCurrentOwner:Z};function K(){throw Error("act(...) is not supported in production builds of React.")}return ft.Children={map:G,forEach:function(B,ee,ve){G(B,function(){ee.apply(this,arguments)},ve)},count:function(B){var ee=0;return G(B,function(){ee++}),ee},toArray:function(B){return G(B,function(ee){return ee})||[]},only:function(B){if(!Ae(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},ft.Component=V,ft.Fragment=l,ft.Profiler=y,ft.PureComponent=R,ft.StrictMode=g,ft.Suspense=S,ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Se,ft.act=K,ft.cloneElement=function(B,ee,ve){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var be=q({},B.props),Oe=B.key,Ce=B.ref,Me=B._owner;if(ee!=null){if(ee.ref!==void 0&&(Ce=ee.ref,Me=Z.current),ee.key!==void 0&&(Oe=""+ee.key),B.type&&B.type.defaultProps)var fe=B.type.defaultProps;for(De in ee)D.call(ee,De)&&!z.hasOwnProperty(De)&&(be[De]=ee[De]===void 0&&fe!==void 0?fe[De]:ee[De])}var De=arguments.length-2;if(De===1)be.children=ve;else if(1<De){fe=Array(De);for(var Ke=0;Ke<De;Ke++)fe[Ke]=arguments[Ke+2];be.children=fe}return{$$typeof:u,type:B.type,key:Oe,ref:Ce,props:be,_owner:Me}},ft.createContext=function(B){return B={$$typeof:b,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:x,_context:B},B.Consumer=B},ft.createElement=Q,ft.createFactory=function(B){var ee=Q.bind(null,B);return ee.type=B,ee},ft.createRef=function(){return{current:null}},ft.forwardRef=function(B){return{$$typeof:I,render:B}},ft.isValidElement=Ae,ft.lazy=function(B){return{$$typeof:A,_payload:{_status:-1,_result:B},_init:J}},ft.memo=function(B,ee){return{$$typeof:v,type:B,compare:ee===void 0?null:ee}},ft.startTransition=function(B){var ee=ce.transition;ce.transition={};try{B()}finally{ce.transition=ee}},ft.unstable_act=K,ft.useCallback=function(B,ee){return oe.current.useCallback(B,ee)},ft.useContext=function(B){return oe.current.useContext(B)},ft.useDebugValue=function(){},ft.useDeferredValue=function(B){return oe.current.useDeferredValue(B)},ft.useEffect=function(B,ee){return oe.current.useEffect(B,ee)},ft.useId=function(){return oe.current.useId()},ft.useImperativeHandle=function(B,ee,ve){return oe.current.useImperativeHandle(B,ee,ve)},ft.useInsertionEffect=function(B,ee){return oe.current.useInsertionEffect(B,ee)},ft.useLayoutEffect=function(B,ee){return oe.current.useLayoutEffect(B,ee)},ft.useMemo=function(B,ee){return oe.current.useMemo(B,ee)},ft.useReducer=function(B,ee,ve){return oe.current.useReducer(B,ee,ve)},ft.useRef=function(B){return oe.current.useRef(B)},ft.useState=function(B){return oe.current.useState(B)},ft.useSyncExternalStore=function(B,ee,ve){return oe.current.useSyncExternalStore(B,ee,ve)},ft.useTransition=function(){return oe.current.useTransition()},ft.version="18.3.1",ft}var Lh;function Pd(){return Lh||(Lh=1,ad.exports=S1()),ad.exports}var zh;function E1(){if(zh)return sa;zh=1;var u=Pd(),h=Symbol.for("react.element"),l=Symbol.for("react.fragment"),g=Object.prototype.hasOwnProperty,y=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function b(I,S,v){var A,k={},O=null,X=null;v!==void 0&&(O=""+v),S.key!==void 0&&(O=""+S.key),S.ref!==void 0&&(X=S.ref);for(A in S)g.call(S,A)&&!x.hasOwnProperty(A)&&(k[A]=S[A]);if(I&&I.defaultProps)for(A in S=I.defaultProps,S)k[A]===void 0&&(k[A]=S[A]);return{$$typeof:h,type:I,key:O,ref:X,props:k,_owner:y.current}}return sa.Fragment=l,sa.jsx=b,sa.jsxs=b,sa}var Fh;function A1(){return Fh||(Fh=1,od.exports=E1()),od.exports}var r=A1(),W=Pd();const ir=Bl(W),I1=V0({__proto__:null,default:ir},[W]);var bl={},ld={exports:{}},rr={},cd={exports:{}},dd={};var Wh;function j1(){return Wh||(Wh=1,(function(u){function h(ce,Se){var K=ce.length;ce.push(Se);e:for(;0<K;){var B=K-1>>>1,ee=ce[B];if(0<y(ee,Se))ce[B]=Se,ce[K]=ee,K=B;else break e}}function l(ce){return ce.length===0?null:ce[0]}function g(ce){if(ce.length===0)return null;var Se=ce[0],K=ce.pop();if(K!==Se){ce[0]=K;e:for(var B=0,ee=ce.length,ve=ee>>>1;B<ve;){var be=2*(B+1)-1,Oe=ce[be],Ce=be+1,Me=ce[Ce];if(0>y(Oe,K))Ce<ee&&0>y(Me,Oe)?(ce[B]=Me,ce[Ce]=K,B=Ce):(ce[B]=Oe,ce[be]=K,B=be);else if(Ce<ee&&0>y(Me,K))ce[B]=Me,ce[Ce]=K,B=Ce;else break e}}return Se}function y(ce,Se){var K=ce.sortIndex-Se.sortIndex;return K!==0?K:ce.id-Se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;u.unstable_now=function(){return x.now()}}else{var b=Date,I=b.now();u.unstable_now=function(){return b.now()-I}}var S=[],v=[],A=1,k=null,O=3,X=!1,q=!1,F=!1,V=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(ce){for(var Se=l(v);Se!==null;){if(Se.callback===null)g(v);else if(Se.startTime<=ce)g(v),Se.sortIndex=Se.expirationTime,h(S,Se);else break;Se=l(v)}}function M(ce){if(F=!1,N(ce),!q)if(l(S)!==null)q=!0,J(D);else{var Se=l(v);Se!==null&&oe(M,Se.startTime-ce)}}function D(ce,Se){q=!1,F&&(F=!1,Y(Q),Q=-1),X=!0;var K=O;try{for(N(Se),k=l(S);k!==null&&(!(k.expirationTime>Se)||ce&&!we());){var B=k.callback;if(typeof B=="function"){k.callback=null,O=k.priorityLevel;var ee=B(k.expirationTime<=Se);Se=u.unstable_now(),typeof ee=="function"?k.callback=ee:k===l(S)&&g(S),N(Se)}else g(S);k=l(S)}if(k!==null)var ve=!0;else{var be=l(v);be!==null&&oe(M,be.startTime-Se),ve=!1}return ve}finally{k=null,O=K,X=!1}}var Z=!1,z=null,Q=-1,he=5,Ae=-1;function we(){return!(u.unstable_now()-Ae<he)}function xe(){if(z!==null){var ce=u.unstable_now();Ae=ce;var Se=!0;try{Se=z(!0,ce)}finally{Se?le():(Z=!1,z=null)}}else Z=!1}var le;if(typeof R=="function")le=function(){R(xe)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,G=ne.port2;ne.port1.onmessage=xe,le=function(){G.postMessage(null)}}else le=function(){V(xe,0)};function J(ce){z=ce,Z||(Z=!0,le())}function oe(ce,Se){Q=V(function(){ce(u.unstable_now())},Se)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(ce){ce.callback=null},u.unstable_continueExecution=function(){q||X||(q=!0,J(D))},u.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<ce?Math.floor(1e3/ce):5},u.unstable_getCurrentPriorityLevel=function(){return O},u.unstable_getFirstCallbackNode=function(){return l(S)},u.unstable_next=function(ce){switch(O){case 1:case 2:case 3:var Se=3;break;default:Se=O}var K=O;O=Se;try{return ce()}finally{O=K}},u.unstable_pauseExecution=function(){},u.unstable_requestPaint=function(){},u.unstable_runWithPriority=function(ce,Se){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var K=O;O=ce;try{return Se()}finally{O=K}},u.unstable_scheduleCallback=function(ce,Se,K){var B=u.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?B+K:B):K=B,ce){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=K+ee,ce={id:A++,callback:Se,priorityLevel:ce,startTime:K,expirationTime:ee,sortIndex:-1},K>B?(ce.sortIndex=K,h(v,ce),l(S)===null&&ce===l(v)&&(F?(Y(Q),Q=-1):F=!0,oe(M,K-B))):(ce.sortIndex=ee,h(S,ce),q||X||(q=!0,J(D))),ce},u.unstable_shouldYield=we,u.unstable_wrapCallback=function(ce){var Se=O;return function(){var K=O;O=Se;try{return ce.apply(this,arguments)}finally{O=K}}}})(dd)),dd}var Uh;function k1(){return Uh||(Uh=1,cd.exports=j1()),cd.exports}var Vh;function N1(){if(Vh)return rr;Vh=1;var u=Pd(),h=k1();function l(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,d=1;d<arguments.length;d++)s+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g=new Set,y={};function x(t,s){b(t,s),b(t+"Capture",s)}function b(t,s){for(y[t]=s,t=0;t<s.length;t++)g.add(s[t])}var I=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A={},k={};function O(t){return S.call(k,t)?!0:S.call(A,t)?!1:v.test(t)?k[t]=!0:(A[t]=!0,!1)}function X(t,s,d,p){if(d!==null&&d.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return p?!1:d!==null?!d.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function q(t,s,d,p){if(s===null||typeof s>"u"||X(t,s,d,p))return!0;if(p)return!1;if(d!==null)switch(d.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function F(t,s,d,p,C,E,P){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=p,this.attributeNamespace=C,this.mustUseProperty=d,this.propertyName=t,this.type=s,this.sanitizeURL=E,this.removeEmptyString=P}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){V[t]=new F(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];V[s]=new F(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){V[t]=new F(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){V[t]=new F(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){V[t]=new F(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){V[t]=new F(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){V[t]=new F(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){V[t]=new F(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){V[t]=new F(t,5,!1,t.toLowerCase(),null,!1,!1)});var Y=/[\-:]([a-z])/g;function R(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(Y,R);V[s]=new F(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(Y,R);V[s]=new F(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(Y,R);V[s]=new F(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){V[t]=new F(t,1,!1,t.toLowerCase(),null,!1,!1)}),V.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){V[t]=new F(t,1,!1,t.toLowerCase(),null,!0,!0)});function N(t,s,d,p){var C=V.hasOwnProperty(s)?V[s]:null;(C!==null?C.type!==0:p||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(q(s,d,C,p)&&(d=null),p||C===null?O(s)&&(d===null?t.removeAttribute(s):t.setAttribute(s,""+d)):C.mustUseProperty?t[C.propertyName]=d===null?C.type===3?!1:"":d:(s=C.attributeName,p=C.attributeNamespace,d===null?t.removeAttribute(s):(C=C.type,d=C===3||C===4&&d===!0?"":""+d,p?t.setAttributeNS(p,s,d):t.setAttribute(s,d))))}var M=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),Z=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),Ae=Symbol.for("react.provider"),we=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),ce=Symbol.iterator;function Se(t){return t===null||typeof t!="object"?null:(t=ce&&t[ce]||t["@@iterator"],typeof t=="function"?t:null)}var K=Object.assign,B;function ee(t){if(B===void 0)try{throw Error()}catch(d){var s=d.stack.trim().match(/\n( *(at )?)/);B=s&&s[1]||""}return`
`+B+t}var ve=!1;function be(t,s){if(!t||ve)return"";ve=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(ye){var p=ye}Reflect.construct(t,[],s)}else{try{s.call()}catch(ye){p=ye}t.call(s.prototype)}else{try{throw Error()}catch(ye){p=ye}t()}}catch(ye){if(ye&&p&&typeof ye.stack=="string"){for(var C=ye.stack.split(`
`),E=p.stack.split(`
`),P=C.length-1,$=E.length-1;1<=P&&0<=$&&C[P]!==E[$];)$--;for(;1<=P&&0<=$;P--,$--)if(C[P]!==E[$]){if(P!==1||$!==1)do if(P--,$--,0>$||C[P]!==E[$]){var re=`
`+C[P].replace(" at new "," at ");return t.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",t.displayName)),re}while(1<=P&&0<=$);break}}}finally{ve=!1,Error.prepareStackTrace=d}return(t=t?t.displayName||t.name:"")?ee(t):""}function Oe(t){switch(t.tag){case 5:return ee(t.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return t=be(t.type,!1),t;case 11:return t=be(t.type.render,!1),t;case 1:return t=be(t.type,!0),t;default:return""}}function Ce(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case z:return"Fragment";case Z:return"Portal";case he:return"Profiler";case Q:return"StrictMode";case le:return"Suspense";case ne:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case we:return(t.displayName||"Context")+".Consumer";case Ae:return(t._context.displayName||"Context")+".Provider";case xe:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case G:return s=t.displayName||null,s!==null?s:Ce(t.type)||"Memo";case J:s=t._payload,t=t._init;try{return Ce(t(s))}catch{}}return null}function Me(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(s);case 8:return s===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function fe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function De(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ke(t){var s=De(t)?"checked":"value",d=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),p=""+t[s];if(!t.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var C=d.get,E=d.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return C.call(this)},set:function(P){p=""+P,E.call(this,P)}}),Object.defineProperty(t,s,{enumerable:d.enumerable}),{getValue:function(){return p},setValue:function(P){p=""+P},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function He(t){t._valueTracker||(t._valueTracker=Ke(t))}function st(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var d=s.getValue(),p="";return t&&(p=De(t)?t.checked?"true":"false":t.value),t=p,t!==d?(s.setValue(t),!0):!1}function We(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qe(t,s){var d=s.checked;return K({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??t._wrapperState.initialChecked})}function St(t,s){var d=s.defaultValue==null?"":s.defaultValue,p=s.checked!=null?s.checked:s.defaultChecked;d=fe(s.value!=null?s.value:d),t._wrapperState={initialChecked:p,initialValue:d,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ln(t,s){s=s.checked,s!=null&&N(t,"checked",s,!1)}function xt(t,s){ln(t,s);var d=fe(s.value),p=s.type;if(d!=null)p==="number"?(d===0&&t.value===""||t.value!=d)&&(t.value=""+d):t.value!==""+d&&(t.value=""+d);else if(p==="submit"||p==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?ot(t,s.type,d):s.hasOwnProperty("defaultValue")&&ot(t,s.type,fe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function dt(t,s,d){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var p=s.type;if(!(p!=="submit"&&p!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,d||s===t.value||(t.value=s),t.defaultValue=s}d=t.name,d!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,d!==""&&(t.name=d)}function ot(t,s,d){(s!=="number"||We(t.ownerDocument)!==t)&&(d==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+d&&(t.defaultValue=""+d))}var Jt=Array.isArray;function Le(t,s,d,p){if(t=t.options,s){s={};for(var C=0;C<d.length;C++)s["$"+d[C]]=!0;for(d=0;d<t.length;d++)C=s.hasOwnProperty("$"+t[d].value),t[d].selected!==C&&(t[d].selected=C),C&&p&&(t[d].defaultSelected=!0)}else{for(d=""+fe(d),s=null,C=0;C<t.length;C++){if(t[C].value===d){t[C].selected=!0,p&&(t[C].defaultSelected=!0);return}s!==null||t[C].disabled||(s=t[C])}s!==null&&(s.selected=!0)}}function Ur(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(l(91));return K({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qi(t,s){var d=s.value;if(d==null){if(d=s.children,s=s.defaultValue,d!=null){if(s!=null)throw Error(l(92));if(Jt(d)){if(1<d.length)throw Error(l(93));d=d[0]}s=d}s==null&&(s=""),d=s}t._wrapperState={initialValue:fe(d)}}function Un(t,s){var d=fe(s.value),p=fe(s.defaultValue);d!=null&&(d=""+d,d!==t.value&&(t.value=d),s.defaultValue==null&&t.defaultValue!==d&&(t.defaultValue=d)),p!=null&&(t.defaultValue=""+p)}function xi(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function An(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yi(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?An(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vn,en=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,d,p,C){MSApp.execUnsafeLocalFunction(function(){return t(s,d,p,C)})}:t})(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Vn=Vn||document.createElement("div"),Vn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Vn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function _r(t,s){if(s){var d=t.firstChild;if(d&&d===t.lastChild&&d.nodeType===3){d.nodeValue=s;return}}t.textContent=s}var Zn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yo=["Webkit","ms","Moz","O"];Object.keys(Zn).forEach(function(t){yo.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Zn[s]=Zn[t]})});function Mt(t,s,d){return s==null||typeof s=="boolean"||s===""?"":d||typeof s!="number"||s===0||Zn.hasOwnProperty(t)&&Zn[t]?(""+s).trim():s+"px"}function Pe(t,s){t=t.style;for(var d in s)if(s.hasOwnProperty(d)){var p=d.indexOf("--")===0,C=Mt(d,s[d],p);d==="float"&&(d="cssFloat"),p?t.setProperty(d,C):t[d]=C}}var tn=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ct(t,s){if(s){if(tn[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(l(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(l(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(l(61))}if(s.style!=null&&typeof s.style!="object")throw Error(l(62))}}function _t(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $r=null;function Ji(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _s=null,ht=null,qn=null;function vo(t){if(t=Go(t)){if(typeof _s!="function")throw Error(l(280));var s=t.stateNode;s&&(s=Ma(s),_s(t.stateNode,t.type,s))}}function wo(t){ht?qn?qn.push(t):qn=[t]:ht=t}function Kn(){if(ht){var t=ht,s=qn;if(qn=ht=null,vo(t),s)for(t=0;t<s.length;t++)vo(s[t])}}function Rs(t,s){return t(s)}function un(){}var Vr=!1;function es(t,s,d){if(Vr)return t(s,d);Vr=!0;try{return Rs(t,s,d)}finally{Vr=!1,(ht!==null||qn!==null)&&(un(),Kn())}}function On(t,s){var d=t.stateNode;if(d===null)return null;var p=Ma(d);if(p===null)return null;d=p[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(t=t.type,p=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!p;break e;default:t=!1}if(t)return null;if(d&&typeof d!="function")throw Error(l(231,s,typeof d));return d}var Co=!1;if(I)try{var sr={};Object.defineProperty(sr,"passive",{get:function(){Co=!0}}),window.addEventListener("test",sr,sr),window.removeEventListener("test",sr,sr)}catch{Co=!1}function bo(t,s,d,p,C,E,P,$,re){var ye=Array.prototype.slice.call(arguments,3);try{s.apply(d,ye)}catch(ke){this.onError(ke)}}var cn=!1,mr=null,In=!1,Be=null,vi={onError:function(t){cn=!0,mr=t}};function So(t,s,d,p,C,E,P,$,re){cn=!1,mr=null,bo.apply(vi,arguments)}function Dn(t,s,d,p,C,E,P,$,re){if(So.apply(this,arguments),cn){if(cn){var ye=mr;cn=!1,mr=null}else throw Error(l(198));In||(In=!0,Be=ye)}}function $n(t){var s=t,d=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(d=s.return),t=s.return;while(t)}return s.tag===3?d:null}function ts(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function ns(t){if($n(t)!==t)throw Error(l(188))}function xr(t){var s=t.alternate;if(!s){if(s=$n(t),s===null)throw Error(l(188));return s!==t?null:t}for(var d=t,p=s;;){var C=d.return;if(C===null)break;var E=C.alternate;if(E===null){if(p=C.return,p!==null){d=p;continue}break}if(C.child===E.child){for(E=C.child;E;){if(E===d)return ns(C),t;if(E===p)return ns(C),s;E=E.sibling}throw Error(l(188))}if(d.return!==p.return)d=C,p=E;else{for(var P=!1,$=C.child;$;){if($===d){P=!0,d=C,p=E;break}if($===p){P=!0,p=C,d=E;break}$=$.sibling}if(!P){for($=E.child;$;){if($===d){P=!0,d=E,p=C;break}if($===p){P=!0,p=E,d=C;break}$=$.sibling}if(!P)throw Error(l(189))}}if(d.alternate!==p)throw Error(l(190))}if(d.tag!==3)throw Error(l(188));return d.stateNode.current===d?t:s}function ga(t){return t=xr(t),t!==null?ma(t):null}function ma(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=ma(t);if(s!==null)return s;t=t.sibling}return null}var or=h.unstable_scheduleCallback,yn=h.unstable_cancelCallback,Rt=h.unstable_shouldYield,xa=h.unstable_requestPaint,Et=h.unstable_now,Eo=h.unstable_getCurrentPriorityLevel,Ee=h.unstable_ImmediatePriority,ya=h.unstable_UserBlockingPriority,Nt=h.unstable_NormalPriority,wi=h.unstable_LowPriority,va=h.unstable_IdlePriority,mt=null,lt=null;function pt(t){if(lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot(mt,t,void 0,(t.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:nn,Ao=Math.log,Io=Math.LN2;function nn(t){return t>>>=0,t===0?32:31-(Ao(t)/Io|0)|0}var ar=64,Os=4194304;function Tt(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lr(t,s){var d=t.pendingLanes;if(d===0)return 0;var p=0,C=t.suspendedLanes,E=t.pingedLanes,P=d&268435455;if(P!==0){var $=P&~C;$!==0?p=Tt($):(E&=P,E!==0&&(p=Tt(E)))}else P=d&~C,P!==0?p=Tt(P):E!==0&&(p=Tt(E));if(p===0)return 0;if(s!==0&&s!==p&&(s&C)===0&&(C=p&-p,E=s&-s,C>=E||C===16&&(E&4194240)!==0))return s;if((p&4)!==0&&(p|=d&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=p;0<s;)d=31-Gn(s),C=1<<d,p|=t[d],s&=~C;return p}function Fl(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ci(t,s){for(var d=t.suspendedLanes,p=t.pingedLanes,C=t.expirationTimes,E=t.pendingLanes;0<E;){var P=31-Gn(E),$=1<<P,re=C[P];re===-1?(($&d)===0||($&p)!==0)&&(C[P]=Fl($,s)):re<=s&&(t.expiredLanes|=$),E&=~$}}function At(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hn(){var t=ar;return ar<<=1,(ar&4194240)===0&&(ar=64),t}function de(t){for(var s=[],d=0;31>d;d++)s.push(t);return s}function U(t,s,d){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Gn(s),t[s]=d}function Ze(t,s){var d=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var p=t.eventTimes;for(t=t.expirationTimes;0<d;){var C=31-Gn(d),E=1<<C;s[C]=0,p[C]=-1,t[C]=-1,d&=~E}}function Yt(t,s){var d=t.entangledLanes|=s;for(t=t.entanglements;d;){var p=31-Gn(d),C=1<<p;C&s|t[p]&s&&(t[p]|=s),d&=~C}}var ct=0;function wa(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Ds,Pn,qe,Ot,jo,ko=!1,bi=[],cr=null,yr=null,Gr=null,Wt=new Map,Rr=new Map,jn=[],tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ca(t,s){switch(t){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":Wt.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rr.delete(s.pointerId)}}function rt(t,s,d,p,C,E){return t===null||t.nativeEvent!==E?(t={blockedOn:s,domEventName:d,eventSystemFlags:p,nativeEvent:E,targetContainers:[C]},s!==null&&(s=Go(s),s!==null&&Pn(s)),t):(t.eventSystemFlags|=p,s=t.targetContainers,C!==null&&s.indexOf(C)===-1&&s.push(C),t)}function fn(t,s,d,p,C){switch(s){case"focusin":return cr=rt(cr,t,s,d,p,C),!0;case"dragenter":return yr=rt(yr,t,s,d,p,C),!0;case"mouseover":return Gr=rt(Gr,t,s,d,p,C),!0;case"pointerover":var E=C.pointerId;return Wt.set(E,rt(Wt.get(E)||null,t,s,d,p,C)),!0;case"gotpointercapture":return E=C.pointerId,Rr.set(E,rt(Rr.get(E)||null,t,s,d,p,C)),!0}return!1}function ba(t){var s=hs(t.target);if(s!==null){var d=$n(s);if(d!==null){if(s=d.tag,s===13){if(s=ts(d),s!==null){t.blockedOn=s,jo(t.priority,function(){qe(d)});return}}else if(s===3&&d.stateNode.current.memoizedState.isDehydrated){t.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Si(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var d=Ps(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(d===null){d=t.nativeEvent;var p=new d.constructor(d.type,d);$r=p,d.target.dispatchEvent(p),$r=null}else return s=Go(d),s!==null&&Pn(s),t.blockedOn=d,!1;s.shift()}return!0}function No(t,s,d){Si(t)&&d.delete(s)}function Qr(){ko=!1,cr!==null&&Si(cr)&&(cr=null),yr!==null&&Si(yr)&&(yr=null),Gr!==null&&Si(Gr)&&(Gr=null),Wt.forEach(No),Rr.forEach(No)}function rs(t,s){t.blockedOn===s&&(t.blockedOn=null,ko||(ko=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,Qr)))}function Or(t){function s(C){return rs(C,t)}if(0<bi.length){rs(bi[0],t);for(var d=1;d<bi.length;d++){var p=bi[d];p.blockedOn===t&&(p.blockedOn=null)}}for(cr!==null&&rs(cr,t),yr!==null&&rs(yr,t),Gr!==null&&rs(Gr,t),Wt.forEach(s),Rr.forEach(s),d=0;d<jn.length;d++)p=jn[d],p.blockedOn===t&&(p.blockedOn=null);for(;0<jn.length&&(d=jn[0],d.blockedOn===null);)ba(d),d.blockedOn===null&&jn.shift()}var vr=M.ReactCurrentBatchConfig,Hr=!0;function Sa(t,s,d,p){var C=ct,E=vr.transition;vr.transition=null;try{ct=1,Jr(t,s,d,p)}finally{ct=C,vr.transition=E}}function is(t,s,d,p){var C=ct,E=vr.transition;vr.transition=null;try{ct=4,Jr(t,s,d,p)}finally{ct=C,vr.transition=E}}function Jr(t,s,d,p){if(Hr){var C=Ps(t,s,d,p);if(C===null)Kl(t,s,p,pn,d),Ca(t,p);else if(fn(C,t,s,d,p))p.stopPropagation();else if(Ca(t,p),s&4&&-1<tt.indexOf(t)){for(;C!==null;){var E=Go(C);if(E!==null&&Ds(E),E=Ps(t,s,d,p),E===null&&Kl(t,s,p,pn,d),E===C)break;C=E}C!==null&&p.stopPropagation()}else Kl(t,s,p,null,d)}}var pn=null;function Ps(t,s,d,p){if(pn=null,t=Ji(p),t=hs(t),t!==null)if(s=$n(t),s===null)t=null;else if(d=s.tag,d===13){if(t=ts(s),t!==null)return t;t=null}else if(d===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return pn=t,null}function To(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Eo()){case Ee:return 1;case ya:return 4;case Nt:case wi:return 16;case va:return 536870912;default:return 16}default:return 16}}var Dr=null,_o=null,Ms=null;function Ea(){if(Ms)return Ms;var t,s=_o,d=s.length,p,C="value"in Dr?Dr.value:Dr.textContent,E=C.length;for(t=0;t<d&&s[t]===C[t];t++);var P=d-t;for(p=1;p<=P&&s[d-p]===C[E-p];p++);return Ms=C.slice(t,1<p?1-p:void 0)}function yt(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ss(){return!0}function os(){return!1}function Zt(t){function s(d,p,C,E,P){this._reactName=d,this._targetInst=C,this.type=p,this.nativeEvent=E,this.target=P,this.currentTarget=null;for(var $ in t)t.hasOwnProperty($)&&(d=t[$],this[$]=d?d(E):E[$]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?ss:os,this.isPropagationStopped=os,this}return K(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),s}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},me=Zt(Ei),at=K({},Ei,{view:0,detail:0}),gn=Zt(at),Ai,Bs,as,Ls=K({},at,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ls,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==as&&(as&&t.type==="mousemove"?(Ai=t.screenX-as.screenX,Bs=t.screenY-as.screenY):Bs=Ai=0,as=t),Ai)},movementY:function(t){return"movementY"in t?t.movementY:Bs}}),Aa=Zt(Ls),Ro=K({},Ls,{dataTransfer:0}),rn=Zt(Ro),Oo=K({},at,{relatedTarget:0}),Dt=Zt(Oo),zs=K({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),ei=Zt(zs),It=K({},Ei,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$e=Zt(It),Wl=K({},Ei,{data:0}),jt=Zt(Wl),ti={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ii={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ul={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wr(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Ul[t])?!!s[t]:!1}function ls(){return wr}var Ia=K({},at,{key:function(t){if(t.key){var s=ti[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=yt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ii[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ls,charCode:function(t){return t.type==="keypress"?yt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Do=Zt(Ia),ja=K({},Ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Po=Zt(ja),Vl=K({},at,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ls}),ji=Zt(Vl),Mo=K({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gl=Zt(Mo),cs=K({},Ls,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Hl=Zt(cs),Xr=[9,13,27,32],ki=I&&"CompositionEvent"in window,vn=null;I&&"documentMode"in document&&(vn=document.documentMode);var ka=I&&"TextEvent"in window&&!vn,dr=I&&(!ki||vn&&8<vn&&11>=vn),Na=" ",Fs=!1;function Ta(t,s){switch(t){case"keyup":return Xr.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var kn=!1;function Xl(t,s){switch(t){case"compositionend":return Bo(s);case"keypress":return s.which!==32?null:(Fs=!0,Na);case"textInput":return t=s.data,t===Na&&Fs?null:t;default:return null}}function Lo(t,s){if(kn)return t==="compositionend"||!ki&&Ta(t,s)?(t=Ea(),Ms=_o=Dr=null,kn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return dr&&s.locale!=="ko"?null:s.data;default:return null}}var ds={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gt(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!ds[t.type]:s==="textarea"}function us(t,s,d,p){wo(p),s=Oa(s,"onChange"),0<s.length&&(d=new me("onChange","change",null,d,p),t.push({event:d,listeners:s}))}var T=null,e=null;function n(t){Jd(t,0)}function i(t){var s=Vs(t);if(st(s))return t}function o(t,s){if(t==="change")return s}var a=!1;if(I){var c;if(I){var f="oninput"in document;if(!f){var m=document.createElement("div");m.setAttribute("oninput","return;"),f=typeof m.oninput=="function"}c=f}else c=!1;a=c&&(!document.documentMode||9<document.documentMode)}function w(){T&&(T.detachEvent("onpropertychange",j),e=T=null)}function j(t){if(t.propertyName==="value"&&i(e)){var s=[];us(s,e,t,Ji(t)),es(n,s)}}function _(t,s,d){t==="focusin"?(w(),T=s,e=d,T.attachEvent("onpropertychange",j)):t==="focusout"&&w()}function L(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return i(e)}function H(t,s){if(t==="click")return i(s)}function te(t,s){if(t==="input"||t==="change")return i(s)}function ie(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var ae=typeof Object.is=="function"?Object.is:ie;function ge(t,s){if(ae(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var d=Object.keys(t),p=Object.keys(s);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var C=d[p];if(!S.call(s,C)||!ae(t[C],s[C]))return!1}return!0}function Te(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _e(t,s){var d=Te(t);t=0;for(var p;d;){if(d.nodeType===3){if(p=t+d.textContent.length,t<=s&&p>=s)return{node:d,offset:s-t};t=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Te(d)}}function je(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?je(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function ut(){for(var t=window,s=We();s instanceof t.HTMLIFrameElement;){try{var d=typeof s.contentWindow.location.href=="string"}catch{d=!1}if(d)t=s.contentWindow;else break;s=We(t.document)}return s}function it(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function Mn(t){var s=ut(),d=t.focusedElem,p=t.selectionRange;if(s!==d&&d&&d.ownerDocument&&je(d.ownerDocument.documentElement,d)){if(p!==null&&it(d)){if(s=p.start,t=p.end,t===void 0&&(t=s),"selectionStart"in d)d.selectionStart=s,d.selectionEnd=Math.min(t,d.value.length);else if(t=(s=d.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var C=d.textContent.length,E=Math.min(p.start,C);p=p.end===void 0?E:Math.min(p.end,C),!t.extend&&E>p&&(C=p,p=E,E=C),C=_e(d,E);var P=_e(d,p);C&&P&&(t.rangeCount!==1||t.anchorNode!==C.node||t.anchorOffset!==C.offset||t.focusNode!==P.node||t.focusOffset!==P.offset)&&(s=s.createRange(),s.setStart(C.node,C.offset),t.removeAllRanges(),E>p?(t.addRange(s),t.extend(P.node,P.offset)):(s.setEnd(P.node,P.offset),t.addRange(s)))}}for(s=[],t=d;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<s.length;d++)t=s[d],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ur=I&&"documentMode"in document&&11>=document.documentMode,sn=null,bt=null,Gt=null,Nn=!1;function ni(t,s,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Nn||sn==null||sn!==We(p)||(p=sn,"selectionStart"in p&&it(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Gt&&ge(Gt,p)||(Gt=p,p=Oa(bt,"onSelect"),0<p.length&&(s=new me("onSelect","select",null,s,d),t.push({event:s,listeners:p}),s.target=sn)))}function Pr(t,s){var d={};return d[t.toLowerCase()]=s.toLowerCase(),d["Webkit"+t]="webkit"+s,d["Moz"+t]="moz"+s,d}var Ni={animationend:Pr("Animation","AnimationEnd"),animationiteration:Pr("Animation","AnimationIteration"),animationstart:Pr("Animation","AnimationStart"),transitionend:Pr("Transition","TransitionEnd")},zo={},Hd={};I&&(Hd=document.createElement("div").style,"AnimationEvent"in window||(delete Ni.animationend.animation,delete Ni.animationiteration.animation,delete Ni.animationstart.animation),"TransitionEvent"in window||delete Ni.transitionend.transition);function _a(t){if(zo[t])return zo[t];if(!Ni[t])return t;var s=Ni[t],d;for(d in s)if(s.hasOwnProperty(d)&&d in Hd)return zo[t]=s[d];return t}var Xd=_a("animationend"),Yd=_a("animationiteration"),Zd=_a("animationstart"),qd=_a("transitionend"),Kd=new Map,$d="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ti(t,s){Kd.set(t,s),x(s,[t])}for(var Yl=0;Yl<$d.length;Yl++){var Zl=$d[Yl],Rf=Zl.toLowerCase(),Of=Zl[0].toUpperCase()+Zl.slice(1);Ti(Rf,"on"+Of)}Ti(Xd,"onAnimationEnd"),Ti(Yd,"onAnimationIteration"),Ti(Zd,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti(qd,"onTransitionEnd"),b("onMouseEnter",["mouseout","mouseover"]),b("onMouseLeave",["mouseout","mouseover"]),b("onPointerEnter",["pointerout","pointerover"]),b("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Df=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fo));function Qd(t,s,d){var p=t.type||"unknown-event";t.currentTarget=d,Dn(p,s,void 0,t),t.currentTarget=null}function Jd(t,s){s=(s&4)!==0;for(var d=0;d<t.length;d++){var p=t[d],C=p.event;p=p.listeners;e:{var E=void 0;if(s)for(var P=p.length-1;0<=P;P--){var $=p[P],re=$.instance,ye=$.currentTarget;if($=$.listener,re!==E&&C.isPropagationStopped())break e;Qd(C,$,ye),E=re}else for(P=0;P<p.length;P++){if($=p[P],re=$.instance,ye=$.currentTarget,$=$.listener,re!==E&&C.isPropagationStopped())break e;Qd(C,$,ye),E=re}}}if(In)throw t=Be,In=!1,Be=null,t}function Bt(t,s){var d=s[nc];d===void 0&&(d=s[nc]=new Set);var p=t+"__bubble";d.has(p)||(eu(s,t,2,!1),d.add(p))}function ql(t,s,d){var p=0;s&&(p|=4),eu(d,t,p,s)}var Ra="_reactListening"+Math.random().toString(36).slice(2);function Wo(t){if(!t[Ra]){t[Ra]=!0,g.forEach(function(d){d!=="selectionchange"&&(Df.has(d)||ql(d,!1,t),ql(d,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Ra]||(s[Ra]=!0,ql("selectionchange",!1,s))}}function eu(t,s,d,p){switch(To(s)){case 1:var C=Sa;break;case 4:C=is;break;default:C=Jr}d=C.bind(null,s,d,t),C=void 0,!Co||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(C=!0),p?C!==void 0?t.addEventListener(s,d,{capture:!0,passive:C}):t.addEventListener(s,d,!0):C!==void 0?t.addEventListener(s,d,{passive:C}):t.addEventListener(s,d,!1)}function Kl(t,s,d,p,C){var E=p;if((s&1)===0&&(s&2)===0&&p!==null)e:for(;;){if(p===null)return;var P=p.tag;if(P===3||P===4){var $=p.stateNode.containerInfo;if($===C||$.nodeType===8&&$.parentNode===C)break;if(P===4)for(P=p.return;P!==null;){var re=P.tag;if((re===3||re===4)&&(re=P.stateNode.containerInfo,re===C||re.nodeType===8&&re.parentNode===C))return;P=P.return}for(;$!==null;){if(P=hs($),P===null)return;if(re=P.tag,re===5||re===6){p=E=P;continue e}$=$.parentNode}}p=p.return}es(function(){var ye=E,ke=Ji(d),Ne=[];e:{var Ie=Kd.get(t);if(Ie!==void 0){var ze=me,Ge=t;switch(t){case"keypress":if(yt(d)===0)break e;case"keydown":case"keyup":ze=Do;break;case"focusin":Ge="focus",ze=Dt;break;case"focusout":Ge="blur",ze=Dt;break;case"beforeblur":case"afterblur":ze=Dt;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ze=Aa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ze=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ze=ji;break;case Xd:case Yd:case Zd:ze=ei;break;case qd:ze=Gl;break;case"scroll":ze=gn;break;case"wheel":ze=Hl;break;case"copy":case"cut":case"paste":ze=$e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ze=Po}var Xe=(s&4)!==0,on=!Xe&&t==="scroll",ue=Xe?Ie!==null?Ie+"Capture":null:Ie;Xe=[];for(var se=ye,pe;se!==null;){pe=se;var Re=pe.stateNode;if(pe.tag===5&&Re!==null&&(pe=Re,ue!==null&&(Re=On(se,ue),Re!=null&&Xe.push(Uo(se,Re,pe)))),on)break;se=se.return}0<Xe.length&&(Ie=new ze(Ie,Ge,null,d,ke),Ne.push({event:Ie,listeners:Xe}))}}if((s&7)===0){e:{if(Ie=t==="mouseover"||t==="pointerover",ze=t==="mouseout"||t==="pointerout",Ie&&d!==$r&&(Ge=d.relatedTarget||d.fromElement)&&(hs(Ge)||Ge[ri]))break e;if((ze||Ie)&&(Ie=ke.window===ke?ke:(Ie=ke.ownerDocument)?Ie.defaultView||Ie.parentWindow:window,ze?(Ge=d.relatedTarget||d.toElement,ze=ye,Ge=Ge?hs(Ge):null,Ge!==null&&(on=$n(Ge),Ge!==on||Ge.tag!==5&&Ge.tag!==6)&&(Ge=null)):(ze=null,Ge=ye),ze!==Ge)){if(Xe=Aa,Re="onMouseLeave",ue="onMouseEnter",se="mouse",(t==="pointerout"||t==="pointerover")&&(Xe=Po,Re="onPointerLeave",ue="onPointerEnter",se="pointer"),on=ze==null?Ie:Vs(ze),pe=Ge==null?Ie:Vs(Ge),Ie=new Xe(Re,se+"leave",ze,d,ke),Ie.target=on,Ie.relatedTarget=pe,Re=null,hs(ke)===ye&&(Xe=new Xe(ue,se+"enter",Ge,d,ke),Xe.target=pe,Xe.relatedTarget=on,Re=Xe),on=Re,ze&&Ge)t:{for(Xe=ze,ue=Ge,se=0,pe=Xe;pe;pe=Ws(pe))se++;for(pe=0,Re=ue;Re;Re=Ws(Re))pe++;for(;0<se-pe;)Xe=Ws(Xe),se--;for(;0<pe-se;)ue=Ws(ue),pe--;for(;se--;){if(Xe===ue||ue!==null&&Xe===ue.alternate)break t;Xe=Ws(Xe),ue=Ws(ue)}Xe=null}else Xe=null;ze!==null&&tu(Ne,Ie,ze,Xe,!1),Ge!==null&&on!==null&&tu(Ne,on,Ge,Xe,!0)}}e:{if(Ie=ye?Vs(ye):window,ze=Ie.nodeName&&Ie.nodeName.toLowerCase(),ze==="select"||ze==="input"&&Ie.type==="file")var Ye=o;else if(gt(Ie))if(a)Ye=te;else{Ye=L;var Je=_}else(ze=Ie.nodeName)&&ze.toLowerCase()==="input"&&(Ie.type==="checkbox"||Ie.type==="radio")&&(Ye=H);if(Ye&&(Ye=Ye(t,ye))){us(Ne,Ye,d,ke);break e}Je&&Je(t,Ie,ye),t==="focusout"&&(Je=Ie._wrapperState)&&Je.controlled&&Ie.type==="number"&&ot(Ie,"number",Ie.value)}switch(Je=ye?Vs(ye):window,t){case"focusin":(gt(Je)||Je.contentEditable==="true")&&(sn=Je,bt=ye,Gt=null);break;case"focusout":Gt=bt=sn=null;break;case"mousedown":Nn=!0;break;case"contextmenu":case"mouseup":case"dragend":Nn=!1,ni(Ne,d,ke);break;case"selectionchange":if(ur)break;case"keydown":case"keyup":ni(Ne,d,ke)}var et;if(ki)e:{switch(t){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else kn?Ta(t,d)&&(nt="onCompositionEnd"):t==="keydown"&&d.keyCode===229&&(nt="onCompositionStart");nt&&(dr&&d.locale!=="ko"&&(kn||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&kn&&(et=Ea()):(Dr=ke,_o="value"in Dr?Dr.value:Dr.textContent,kn=!0)),Je=Oa(ye,nt),0<Je.length&&(nt=new jt(nt,t,null,d,ke),Ne.push({event:nt,listeners:Je}),et?nt.data=et:(et=Bo(d),et!==null&&(nt.data=et)))),(et=ka?Xl(t,d):Lo(t,d))&&(ye=Oa(ye,"onBeforeInput"),0<ye.length&&(ke=new jt("onBeforeInput","beforeinput",null,d,ke),Ne.push({event:ke,listeners:ye}),ke.data=et))}Jd(Ne,s)})}function Uo(t,s,d){return{instance:t,listener:s,currentTarget:d}}function Oa(t,s){for(var d=s+"Capture",p=[];t!==null;){var C=t,E=C.stateNode;C.tag===5&&E!==null&&(C=E,E=On(t,d),E!=null&&p.unshift(Uo(t,E,C)),E=On(t,s),E!=null&&p.push(Uo(t,E,C))),t=t.return}return p}function Ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function tu(t,s,d,p,C){for(var E=s._reactName,P=[];d!==null&&d!==p;){var $=d,re=$.alternate,ye=$.stateNode;if(re!==null&&re===p)break;$.tag===5&&ye!==null&&($=ye,C?(re=On(d,E),re!=null&&P.unshift(Uo(d,re,$))):C||(re=On(d,E),re!=null&&P.push(Uo(d,re,$)))),d=d.return}P.length!==0&&t.push({event:s,listeners:P})}var Pf=/\r\n?/g,Mf=/\u0000|\uFFFD/g;function nu(t){return(typeof t=="string"?t:""+t).replace(Pf,`
`).replace(Mf,"")}function Da(t,s,d){if(s=nu(s),nu(t)!==s&&d)throw Error(l(425))}function Pa(){}var $l=null,Ql=null;function Jl(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ec=typeof setTimeout=="function"?setTimeout:void 0,Bf=typeof clearTimeout=="function"?clearTimeout:void 0,ru=typeof Promise=="function"?Promise:void 0,Lf=typeof queueMicrotask=="function"?queueMicrotask:typeof ru<"u"?function(t){return ru.resolve(null).then(t).catch(zf)}:ec;function zf(t){setTimeout(function(){throw t})}function tc(t,s){var d=s,p=0;do{var C=d.nextSibling;if(t.removeChild(d),C&&C.nodeType===8)if(d=C.data,d==="/$"){if(p===0){t.removeChild(C),Or(s);return}p--}else d!=="$"&&d!=="$?"&&d!=="$!"||p++;d=C}while(d);Or(s)}function _i(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function iu(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var d=t.data;if(d==="$"||d==="$!"||d==="$?"){if(s===0)return t;s--}else d==="/$"&&s++}t=t.previousSibling}return null}var Us=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Us,Vo="__reactProps$"+Us,ri="__reactContainer$"+Us,nc="__reactEvents$"+Us,Ff="__reactListeners$"+Us,Wf="__reactHandles$"+Us;function hs(t){var s=t[Yr];if(s)return s;for(var d=t.parentNode;d;){if(s=d[ri]||d[Yr]){if(d=s.alternate,s.child!==null||d!==null&&d.child!==null)for(t=iu(t);t!==null;){if(d=t[Yr])return d;t=iu(t)}return s}t=d,d=t.parentNode}return null}function Go(t){return t=t[Yr]||t[ri],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(l(33))}function Ma(t){return t[Vo]||null}var rc=[],Gs=-1;function Ri(t){return{current:t}}function Lt(t){0>Gs||(t.current=rc[Gs],rc[Gs]=null,Gs--)}function Pt(t,s){Gs++,rc[Gs]=t.current,t.current=s}var Oi={},Bn=Ri(Oi),Qn=Ri(!1),fs=Oi;function Hs(t,s){var d=t.type.contextTypes;if(!d)return Oi;var p=t.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===s)return p.__reactInternalMemoizedMaskedChildContext;var C={},E;for(E in d)C[E]=s[E];return p&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=C),C}function Jn(t){return t=t.childContextTypes,t!=null}function Ba(){Lt(Qn),Lt(Bn)}function su(t,s,d){if(Bn.current!==Oi)throw Error(l(168));Pt(Bn,s),Pt(Qn,d)}function ou(t,s,d){var p=t.stateNode;if(s=s.childContextTypes,typeof p.getChildContext!="function")return d;p=p.getChildContext();for(var C in p)if(!(C in s))throw Error(l(108,Me(t)||"Unknown",C));return K({},d,p)}function La(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Oi,fs=Bn.current,Pt(Bn,t),Pt(Qn,Qn.current),!0}function au(t,s,d){var p=t.stateNode;if(!p)throw Error(l(169));d?(t=ou(t,s,fs),p.__reactInternalMemoizedMergedChildContext=t,Lt(Qn),Lt(Bn),Pt(Bn,t)):Lt(Qn),Pt(Qn,d)}var ii=null,za=!1,ic=!1;function lu(t){ii===null?ii=[t]:ii.push(t)}function Uf(t){za=!0,lu(t)}function Di(){if(!ic&&ii!==null){ic=!0;var t=0,s=ct;try{var d=ii;for(ct=1;t<d.length;t++){var p=d[t];do p=p(!0);while(p!==null)}ii=null,za=!1}catch(C){throw ii!==null&&(ii=ii.slice(t+1)),or(Ee,Di),C}finally{ct=s,ic=!1}}return null}var Xs=[],Ys=0,Fa=null,Wa=0,Cr=[],br=0,ps=null,si=1,oi="";function gs(t,s){Xs[Ys++]=Wa,Xs[Ys++]=Fa,Fa=t,Wa=s}function cu(t,s,d){Cr[br++]=si,Cr[br++]=oi,Cr[br++]=ps,ps=t;var p=si;t=oi;var C=32-Gn(p)-1;p&=~(1<<C),d+=1;var E=32-Gn(s)+C;if(30<E){var P=C-C%5;E=(p&(1<<P)-1).toString(32),p>>=P,C-=P,si=1<<32-Gn(s)+C|d<<C|p,oi=E+t}else si=1<<E|d<<C|p,oi=t}function sc(t){t.return!==null&&(gs(t,1),cu(t,1,0))}function oc(t){for(;t===Fa;)Fa=Xs[--Ys],Xs[Ys]=null,Wa=Xs[--Ys],Xs[Ys]=null;for(;t===ps;)ps=Cr[--br],Cr[br]=null,oi=Cr[--br],Cr[br]=null,si=Cr[--br],Cr[br]=null}var hr=null,fr=null,Ut=!1,Mr=null;function du(t,s){var d=Ir(5,null,null,0);d.elementType="DELETED",d.stateNode=s,d.return=t,s=t.deletions,s===null?(t.deletions=[d],t.flags|=16):s.push(d)}function uu(t,s){switch(t.tag){case 5:var d=t.type;return s=s.nodeType!==1||d.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,hr=t,fr=_i(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,hr=t,fr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(d=ps!==null?{id:si,overflow:oi}:null,t.memoizedState={dehydrated:s,treeContext:d,retryLane:1073741824},d=Ir(18,null,null,0),d.stateNode=s,d.return=t,t.child=d,hr=t,fr=null,!0):!1;default:return!1}}function ac(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lc(t){if(Ut){var s=fr;if(s){var d=s;if(!uu(t,s)){if(ac(t))throw Error(l(418));s=_i(d.nextSibling);var p=hr;s&&uu(t,s)?du(p,d):(t.flags=t.flags&-4097|2,Ut=!1,hr=t)}}else{if(ac(t))throw Error(l(418));t.flags=t.flags&-4097|2,Ut=!1,hr=t}}}function hu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hr=t}function Ua(t){if(t!==hr)return!1;if(!Ut)return hu(t),Ut=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Jl(t.type,t.memoizedProps)),s&&(s=fr)){if(ac(t))throw fu(),Error(l(418));for(;s;)du(t,s),s=_i(s.nextSibling)}if(hu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var d=t.data;if(d==="/$"){if(s===0){fr=_i(t.nextSibling);break e}s--}else d!=="$"&&d!=="$!"&&d!=="$?"||s++}t=t.nextSibling}fr=null}}else fr=hr?_i(t.stateNode.nextSibling):null;return!0}function fu(){for(var t=fr;t;)t=_i(t.nextSibling)}function Zs(){fr=hr=null,Ut=!1}function cc(t){Mr===null?Mr=[t]:Mr.push(t)}var Vf=M.ReactCurrentBatchConfig;function Ho(t,s,d){if(t=d.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(l(309));var p=d.stateNode}if(!p)throw Error(l(147,t));var C=p,E=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===E?s.ref:(s=function(P){var $=C.refs;P===null?delete $[E]:$[E]=P},s._stringRef=E,s)}if(typeof t!="string")throw Error(l(284));if(!d._owner)throw Error(l(290,t))}return t}function Va(t,s){throw t=Object.prototype.toString.call(s),Error(l(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function pu(t){var s=t._init;return s(t._payload)}function gu(t){function s(ue,se){if(t){var pe=ue.deletions;pe===null?(ue.deletions=[se],ue.flags|=16):pe.push(se)}}function d(ue,se){if(!t)return null;for(;se!==null;)s(ue,se),se=se.sibling;return null}function p(ue,se){for(ue=new Map;se!==null;)se.key!==null?ue.set(se.key,se):ue.set(se.index,se),se=se.sibling;return ue}function C(ue,se){return ue=Ui(ue,se),ue.index=0,ue.sibling=null,ue}function E(ue,se,pe){return ue.index=pe,t?(pe=ue.alternate,pe!==null?(pe=pe.index,pe<se?(ue.flags|=2,se):pe):(ue.flags|=2,se)):(ue.flags|=1048576,se)}function P(ue){return t&&ue.alternate===null&&(ue.flags|=2),ue}function $(ue,se,pe,Re){return se===null||se.tag!==6?(se=ed(pe,ue.mode,Re),se.return=ue,se):(se=C(se,pe),se.return=ue,se)}function re(ue,se,pe,Re){var Ye=pe.type;return Ye===z?ke(ue,se,pe.props.children,Re,pe.key):se!==null&&(se.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===J&&pu(Ye)===se.type)?(Re=C(se,pe.props),Re.ref=Ho(ue,se,pe),Re.return=ue,Re):(Re=fl(pe.type,pe.key,pe.props,null,ue.mode,Re),Re.ref=Ho(ue,se,pe),Re.return=ue,Re)}function ye(ue,se,pe,Re){return se===null||se.tag!==4||se.stateNode.containerInfo!==pe.containerInfo||se.stateNode.implementation!==pe.implementation?(se=td(pe,ue.mode,Re),se.return=ue,se):(se=C(se,pe.children||[]),se.return=ue,se)}function ke(ue,se,pe,Re,Ye){return se===null||se.tag!==7?(se=Ss(pe,ue.mode,Re,Ye),se.return=ue,se):(se=C(se,pe),se.return=ue,se)}function Ne(ue,se,pe){if(typeof se=="string"&&se!==""||typeof se=="number")return se=ed(""+se,ue.mode,pe),se.return=ue,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case D:return pe=fl(se.type,se.key,se.props,null,ue.mode,pe),pe.ref=Ho(ue,null,se),pe.return=ue,pe;case Z:return se=td(se,ue.mode,pe),se.return=ue,se;case J:var Re=se._init;return Ne(ue,Re(se._payload),pe)}if(Jt(se)||Se(se))return se=Ss(se,ue.mode,pe,null),se.return=ue,se;Va(ue,se)}return null}function Ie(ue,se,pe,Re){var Ye=se!==null?se.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number")return Ye!==null?null:$(ue,se,""+pe,Re);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case D:return pe.key===Ye?re(ue,se,pe,Re):null;case Z:return pe.key===Ye?ye(ue,se,pe,Re):null;case J:return Ye=pe._init,Ie(ue,se,Ye(pe._payload),Re)}if(Jt(pe)||Se(pe))return Ye!==null?null:ke(ue,se,pe,Re,null);Va(ue,pe)}return null}function ze(ue,se,pe,Re,Ye){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return ue=ue.get(pe)||null,$(se,ue,""+Re,Ye);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case D:return ue=ue.get(Re.key===null?pe:Re.key)||null,re(se,ue,Re,Ye);case Z:return ue=ue.get(Re.key===null?pe:Re.key)||null,ye(se,ue,Re,Ye);case J:var Je=Re._init;return ze(ue,se,pe,Je(Re._payload),Ye)}if(Jt(Re)||Se(Re))return ue=ue.get(pe)||null,ke(se,ue,Re,Ye,null);Va(se,Re)}return null}function Ge(ue,se,pe,Re){for(var Ye=null,Je=null,et=se,nt=se=0,bn=null;et!==null&&nt<pe.length;nt++){et.index>nt?(bn=et,et=null):bn=et.sibling;var wt=Ie(ue,et,pe[nt],Re);if(wt===null){et===null&&(et=bn);break}t&&et&&wt.alternate===null&&s(ue,et),se=E(wt,se,nt),Je===null?Ye=wt:Je.sibling=wt,Je=wt,et=bn}if(nt===pe.length)return d(ue,et),Ut&&gs(ue,nt),Ye;if(et===null){for(;nt<pe.length;nt++)et=Ne(ue,pe[nt],Re),et!==null&&(se=E(et,se,nt),Je===null?Ye=et:Je.sibling=et,Je=et);return Ut&&gs(ue,nt),Ye}for(et=p(ue,et);nt<pe.length;nt++)bn=ze(et,ue,nt,pe[nt],Re),bn!==null&&(t&&bn.alternate!==null&&et.delete(bn.key===null?nt:bn.key),se=E(bn,se,nt),Je===null?Ye=bn:Je.sibling=bn,Je=bn);return t&&et.forEach(function(Vi){return s(ue,Vi)}),Ut&&gs(ue,nt),Ye}function Xe(ue,se,pe,Re){var Ye=Se(pe);if(typeof Ye!="function")throw Error(l(150));if(pe=Ye.call(pe),pe==null)throw Error(l(151));for(var Je=Ye=null,et=se,nt=se=0,bn=null,wt=pe.next();et!==null&&!wt.done;nt++,wt=pe.next()){et.index>nt?(bn=et,et=null):bn=et.sibling;var Vi=Ie(ue,et,wt.value,Re);if(Vi===null){et===null&&(et=bn);break}t&&et&&Vi.alternate===null&&s(ue,et),se=E(Vi,se,nt),Je===null?Ye=Vi:Je.sibling=Vi,Je=Vi,et=bn}if(wt.done)return d(ue,et),Ut&&gs(ue,nt),Ye;if(et===null){for(;!wt.done;nt++,wt=pe.next())wt=Ne(ue,wt.value,Re),wt!==null&&(se=E(wt,se,nt),Je===null?Ye=wt:Je.sibling=wt,Je=wt);return Ut&&gs(ue,nt),Ye}for(et=p(ue,et);!wt.done;nt++,wt=pe.next())wt=ze(et,ue,nt,wt.value,Re),wt!==null&&(t&&wt.alternate!==null&&et.delete(wt.key===null?nt:wt.key),se=E(wt,se,nt),Je===null?Ye=wt:Je.sibling=wt,Je=wt);return t&&et.forEach(function(b1){return s(ue,b1)}),Ut&&gs(ue,nt),Ye}function on(ue,se,pe,Re){if(typeof pe=="object"&&pe!==null&&pe.type===z&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case D:e:{for(var Ye=pe.key,Je=se;Je!==null;){if(Je.key===Ye){if(Ye=pe.type,Ye===z){if(Je.tag===7){d(ue,Je.sibling),se=C(Je,pe.props.children),se.return=ue,ue=se;break e}}else if(Je.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===J&&pu(Ye)===Je.type){d(ue,Je.sibling),se=C(Je,pe.props),se.ref=Ho(ue,Je,pe),se.return=ue,ue=se;break e}d(ue,Je);break}else s(ue,Je);Je=Je.sibling}pe.type===z?(se=Ss(pe.props.children,ue.mode,Re,pe.key),se.return=ue,ue=se):(Re=fl(pe.type,pe.key,pe.props,null,ue.mode,Re),Re.ref=Ho(ue,se,pe),Re.return=ue,ue=Re)}return P(ue);case Z:e:{for(Je=pe.key;se!==null;){if(se.key===Je)if(se.tag===4&&se.stateNode.containerInfo===pe.containerInfo&&se.stateNode.implementation===pe.implementation){d(ue,se.sibling),se=C(se,pe.children||[]),se.return=ue,ue=se;break e}else{d(ue,se);break}else s(ue,se);se=se.sibling}se=td(pe,ue.mode,Re),se.return=ue,ue=se}return P(ue);case J:return Je=pe._init,on(ue,se,Je(pe._payload),Re)}if(Jt(pe))return Ge(ue,se,pe,Re);if(Se(pe))return Xe(ue,se,pe,Re);Va(ue,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"?(pe=""+pe,se!==null&&se.tag===6?(d(ue,se.sibling),se=C(se,pe),se.return=ue,ue=se):(d(ue,se),se=ed(pe,ue.mode,Re),se.return=ue,ue=se),P(ue)):d(ue,se)}return on}var qs=gu(!0),mu=gu(!1),Ga=Ri(null),Ha=null,Ks=null,dc=null;function uc(){dc=Ks=Ha=null}function hc(t){var s=Ga.current;Lt(Ga),t._currentValue=s}function fc(t,s,d){for(;t!==null;){var p=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,p!==null&&(p.childLanes|=s)):p!==null&&(p.childLanes&s)!==s&&(p.childLanes|=s),t===d)break;t=t.return}}function $s(t,s){Ha=t,dc=Ks=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(er=!0),t.firstContext=null)}function Sr(t){var s=t._currentValue;if(dc!==t)if(t={context:t,memoizedValue:s,next:null},Ks===null){if(Ha===null)throw Error(l(308));Ks=t,Ha.dependencies={lanes:0,firstContext:t}}else Ks=Ks.next=t;return s}var ms=null;function pc(t){ms===null?ms=[t]:ms.push(t)}function xu(t,s,d,p){var C=s.interleaved;return C===null?(d.next=d,pc(s)):(d.next=C.next,C.next=d),s.interleaved=d,ai(t,p)}function ai(t,s){t.lanes|=s;var d=t.alternate;for(d!==null&&(d.lanes|=s),d=t,t=t.return;t!==null;)t.childLanes|=s,d=t.alternate,d!==null&&(d.childLanes|=s),d=t,t=t.return;return d.tag===3?d.stateNode:null}var Pi=!1;function gc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yu(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function li(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Mi(t,s,d){var p=t.updateQueue;if(p===null)return null;if(p=p.shared,(vt&2)!==0){var C=p.pending;return C===null?s.next=s:(s.next=C.next,C.next=s),p.pending=s,ai(t,d)}return C=p.interleaved,C===null?(s.next=s,pc(p)):(s.next=C.next,C.next=s),p.interleaved=s,ai(t,d)}function Xa(t,s,d){if(s=s.updateQueue,s!==null&&(s=s.shared,(d&4194240)!==0)){var p=s.lanes;p&=t.pendingLanes,d|=p,s.lanes=d,Yt(t,d)}}function vu(t,s){var d=t.updateQueue,p=t.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var C=null,E=null;if(d=d.firstBaseUpdate,d!==null){do{var P={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};E===null?C=E=P:E=E.next=P,d=d.next}while(d!==null);E===null?C=E=s:E=E.next=s}else C=E=s;d={baseState:p.baseState,firstBaseUpdate:C,lastBaseUpdate:E,shared:p.shared,effects:p.effects},t.updateQueue=d;return}t=d.lastBaseUpdate,t===null?d.firstBaseUpdate=s:t.next=s,d.lastBaseUpdate=s}function Ya(t,s,d,p){var C=t.updateQueue;Pi=!1;var E=C.firstBaseUpdate,P=C.lastBaseUpdate,$=C.shared.pending;if($!==null){C.shared.pending=null;var re=$,ye=re.next;re.next=null,P===null?E=ye:P.next=ye,P=re;var ke=t.alternate;ke!==null&&(ke=ke.updateQueue,$=ke.lastBaseUpdate,$!==P&&($===null?ke.firstBaseUpdate=ye:$.next=ye,ke.lastBaseUpdate=re))}if(E!==null){var Ne=C.baseState;P=0,ke=ye=re=null,$=E;do{var Ie=$.lane,ze=$.eventTime;if((p&Ie)===Ie){ke!==null&&(ke=ke.next={eventTime:ze,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var Ge=t,Xe=$;switch(Ie=s,ze=d,Xe.tag){case 1:if(Ge=Xe.payload,typeof Ge=="function"){Ne=Ge.call(ze,Ne,Ie);break e}Ne=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=Xe.payload,Ie=typeof Ge=="function"?Ge.call(ze,Ne,Ie):Ge,Ie==null)break e;Ne=K({},Ne,Ie);break e;case 2:Pi=!0}}$.callback!==null&&$.lane!==0&&(t.flags|=64,Ie=C.effects,Ie===null?C.effects=[$]:Ie.push($))}else ze={eventTime:ze,lane:Ie,tag:$.tag,payload:$.payload,callback:$.callback,next:null},ke===null?(ye=ke=ze,re=Ne):ke=ke.next=ze,P|=Ie;if($=$.next,$===null){if($=C.shared.pending,$===null)break;Ie=$,$=Ie.next,Ie.next=null,C.lastBaseUpdate=Ie,C.shared.pending=null}}while(!0);if(ke===null&&(re=Ne),C.baseState=re,C.firstBaseUpdate=ye,C.lastBaseUpdate=ke,s=C.shared.interleaved,s!==null){C=s;do P|=C.lane,C=C.next;while(C!==s)}else E===null&&(C.shared.lanes=0);vs|=P,t.lanes=P,t.memoizedState=Ne}}function wu(t,s,d){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var p=t[s],C=p.callback;if(C!==null){if(p.callback=null,p=d,typeof C!="function")throw Error(l(191,C));C.call(p)}}}var Xo={},Zr=Ri(Xo),Yo=Ri(Xo),Zo=Ri(Xo);function xs(t){if(t===Xo)throw Error(l(174));return t}function mc(t,s){switch(Pt(Zo,s),Pt(Yo,t),Pt(Zr,Xo),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:yi(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=yi(s,t)}Lt(Zr),Pt(Zr,s)}function Qs(){Lt(Zr),Lt(Yo),Lt(Zo)}function Cu(t){xs(Zo.current);var s=xs(Zr.current),d=yi(s,t.type);s!==d&&(Pt(Yo,t),Pt(Zr,d))}function xc(t){Yo.current===t&&(Lt(Zr),Lt(Yo))}var Ht=Ri(0);function Za(t){for(var s=t;s!==null;){if(s.tag===13){var d=s.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var yc=[];function vc(){for(var t=0;t<yc.length;t++)yc[t]._workInProgressVersionPrimary=null;yc.length=0}var qa=M.ReactCurrentDispatcher,wc=M.ReactCurrentBatchConfig,ys=0,Xt=null,mn=null,wn=null,Ka=!1,qo=!1,Ko=0,Gf=0;function Ln(){throw Error(l(321))}function Cc(t,s){if(s===null)return!1;for(var d=0;d<s.length&&d<t.length;d++)if(!ae(t[d],s[d]))return!1;return!0}function bc(t,s,d,p,C,E){if(ys=E,Xt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,qa.current=t===null||t.memoizedState===null?Zf:qf,t=d(p,C),qo){E=0;do{if(qo=!1,Ko=0,25<=E)throw Error(l(301));E+=1,wn=mn=null,s.updateQueue=null,qa.current=Kf,t=d(p,C)}while(qo)}if(qa.current=Ja,s=mn!==null&&mn.next!==null,ys=0,wn=mn=Xt=null,Ka=!1,s)throw Error(l(300));return t}function Sc(){var t=Ko!==0;return Ko=0,t}function qr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?Xt.memoizedState=wn=t:wn=wn.next=t,wn}function Er(){if(mn===null){var t=Xt.alternate;t=t!==null?t.memoizedState:null}else t=mn.next;var s=wn===null?Xt.memoizedState:wn.next;if(s!==null)wn=s,mn=t;else{if(t===null)throw Error(l(310));mn=t,t={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},wn===null?Xt.memoizedState=wn=t:wn=wn.next=t}return wn}function $o(t,s){return typeof s=="function"?s(t):s}function Ec(t){var s=Er(),d=s.queue;if(d===null)throw Error(l(311));d.lastRenderedReducer=t;var p=mn,C=p.baseQueue,E=d.pending;if(E!==null){if(C!==null){var P=C.next;C.next=E.next,E.next=P}p.baseQueue=C=E,d.pending=null}if(C!==null){E=C.next,p=p.baseState;var $=P=null,re=null,ye=E;do{var ke=ye.lane;if((ys&ke)===ke)re!==null&&(re=re.next={lane:0,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),p=ye.hasEagerState?ye.eagerState:t(p,ye.action);else{var Ne={lane:ke,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null};re===null?($=re=Ne,P=p):re=re.next=Ne,Xt.lanes|=ke,vs|=ke}ye=ye.next}while(ye!==null&&ye!==E);re===null?P=p:re.next=$,ae(p,s.memoizedState)||(er=!0),s.memoizedState=p,s.baseState=P,s.baseQueue=re,d.lastRenderedState=p}if(t=d.interleaved,t!==null){C=t;do E=C.lane,Xt.lanes|=E,vs|=E,C=C.next;while(C!==t)}else C===null&&(d.lanes=0);return[s.memoizedState,d.dispatch]}function Ac(t){var s=Er(),d=s.queue;if(d===null)throw Error(l(311));d.lastRenderedReducer=t;var p=d.dispatch,C=d.pending,E=s.memoizedState;if(C!==null){d.pending=null;var P=C=C.next;do E=t(E,P.action),P=P.next;while(P!==C);ae(E,s.memoizedState)||(er=!0),s.memoizedState=E,s.baseQueue===null&&(s.baseState=E),d.lastRenderedState=E}return[E,p]}function bu(){}function Su(t,s){var d=Xt,p=Er(),C=s(),E=!ae(p.memoizedState,C);if(E&&(p.memoizedState=C,er=!0),p=p.queue,Ic(Iu.bind(null,d,p,t),[t]),p.getSnapshot!==s||E||wn!==null&&wn.memoizedState.tag&1){if(d.flags|=2048,Qo(9,Au.bind(null,d,p,C,s),void 0,null),Cn===null)throw Error(l(349));(ys&30)!==0||Eu(d,s,C)}return C}function Eu(t,s,d){t.flags|=16384,t={getSnapshot:s,value:d},s=Xt.updateQueue,s===null?(s={lastEffect:null,stores:null},Xt.updateQueue=s,s.stores=[t]):(d=s.stores,d===null?s.stores=[t]:d.push(t))}function Au(t,s,d,p){s.value=d,s.getSnapshot=p,ju(s)&&ku(t)}function Iu(t,s,d){return d(function(){ju(s)&&ku(t)})}function ju(t){var s=t.getSnapshot;t=t.value;try{var d=s();return!ae(t,d)}catch{return!0}}function ku(t){var s=ai(t,1);s!==null&&Fr(s,t,1,-1)}function Nu(t){var s=qr();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:t},s.queue=t,t=t.dispatch=Yf.bind(null,Xt,t),[s.memoizedState,t]}function Qo(t,s,d,p){return t={tag:t,create:s,destroy:d,deps:p,next:null},s=Xt.updateQueue,s===null?(s={lastEffect:null,stores:null},Xt.updateQueue=s,s.lastEffect=t.next=t):(d=s.lastEffect,d===null?s.lastEffect=t.next=t:(p=d.next,d.next=t,t.next=p,s.lastEffect=t)),t}function Tu(){return Er().memoizedState}function $a(t,s,d,p){var C=qr();Xt.flags|=t,C.memoizedState=Qo(1|s,d,void 0,p===void 0?null:p)}function Qa(t,s,d,p){var C=Er();p=p===void 0?null:p;var E=void 0;if(mn!==null){var P=mn.memoizedState;if(E=P.destroy,p!==null&&Cc(p,P.deps)){C.memoizedState=Qo(s,d,E,p);return}}Xt.flags|=t,C.memoizedState=Qo(1|s,d,E,p)}function _u(t,s){return $a(8390656,8,t,s)}function Ic(t,s){return Qa(2048,8,t,s)}function Ru(t,s){return Qa(4,2,t,s)}function Ou(t,s){return Qa(4,4,t,s)}function Du(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Pu(t,s,d){return d=d!=null?d.concat([t]):null,Qa(4,4,Du.bind(null,s,t),d)}function jc(){}function Mu(t,s){var d=Er();s=s===void 0?null:s;var p=d.memoizedState;return p!==null&&s!==null&&Cc(s,p[1])?p[0]:(d.memoizedState=[t,s],t)}function Bu(t,s){var d=Er();s=s===void 0?null:s;var p=d.memoizedState;return p!==null&&s!==null&&Cc(s,p[1])?p[0]:(t=t(),d.memoizedState=[t,s],t)}function Lu(t,s,d){return(ys&21)===0?(t.baseState&&(t.baseState=!1,er=!0),t.memoizedState=d):(ae(d,s)||(d=hn(),Xt.lanes|=d,vs|=d,t.baseState=!0),s)}function Hf(t,s){var d=ct;ct=d!==0&&4>d?d:4,t(!0);var p=wc.transition;wc.transition={};try{t(!1),s()}finally{ct=d,wc.transition=p}}function zu(){return Er().memoizedState}function Xf(t,s,d){var p=Fi(t);if(d={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null},Fu(t))Wu(s,d);else if(d=xu(t,s,d,p),d!==null){var C=Xn();Fr(d,t,p,C),Uu(d,s,p)}}function Yf(t,s,d){var p=Fi(t),C={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null};if(Fu(t))Wu(s,C);else{var E=t.alternate;if(t.lanes===0&&(E===null||E.lanes===0)&&(E=s.lastRenderedReducer,E!==null))try{var P=s.lastRenderedState,$=E(P,d);if(C.hasEagerState=!0,C.eagerState=$,ae($,P)){var re=s.interleaved;re===null?(C.next=C,pc(s)):(C.next=re.next,re.next=C),s.interleaved=C;return}}catch{}d=xu(t,s,C,p),d!==null&&(C=Xn(),Fr(d,t,p,C),Uu(d,s,p))}}function Fu(t){var s=t.alternate;return t===Xt||s!==null&&s===Xt}function Wu(t,s){qo=Ka=!0;var d=t.pending;d===null?s.next=s:(s.next=d.next,d.next=s),t.pending=s}function Uu(t,s,d){if((d&4194240)!==0){var p=s.lanes;p&=t.pendingLanes,d|=p,s.lanes=d,Yt(t,d)}}var Ja={readContext:Sr,useCallback:Ln,useContext:Ln,useEffect:Ln,useImperativeHandle:Ln,useInsertionEffect:Ln,useLayoutEffect:Ln,useMemo:Ln,useReducer:Ln,useRef:Ln,useState:Ln,useDebugValue:Ln,useDeferredValue:Ln,useTransition:Ln,useMutableSource:Ln,useSyncExternalStore:Ln,useId:Ln,unstable_isNewReconciler:!1},Zf={readContext:Sr,useCallback:function(t,s){return qr().memoizedState=[t,s===void 0?null:s],t},useContext:Sr,useEffect:_u,useImperativeHandle:function(t,s,d){return d=d!=null?d.concat([t]):null,$a(4194308,4,Du.bind(null,s,t),d)},useLayoutEffect:function(t,s){return $a(4194308,4,t,s)},useInsertionEffect:function(t,s){return $a(4,2,t,s)},useMemo:function(t,s){var d=qr();return s=s===void 0?null:s,t=t(),d.memoizedState=[t,s],t},useReducer:function(t,s,d){var p=qr();return s=d!==void 0?d(s):s,p.memoizedState=p.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},p.queue=t,t=t.dispatch=Xf.bind(null,Xt,t),[p.memoizedState,t]},useRef:function(t){var s=qr();return t={current:t},s.memoizedState=t},useState:Nu,useDebugValue:jc,useDeferredValue:function(t){return qr().memoizedState=t},useTransition:function(){var t=Nu(!1),s=t[0];return t=Hf.bind(null,t[1]),qr().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,d){var p=Xt,C=qr();if(Ut){if(d===void 0)throw Error(l(407));d=d()}else{if(d=s(),Cn===null)throw Error(l(349));(ys&30)!==0||Eu(p,s,d)}C.memoizedState=d;var E={value:d,getSnapshot:s};return C.queue=E,_u(Iu.bind(null,p,E,t),[t]),p.flags|=2048,Qo(9,Au.bind(null,p,E,d,s),void 0,null),d},useId:function(){var t=qr(),s=Cn.identifierPrefix;if(Ut){var d=oi,p=si;d=(p&~(1<<32-Gn(p)-1)).toString(32)+d,s=":"+s+"R"+d,d=Ko++,0<d&&(s+="H"+d.toString(32)),s+=":"}else d=Gf++,s=":"+s+"r"+d.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},qf={readContext:Sr,useCallback:Mu,useContext:Sr,useEffect:Ic,useImperativeHandle:Pu,useInsertionEffect:Ru,useLayoutEffect:Ou,useMemo:Bu,useReducer:Ec,useRef:Tu,useState:function(){return Ec($o)},useDebugValue:jc,useDeferredValue:function(t){var s=Er();return Lu(s,mn.memoizedState,t)},useTransition:function(){var t=Ec($o)[0],s=Er().memoizedState;return[t,s]},useMutableSource:bu,useSyncExternalStore:Su,useId:zu,unstable_isNewReconciler:!1},Kf={readContext:Sr,useCallback:Mu,useContext:Sr,useEffect:Ic,useImperativeHandle:Pu,useInsertionEffect:Ru,useLayoutEffect:Ou,useMemo:Bu,useReducer:Ac,useRef:Tu,useState:function(){return Ac($o)},useDebugValue:jc,useDeferredValue:function(t){var s=Er();return mn===null?s.memoizedState=t:Lu(s,mn.memoizedState,t)},useTransition:function(){var t=Ac($o)[0],s=Er().memoizedState;return[t,s]},useMutableSource:bu,useSyncExternalStore:Su,useId:zu,unstable_isNewReconciler:!1};function Br(t,s){if(t&&t.defaultProps){s=K({},s),t=t.defaultProps;for(var d in t)s[d]===void 0&&(s[d]=t[d]);return s}return s}function kc(t,s,d,p){s=t.memoizedState,d=d(p,s),d=d==null?s:K({},s,d),t.memoizedState=d,t.lanes===0&&(t.updateQueue.baseState=d)}var el={isMounted:function(t){return(t=t._reactInternals)?$n(t)===t:!1},enqueueSetState:function(t,s,d){t=t._reactInternals;var p=Xn(),C=Fi(t),E=li(p,C);E.payload=s,d!=null&&(E.callback=d),s=Mi(t,E,C),s!==null&&(Fr(s,t,C,p),Xa(s,t,C))},enqueueReplaceState:function(t,s,d){t=t._reactInternals;var p=Xn(),C=Fi(t),E=li(p,C);E.tag=1,E.payload=s,d!=null&&(E.callback=d),s=Mi(t,E,C),s!==null&&(Fr(s,t,C,p),Xa(s,t,C))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var d=Xn(),p=Fi(t),C=li(d,p);C.tag=2,s!=null&&(C.callback=s),s=Mi(t,C,p),s!==null&&(Fr(s,t,p,d),Xa(s,t,p))}};function Vu(t,s,d,p,C,E,P){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(p,E,P):s.prototype&&s.prototype.isPureReactComponent?!ge(d,p)||!ge(C,E):!0}function Gu(t,s,d){var p=!1,C=Oi,E=s.contextType;return typeof E=="object"&&E!==null?E=Sr(E):(C=Jn(s)?fs:Bn.current,p=s.contextTypes,E=(p=p!=null)?Hs(t,C):Oi),s=new s(d,E),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=el,t.stateNode=s,s._reactInternals=t,p&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=C,t.__reactInternalMemoizedMaskedChildContext=E),s}function Hu(t,s,d,p){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(d,p),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(d,p),s.state!==t&&el.enqueueReplaceState(s,s.state,null)}function Nc(t,s,d,p){var C=t.stateNode;C.props=d,C.state=t.memoizedState,C.refs={},gc(t);var E=s.contextType;typeof E=="object"&&E!==null?C.context=Sr(E):(E=Jn(s)?fs:Bn.current,C.context=Hs(t,E)),C.state=t.memoizedState,E=s.getDerivedStateFromProps,typeof E=="function"&&(kc(t,s,E,d),C.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(s=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),s!==C.state&&el.enqueueReplaceState(C,C.state,null),Ya(t,d,C,p),C.state=t.memoizedState),typeof C.componentDidMount=="function"&&(t.flags|=4194308)}function Js(t,s){try{var d="",p=s;do d+=Oe(p),p=p.return;while(p);var C=d}catch(E){C=`
Error generating stack: `+E.message+`
`+E.stack}return{value:t,source:s,stack:C,digest:null}}function Tc(t,s,d){return{value:t,source:null,stack:d??null,digest:s??null}}function _c(t,s){try{console.error(s.value)}catch(d){setTimeout(function(){throw d})}}var $f=typeof WeakMap=="function"?WeakMap:Map;function Xu(t,s,d){d=li(-1,d),d.tag=3,d.payload={element:null};var p=s.value;return d.callback=function(){al||(al=!0,Xc=p),_c(t,s)},d}function Yu(t,s,d){d=li(-1,d),d.tag=3;var p=t.type.getDerivedStateFromError;if(typeof p=="function"){var C=s.value;d.payload=function(){return p(C)},d.callback=function(){_c(t,s)}}var E=t.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(d.callback=function(){_c(t,s),typeof p!="function"&&(Li===null?Li=new Set([this]):Li.add(this));var P=s.stack;this.componentDidCatch(s.value,{componentStack:P!==null?P:""})}),d}function Zu(t,s,d){var p=t.pingCache;if(p===null){p=t.pingCache=new $f;var C=new Set;p.set(s,C)}else C=p.get(s),C===void 0&&(C=new Set,p.set(s,C));C.has(d)||(C.add(d),t=u1.bind(null,t,s,d),s.then(t,t))}function qu(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Ku(t,s,d,p,C){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(s=li(-1,1),s.tag=2,Mi(d,s,1))),d.lanes|=1),t):(t.flags|=65536,t.lanes=C,t)}var Qf=M.ReactCurrentOwner,er=!1;function Hn(t,s,d,p){s.child=t===null?mu(s,null,d,p):qs(s,t.child,d,p)}function $u(t,s,d,p,C){d=d.render;var E=s.ref;return $s(s,C),p=bc(t,s,d,p,E,C),d=Sc(),t!==null&&!er?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~C,ci(t,s,C)):(Ut&&d&&sc(s),s.flags|=1,Hn(t,s,p,C),s.child)}function Qu(t,s,d,p,C){if(t===null){var E=d.type;return typeof E=="function"&&!Jc(E)&&E.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(s.tag=15,s.type=E,Ju(t,s,E,p,C)):(t=fl(d.type,null,p,s,s.mode,C),t.ref=s.ref,t.return=s,s.child=t)}if(E=t.child,(t.lanes&C)===0){var P=E.memoizedProps;if(d=d.compare,d=d!==null?d:ge,d(P,p)&&t.ref===s.ref)return ci(t,s,C)}return s.flags|=1,t=Ui(E,p),t.ref=s.ref,t.return=s,s.child=t}function Ju(t,s,d,p,C){if(t!==null){var E=t.memoizedProps;if(ge(E,p)&&t.ref===s.ref)if(er=!1,s.pendingProps=p=E,(t.lanes&C)!==0)(t.flags&131072)!==0&&(er=!0);else return s.lanes=t.lanes,ci(t,s,C)}return Rc(t,s,d,p,C)}function eh(t,s,d){var p=s.pendingProps,C=p.children,E=t!==null?t.memoizedState:null;if(p.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(to,pr),pr|=d;else{if((d&1073741824)===0)return t=E!==null?E.baseLanes|d:d,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Pt(to,pr),pr|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=E!==null?E.baseLanes:d,Pt(to,pr),pr|=p}else E!==null?(p=E.baseLanes|d,s.memoizedState=null):p=d,Pt(to,pr),pr|=p;return Hn(t,s,C,d),s.child}function th(t,s){var d=s.ref;(t===null&&d!==null||t!==null&&t.ref!==d)&&(s.flags|=512,s.flags|=2097152)}function Rc(t,s,d,p,C){var E=Jn(d)?fs:Bn.current;return E=Hs(s,E),$s(s,C),d=bc(t,s,d,p,E,C),p=Sc(),t!==null&&!er?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~C,ci(t,s,C)):(Ut&&p&&sc(s),s.flags|=1,Hn(t,s,d,C),s.child)}function nh(t,s,d,p,C){if(Jn(d)){var E=!0;La(s)}else E=!1;if($s(s,C),s.stateNode===null)nl(t,s),Gu(s,d,p),Nc(s,d,p,C),p=!0;else if(t===null){var P=s.stateNode,$=s.memoizedProps;P.props=$;var re=P.context,ye=d.contextType;typeof ye=="object"&&ye!==null?ye=Sr(ye):(ye=Jn(d)?fs:Bn.current,ye=Hs(s,ye));var ke=d.getDerivedStateFromProps,Ne=typeof ke=="function"||typeof P.getSnapshotBeforeUpdate=="function";Ne||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||($!==p||re!==ye)&&Hu(s,P,p,ye),Pi=!1;var Ie=s.memoizedState;P.state=Ie,Ya(s,p,P,C),re=s.memoizedState,$!==p||Ie!==re||Qn.current||Pi?(typeof ke=="function"&&(kc(s,d,ke,p),re=s.memoizedState),($=Pi||Vu(s,d,$,p,Ie,re,ye))?(Ne||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(s.flags|=4194308)):(typeof P.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=p,s.memoizedState=re),P.props=p,P.state=re,P.context=ye,p=$):(typeof P.componentDidMount=="function"&&(s.flags|=4194308),p=!1)}else{P=s.stateNode,yu(t,s),$=s.memoizedProps,ye=s.type===s.elementType?$:Br(s.type,$),P.props=ye,Ne=s.pendingProps,Ie=P.context,re=d.contextType,typeof re=="object"&&re!==null?re=Sr(re):(re=Jn(d)?fs:Bn.current,re=Hs(s,re));var ze=d.getDerivedStateFromProps;(ke=typeof ze=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||($!==Ne||Ie!==re)&&Hu(s,P,p,re),Pi=!1,Ie=s.memoizedState,P.state=Ie,Ya(s,p,P,C);var Ge=s.memoizedState;$!==Ne||Ie!==Ge||Qn.current||Pi?(typeof ze=="function"&&(kc(s,d,ze,p),Ge=s.memoizedState),(ye=Pi||Vu(s,d,ye,p,Ie,Ge,re)||!1)?(ke||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(p,Ge,re),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(p,Ge,re)),typeof P.componentDidUpdate=="function"&&(s.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof P.componentDidUpdate!="function"||$===t.memoizedProps&&Ie===t.memoizedState||(s.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||$===t.memoizedProps&&Ie===t.memoizedState||(s.flags|=1024),s.memoizedProps=p,s.memoizedState=Ge),P.props=p,P.state=Ge,P.context=re,p=ye):(typeof P.componentDidUpdate!="function"||$===t.memoizedProps&&Ie===t.memoizedState||(s.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||$===t.memoizedProps&&Ie===t.memoizedState||(s.flags|=1024),p=!1)}return Oc(t,s,d,p,E,C)}function Oc(t,s,d,p,C,E){th(t,s);var P=(s.flags&128)!==0;if(!p&&!P)return C&&au(s,d,!1),ci(t,s,E);p=s.stateNode,Qf.current=s;var $=P&&typeof d.getDerivedStateFromError!="function"?null:p.render();return s.flags|=1,t!==null&&P?(s.child=qs(s,t.child,null,E),s.child=qs(s,null,$,E)):Hn(t,s,$,E),s.memoizedState=p.state,C&&au(s,d,!0),s.child}function rh(t){var s=t.stateNode;s.pendingContext?su(t,s.pendingContext,s.pendingContext!==s.context):s.context&&su(t,s.context,!1),mc(t,s.containerInfo)}function ih(t,s,d,p,C){return Zs(),cc(C),s.flags|=256,Hn(t,s,d,p),s.child}var Dc={dehydrated:null,treeContext:null,retryLane:0};function Pc(t){return{baseLanes:t,cachePool:null,transitions:null}}function sh(t,s,d){var p=s.pendingProps,C=Ht.current,E=!1,P=(s.flags&128)!==0,$;if(($=P)||($=t!==null&&t.memoizedState===null?!1:(C&2)!==0),$?(E=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(C|=1),Pt(Ht,C&1),t===null)return lc(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(P=p.children,t=p.fallback,E?(p=s.mode,E=s.child,P={mode:"hidden",children:P},(p&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=P):E=pl(P,p,0,null),t=Ss(t,p,d,null),E.return=s,t.return=s,E.sibling=t,s.child=E,s.child.memoizedState=Pc(d),s.memoizedState=Dc,t):Mc(s,P));if(C=t.memoizedState,C!==null&&($=C.dehydrated,$!==null))return Jf(t,s,P,p,$,C,d);if(E){E=p.fallback,P=s.mode,C=t.child,$=C.sibling;var re={mode:"hidden",children:p.children};return(P&1)===0&&s.child!==C?(p=s.child,p.childLanes=0,p.pendingProps=re,s.deletions=null):(p=Ui(C,re),p.subtreeFlags=C.subtreeFlags&14680064),$!==null?E=Ui($,E):(E=Ss(E,P,d,null),E.flags|=2),E.return=s,p.return=s,p.sibling=E,s.child=p,p=E,E=s.child,P=t.child.memoizedState,P=P===null?Pc(d):{baseLanes:P.baseLanes|d,cachePool:null,transitions:P.transitions},E.memoizedState=P,E.childLanes=t.childLanes&~d,s.memoizedState=Dc,p}return E=t.child,t=E.sibling,p=Ui(E,{mode:"visible",children:p.children}),(s.mode&1)===0&&(p.lanes=d),p.return=s,p.sibling=null,t!==null&&(d=s.deletions,d===null?(s.deletions=[t],s.flags|=16):d.push(t)),s.child=p,s.memoizedState=null,p}function Mc(t,s){return s=pl({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function tl(t,s,d,p){return p!==null&&cc(p),qs(s,t.child,null,d),t=Mc(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Jf(t,s,d,p,C,E,P){if(d)return s.flags&256?(s.flags&=-257,p=Tc(Error(l(422))),tl(t,s,P,p)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(E=p.fallback,C=s.mode,p=pl({mode:"visible",children:p.children},C,0,null),E=Ss(E,C,P,null),E.flags|=2,p.return=s,E.return=s,p.sibling=E,s.child=p,(s.mode&1)!==0&&qs(s,t.child,null,P),s.child.memoizedState=Pc(P),s.memoizedState=Dc,E);if((s.mode&1)===0)return tl(t,s,P,null);if(C.data==="$!"){if(p=C.nextSibling&&C.nextSibling.dataset,p)var $=p.dgst;return p=$,E=Error(l(419)),p=Tc(E,p,void 0),tl(t,s,P,p)}if($=(P&t.childLanes)!==0,er||$){if(p=Cn,p!==null){switch(P&-P){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(p.suspendedLanes|P))!==0?0:C,C!==0&&C!==E.retryLane&&(E.retryLane=C,ai(t,C),Fr(p,t,C,-1))}return Qc(),p=Tc(Error(l(421))),tl(t,s,P,p)}return C.data==="$?"?(s.flags|=128,s.child=t.child,s=h1.bind(null,t),C._reactRetry=s,null):(t=E.treeContext,fr=_i(C.nextSibling),hr=s,Ut=!0,Mr=null,t!==null&&(Cr[br++]=si,Cr[br++]=oi,Cr[br++]=ps,si=t.id,oi=t.overflow,ps=s),s=Mc(s,p.children),s.flags|=4096,s)}function oh(t,s,d){t.lanes|=s;var p=t.alternate;p!==null&&(p.lanes|=s),fc(t.return,s,d)}function Bc(t,s,d,p,C){var E=t.memoizedState;E===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:C}:(E.isBackwards=s,E.rendering=null,E.renderingStartTime=0,E.last=p,E.tail=d,E.tailMode=C)}function ah(t,s,d){var p=s.pendingProps,C=p.revealOrder,E=p.tail;if(Hn(t,s,p.children,d),p=Ht.current,(p&2)!==0)p=p&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&oh(t,d,s);else if(t.tag===19)oh(t,d,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}p&=1}if(Pt(Ht,p),(s.mode&1)===0)s.memoizedState=null;else switch(C){case"forwards":for(d=s.child,C=null;d!==null;)t=d.alternate,t!==null&&Za(t)===null&&(C=d),d=d.sibling;d=C,d===null?(C=s.child,s.child=null):(C=d.sibling,d.sibling=null),Bc(s,!1,C,d,E);break;case"backwards":for(d=null,C=s.child,s.child=null;C!==null;){if(t=C.alternate,t!==null&&Za(t)===null){s.child=C;break}t=C.sibling,C.sibling=d,d=C,C=t}Bc(s,!0,d,null,E);break;case"together":Bc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function nl(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function ci(t,s,d){if(t!==null&&(s.dependencies=t.dependencies),vs|=s.lanes,(d&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(l(153));if(s.child!==null){for(t=s.child,d=Ui(t,t.pendingProps),s.child=d,d.return=s;t.sibling!==null;)t=t.sibling,d=d.sibling=Ui(t,t.pendingProps),d.return=s;d.sibling=null}return s.child}function e1(t,s,d){switch(s.tag){case 3:rh(s),Zs();break;case 5:Cu(s);break;case 1:Jn(s.type)&&La(s);break;case 4:mc(s,s.stateNode.containerInfo);break;case 10:var p=s.type._context,C=s.memoizedProps.value;Pt(Ga,p._currentValue),p._currentValue=C;break;case 13:if(p=s.memoizedState,p!==null)return p.dehydrated!==null?(Pt(Ht,Ht.current&1),s.flags|=128,null):(d&s.child.childLanes)!==0?sh(t,s,d):(Pt(Ht,Ht.current&1),t=ci(t,s,d),t!==null?t.sibling:null);Pt(Ht,Ht.current&1);break;case 19:if(p=(d&s.childLanes)!==0,(t.flags&128)!==0){if(p)return ah(t,s,d);s.flags|=128}if(C=s.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Pt(Ht,Ht.current),p)break;return null;case 22:case 23:return s.lanes=0,eh(t,s,d)}return ci(t,s,d)}var lh,Lc,ch,dh;lh=function(t,s){for(var d=s.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break;for(;d.sibling===null;){if(d.return===null||d.return===s)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Lc=function(){},ch=function(t,s,d,p){var C=t.memoizedProps;if(C!==p){t=s.stateNode,xs(Zr.current);var E=null;switch(d){case"input":C=Qe(t,C),p=Qe(t,p),E=[];break;case"select":C=K({},C,{value:void 0}),p=K({},p,{value:void 0}),E=[];break;case"textarea":C=Ur(t,C),p=Ur(t,p),E=[];break;default:typeof C.onClick!="function"&&typeof p.onClick=="function"&&(t.onclick=Pa)}Ct(d,p);var P;d=null;for(ye in C)if(!p.hasOwnProperty(ye)&&C.hasOwnProperty(ye)&&C[ye]!=null)if(ye==="style"){var $=C[ye];for(P in $)$.hasOwnProperty(P)&&(d||(d={}),d[P]="")}else ye!=="dangerouslySetInnerHTML"&&ye!=="children"&&ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&ye!=="autoFocus"&&(y.hasOwnProperty(ye)?E||(E=[]):(E=E||[]).push(ye,null));for(ye in p){var re=p[ye];if($=C?.[ye],p.hasOwnProperty(ye)&&re!==$&&(re!=null||$!=null))if(ye==="style")if($){for(P in $)!$.hasOwnProperty(P)||re&&re.hasOwnProperty(P)||(d||(d={}),d[P]="");for(P in re)re.hasOwnProperty(P)&&$[P]!==re[P]&&(d||(d={}),d[P]=re[P])}else d||(E||(E=[]),E.push(ye,d)),d=re;else ye==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,$=$?$.__html:void 0,re!=null&&$!==re&&(E=E||[]).push(ye,re)):ye==="children"?typeof re!="string"&&typeof re!="number"||(E=E||[]).push(ye,""+re):ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&(y.hasOwnProperty(ye)?(re!=null&&ye==="onScroll"&&Bt("scroll",t),E||$===re||(E=[])):(E=E||[]).push(ye,re))}d&&(E=E||[]).push("style",d);var ye=E;(s.updateQueue=ye)&&(s.flags|=4)}},dh=function(t,s,d,p){d!==p&&(s.flags|=4)};function Jo(t,s){if(!Ut)switch(t.tailMode){case"hidden":s=t.tail;for(var d=null;s!==null;)s.alternate!==null&&(d=s),s=s.sibling;d===null?t.tail=null:d.sibling=null;break;case"collapsed":d=t.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:p.sibling=null}}function zn(t){var s=t.alternate!==null&&t.alternate.child===t.child,d=0,p=0;if(s)for(var C=t.child;C!==null;)d|=C.lanes|C.childLanes,p|=C.subtreeFlags&14680064,p|=C.flags&14680064,C.return=t,C=C.sibling;else for(C=t.child;C!==null;)d|=C.lanes|C.childLanes,p|=C.subtreeFlags,p|=C.flags,C.return=t,C=C.sibling;return t.subtreeFlags|=p,t.childLanes=d,s}function t1(t,s,d){var p=s.pendingProps;switch(oc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(s),null;case 1:return Jn(s.type)&&Ba(),zn(s),null;case 3:return p=s.stateNode,Qs(),Lt(Qn),Lt(Bn),vc(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(t===null||t.child===null)&&(Ua(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Mr!==null&&(qc(Mr),Mr=null))),Lc(t,s),zn(s),null;case 5:xc(s);var C=xs(Zo.current);if(d=s.type,t!==null&&s.stateNode!=null)ch(t,s,d,p,C),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!p){if(s.stateNode===null)throw Error(l(166));return zn(s),null}if(t=xs(Zr.current),Ua(s)){p=s.stateNode,d=s.type;var E=s.memoizedProps;switch(p[Yr]=s,p[Vo]=E,t=(s.mode&1)!==0,d){case"dialog":Bt("cancel",p),Bt("close",p);break;case"iframe":case"object":case"embed":Bt("load",p);break;case"video":case"audio":for(C=0;C<Fo.length;C++)Bt(Fo[C],p);break;case"source":Bt("error",p);break;case"img":case"image":case"link":Bt("error",p),Bt("load",p);break;case"details":Bt("toggle",p);break;case"input":St(p,E),Bt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!E.multiple},Bt("invalid",p);break;case"textarea":Qi(p,E),Bt("invalid",p)}Ct(d,E),C=null;for(var P in E)if(E.hasOwnProperty(P)){var $=E[P];P==="children"?typeof $=="string"?p.textContent!==$&&(E.suppressHydrationWarning!==!0&&Da(p.textContent,$,t),C=["children",$]):typeof $=="number"&&p.textContent!==""+$&&(E.suppressHydrationWarning!==!0&&Da(p.textContent,$,t),C=["children",""+$]):y.hasOwnProperty(P)&&$!=null&&P==="onScroll"&&Bt("scroll",p)}switch(d){case"input":He(p),dt(p,E,!0);break;case"textarea":He(p),xi(p);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(p.onclick=Pa)}p=C,s.updateQueue=p,p!==null&&(s.flags|=4)}else{P=C.nodeType===9?C:C.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=An(d)),t==="http://www.w3.org/1999/xhtml"?d==="script"?(t=P.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof p.is=="string"?t=P.createElement(d,{is:p.is}):(t=P.createElement(d),d==="select"&&(P=t,p.multiple?P.multiple=!0:p.size&&(P.size=p.size))):t=P.createElementNS(t,d),t[Yr]=s,t[Vo]=p,lh(t,s,!1,!1),s.stateNode=t;e:{switch(P=_t(d,p),d){case"dialog":Bt("cancel",t),Bt("close",t),C=p;break;case"iframe":case"object":case"embed":Bt("load",t),C=p;break;case"video":case"audio":for(C=0;C<Fo.length;C++)Bt(Fo[C],t);C=p;break;case"source":Bt("error",t),C=p;break;case"img":case"image":case"link":Bt("error",t),Bt("load",t),C=p;break;case"details":Bt("toggle",t),C=p;break;case"input":St(t,p),C=Qe(t,p),Bt("invalid",t);break;case"option":C=p;break;case"select":t._wrapperState={wasMultiple:!!p.multiple},C=K({},p,{value:void 0}),Bt("invalid",t);break;case"textarea":Qi(t,p),C=Ur(t,p),Bt("invalid",t);break;default:C=p}Ct(d,C),$=C;for(E in $)if($.hasOwnProperty(E)){var re=$[E];E==="style"?Pe(t,re):E==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,re!=null&&en(t,re)):E==="children"?typeof re=="string"?(d!=="textarea"||re!=="")&&_r(t,re):typeof re=="number"&&_r(t,""+re):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(y.hasOwnProperty(E)?re!=null&&E==="onScroll"&&Bt("scroll",t):re!=null&&N(t,E,re,P))}switch(d){case"input":He(t),dt(t,p,!1);break;case"textarea":He(t),xi(t);break;case"option":p.value!=null&&t.setAttribute("value",""+fe(p.value));break;case"select":t.multiple=!!p.multiple,E=p.value,E!=null?Le(t,!!p.multiple,E,!1):p.defaultValue!=null&&Le(t,!!p.multiple,p.defaultValue,!0);break;default:typeof C.onClick=="function"&&(t.onclick=Pa)}switch(d){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return zn(s),null;case 6:if(t&&s.stateNode!=null)dh(t,s,t.memoizedProps,p);else{if(typeof p!="string"&&s.stateNode===null)throw Error(l(166));if(d=xs(Zo.current),xs(Zr.current),Ua(s)){if(p=s.stateNode,d=s.memoizedProps,p[Yr]=s,(E=p.nodeValue!==d)&&(t=hr,t!==null))switch(t.tag){case 3:Da(p.nodeValue,d,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Da(p.nodeValue,d,(t.mode&1)!==0)}E&&(s.flags|=4)}else p=(d.nodeType===9?d:d.ownerDocument).createTextNode(p),p[Yr]=s,s.stateNode=p}return zn(s),null;case 13:if(Lt(Ht),p=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ut&&fr!==null&&(s.mode&1)!==0&&(s.flags&128)===0)fu(),Zs(),s.flags|=98560,E=!1;else if(E=Ua(s),p!==null&&p.dehydrated!==null){if(t===null){if(!E)throw Error(l(318));if(E=s.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(l(317));E[Yr]=s}else Zs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;zn(s),E=!1}else Mr!==null&&(qc(Mr),Mr=null),E=!0;if(!E)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=d,s):(p=p!==null,p!==(t!==null&&t.memoizedState!==null)&&p&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(Ht.current&1)!==0?xn===0&&(xn=3):Qc())),s.updateQueue!==null&&(s.flags|=4),zn(s),null);case 4:return Qs(),Lc(t,s),t===null&&Wo(s.stateNode.containerInfo),zn(s),null;case 10:return hc(s.type._context),zn(s),null;case 17:return Jn(s.type)&&Ba(),zn(s),null;case 19:if(Lt(Ht),E=s.memoizedState,E===null)return zn(s),null;if(p=(s.flags&128)!==0,P=E.rendering,P===null)if(p)Jo(E,!1);else{if(xn!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(P=Za(t),P!==null){for(s.flags|=128,Jo(E,!1),p=P.updateQueue,p!==null&&(s.updateQueue=p,s.flags|=4),s.subtreeFlags=0,p=d,d=s.child;d!==null;)E=d,t=p,E.flags&=14680066,P=E.alternate,P===null?(E.childLanes=0,E.lanes=t,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=P.childLanes,E.lanes=P.lanes,E.child=P.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=P.memoizedProps,E.memoizedState=P.memoizedState,E.updateQueue=P.updateQueue,E.type=P.type,t=P.dependencies,E.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),d=d.sibling;return Pt(Ht,Ht.current&1|2),s.child}t=t.sibling}E.tail!==null&&Et()>no&&(s.flags|=128,p=!0,Jo(E,!1),s.lanes=4194304)}else{if(!p)if(t=Za(P),t!==null){if(s.flags|=128,p=!0,d=t.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),Jo(E,!0),E.tail===null&&E.tailMode==="hidden"&&!P.alternate&&!Ut)return zn(s),null}else 2*Et()-E.renderingStartTime>no&&d!==1073741824&&(s.flags|=128,p=!0,Jo(E,!1),s.lanes=4194304);E.isBackwards?(P.sibling=s.child,s.child=P):(d=E.last,d!==null?d.sibling=P:s.child=P,E.last=P)}return E.tail!==null?(s=E.tail,E.rendering=s,E.tail=s.sibling,E.renderingStartTime=Et(),s.sibling=null,d=Ht.current,Pt(Ht,p?d&1|2:d&1),s):(zn(s),null);case 22:case 23:return $c(),p=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==p&&(s.flags|=8192),p&&(s.mode&1)!==0?(pr&1073741824)!==0&&(zn(s),s.subtreeFlags&6&&(s.flags|=8192)):zn(s),null;case 24:return null;case 25:return null}throw Error(l(156,s.tag))}function n1(t,s){switch(oc(s),s.tag){case 1:return Jn(s.type)&&Ba(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Qs(),Lt(Qn),Lt(Bn),vc(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return xc(s),null;case 13:if(Lt(Ht),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(l(340));Zs()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Lt(Ht),null;case 4:return Qs(),null;case 10:return hc(s.type._context),null;case 22:case 23:return $c(),null;case 24:return null;default:return null}}var rl=!1,Fn=!1,r1=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function eo(t,s){var d=t.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(p){qt(t,s,p)}else d.current=null}function zc(t,s,d){try{d()}catch(p){qt(t,s,p)}}var uh=!1;function i1(t,s){if($l=Hr,t=ut(),it(t)){if("selectionStart"in t)var d={start:t.selectionStart,end:t.selectionEnd};else e:{d=(d=t.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var C=p.anchorOffset,E=p.focusNode;p=p.focusOffset;try{d.nodeType,E.nodeType}catch{d=null;break e}var P=0,$=-1,re=-1,ye=0,ke=0,Ne=t,Ie=null;t:for(;;){for(var ze;Ne!==d||C!==0&&Ne.nodeType!==3||($=P+C),Ne!==E||p!==0&&Ne.nodeType!==3||(re=P+p),Ne.nodeType===3&&(P+=Ne.nodeValue.length),(ze=Ne.firstChild)!==null;)Ie=Ne,Ne=ze;for(;;){if(Ne===t)break t;if(Ie===d&&++ye===C&&($=P),Ie===E&&++ke===p&&(re=P),(ze=Ne.nextSibling)!==null)break;Ne=Ie,Ie=Ne.parentNode}Ne=ze}d=$===-1||re===-1?null:{start:$,end:re}}else d=null}d=d||{start:0,end:0}}else d=null;for(Ql={focusedElem:t,selectionRange:d},Hr=!1,Ue=s;Ue!==null;)if(s=Ue,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ue=t;else for(;Ue!==null;){s=Ue;try{var Ge=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ge!==null){var Xe=Ge.memoizedProps,on=Ge.memoizedState,ue=s.stateNode,se=ue.getSnapshotBeforeUpdate(s.elementType===s.type?Xe:Br(s.type,Xe),on);ue.__reactInternalSnapshotBeforeUpdate=se}break;case 3:var pe=s.stateNode.containerInfo;pe.nodeType===1?pe.textContent="":pe.nodeType===9&&pe.documentElement&&pe.removeChild(pe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(Re){qt(s,s.return,Re)}if(t=s.sibling,t!==null){t.return=s.return,Ue=t;break}Ue=s.return}return Ge=uh,uh=!1,Ge}function ea(t,s,d){var p=s.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var C=p=p.next;do{if((C.tag&t)===t){var E=C.destroy;C.destroy=void 0,E!==void 0&&zc(s,d,E)}C=C.next}while(C!==p)}}function il(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var d=s=s.next;do{if((d.tag&t)===t){var p=d.create;d.destroy=p()}d=d.next}while(d!==s)}}function Fc(t){var s=t.ref;if(s!==null){var d=t.stateNode;t.tag,t=d,typeof s=="function"?s(t):s.current=t}}function hh(t){var s=t.alternate;s!==null&&(t.alternate=null,hh(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[Yr],delete s[Vo],delete s[nc],delete s[Ff],delete s[Wf])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fh(t){return t.tag===5||t.tag===3||t.tag===4}function ph(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wc(t,s,d){var p=t.tag;if(p===5||p===6)t=t.stateNode,s?d.nodeType===8?d.parentNode.insertBefore(t,s):d.insertBefore(t,s):(d.nodeType===8?(s=d.parentNode,s.insertBefore(t,d)):(s=d,s.appendChild(t)),d=d._reactRootContainer,d!=null||s.onclick!==null||(s.onclick=Pa));else if(p!==4&&(t=t.child,t!==null))for(Wc(t,s,d),t=t.sibling;t!==null;)Wc(t,s,d),t=t.sibling}function Uc(t,s,d){var p=t.tag;if(p===5||p===6)t=t.stateNode,s?d.insertBefore(t,s):d.appendChild(t);else if(p!==4&&(t=t.child,t!==null))for(Uc(t,s,d),t=t.sibling;t!==null;)Uc(t,s,d),t=t.sibling}var Tn=null,Lr=!1;function Bi(t,s,d){for(d=d.child;d!==null;)gh(t,s,d),d=d.sibling}function gh(t,s,d){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount(mt,d)}catch{}switch(d.tag){case 5:Fn||eo(d,s);case 6:var p=Tn,C=Lr;Tn=null,Bi(t,s,d),Tn=p,Lr=C,Tn!==null&&(Lr?(t=Tn,d=d.stateNode,t.nodeType===8?t.parentNode.removeChild(d):t.removeChild(d)):Tn.removeChild(d.stateNode));break;case 18:Tn!==null&&(Lr?(t=Tn,d=d.stateNode,t.nodeType===8?tc(t.parentNode,d):t.nodeType===1&&tc(t,d),Or(t)):tc(Tn,d.stateNode));break;case 4:p=Tn,C=Lr,Tn=d.stateNode.containerInfo,Lr=!0,Bi(t,s,d),Tn=p,Lr=C;break;case 0:case 11:case 14:case 15:if(!Fn&&(p=d.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){C=p=p.next;do{var E=C,P=E.destroy;E=E.tag,P!==void 0&&((E&2)!==0||(E&4)!==0)&&zc(d,s,P),C=C.next}while(C!==p)}Bi(t,s,d);break;case 1:if(!Fn&&(eo(d,s),p=d.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=d.memoizedProps,p.state=d.memoizedState,p.componentWillUnmount()}catch($){qt(d,s,$)}Bi(t,s,d);break;case 21:Bi(t,s,d);break;case 22:d.mode&1?(Fn=(p=Fn)||d.memoizedState!==null,Bi(t,s,d),Fn=p):Bi(t,s,d);break;default:Bi(t,s,d)}}function mh(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var d=t.stateNode;d===null&&(d=t.stateNode=new r1),s.forEach(function(p){var C=f1.bind(null,t,p);d.has(p)||(d.add(p),p.then(C,C))})}}function zr(t,s){var d=s.deletions;if(d!==null)for(var p=0;p<d.length;p++){var C=d[p];try{var E=t,P=s,$=P;e:for(;$!==null;){switch($.tag){case 5:Tn=$.stateNode,Lr=!1;break e;case 3:Tn=$.stateNode.containerInfo,Lr=!0;break e;case 4:Tn=$.stateNode.containerInfo,Lr=!0;break e}$=$.return}if(Tn===null)throw Error(l(160));gh(E,P,C),Tn=null,Lr=!1;var re=C.alternate;re!==null&&(re.return=null),C.return=null}catch(ye){qt(C,s,ye)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)xh(s,t),s=s.sibling}function xh(t,s){var d=t.alternate,p=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zr(s,t),Kr(t),p&4){try{ea(3,t,t.return),il(3,t)}catch(Xe){qt(t,t.return,Xe)}try{ea(5,t,t.return)}catch(Xe){qt(t,t.return,Xe)}}break;case 1:zr(s,t),Kr(t),p&512&&d!==null&&eo(d,d.return);break;case 5:if(zr(s,t),Kr(t),p&512&&d!==null&&eo(d,d.return),t.flags&32){var C=t.stateNode;try{_r(C,"")}catch(Xe){qt(t,t.return,Xe)}}if(p&4&&(C=t.stateNode,C!=null)){var E=t.memoizedProps,P=d!==null?d.memoizedProps:E,$=t.type,re=t.updateQueue;if(t.updateQueue=null,re!==null)try{$==="input"&&E.type==="radio"&&E.name!=null&&ln(C,E),_t($,P);var ye=_t($,E);for(P=0;P<re.length;P+=2){var ke=re[P],Ne=re[P+1];ke==="style"?Pe(C,Ne):ke==="dangerouslySetInnerHTML"?en(C,Ne):ke==="children"?_r(C,Ne):N(C,ke,Ne,ye)}switch($){case"input":xt(C,E);break;case"textarea":Un(C,E);break;case"select":var Ie=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!E.multiple;var ze=E.value;ze!=null?Le(C,!!E.multiple,ze,!1):Ie!==!!E.multiple&&(E.defaultValue!=null?Le(C,!!E.multiple,E.defaultValue,!0):Le(C,!!E.multiple,E.multiple?[]:"",!1))}C[Vo]=E}catch(Xe){qt(t,t.return,Xe)}}break;case 6:if(zr(s,t),Kr(t),p&4){if(t.stateNode===null)throw Error(l(162));C=t.stateNode,E=t.memoizedProps;try{C.nodeValue=E}catch(Xe){qt(t,t.return,Xe)}}break;case 3:if(zr(s,t),Kr(t),p&4&&d!==null&&d.memoizedState.isDehydrated)try{Or(s.containerInfo)}catch(Xe){qt(t,t.return,Xe)}break;case 4:zr(s,t),Kr(t);break;case 13:zr(s,t),Kr(t),C=t.child,C.flags&8192&&(E=C.memoizedState!==null,C.stateNode.isHidden=E,!E||C.alternate!==null&&C.alternate.memoizedState!==null||(Hc=Et())),p&4&&mh(t);break;case 22:if(ke=d!==null&&d.memoizedState!==null,t.mode&1?(Fn=(ye=Fn)||ke,zr(s,t),Fn=ye):zr(s,t),Kr(t),p&8192){if(ye=t.memoizedState!==null,(t.stateNode.isHidden=ye)&&!ke&&(t.mode&1)!==0)for(Ue=t,ke=t.child;ke!==null;){for(Ne=Ue=ke;Ue!==null;){switch(Ie=Ue,ze=Ie.child,Ie.tag){case 0:case 11:case 14:case 15:ea(4,Ie,Ie.return);break;case 1:eo(Ie,Ie.return);var Ge=Ie.stateNode;if(typeof Ge.componentWillUnmount=="function"){p=Ie,d=Ie.return;try{s=p,Ge.props=s.memoizedProps,Ge.state=s.memoizedState,Ge.componentWillUnmount()}catch(Xe){qt(p,d,Xe)}}break;case 5:eo(Ie,Ie.return);break;case 22:if(Ie.memoizedState!==null){wh(Ne);continue}}ze!==null?(ze.return=Ie,Ue=ze):wh(Ne)}ke=ke.sibling}e:for(ke=null,Ne=t;;){if(Ne.tag===5){if(ke===null){ke=Ne;try{C=Ne.stateNode,ye?(E=C.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):($=Ne.stateNode,re=Ne.memoizedProps.style,P=re!=null&&re.hasOwnProperty("display")?re.display:null,$.style.display=Mt("display",P))}catch(Xe){qt(t,t.return,Xe)}}}else if(Ne.tag===6){if(ke===null)try{Ne.stateNode.nodeValue=ye?"":Ne.memoizedProps}catch(Xe){qt(t,t.return,Xe)}}else if((Ne.tag!==22&&Ne.tag!==23||Ne.memoizedState===null||Ne===t)&&Ne.child!==null){Ne.child.return=Ne,Ne=Ne.child;continue}if(Ne===t)break e;for(;Ne.sibling===null;){if(Ne.return===null||Ne.return===t)break e;ke===Ne&&(ke=null),Ne=Ne.return}ke===Ne&&(ke=null),Ne.sibling.return=Ne.return,Ne=Ne.sibling}}break;case 19:zr(s,t),Kr(t),p&4&&mh(t);break;case 21:break;default:zr(s,t),Kr(t)}}function Kr(t){var s=t.flags;if(s&2){try{e:{for(var d=t.return;d!==null;){if(fh(d)){var p=d;break e}d=d.return}throw Error(l(160))}switch(p.tag){case 5:var C=p.stateNode;p.flags&32&&(_r(C,""),p.flags&=-33);var E=ph(t);Uc(t,E,C);break;case 3:case 4:var P=p.stateNode.containerInfo,$=ph(t);Wc(t,$,P);break;default:throw Error(l(161))}}catch(re){qt(t,t.return,re)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function s1(t,s,d){Ue=t,yh(t)}function yh(t,s,d){for(var p=(t.mode&1)!==0;Ue!==null;){var C=Ue,E=C.child;if(C.tag===22&&p){var P=C.memoizedState!==null||rl;if(!P){var $=C.alternate,re=$!==null&&$.memoizedState!==null||Fn;$=rl;var ye=Fn;if(rl=P,(Fn=re)&&!ye)for(Ue=C;Ue!==null;)P=Ue,re=P.child,P.tag===22&&P.memoizedState!==null?Ch(C):re!==null?(re.return=P,Ue=re):Ch(C);for(;E!==null;)Ue=E,yh(E),E=E.sibling;Ue=C,rl=$,Fn=ye}vh(t)}else(C.subtreeFlags&8772)!==0&&E!==null?(E.return=C,Ue=E):vh(t)}}function vh(t){for(;Ue!==null;){var s=Ue;if((s.flags&8772)!==0){var d=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Fn||il(5,s);break;case 1:var p=s.stateNode;if(s.flags&4&&!Fn)if(d===null)p.componentDidMount();else{var C=s.elementType===s.type?d.memoizedProps:Br(s.type,d.memoizedProps);p.componentDidUpdate(C,d.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var E=s.updateQueue;E!==null&&wu(s,E,p);break;case 3:var P=s.updateQueue;if(P!==null){if(d=null,s.child!==null)switch(s.child.tag){case 5:d=s.child.stateNode;break;case 1:d=s.child.stateNode}wu(s,P,d)}break;case 5:var $=s.stateNode;if(d===null&&s.flags&4){d=$;var re=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":re.autoFocus&&d.focus();break;case"img":re.src&&(d.src=re.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var ye=s.alternate;if(ye!==null){var ke=ye.memoizedState;if(ke!==null){var Ne=ke.dehydrated;Ne!==null&&Or(Ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(l(163))}Fn||s.flags&512&&Fc(s)}catch(Ie){qt(s,s.return,Ie)}}if(s===t){Ue=null;break}if(d=s.sibling,d!==null){d.return=s.return,Ue=d;break}Ue=s.return}}function wh(t){for(;Ue!==null;){var s=Ue;if(s===t){Ue=null;break}var d=s.sibling;if(d!==null){d.return=s.return,Ue=d;break}Ue=s.return}}function Ch(t){for(;Ue!==null;){var s=Ue;try{switch(s.tag){case 0:case 11:case 15:var d=s.return;try{il(4,s)}catch(re){qt(s,d,re)}break;case 1:var p=s.stateNode;if(typeof p.componentDidMount=="function"){var C=s.return;try{p.componentDidMount()}catch(re){qt(s,C,re)}}var E=s.return;try{Fc(s)}catch(re){qt(s,E,re)}break;case 5:var P=s.return;try{Fc(s)}catch(re){qt(s,P,re)}}}catch(re){qt(s,s.return,re)}if(s===t){Ue=null;break}var $=s.sibling;if($!==null){$.return=s.return,Ue=$;break}Ue=s.return}}var o1=Math.ceil,sl=M.ReactCurrentDispatcher,Vc=M.ReactCurrentOwner,Ar=M.ReactCurrentBatchConfig,vt=0,Cn=null,dn=null,_n=0,pr=0,to=Ri(0),xn=0,ta=null,vs=0,ol=0,Gc=0,na=null,tr=null,Hc=0,no=1/0,di=null,al=!1,Xc=null,Li=null,ll=!1,zi=null,cl=0,ra=0,Yc=null,dl=-1,ul=0;function Xn(){return(vt&6)!==0?Et():dl!==-1?dl:dl=Et()}function Fi(t){return(t.mode&1)===0?1:(vt&2)!==0&&_n!==0?_n&-_n:Vf.transition!==null?(ul===0&&(ul=hn()),ul):(t=ct,t!==0||(t=window.event,t=t===void 0?16:To(t.type)),t)}function Fr(t,s,d,p){if(50<ra)throw ra=0,Yc=null,Error(l(185));U(t,d,p),((vt&2)===0||t!==Cn)&&(t===Cn&&((vt&2)===0&&(ol|=d),xn===4&&Wi(t,_n)),nr(t,p),d===1&&vt===0&&(s.mode&1)===0&&(no=Et()+500,za&&Di()))}function nr(t,s){var d=t.callbackNode;Ci(t,s);var p=lr(t,t===Cn?_n:0);if(p===0)d!==null&&yn(d),t.callbackNode=null,t.callbackPriority=0;else if(s=p&-p,t.callbackPriority!==s){if(d!=null&&yn(d),s===1)t.tag===0?Uf(Sh.bind(null,t)):lu(Sh.bind(null,t)),Lf(function(){(vt&6)===0&&Di()}),d=null;else{switch(wa(p)){case 1:d=Ee;break;case 4:d=ya;break;case 16:d=Nt;break;case 536870912:d=va;break;default:d=Nt}d=_h(d,bh.bind(null,t))}t.callbackPriority=s,t.callbackNode=d}}function bh(t,s){if(dl=-1,ul=0,(vt&6)!==0)throw Error(l(327));var d=t.callbackNode;if(ro()&&t.callbackNode!==d)return null;var p=lr(t,t===Cn?_n:0);if(p===0)return null;if((p&30)!==0||(p&t.expiredLanes)!==0||s)s=hl(t,p);else{s=p;var C=vt;vt|=2;var E=Ah();(Cn!==t||_n!==s)&&(di=null,no=Et()+500,Cs(t,s));do try{c1();break}catch($){Eh(t,$)}while(!0);uc(),sl.current=E,vt=C,dn!==null?s=0:(Cn=null,_n=0,s=xn)}if(s!==0){if(s===2&&(C=At(t),C!==0&&(p=C,s=Zc(t,C))),s===1)throw d=ta,Cs(t,0),Wi(t,p),nr(t,Et()),d;if(s===6)Wi(t,p);else{if(C=t.current.alternate,(p&30)===0&&!a1(C)&&(s=hl(t,p),s===2&&(E=At(t),E!==0&&(p=E,s=Zc(t,E))),s===1))throw d=ta,Cs(t,0),Wi(t,p),nr(t,Et()),d;switch(t.finishedWork=C,t.finishedLanes=p,s){case 0:case 1:throw Error(l(345));case 2:bs(t,tr,di);break;case 3:if(Wi(t,p),(p&130023424)===p&&(s=Hc+500-Et(),10<s)){if(lr(t,0)!==0)break;if(C=t.suspendedLanes,(C&p)!==p){Xn(),t.pingedLanes|=t.suspendedLanes&C;break}t.timeoutHandle=ec(bs.bind(null,t,tr,di),s);break}bs(t,tr,di);break;case 4:if(Wi(t,p),(p&4194240)===p)break;for(s=t.eventTimes,C=-1;0<p;){var P=31-Gn(p);E=1<<P,P=s[P],P>C&&(C=P),p&=~E}if(p=C,p=Et()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*o1(p/1960))-p,10<p){t.timeoutHandle=ec(bs.bind(null,t,tr,di),p);break}bs(t,tr,di);break;case 5:bs(t,tr,di);break;default:throw Error(l(329))}}}return nr(t,Et()),t.callbackNode===d?bh.bind(null,t):null}function Zc(t,s){var d=na;return t.current.memoizedState.isDehydrated&&(Cs(t,s).flags|=256),t=hl(t,s),t!==2&&(s=tr,tr=d,s!==null&&qc(s)),t}function qc(t){tr===null?tr=t:tr.push.apply(tr,t)}function a1(t){for(var s=t;;){if(s.flags&16384){var d=s.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var p=0;p<d.length;p++){var C=d[p],E=C.getSnapshot;C=C.value;try{if(!ae(E(),C))return!1}catch{return!1}}}if(d=s.child,s.subtreeFlags&16384&&d!==null)d.return=s,s=d;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Wi(t,s){for(s&=~Gc,s&=~ol,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var d=31-Gn(s),p=1<<d;t[d]=-1,s&=~p}}function Sh(t){if((vt&6)!==0)throw Error(l(327));ro();var s=lr(t,0);if((s&1)===0)return nr(t,Et()),null;var d=hl(t,s);if(t.tag!==0&&d===2){var p=At(t);p!==0&&(s=p,d=Zc(t,p))}if(d===1)throw d=ta,Cs(t,0),Wi(t,s),nr(t,Et()),d;if(d===6)throw Error(l(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,bs(t,tr,di),nr(t,Et()),null}function Kc(t,s){var d=vt;vt|=1;try{return t(s)}finally{vt=d,vt===0&&(no=Et()+500,za&&Di())}}function ws(t){zi!==null&&zi.tag===0&&(vt&6)===0&&ro();var s=vt;vt|=1;var d=Ar.transition,p=ct;try{if(Ar.transition=null,ct=1,t)return t()}finally{ct=p,Ar.transition=d,vt=s,(vt&6)===0&&Di()}}function $c(){pr=to.current,Lt(to)}function Cs(t,s){t.finishedWork=null,t.finishedLanes=0;var d=t.timeoutHandle;if(d!==-1&&(t.timeoutHandle=-1,Bf(d)),dn!==null)for(d=dn.return;d!==null;){var p=d;switch(oc(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Ba();break;case 3:Qs(),Lt(Qn),Lt(Bn),vc();break;case 5:xc(p);break;case 4:Qs();break;case 13:Lt(Ht);break;case 19:Lt(Ht);break;case 10:hc(p.type._context);break;case 22:case 23:$c()}d=d.return}if(Cn=t,dn=t=Ui(t.current,null),_n=pr=s,xn=0,ta=null,Gc=ol=vs=0,tr=na=null,ms!==null){for(s=0;s<ms.length;s++)if(d=ms[s],p=d.interleaved,p!==null){d.interleaved=null;var C=p.next,E=d.pending;if(E!==null){var P=E.next;E.next=C,p.next=P}d.pending=p}ms=null}return t}function Eh(t,s){do{var d=dn;try{if(uc(),qa.current=Ja,Ka){for(var p=Xt.memoizedState;p!==null;){var C=p.queue;C!==null&&(C.pending=null),p=p.next}Ka=!1}if(ys=0,wn=mn=Xt=null,qo=!1,Ko=0,Vc.current=null,d===null||d.return===null){xn=1,ta=s,dn=null;break}e:{var E=t,P=d.return,$=d,re=s;if(s=_n,$.flags|=32768,re!==null&&typeof re=="object"&&typeof re.then=="function"){var ye=re,ke=$,Ne=ke.tag;if((ke.mode&1)===0&&(Ne===0||Ne===11||Ne===15)){var Ie=ke.alternate;Ie?(ke.updateQueue=Ie.updateQueue,ke.memoizedState=Ie.memoizedState,ke.lanes=Ie.lanes):(ke.updateQueue=null,ke.memoizedState=null)}var ze=qu(P);if(ze!==null){ze.flags&=-257,Ku(ze,P,$,E,s),ze.mode&1&&Zu(E,ye,s),s=ze,re=ye;var Ge=s.updateQueue;if(Ge===null){var Xe=new Set;Xe.add(re),s.updateQueue=Xe}else Ge.add(re);break e}else{if((s&1)===0){Zu(E,ye,s),Qc();break e}re=Error(l(426))}}else if(Ut&&$.mode&1){var on=qu(P);if(on!==null){(on.flags&65536)===0&&(on.flags|=256),Ku(on,P,$,E,s),cc(Js(re,$));break e}}E=re=Js(re,$),xn!==4&&(xn=2),na===null?na=[E]:na.push(E),E=P;do{switch(E.tag){case 3:E.flags|=65536,s&=-s,E.lanes|=s;var ue=Xu(E,re,s);vu(E,ue);break e;case 1:$=re;var se=E.type,pe=E.stateNode;if((E.flags&128)===0&&(typeof se.getDerivedStateFromError=="function"||pe!==null&&typeof pe.componentDidCatch=="function"&&(Li===null||!Li.has(pe)))){E.flags|=65536,s&=-s,E.lanes|=s;var Re=Yu(E,$,s);vu(E,Re);break e}}E=E.return}while(E!==null)}jh(d)}catch(Ye){s=Ye,dn===d&&d!==null&&(dn=d=d.return);continue}break}while(!0)}function Ah(){var t=sl.current;return sl.current=Ja,t===null?Ja:t}function Qc(){(xn===0||xn===3||xn===2)&&(xn=4),Cn===null||(vs&268435455)===0&&(ol&268435455)===0||Wi(Cn,_n)}function hl(t,s){var d=vt;vt|=2;var p=Ah();(Cn!==t||_n!==s)&&(di=null,Cs(t,s));do try{l1();break}catch(C){Eh(t,C)}while(!0);if(uc(),vt=d,sl.current=p,dn!==null)throw Error(l(261));return Cn=null,_n=0,xn}function l1(){for(;dn!==null;)Ih(dn)}function c1(){for(;dn!==null&&!Rt();)Ih(dn)}function Ih(t){var s=Th(t.alternate,t,pr);t.memoizedProps=t.pendingProps,s===null?jh(t):dn=s,Vc.current=null}function jh(t){var s=t;do{var d=s.alternate;if(t=s.return,(s.flags&32768)===0){if(d=t1(d,s,pr),d!==null){dn=d;return}}else{if(d=n1(d,s),d!==null){d.flags&=32767,dn=d;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xn=6,dn=null;return}}if(s=s.sibling,s!==null){dn=s;return}dn=s=t}while(s!==null);xn===0&&(xn=5)}function bs(t,s,d){var p=ct,C=Ar.transition;try{Ar.transition=null,ct=1,d1(t,s,d,p)}finally{Ar.transition=C,ct=p}return null}function d1(t,s,d,p){do ro();while(zi!==null);if((vt&6)!==0)throw Error(l(327));d=t.finishedWork;var C=t.finishedLanes;if(d===null)return null;if(t.finishedWork=null,t.finishedLanes=0,d===t.current)throw Error(l(177));t.callbackNode=null,t.callbackPriority=0;var E=d.lanes|d.childLanes;if(Ze(t,E),t===Cn&&(dn=Cn=null,_n=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||ll||(ll=!0,_h(Nt,function(){return ro(),null})),E=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||E){E=Ar.transition,Ar.transition=null;var P=ct;ct=1;var $=vt;vt|=4,Vc.current=null,i1(t,d),xh(d,t),Mn(Ql),Hr=!!$l,Ql=$l=null,t.current=d,s1(d),xa(),vt=$,ct=P,Ar.transition=E}else t.current=d;if(ll&&(ll=!1,zi=t,cl=C),E=t.pendingLanes,E===0&&(Li=null),pt(d.stateNode),nr(t,Et()),s!==null)for(p=t.onRecoverableError,d=0;d<s.length;d++)C=s[d],p(C.value,{componentStack:C.stack,digest:C.digest});if(al)throw al=!1,t=Xc,Xc=null,t;return(cl&1)!==0&&t.tag!==0&&ro(),E=t.pendingLanes,(E&1)!==0?t===Yc?ra++:(ra=0,Yc=t):ra=0,Di(),null}function ro(){if(zi!==null){var t=wa(cl),s=Ar.transition,d=ct;try{if(Ar.transition=null,ct=16>t?16:t,zi===null)var p=!1;else{if(t=zi,zi=null,cl=0,(vt&6)!==0)throw Error(l(331));var C=vt;for(vt|=4,Ue=t.current;Ue!==null;){var E=Ue,P=E.child;if((Ue.flags&16)!==0){var $=E.deletions;if($!==null){for(var re=0;re<$.length;re++){var ye=$[re];for(Ue=ye;Ue!==null;){var ke=Ue;switch(ke.tag){case 0:case 11:case 15:ea(8,ke,E)}var Ne=ke.child;if(Ne!==null)Ne.return=ke,Ue=Ne;else for(;Ue!==null;){ke=Ue;var Ie=ke.sibling,ze=ke.return;if(hh(ke),ke===ye){Ue=null;break}if(Ie!==null){Ie.return=ze,Ue=Ie;break}Ue=ze}}}var Ge=E.alternate;if(Ge!==null){var Xe=Ge.child;if(Xe!==null){Ge.child=null;do{var on=Xe.sibling;Xe.sibling=null,Xe=on}while(Xe!==null)}}Ue=E}}if((E.subtreeFlags&2064)!==0&&P!==null)P.return=E,Ue=P;else e:for(;Ue!==null;){if(E=Ue,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:ea(9,E,E.return)}var ue=E.sibling;if(ue!==null){ue.return=E.return,Ue=ue;break e}Ue=E.return}}var se=t.current;for(Ue=se;Ue!==null;){P=Ue;var pe=P.child;if((P.subtreeFlags&2064)!==0&&pe!==null)pe.return=P,Ue=pe;else e:for(P=se;Ue!==null;){if($=Ue,($.flags&2048)!==0)try{switch($.tag){case 0:case 11:case 15:il(9,$)}}catch(Ye){qt($,$.return,Ye)}if($===P){Ue=null;break e}var Re=$.sibling;if(Re!==null){Re.return=$.return,Ue=Re;break e}Ue=$.return}}if(vt=C,Di(),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot(mt,t)}catch{}p=!0}return p}finally{ct=d,Ar.transition=s}}return!1}function kh(t,s,d){s=Js(d,s),s=Xu(t,s,1),t=Mi(t,s,1),s=Xn(),t!==null&&(U(t,1,s),nr(t,s))}function qt(t,s,d){if(t.tag===3)kh(t,t,d);else for(;s!==null;){if(s.tag===3){kh(s,t,d);break}else if(s.tag===1){var p=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Li===null||!Li.has(p))){t=Js(d,t),t=Yu(s,t,1),s=Mi(s,t,1),t=Xn(),s!==null&&(U(s,1,t),nr(s,t));break}}s=s.return}}function u1(t,s,d){var p=t.pingCache;p!==null&&p.delete(s),s=Xn(),t.pingedLanes|=t.suspendedLanes&d,Cn===t&&(_n&d)===d&&(xn===4||xn===3&&(_n&130023424)===_n&&500>Et()-Hc?Cs(t,0):Gc|=d),nr(t,s)}function Nh(t,s){s===0&&((t.mode&1)===0?s=1:(s=Os,Os<<=1,(Os&130023424)===0&&(Os=4194304)));var d=Xn();t=ai(t,s),t!==null&&(U(t,s,d),nr(t,d))}function h1(t){var s=t.memoizedState,d=0;s!==null&&(d=s.retryLane),Nh(t,d)}function f1(t,s){var d=0;switch(t.tag){case 13:var p=t.stateNode,C=t.memoizedState;C!==null&&(d=C.retryLane);break;case 19:p=t.stateNode;break;default:throw Error(l(314))}p!==null&&p.delete(s),Nh(t,d)}var Th;Th=function(t,s,d){if(t!==null)if(t.memoizedProps!==s.pendingProps||Qn.current)er=!0;else{if((t.lanes&d)===0&&(s.flags&128)===0)return er=!1,e1(t,s,d);er=(t.flags&131072)!==0}else er=!1,Ut&&(s.flags&1048576)!==0&&cu(s,Wa,s.index);switch(s.lanes=0,s.tag){case 2:var p=s.type;nl(t,s),t=s.pendingProps;var C=Hs(s,Bn.current);$s(s,d),C=bc(null,s,p,t,C,d);var E=Sc();return s.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Jn(p)?(E=!0,La(s)):E=!1,s.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,gc(s),C.updater=el,s.stateNode=C,C._reactInternals=s,Nc(s,p,t,d),s=Oc(null,s,p,!0,E,d)):(s.tag=0,Ut&&E&&sc(s),Hn(null,s,C,d),s=s.child),s;case 16:p=s.elementType;e:{switch(nl(t,s),t=s.pendingProps,C=p._init,p=C(p._payload),s.type=p,C=s.tag=g1(p),t=Br(p,t),C){case 0:s=Rc(null,s,p,t,d);break e;case 1:s=nh(null,s,p,t,d);break e;case 11:s=$u(null,s,p,t,d);break e;case 14:s=Qu(null,s,p,Br(p.type,t),d);break e}throw Error(l(306,p,""))}return s;case 0:return p=s.type,C=s.pendingProps,C=s.elementType===p?C:Br(p,C),Rc(t,s,p,C,d);case 1:return p=s.type,C=s.pendingProps,C=s.elementType===p?C:Br(p,C),nh(t,s,p,C,d);case 3:e:{if(rh(s),t===null)throw Error(l(387));p=s.pendingProps,E=s.memoizedState,C=E.element,yu(t,s),Ya(s,p,null,d);var P=s.memoizedState;if(p=P.element,E.isDehydrated)if(E={element:p,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},s.updateQueue.baseState=E,s.memoizedState=E,s.flags&256){C=Js(Error(l(423)),s),s=ih(t,s,p,d,C);break e}else if(p!==C){C=Js(Error(l(424)),s),s=ih(t,s,p,d,C);break e}else for(fr=_i(s.stateNode.containerInfo.firstChild),hr=s,Ut=!0,Mr=null,d=mu(s,null,p,d),s.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Zs(),p===C){s=ci(t,s,d);break e}Hn(t,s,p,d)}s=s.child}return s;case 5:return Cu(s),t===null&&lc(s),p=s.type,C=s.pendingProps,E=t!==null?t.memoizedProps:null,P=C.children,Jl(p,C)?P=null:E!==null&&Jl(p,E)&&(s.flags|=32),th(t,s),Hn(t,s,P,d),s.child;case 6:return t===null&&lc(s),null;case 13:return sh(t,s,d);case 4:return mc(s,s.stateNode.containerInfo),p=s.pendingProps,t===null?s.child=qs(s,null,p,d):Hn(t,s,p,d),s.child;case 11:return p=s.type,C=s.pendingProps,C=s.elementType===p?C:Br(p,C),$u(t,s,p,C,d);case 7:return Hn(t,s,s.pendingProps,d),s.child;case 8:return Hn(t,s,s.pendingProps.children,d),s.child;case 12:return Hn(t,s,s.pendingProps.children,d),s.child;case 10:e:{if(p=s.type._context,C=s.pendingProps,E=s.memoizedProps,P=C.value,Pt(Ga,p._currentValue),p._currentValue=P,E!==null)if(ae(E.value,P)){if(E.children===C.children&&!Qn.current){s=ci(t,s,d);break e}}else for(E=s.child,E!==null&&(E.return=s);E!==null;){var $=E.dependencies;if($!==null){P=E.child;for(var re=$.firstContext;re!==null;){if(re.context===p){if(E.tag===1){re=li(-1,d&-d),re.tag=2;var ye=E.updateQueue;if(ye!==null){ye=ye.shared;var ke=ye.pending;ke===null?re.next=re:(re.next=ke.next,ke.next=re),ye.pending=re}}E.lanes|=d,re=E.alternate,re!==null&&(re.lanes|=d),fc(E.return,d,s),$.lanes|=d;break}re=re.next}}else if(E.tag===10)P=E.type===s.type?null:E.child;else if(E.tag===18){if(P=E.return,P===null)throw Error(l(341));P.lanes|=d,$=P.alternate,$!==null&&($.lanes|=d),fc(P,d,s),P=E.sibling}else P=E.child;if(P!==null)P.return=E;else for(P=E;P!==null;){if(P===s){P=null;break}if(E=P.sibling,E!==null){E.return=P.return,P=E;break}P=P.return}E=P}Hn(t,s,C.children,d),s=s.child}return s;case 9:return C=s.type,p=s.pendingProps.children,$s(s,d),C=Sr(C),p=p(C),s.flags|=1,Hn(t,s,p,d),s.child;case 14:return p=s.type,C=Br(p,s.pendingProps),C=Br(p.type,C),Qu(t,s,p,C,d);case 15:return Ju(t,s,s.type,s.pendingProps,d);case 17:return p=s.type,C=s.pendingProps,C=s.elementType===p?C:Br(p,C),nl(t,s),s.tag=1,Jn(p)?(t=!0,La(s)):t=!1,$s(s,d),Gu(s,p,C),Nc(s,p,C,d),Oc(null,s,p,!0,t,d);case 19:return ah(t,s,d);case 22:return eh(t,s,d)}throw Error(l(156,s.tag))};function _h(t,s){return or(t,s)}function p1(t,s,d,p){this.tag=t,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(t,s,d,p){return new p1(t,s,d,p)}function Jc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function g1(t){if(typeof t=="function")return Jc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xe)return 11;if(t===G)return 14}return 2}function Ui(t,s){var d=t.alternate;return d===null?(d=Ir(t.tag,s,t.key,t.mode),d.elementType=t.elementType,d.type=t.type,d.stateNode=t.stateNode,d.alternate=t,t.alternate=d):(d.pendingProps=s,d.type=t.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=t.flags&14680064,d.childLanes=t.childLanes,d.lanes=t.lanes,d.child=t.child,d.memoizedProps=t.memoizedProps,d.memoizedState=t.memoizedState,d.updateQueue=t.updateQueue,s=t.dependencies,d.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},d.sibling=t.sibling,d.index=t.index,d.ref=t.ref,d}function fl(t,s,d,p,C,E){var P=2;if(p=t,typeof t=="function")Jc(t)&&(P=1);else if(typeof t=="string")P=5;else e:switch(t){case z:return Ss(d.children,C,E,s);case Q:P=8,C|=8;break;case he:return t=Ir(12,d,s,C|2),t.elementType=he,t.lanes=E,t;case le:return t=Ir(13,d,s,C),t.elementType=le,t.lanes=E,t;case ne:return t=Ir(19,d,s,C),t.elementType=ne,t.lanes=E,t;case oe:return pl(d,C,E,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ae:P=10;break e;case we:P=9;break e;case xe:P=11;break e;case G:P=14;break e;case J:P=16,p=null;break e}throw Error(l(130,t==null?t:typeof t,""))}return s=Ir(P,d,s,C),s.elementType=t,s.type=p,s.lanes=E,s}function Ss(t,s,d,p){return t=Ir(7,t,p,s),t.lanes=d,t}function pl(t,s,d,p){return t=Ir(22,t,p,s),t.elementType=oe,t.lanes=d,t.stateNode={isHidden:!1},t}function ed(t,s,d){return t=Ir(6,t,null,s),t.lanes=d,t}function td(t,s,d){return s=Ir(4,t.children!==null?t.children:[],t.key,s),s.lanes=d,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function m1(t,s,d,p,C){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=de(0),this.expirationTimes=de(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=de(0),this.identifierPrefix=p,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function nd(t,s,d,p,C,E,P,$,re){return t=new m1(t,s,d,$,re),s===1?(s=1,E===!0&&(s|=8)):s=0,E=Ir(3,null,null,s),t.current=E,E.stateNode=t,E.memoizedState={element:p,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},gc(E),t}function x1(t,s,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:p==null?null:""+p,children:t,containerInfo:s,implementation:d}}function Rh(t){if(!t)return Oi;t=t._reactInternals;e:{if($n(t)!==t||t.tag!==1)throw Error(l(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Jn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(l(171))}if(t.tag===1){var d=t.type;if(Jn(d))return ou(t,d,s)}return s}function Oh(t,s,d,p,C,E,P,$,re){return t=nd(d,p,!0,t,C,E,P,$,re),t.context=Rh(null),d=t.current,p=Xn(),C=Fi(d),E=li(p,C),E.callback=s??null,Mi(d,E,C),t.current.lanes=C,U(t,C,p),nr(t,p),t}function gl(t,s,d,p){var C=s.current,E=Xn(),P=Fi(C);return d=Rh(d),s.context===null?s.context=d:s.pendingContext=d,s=li(E,P),s.payload={element:t},p=p===void 0?null:p,p!==null&&(s.callback=p),t=Mi(C,s,P),t!==null&&(Fr(t,C,P,E),Xa(t,C,P)),P}function ml(t){return t=t.current,t.child?(t.child.tag===5,t.child.stateNode):null}function Dh(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var d=t.retryLane;t.retryLane=d!==0&&d<s?d:s}}function rd(t,s){Dh(t,s),(t=t.alternate)&&Dh(t,s)}function y1(){return null}var Ph=typeof reportError=="function"?reportError:function(t){console.error(t)};function id(t){this._internalRoot=t}xl.prototype.render=id.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(l(409));gl(t,s,null,null)},xl.prototype.unmount=id.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;ws(function(){gl(null,t,null,null)}),s[ri]=null}};function xl(t){this._internalRoot=t}xl.prototype.unstable_scheduleHydration=function(t){if(t){var s=Ot();t={blockedOn:null,target:t,priority:s};for(var d=0;d<jn.length&&s!==0&&s<jn[d].priority;d++);jn.splice(d,0,t),d===0&&ba(t)}};function sd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Mh(){}function v1(t,s,d,p,C){if(C){if(typeof p=="function"){var E=p;p=function(){var ye=ml(P);E.call(ye)}}var P=Oh(s,p,t,0,null,!1,!1,"",Mh);return t._reactRootContainer=P,t[ri]=P.current,Wo(t.nodeType===8?t.parentNode:t),ws(),P}for(;C=t.lastChild;)t.removeChild(C);if(typeof p=="function"){var $=p;p=function(){var ye=ml(re);$.call(ye)}}var re=nd(t,0,!1,null,null,!1,!1,"",Mh);return t._reactRootContainer=re,t[ri]=re.current,Wo(t.nodeType===8?t.parentNode:t),ws(function(){gl(s,re,d,p)}),re}function vl(t,s,d,p,C){var E=d._reactRootContainer;if(E){var P=E;if(typeof C=="function"){var $=C;C=function(){var re=ml(P);$.call(re)}}gl(s,P,t,C)}else P=v1(d,s,t,C,p);return ml(P)}Ds=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var d=Tt(s.pendingLanes);d!==0&&(Yt(s,d|1),nr(s,Et()),(vt&6)===0&&(no=Et()+500,Di()))}break;case 13:ws(function(){var p=ai(t,1);if(p!==null){var C=Xn();Fr(p,t,1,C)}}),rd(t,1)}},Pn=function(t){if(t.tag===13){var s=ai(t,134217728);if(s!==null){var d=Xn();Fr(s,t,134217728,d)}rd(t,134217728)}},qe=function(t){if(t.tag===13){var s=Fi(t),d=ai(t,s);if(d!==null){var p=Xn();Fr(d,t,s,p)}rd(t,s)}},Ot=function(){return ct},jo=function(t,s){var d=ct;try{return ct=t,s()}finally{ct=d}},_s=function(t,s,d){switch(s){case"input":if(xt(t,d),s=d.name,d.type==="radio"&&s!=null){for(d=t;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<d.length;s++){var p=d[s];if(p!==t&&p.form===t.form){var C=Ma(p);if(!C)throw Error(l(90));st(p),xt(p,C)}}}break;case"textarea":Un(t,d);break;case"select":s=d.value,s!=null&&Le(t,!!d.multiple,s,!1)}},Rs=Kc,un=ws;var w1={usingClientEntryPoint:!1,Events:[Go,Vs,Ma,wo,Kn,Kc]},ia={findFiberByHostInstance:hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},C1={bundleType:ia.bundleType,version:ia.version,rendererPackageName:ia.rendererPackageName,rendererConfig:ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ga(t),t===null?null:t.stateNode},findFiberByHostInstance:ia.findFiberByHostInstance||y1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{mt=wl.inject(C1),lt=wl}catch{}}return rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w1,rr.createPortal=function(t,s){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sd(s))throw Error(l(200));return x1(t,s,null,d)},rr.createRoot=function(t,s){if(!sd(t))throw Error(l(299));var d=!1,p="",C=Ph;return s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onRecoverableError!==void 0&&(C=s.onRecoverableError)),s=nd(t,1,!1,null,null,d,!1,p,C),t[ri]=s.current,Wo(t.nodeType===8?t.parentNode:t),new id(s)},rr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(l(188)):(t=Object.keys(t).join(","),Error(l(268,t)));return t=ga(s),t=t===null?null:t.stateNode,t},rr.flushSync=function(t){return ws(t)},rr.hydrate=function(t,s,d){if(!yl(s))throw Error(l(200));return vl(null,t,s,!0,d)},rr.hydrateRoot=function(t,s,d){if(!sd(t))throw Error(l(405));var p=d!=null&&d.hydratedSources||null,C=!1,E="",P=Ph;if(d!=null&&(d.unstable_strictMode===!0&&(C=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onRecoverableError!==void 0&&(P=d.onRecoverableError)),s=Oh(s,null,t,1,d??null,C,!1,E,P),t[ri]=s.current,Wo(t),p)for(t=0;t<p.length;t++)d=p[t],C=d._getVersion,C=C(d._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[d,C]:s.mutableSourceEagerHydrationData.push(d,C);return new xl(s)},rr.render=function(t,s,d){if(!yl(s))throw Error(l(200));return vl(null,t,s,!1,d)},rr.unmountComponentAtNode=function(t){if(!yl(t))throw Error(l(40));return t._reactRootContainer?(ws(function(){vl(null,null,t,!1,function(){t._reactRootContainer=null,t[ri]=null})}),!0):!1},rr.unstable_batchedUpdates=Kc,rr.unstable_renderSubtreeIntoContainer=function(t,s,d,p){if(!yl(d))throw Error(l(200));if(t==null||t._reactInternals===void 0)throw Error(l(38));return vl(t,s,d,!1,p)},rr.version="18.3.1-next-f1338f8080-20240426",rr}var Gh;function G0(){if(Gh)return ld.exports;Gh=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(h){console.error(h)}}return u(),ld.exports=N1(),ld.exports}var Hh;function T1(){if(Hh)return bl;Hh=1;var u=G0();return bl.createRoot=u.createRoot,bl.hydrateRoot=u.hydrateRoot,bl}var _1=T1();const R1=Bl(_1);G0();function da(){return da=Object.assign?Object.assign.bind():function(u){for(var h=1;h<arguments.length;h++){var l=arguments[h];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(u[g]=l[g])}return u},da.apply(this,arguments)}var Hi;(function(u){u.Pop="POP",u.Push="PUSH",u.Replace="REPLACE"})(Hi||(Hi={}));const Xh="popstate";function O1(u){u===void 0&&(u={});function h(g,y){let{pathname:x,search:b,hash:I}=g.location;return Sd("",{pathname:x,search:b,hash:I},y.state&&y.state.usr||null,y.state&&y.state.key||"default")}function l(g,y){return typeof y=="string"?y:_l(y)}return P1(h,l,null,u)}function an(u,h){if(u===!1||u===null||typeof u>"u")throw new Error(h)}function Md(u,h){if(!u){typeof console<"u"&&console.warn(h);try{throw new Error(h)}catch{}}}function D1(){return Math.random().toString(36).substr(2,8)}function Yh(u,h){return{usr:u.state,key:u.key,idx:h}}function Sd(u,h,l,g){return l===void 0&&(l=null),da({pathname:typeof u=="string"?u:u.pathname,search:"",hash:""},typeof h=="string"?fo(h):h,{state:l,key:h&&h.key||g||D1()})}function _l(u){let{pathname:h="/",search:l="",hash:g=""}=u;return l&&l!=="?"&&(h+=l.charAt(0)==="?"?l:"?"+l),g&&g!=="#"&&(h+=g.charAt(0)==="#"?g:"#"+g),h}function fo(u){let h={};if(u){let l=u.indexOf("#");l>=0&&(h.hash=u.substr(l),u=u.substr(0,l));let g=u.indexOf("?");g>=0&&(h.search=u.substr(g),u=u.substr(0,g)),u&&(h.pathname=u)}return h}function P1(u,h,l,g){g===void 0&&(g={});let{window:y=document.defaultView,v5Compat:x=!1}=g,b=y.history,I=Hi.Pop,S=null,v=A();v==null&&(v=0,b.replaceState(da({},b.state,{idx:v}),""));function A(){return(b.state||{idx:null}).idx}function k(){I=Hi.Pop;let V=A(),Y=V==null?null:V-v;v=V,S&&S({action:I,location:F.location,delta:Y})}function O(V,Y){I=Hi.Push;let R=Sd(F.location,V,Y);v=A()+1;let N=Yh(R,v),M=F.createHref(R);try{b.pushState(N,"",M)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;y.location.assign(M)}x&&S&&S({action:I,location:F.location,delta:1})}function X(V,Y){I=Hi.Replace;let R=Sd(F.location,V,Y);v=A();let N=Yh(R,v),M=F.createHref(R);b.replaceState(N,"",M),x&&S&&S({action:I,location:F.location,delta:0})}function q(V){let Y=y.location.origin!=="null"?y.location.origin:y.location.href,R=typeof V=="string"?V:_l(V);return R=R.replace(/ $/,"%20"),an(Y,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,Y)}let F={get action(){return I},get location(){return u(y,b)},listen(V){if(S)throw new Error("A history only accepts one active listener");return y.addEventListener(Xh,k),S=V,()=>{y.removeEventListener(Xh,k),S=null}},createHref(V){return h(y,V)},createURL:q,encodeLocation(V){let Y=q(V);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:O,replace:X,go(V){return b.go(V)}};return F}var Zh;(function(u){u.data="data",u.deferred="deferred",u.redirect="redirect",u.error="error"})(Zh||(Zh={}));function M1(u,h,l){return l===void 0&&(l="/"),B1(u,h,l)}function B1(u,h,l,g){let y=typeof h=="string"?fo(h):h,x=Bd(y.pathname||"/",l);if(x==null)return null;let b=H0(u);L1(b);let I=null;for(let S=0;I==null&&S<b.length;++S){let v=K1(x);I=Y1(b[S],v)}return I}function H0(u,h,l,g){h===void 0&&(h=[]),l===void 0&&(l=[]),g===void 0&&(g="");let y=(x,b,I)=>{let S={relativePath:I===void 0?x.path||"":I,caseSensitive:x.caseSensitive===!0,childrenIndex:b,route:x};S.relativePath.startsWith("/")&&(an(S.relativePath.startsWith(g),'Absolute route path "'+S.relativePath+'" nested under path '+('"'+g+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),S.relativePath=S.relativePath.slice(g.length));let v=Yi([g,S.relativePath]),A=l.concat(S);x.children&&x.children.length>0&&(an(x.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),H0(x.children,h,A,v)),!(x.path==null&&!x.index)&&h.push({path:v,score:H1(v,x.index),routesMeta:A})};return u.forEach((x,b)=>{var I;if(x.path===""||!((I=x.path)!=null&&I.includes("?")))y(x,b);else for(let S of X0(x.path))y(x,b,S)}),h}function X0(u){let h=u.split("/");if(h.length===0)return[];let[l,...g]=h,y=l.endsWith("?"),x=l.replace(/\?$/,"");if(g.length===0)return y?[x,""]:[x];let b=X0(g.join("/")),I=[];return I.push(...b.map(S=>S===""?x:[x,S].join("/"))),y&&I.push(...b),I.map(S=>u.startsWith("/")&&S===""?"/":S)}function L1(u){u.sort((h,l)=>h.score!==l.score?l.score-h.score:X1(h.routesMeta.map(g=>g.childrenIndex),l.routesMeta.map(g=>g.childrenIndex)))}const z1=/^:[\w-]+$/,F1=3,W1=2,U1=1,V1=10,G1=-2,qh=u=>u==="*";function H1(u,h){let l=u.split("/"),g=l.length;return l.some(qh)&&(g+=G1),h&&(g+=W1),l.filter(y=>!qh(y)).reduce((y,x)=>y+(z1.test(x)?F1:x===""?U1:V1),g)}function X1(u,h){return u.length===h.length&&u.slice(0,-1).every((g,y)=>g===h[y])?u[u.length-1]-h[h.length-1]:0}function Y1(u,h,l){let{routesMeta:g}=u,y={},x="/",b=[];for(let I=0;I<g.length;++I){let S=g[I],v=I===g.length-1,A=x==="/"?h:h.slice(x.length)||"/",k=Z1({path:S.relativePath,caseSensitive:S.caseSensitive,end:v},A),O=S.route;if(!k)return null;Object.assign(y,k.params),b.push({params:y,pathname:Yi([x,k.pathname]),pathnameBase:tp(Yi([x,k.pathnameBase])),route:O}),k.pathnameBase!=="/"&&(x=Yi([x,k.pathnameBase]))}return b}function Z1(u,h){typeof u=="string"&&(u={path:u,caseSensitive:!1,end:!0});let[l,g]=q1(u.path,u.caseSensitive,u.end),y=h.match(l);if(!y)return null;let x=y[0],b=x.replace(/(.)\/+$/,"$1"),I=y.slice(1);return{params:g.reduce((v,A,k)=>{let{paramName:O,isOptional:X}=A;if(O==="*"){let F=I[k]||"";b=x.slice(0,x.length-F.length).replace(/(.)\/+$/,"$1")}const q=I[k];return X&&!q?v[O]=void 0:v[O]=(q||"").replace(/%2F/g,"/"),v},{}),pathname:x,pathnameBase:b,pattern:u}}function q1(u,h,l){h===void 0&&(h=!1),l===void 0&&(l=!0),Md(u==="*"||!u.endsWith("*")||u.endsWith("/*"),'Route path "'+u+'" will be treated as if it were '+('"'+u.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+u.replace(/\*$/,"/*")+'".'));let g=[],y="^"+u.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(b,I,S)=>(g.push({paramName:I,isOptional:S!=null}),S?"/?([^\\/]+)?":"/([^\\/]+)"));return u.endsWith("*")?(g.push({paramName:"*"}),y+=u==="*"||u==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?y+="\\/*$":u!==""&&u!=="/"&&(y+="(?:(?=\\/|$))"),[new RegExp(y,h?void 0:"i"),g]}function K1(u){try{return u.split("/").map(h=>decodeURIComponent(h).replace(/\//g,"%2F")).join("/")}catch(h){return Md(!1,'The URL path "'+u+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+h+").")),u}}function Bd(u,h){if(h==="/")return u;if(!u.toLowerCase().startsWith(h.toLowerCase()))return null;let l=h.endsWith("/")?h.length-1:h.length,g=u.charAt(l);return g&&g!=="/"?null:u.slice(l)||"/"}const $1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Q1=u=>$1.test(u);function J1(u,h){h===void 0&&(h="/");let{pathname:l,search:g="",hash:y=""}=typeof u=="string"?fo(u):u,x;if(l)if(Q1(l))x=l;else{if(l.includes("//")){let b=l;l=l.replace(/\/\/+/g,"/"),Md(!1,"Pathnames cannot have embedded double slashes - normalizing "+(b+" -> "+l))}l.startsWith("/")?x=Kh(l.substring(1),"/"):x=Kh(l,h)}else x=h;return{pathname:x,search:np(g),hash:rp(y)}}function Kh(u,h){let l=h.replace(/\/+$/,"").split("/");return u.split("/").forEach(y=>{y===".."?l.length>1&&l.pop():y!=="."&&l.push(y)}),l.length>1?l.join("/"):"/"}function ud(u,h,l,g){return"Cannot include a '"+u+"' character in a manually specified "+("`to."+h+"` field ["+JSON.stringify(g)+"].  Please separate it out to the ")+("`to."+l+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ep(u){return u.filter((h,l)=>l===0||h.route.path&&h.route.path.length>0)}function Ld(u,h){let l=ep(u);return h?l.map((g,y)=>y===l.length-1?g.pathname:g.pathnameBase):l.map(g=>g.pathnameBase)}function zd(u,h,l,g){g===void 0&&(g=!1);let y;typeof u=="string"?y=fo(u):(y=da({},u),an(!y.pathname||!y.pathname.includes("?"),ud("?","pathname","search",y)),an(!y.pathname||!y.pathname.includes("#"),ud("#","pathname","hash",y)),an(!y.search||!y.search.includes("#"),ud("#","search","hash",y)));let x=u===""||y.pathname==="",b=x?"/":y.pathname,I;if(b==null)I=l;else{let k=h.length-1;if(!g&&b.startsWith("..")){let O=b.split("/");for(;O[0]==="..";)O.shift(),k-=1;y.pathname=O.join("/")}I=k>=0?h[k]:"/"}let S=J1(y,I),v=b&&b!=="/"&&b.endsWith("/"),A=(x||b===".")&&l.endsWith("/");return!S.pathname.endsWith("/")&&(v||A)&&(S.pathname+="/"),S}const Yi=u=>u.join("/").replace(/\/\/+/g,"/"),tp=u=>u.replace(/\/+$/,"").replace(/^\/*/,"/"),np=u=>!u||u==="?"?"":u.startsWith("?")?u:"?"+u,rp=u=>!u||u==="#"?"":u.startsWith("#")?u:"#"+u;function ip(u){return u!=null&&typeof u.status=="number"&&typeof u.statusText=="string"&&typeof u.internal=="boolean"&&"data"in u}const Y0=["post","put","patch","delete"];new Set(Y0);const sp=["get",...Y0];new Set(sp);function ua(){return ua=Object.assign?Object.assign.bind():function(u){for(var h=1;h<arguments.length;h++){var l=arguments[h];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(u[g]=l[g])}return u},ua.apply(this,arguments)}const Fd=W.createContext(null),op=W.createContext(null),Ki=W.createContext(null),Ll=W.createContext(null),gi=W.createContext({outlet:null,matches:[],isDataRoute:!1}),Z0=W.createContext(null);function ap(u,h){let{relative:l}=h===void 0?{}:h;po()||an(!1);let{basename:g,navigator:y}=W.useContext(Ki),{hash:x,pathname:b,search:I}=K0(u,{relative:l}),S=b;return g!=="/"&&(S=b==="/"?g:Yi([g,b])),y.createHref({pathname:S,search:I,hash:x})}function po(){return W.useContext(Ll)!=null}function Ts(){return po()||an(!1),W.useContext(Ll).location}function q0(u){W.useContext(Ki).static||W.useLayoutEffect(u)}function Wn(){let{isDataRoute:u}=W.useContext(gi);return u?wp():lp()}function lp(){po()||an(!1);let u=W.useContext(Fd),{basename:h,future:l,navigator:g}=W.useContext(Ki),{matches:y}=W.useContext(gi),{pathname:x}=Ts(),b=JSON.stringify(Ld(y,l.v7_relativeSplatPath)),I=W.useRef(!1);return q0(()=>{I.current=!0}),W.useCallback(function(v,A){if(A===void 0&&(A={}),!I.current)return;if(typeof v=="number"){g.go(v);return}let k=zd(v,JSON.parse(b),x,A.relative==="path");u==null&&h!=="/"&&(k.pathname=k.pathname==="/"?h:Yi([h,k.pathname])),(A.replace?g.replace:g.push)(k,A.state,A)},[h,g,b,x,u])}function go(){let{matches:u}=W.useContext(gi),h=u[u.length-1];return h?h.params:{}}function K0(u,h){let{relative:l}=h===void 0?{}:h,{future:g}=W.useContext(Ki),{matches:y}=W.useContext(gi),{pathname:x}=Ts(),b=JSON.stringify(Ld(y,g.v7_relativeSplatPath));return W.useMemo(()=>zd(u,JSON.parse(b),x,l==="path"),[u,b,x,l])}function cp(u,h){return dp(u,h)}function dp(u,h,l,g){po()||an(!1);let{navigator:y}=W.useContext(Ki),{matches:x}=W.useContext(gi),b=x[x.length-1],I=b?b.params:{};b&&b.pathname;let S=b?b.pathnameBase:"/";b&&b.route;let v=Ts(),A;if(h){var k;let V=typeof h=="string"?fo(h):h;S==="/"||(k=V.pathname)!=null&&k.startsWith(S)||an(!1),A=V}else A=v;let O=A.pathname||"/",X=O;if(S!=="/"){let V=S.replace(/^\//,"").split("/");X="/"+O.replace(/^\//,"").split("/").slice(V.length).join("/")}let q=M1(u,{pathname:X}),F=gp(q&&q.map(V=>Object.assign({},V,{params:Object.assign({},I,V.params),pathname:Yi([S,y.encodeLocation?y.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?S:Yi([S,y.encodeLocation?y.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),x,l,g);return h&&F?W.createElement(Ll.Provider,{value:{location:ua({pathname:"/",search:"",hash:"",state:null,key:"default"},A),navigationType:Hi.Pop}},F):F}function up(){let u=vp(),h=ip(u)?u.status+" "+u.statusText:u instanceof Error?u.message:JSON.stringify(u),l=u instanceof Error?u.stack:null,y={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},h),l?W.createElement("pre",{style:y},l):null,null)}const hp=W.createElement(up,null);class fp extends W.Component{constructor(h){super(h),this.state={location:h.location,revalidation:h.revalidation,error:h.error}}static getDerivedStateFromError(h){return{error:h}}static getDerivedStateFromProps(h,l){return l.location!==h.location||l.revalidation!=="idle"&&h.revalidation==="idle"?{error:h.error,location:h.location,revalidation:h.revalidation}:{error:h.error!==void 0?h.error:l.error,location:l.location,revalidation:h.revalidation||l.revalidation}}componentDidCatch(h,l){console.error("React Router caught the following error during render",h,l)}render(){return this.state.error!==void 0?W.createElement(gi.Provider,{value:this.props.routeContext},W.createElement(Z0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pp(u){let{routeContext:h,match:l,children:g}=u,y=W.useContext(Fd);return y&&y.static&&y.staticContext&&(l.route.errorElement||l.route.ErrorBoundary)&&(y.staticContext._deepestRenderedBoundaryId=l.route.id),W.createElement(gi.Provider,{value:h},g)}function gp(u,h,l,g){var y;if(h===void 0&&(h=[]),l===void 0&&(l=null),g===void 0&&(g=null),u==null){var x;if(!l)return null;if(l.errors)u=l.matches;else if((x=g)!=null&&x.v7_partialHydration&&h.length===0&&!l.initialized&&l.matches.length>0)u=l.matches;else return null}let b=u,I=(y=l)==null?void 0:y.errors;if(I!=null){let A=b.findIndex(k=>k.route.id&&I?.[k.route.id]!==void 0);A>=0||an(!1),b=b.slice(0,Math.min(b.length,A+1))}let S=!1,v=-1;if(l&&g&&g.v7_partialHydration)for(let A=0;A<b.length;A++){let k=b[A];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(v=A),k.route.id){let{loaderData:O,errors:X}=l,q=k.route.loader&&O[k.route.id]===void 0&&(!X||X[k.route.id]===void 0);if(k.route.lazy||q){S=!0,v>=0?b=b.slice(0,v+1):b=[b[0]];break}}}return b.reduceRight((A,k,O)=>{let X,q=!1,F=null,V=null;l&&(X=I&&k.route.id?I[k.route.id]:void 0,F=k.route.errorElement||hp,S&&(v<0&&O===0?(Cp("route-fallback"),q=!0,V=null):v===O&&(q=!0,V=k.route.hydrateFallbackElement||null)));let Y=h.concat(b.slice(0,O+1)),R=()=>{let N;return X?N=F:q?N=V:k.route.Component?N=W.createElement(k.route.Component,null):k.route.element?N=k.route.element:N=A,W.createElement(pp,{match:k,routeContext:{outlet:A,matches:Y,isDataRoute:l!=null},children:N})};return l&&(k.route.ErrorBoundary||k.route.errorElement||O===0)?W.createElement(fp,{location:l.location,revalidation:l.revalidation,component:F,error:X,children:R(),routeContext:{outlet:null,matches:Y,isDataRoute:!0}}):R()},null)}var $0=(function(u){return u.UseBlocker="useBlocker",u.UseRevalidator="useRevalidator",u.UseNavigateStable="useNavigate",u})($0||{}),Q0=(function(u){return u.UseBlocker="useBlocker",u.UseLoaderData="useLoaderData",u.UseActionData="useActionData",u.UseRouteError="useRouteError",u.UseNavigation="useNavigation",u.UseRouteLoaderData="useRouteLoaderData",u.UseMatches="useMatches",u.UseRevalidator="useRevalidator",u.UseNavigateStable="useNavigate",u.UseRouteId="useRouteId",u})(Q0||{});function mp(u){let h=W.useContext(Fd);return h||an(!1),h}function xp(u){let h=W.useContext(op);return h||an(!1),h}function yp(u){let h=W.useContext(gi);return h||an(!1),h}function J0(u){let h=yp(),l=h.matches[h.matches.length-1];return l.route.id||an(!1),l.route.id}function vp(){var u;let h=W.useContext(Z0),l=xp(),g=J0();return h!==void 0?h:(u=l.errors)==null?void 0:u[g]}function wp(){let{router:u}=mp($0.UseNavigateStable),h=J0(Q0.UseNavigateStable),l=W.useRef(!1);return q0(()=>{l.current=!0}),W.useCallback(function(y,x){x===void 0&&(x={}),l.current&&(typeof y=="number"?u.navigate(y):u.navigate(y,ua({fromRouteId:h},x)))},[u,h])}const $h={};function Cp(u,h,l){$h[u]||($h[u]=!0)}function bp(u,h){u?.v7_startTransition,u?.v7_relativeSplatPath}function ef(u){let{to:h,replace:l,state:g,relative:y}=u;po()||an(!1);let{future:x,static:b}=W.useContext(Ki),{matches:I}=W.useContext(gi),{pathname:S}=Ts(),v=Wn(),A=zd(h,Ld(I,x.v7_relativeSplatPath),S,y==="path"),k=JSON.stringify(A);return W.useEffect(()=>v(JSON.parse(k),{replace:l,state:g,relative:y}),[v,k,y,l,g]),null}function Yn(u){an(!1)}function Sp(u){let{basename:h="/",children:l=null,location:g,navigationType:y=Hi.Pop,navigator:x,static:b=!1,future:I}=u;po()&&an(!1);let S=h.replace(/^\/*/,"/"),v=W.useMemo(()=>({basename:S,navigator:x,static:b,future:ua({v7_relativeSplatPath:!1},I)}),[S,I,x,b]);typeof g=="string"&&(g=fo(g));let{pathname:A="/",search:k="",hash:O="",state:X=null,key:q="default"}=g,F=W.useMemo(()=>{let V=Bd(A,S);return V==null?null:{location:{pathname:V,search:k,hash:O,state:X,key:q},navigationType:y}},[S,A,k,O,X,q,y]);return F==null?null:W.createElement(Ki.Provider,{value:v},W.createElement(Ll.Provider,{children:l,value:F}))}function Ep(u){let{children:h,location:l}=u;return cp(Ed(h),l)}new Promise(()=>{});function Ed(u,h){h===void 0&&(h=[]);let l=[];return W.Children.forEach(u,(g,y)=>{if(!W.isValidElement(g))return;let x=[...h,y];if(g.type===W.Fragment){l.push.apply(l,Ed(g.props.children,x));return}g.type!==Yn&&an(!1),!g.props.index||!g.props.children||an(!1);let b={id:g.props.id||x.join("-"),caseSensitive:g.props.caseSensitive,element:g.props.element,Component:g.props.Component,index:g.props.index,path:g.props.path,loader:g.props.loader,action:g.props.action,errorElement:g.props.errorElement,ErrorBoundary:g.props.ErrorBoundary,hasErrorBoundary:g.props.ErrorBoundary!=null||g.props.errorElement!=null,shouldRevalidate:g.props.shouldRevalidate,handle:g.props.handle,lazy:g.props.lazy};g.props.children&&(b.children=Ed(g.props.children,x)),l.push(b)}),l}function Ad(){return Ad=Object.assign?Object.assign.bind():function(u){for(var h=1;h<arguments.length;h++){var l=arguments[h];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(u[g]=l[g])}return u},Ad.apply(this,arguments)}function Ap(u,h){if(u==null)return{};var l={},g=Object.keys(u),y,x;for(x=0;x<g.length;x++)y=g[x],!(h.indexOf(y)>=0)&&(l[y]=u[y]);return l}function Ip(u){return!!(u.metaKey||u.altKey||u.ctrlKey||u.shiftKey)}function jp(u,h){return u.button===0&&(!h||h==="_self")&&!Ip(u)}const kp=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Np="6";try{window.__reactRouterVersion=Np}catch{}const Tp="startTransition",Qh=I1[Tp];function _p(u){let{basename:h,children:l,future:g,window:y}=u,x=W.useRef();x.current==null&&(x.current=O1({window:y,v5Compat:!0}));let b=x.current,[I,S]=W.useState({action:b.action,location:b.location}),{v7_startTransition:v}=g||{},A=W.useCallback(k=>{v&&Qh?Qh(()=>S(k)):S(k)},[S,v]);return W.useLayoutEffect(()=>b.listen(A),[b,A]),W.useEffect(()=>bp(g),[g]),W.createElement(Sp,{basename:h,children:l,location:I.location,navigationType:I.action,navigator:b,future:g})}const Rp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Op=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kr=W.forwardRef(function(h,l){let{onClick:g,relative:y,reloadDocument:x,replace:b,state:I,target:S,to:v,preventScrollReset:A,viewTransition:k}=h,O=Ap(h,kp),{basename:X}=W.useContext(Ki),q,F=!1;if(typeof v=="string"&&Op.test(v)&&(q=v,Rp))try{let N=new URL(window.location.href),M=v.startsWith("//")?new URL(N.protocol+v):new URL(v),D=Bd(M.pathname,X);M.origin===N.origin&&D!=null?v=D+M.search+M.hash:F=!0}catch{}let V=ap(v,{relative:y}),Y=Dp(v,{replace:b,state:I,target:S,preventScrollReset:A,relative:y,viewTransition:k});function R(N){g&&g(N),N.defaultPrevented||Y(N)}return W.createElement("a",Ad({},O,{href:q||V,onClick:F||x?g:R,ref:l,target:S}))});var Jh;(function(u){u.UseScrollRestoration="useScrollRestoration",u.UseSubmit="useSubmit",u.UseSubmitFetcher="useSubmitFetcher",u.UseFetcher="useFetcher",u.useViewTransitionState="useViewTransitionState"})(Jh||(Jh={}));var e0;(function(u){u.UseFetcher="useFetcher",u.UseFetchers="useFetchers",u.UseScrollRestoration="useScrollRestoration"})(e0||(e0={}));function Dp(u,h){let{target:l,replace:g,state:y,preventScrollReset:x,relative:b,viewTransition:I}=h===void 0?{}:h,S=Wn(),v=Ts(),A=K0(u,{relative:b});return W.useCallback(k=>{if(jp(k,l)){k.preventDefault();let O=g!==void 0?g:_l(v)===_l(A);S(u,{replace:O,state:y,preventScrollReset:x,relative:b,viewTransition:I})}},[v,S,A,g,y,l,u,x,b,I])}const Pp="modulepreload",Mp=function(u){return"/"+u},t0={},jr=function(h,l,g){let y=Promise.resolve();if(l&&l.length>0){let S=function(v){return Promise.all(v.map(A=>Promise.resolve(A).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const b=document.querySelector("meta[property=csp-nonce]"),I=b?.nonce||b?.getAttribute("nonce");y=S(l.map(v=>{if(v=Mp(v),v in t0)return;t0[v]=!0;const A=v.endsWith(".css"),k=A?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${k}`))return;const O=document.createElement("link");if(O.rel=A?"stylesheet":Pp,A||(O.as="script"),O.crossOrigin="",O.href=v,I&&O.setAttribute("nonce",I),document.head.appendChild(O),A)return new Promise((X,q)=>{O.addEventListener("load",X),O.addEventListener("error",()=>q(new Error(`Unable to preload CSS for ${v}`)))})}))}function x(b){const I=new Event("vite:preloadError",{cancelable:!0});if(I.payload=b,window.dispatchEvent(I),!I.defaultPrevented)throw b}return y.then(b=>{for(const I of b||[])I.status==="rejected"&&x(I.reason);return h().catch(x)})};var Is;(function(u){u.Unimplemented="UNIMPLEMENTED",u.Unavailable="UNAVAILABLE"})(Is||(Is={}));class As extends Error{constructor(h,l,g){super(h),this.message=h,this.code=l,this.data=g}}const Bp=u=>{var h,l;return u?.androidBridge?"android":!((l=(h=u?.webkit)===null||h===void 0?void 0:h.messageHandlers)===null||l===void 0)&&l.bridge?"ios":"web"},Lp=u=>{const h=u.CapacitorCustomPlatform||null,l=u.Capacitor||{},g=l.Plugins=l.Plugins||{},y=()=>h!==null?h.name:Bp(u),x=()=>y()!=="web",b=k=>{const O=v.get(k);return!!(O?.platforms.has(y())||I(k))},I=k=>{var O;return(O=l.PluginHeaders)===null||O===void 0?void 0:O.find(X=>X.name===k)},S=k=>u.console.error(k),v=new Map,A=(k,O={})=>{const X=v.get(k);if(X)return console.warn(`Capacitor plugin "${k}" already registered. Cannot register plugins twice.`),X.proxy;const q=y(),F=I(k);let V;const Y=async()=>(!V&&q in O?V=typeof O[q]=="function"?V=await O[q]():V=O[q]:h!==null&&!V&&"web"in O&&(V=typeof O.web=="function"?V=await O.web():V=O.web),V),R=(Q,he)=>{var Ae,we;if(F){const xe=F?.methods.find(le=>he===le.name);if(xe)return xe.rtype==="promise"?le=>l.nativePromise(k,he.toString(),le):(le,ne)=>l.nativeCallback(k,he.toString(),le,ne);if(Q)return(Ae=Q[he])===null||Ae===void 0?void 0:Ae.bind(Q)}else{if(Q)return(we=Q[he])===null||we===void 0?void 0:we.bind(Q);throw new As(`"${k}" plugin is not implemented on ${q}`,Is.Unimplemented)}},N=Q=>{let he;const Ae=(...we)=>{const xe=Y().then(le=>{const ne=R(le,Q);if(ne){const G=ne(...we);return he=G?.remove,G}else throw new As(`"${k}.${Q}()" is not implemented on ${q}`,Is.Unimplemented)});return Q==="addListener"&&(xe.remove=async()=>he()),xe};return Ae.toString=()=>`${Q.toString()}() { [capacitor code] }`,Object.defineProperty(Ae,"name",{value:Q,writable:!1,configurable:!1}),Ae},M=N("addListener"),D=N("removeListener"),Z=(Q,he)=>{const Ae=M({eventName:Q},he),we=async()=>{const le=await Ae;D({eventName:Q,callbackId:le},he)},xe=new Promise(le=>Ae.then(()=>le({remove:we})));return xe.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await we()},xe},z=new Proxy({},{get(Q,he){switch(he){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return F?Z:M;case"removeListener":return D;default:return N(he)}}});return g[k]=z,v.set(k,{name:k,proxy:z,platforms:new Set([...Object.keys(O),...F?[q]:[]])}),z};return l.convertFileSrc||(l.convertFileSrc=k=>k),l.getPlatform=y,l.handleError=S,l.isNativePlatform=x,l.isPluginAvailable=b,l.registerPlugin=A,l.Exception=As,l.DEBUG=!!l.DEBUG,l.isLoggingEnabled=!!l.isLoggingEnabled,l},zp=u=>u.Capacitor=Lp(u),Rl=zp(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),$i=Rl.registerPlugin;class pa{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(h,l){let g=!1;this.listeners[h]||(this.listeners[h]=[],g=!0),this.listeners[h].push(l);const x=this.windowListeners[h];x&&!x.registered&&this.addWindowListener(x),g&&this.sendRetainedArgumentsForEvent(h);const b=async()=>this.removeListener(h,l);return Promise.resolve({remove:b})}async removeAllListeners(){this.listeners={};for(const h in this.windowListeners)this.removeWindowListener(this.windowListeners[h]);this.windowListeners={}}notifyListeners(h,l,g){const y=this.listeners[h];if(!y){if(g){let x=this.retainedEventArguments[h];x||(x=[]),x.push(l),this.retainedEventArguments[h]=x}return}y.forEach(x=>x(l))}hasListeners(h){var l;return!!(!((l=this.listeners[h])===null||l===void 0)&&l.length)}registerWindowListener(h,l){this.windowListeners[l]={registered:!1,windowEventName:h,pluginEventName:l,handler:g=>{this.notifyListeners(l,g)}}}unimplemented(h="not implemented"){return new Rl.Exception(h,Is.Unimplemented)}unavailable(h="not available"){return new Rl.Exception(h,Is.Unavailable)}async removeListener(h,l){const g=this.listeners[h];if(!g)return;const y=g.indexOf(l);this.listeners[h].splice(y,1),this.listeners[h].length||this.removeWindowListener(this.windowListeners[h])}addWindowListener(h){window.addEventListener(h.windowEventName,h.handler),h.registered=!0}removeWindowListener(h){h&&(window.removeEventListener(h.windowEventName,h.handler),h.registered=!1)}sendRetainedArgumentsForEvent(h){const l=this.retainedEventArguments[h];l&&(delete this.retainedEventArguments[h],l.forEach(g=>{this.notifyListeners(h,g)}))}}const n0=u=>encodeURIComponent(u).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),r0=u=>u.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Fp extends pa{async getCookies(){const h=document.cookie,l={};return h.split(";").forEach(g=>{if(g.length<=0)return;let[y,x]=g.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");y=r0(y).trim(),x=r0(x).trim(),l[y]=x}),l}async setCookie(h){try{const l=n0(h.key),g=n0(h.value),y=`; expires=${(h.expires||"").replace("expires=","")}`,x=(h.path||"/").replace("path=",""),b=h.url!=null&&h.url.length>0?`domain=${h.url}`:"";document.cookie=`${l}=${g||""}${y}; path=${x}; ${b};`}catch(l){return Promise.reject(l)}}async deleteCookie(h){try{document.cookie=`${h.key}=; Max-Age=0`}catch(l){return Promise.reject(l)}}async clearCookies(){try{const h=document.cookie.split(";")||[];for(const l of h)document.cookie=l.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(h){return Promise.reject(h)}}async clearAllCookies(){try{await this.clearCookies()}catch(h){return Promise.reject(h)}}}$i("CapacitorCookies",{web:()=>new Fp});const Wp=async u=>new Promise((h,l)=>{const g=new FileReader;g.onload=()=>{const y=g.result;h(y.indexOf(",")>=0?y.split(",")[1]:y)},g.onerror=y=>l(y),g.readAsDataURL(u)}),Up=(u={})=>{const h=Object.keys(u);return Object.keys(u).map(y=>y.toLocaleLowerCase()).reduce((y,x,b)=>(y[x]=u[h[b]],y),{})},Vp=(u,h=!0)=>u?Object.entries(u).reduce((g,y)=>{const[x,b]=y;let I,S;return Array.isArray(b)?(S="",b.forEach(v=>{I=h?encodeURIComponent(v):v,S+=`${x}=${I}&`}),S.slice(0,-1)):(I=h?encodeURIComponent(b):b,S=`${x}=${I}`),`${g}&${S}`},"").substr(1):null,tf=(u,h={})=>{const l=Object.assign({method:u.method||"GET",headers:u.headers},h),y=Up(u.headers)["content-type"]||"";if(typeof u.data=="string")l.body=u.data;else if(y.includes("application/x-www-form-urlencoded")){const x=new URLSearchParams;for(const[b,I]of Object.entries(u.data||{}))x.set(b,I);l.body=x.toString()}else if(y.includes("multipart/form-data")||u.data instanceof FormData){const x=new FormData;if(u.data instanceof FormData)u.data.forEach((I,S)=>{x.append(S,I)});else for(const I of Object.keys(u.data))x.append(I,u.data[I]);l.body=x;const b=new Headers(l.headers);b.delete("content-type"),l.headers=b}else(y.includes("application/json")||typeof u.data=="object")&&(l.body=JSON.stringify(u.data));return l};class Gp extends pa{async request(h){const l=tf(h,h.webFetchExtra),g=Vp(h.params,h.shouldEncodeUrlParams),y=g?`${h.url}?${g}`:h.url,x=await fetch(y,l),b=x.headers.get("content-type")||"";let{responseType:I="text"}=x.ok?h:{};b.includes("application/json")&&(I="json");let S,v;switch(I){case"arraybuffer":case"blob":v=await x.blob(),S=await Wp(v);break;case"json":S=await x.json();break;default:S=await x.text()}const A={};return x.headers.forEach((k,O)=>{A[O]=k}),{data:S,headers:A,status:x.status,url:x.url}}async get(h){return this.request(Object.assign(Object.assign({},h),{method:"GET"}))}async post(h){return this.request(Object.assign(Object.assign({},h),{method:"POST"}))}async put(h){return this.request(Object.assign(Object.assign({},h),{method:"PUT"}))}async patch(h){return this.request(Object.assign(Object.assign({},h),{method:"PATCH"}))}async delete(h){return this.request(Object.assign(Object.assign({},h),{method:"DELETE"}))}}$i("CapacitorHttp",{web:()=>new Gp});var Id;(function(u){u.Dark="DARK",u.Light="LIGHT",u.Default="DEFAULT"})(Id||(Id={}));var jd;(function(u){u.StatusBar="StatusBar",u.NavigationBar="NavigationBar"})(jd||(jd={}));class Hp extends pa{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}$i("SystemBars",{web:()=>new Hp});const kd=Object.freeze(Object.defineProperty({__proto__:null,Capacitor:Rl,CapacitorException:As,get ExceptionCode(){return Is},get SystemBarType(){return jd},get SystemBarsStyle(){return Id},WebPlugin:pa,buildRequestInit:tf,registerPlugin:$i},Symbol.toStringTag,{value:"Module"})),i0=$i("App",{web:()=>jr(()=>import("./web-DOXfH-U_.js"),[]).then(u=>new u.AppWeb)});var s0;(function(u){u[u.NONE=0]="NONE",u[u.TOUCH_ID=1]="TOUCH_ID",u[u.FACE_ID=2]="FACE_ID",u[u.FINGERPRINT=3]="FINGERPRINT",u[u.FACE_AUTHENTICATION=4]="FACE_AUTHENTICATION",u[u.IRIS_AUTHENTICATION=5]="IRIS_AUTHENTICATION",u[u.MULTIPLE=6]="MULTIPLE"})(s0||(s0={}));var o0;(function(u){u[u.NONE=0]="NONE",u[u.STRONG=1]="STRONG",u[u.WEAK=2]="WEAK"})(o0||(o0={}));var a0;(function(u){u[u.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",u[u.BIOMETRICS_UNAVAILABLE=1]="BIOMETRICS_UNAVAILABLE",u[u.USER_LOCKOUT=2]="USER_LOCKOUT",u[u.BIOMETRICS_NOT_ENROLLED=3]="BIOMETRICS_NOT_ENROLLED",u[u.USER_TEMPORARY_LOCKOUT=4]="USER_TEMPORARY_LOCKOUT",u[u.AUTHENTICATION_FAILED=10]="AUTHENTICATION_FAILED",u[u.APP_CANCEL=11]="APP_CANCEL",u[u.INVALID_CONTEXT=12]="INVALID_CONTEXT",u[u.NOT_INTERACTIVE=13]="NOT_INTERACTIVE",u[u.PASSCODE_NOT_SET=14]="PASSCODE_NOT_SET",u[u.SYSTEM_CANCEL=15]="SYSTEM_CANCEL",u[u.USER_CANCEL=16]="USER_CANCEL",u[u.USER_FALLBACK=17]="USER_FALLBACK"})(a0||(a0={}));const io=$i("NativeBiometric",{web:()=>jr(()=>import("./web-BQzbFh_O.js"),[]).then(u=>new u.NativeBiometricWeb)}),so={async isAvailable(){try{return(await io.isAvailable()).isAvailable}catch(u){return console.error("Biometric not available:",u),!1}},async authenticate(){try{const u=await io.verifyIdentity({reason:"Authenticate to access Guest Scanner",title:"Biometric Authentication",subtitle:"Please verify your identity",description:"Use your fingerprint or face to login",maxAttempts:3});return console.log("Biometric verification result:",u),!(u&&u.verified===!1)}catch(u){return console.error("Biometric authentication failed:",{code:u.code,message:u.message,error:u}),u.code===10?console.log("User cancelled biometric auth"):u.code===13&&console.log("Too many biometric auth attempts"),!1}},async saveCredentials(u,h,l){try{await io.setCredentials({username:h,password:l,server:u})}catch(g){console.error("Failed to save credentials:",g)}},async getCredentials(u){try{return await io.getCredentials({server:u})}catch(h){return console.error("Failed to get credentials:",h),null}},async hasCredentials(u){try{const h=await io.getCredentials({server:u});return h&&h.username&&h.password}catch{return!1}},async deleteCredentials(u){try{await io.deleteCredentials({server:u})}catch(h){console.error("Failed to delete credentials:",h)}}},l0=Object.freeze(Object.defineProperty({__proto__:null,BiometricService:so},Symbol.toStringTag,{value:"Module"})),oo=async(u,h={},l=3,g=3e4)=>{for(let y=0;y<l;y++)try{const x=new AbortController,b=setTimeout(()=>x.abort(),g),I=await fetch(u,{...h,signal:x.signal});return clearTimeout(b),I}catch(x){if(y===l-1)throw x;const I=Math.pow(2,y)*1e3;console.log(`Fetch failed (attempt ${y+1}/${l}), retrying in ${I}ms...`),await new Promise(S=>setTimeout(S,I))}};var hd={},c0;function Xp(){return c0||(c0=1,(function(u){Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function h(Y,R){const N=Y.indexOf(R);N!==-1&&Y.splice(N,1)}const l=()=>{};var g=(Y=>(Y[Y.None=0]="None",Y[Y.Fatal=1]="Fatal",Y[Y.Error=2]="Error",Y[Y.Warn=3]="Warn",Y[Y.Info=4]="Info",Y[Y.Debug=5]="Debug",Y[Y.Verbose=6]="Verbose",Y))(g||{});class y{setLogLevel(R){window.cordova.exec(l,l,"OneSignalPush","setLogLevel",[R])}setAlertLevel(R){window.cordova.exec(l,l,"OneSignalPush","setAlertLevel",[R])}}class x{constructor(){this._inAppMessageClickListeners=[],this._willDisplayInAppMessageListeners=[],this._didDisplayInAppMessageListeners=[],this._willDismissInAppMessageListeners=[],this._didDismissInAppMessageListeners=[]}_processFunctionList(R,N){for(let M=0;M<R.length;M++)R[M](N)}addEventListener(R,N){if(R==="click"){this._inAppMessageClickListeners.push(N);const M=D=>{this._processFunctionList(this._inAppMessageClickListeners,D)};window.cordova.exec(M,l,"OneSignalPush","setInAppMessageClickHandler",[])}else if(R==="willDisplay"){this._willDisplayInAppMessageListeners.push(N);const M=D=>{this._processFunctionList(this._willDisplayInAppMessageListeners,D)};window.cordova.exec(M,l,"OneSignalPush","setOnWillDisplayInAppMessageHandler",[])}else if(R==="didDisplay"){this._didDisplayInAppMessageListeners.push(N);const M=D=>{this._processFunctionList(this._didDisplayInAppMessageListeners,D)};window.cordova.exec(M,l,"OneSignalPush","setOnDidDisplayInAppMessageHandler",[])}else if(R==="willDismiss"){this._willDismissInAppMessageListeners.push(N);const M=D=>{this._processFunctionList(this._willDismissInAppMessageListeners,D)};window.cordova.exec(M,l,"OneSignalPush","setOnWillDismissInAppMessageHandler",[])}else if(R==="didDismiss"){this._didDismissInAppMessageListeners.push(N);const M=D=>{this._processFunctionList(this._didDismissInAppMessageListeners,D)};window.cordova.exec(M,l,"OneSignalPush","setOnDidDismissInAppMessageHandler",[])}}removeEventListener(R,N){R==="click"?h(this._inAppMessageClickListeners,N):R==="willDisplay"?h(this._willDisplayInAppMessageListeners,N):R==="didDisplay"?h(this._didDisplayInAppMessageListeners,N):R==="willDismiss"?h(this._willDismissInAppMessageListeners,N):R==="didDismiss"&&h(this._didDismissInAppMessageListeners,N)}addTrigger(R,N){const M={[R]:N};this.addTriggers(M)}addTriggers(R){Object.keys(R).forEach(function(N){typeof R[N]!="string"&&(R[N]=JSON.stringify(R[N]))}),window.cordova.exec(l,l,"OneSignalPush","addTriggers",[R])}removeTrigger(R){this.removeTriggers([R])}removeTriggers(R){Array.isArray(R)||console.error("OneSignal: removeTriggers: argument must be of type Array"),window.cordova.exec(l,l,"OneSignalPush","removeTriggers",[R])}clearTriggers(){window.cordova.exec(l,l,"OneSignalPush","clearTriggers")}setPaused(R){window.cordova.exec(l,l,"OneSignalPush","setPaused",[R])}getPaused(){return new Promise((R,N)=>{window.cordova.exec(R,N,"OneSignalPush","isPaused",[])})}}class b{enter(R,N,M,D){M==null&&(M=l),D==null&&(D=l),window.cordova.exec(M,D,"OneSignalPush","enterLiveActivity",[R,N])}exit(R,N,M){N==null&&(N=l),M==null&&(M=l),window.cordova.exec(N,M,"OneSignalPush","exitLiveActivity",[R])}setPushToStartToken(R,N){window.cordova.exec(l,l,"OneSignalPush","setPushToStartToken",[R,N])}removePushToStartToken(R){window.cordova.exec(l,l,"OneSignalPush","removePushToStartToken",[R])}setupDefault(R){window.cordova.exec(l,l,"OneSignalPush","setupDefaultLiveActivity",[R])}startDefault(R,N,M){window.cordova.exec(l,l,"OneSignalPush","startDefaultLiveActivity",[R,N,M])}}class I{requestPermission(){window.cordova.exec(l,l,"OneSignalPush","requestLocationPermission",[])}setShared(R){window.cordova.exec(l,l,"OneSignalPush","setLocationShared",[R])}isShared(){return new Promise((R,N)=>{window.cordova.exec(R,N,"OneSignalPush","isLocationShared",[])})}}class S{constructor(R){this.notificationId=R.notificationId,this.body=R.body,this.title=R.title,this.additionalData=R.additionalData,typeof R.rawPayload=="string"?this.rawPayload=JSON.parse(R.rawPayload):this.rawPayload=R.rawPayload,this.launchURL=R.launchURL,this.sound=R.sound,R.actionButtons&&(this.actionButtons=R.actionButtons),R.groupKey&&(this.groupKey=R.groupKey),R.ledColor&&(this.ledColor=R.ledColor),typeof R.priority<"u"&&(this.priority=R.priority),R.smallIcon&&(this.smallIcon=R.smallIcon),R.largeIcon&&(this.largeIcon=R.largeIcon),R.bigPicture&&(this.bigPicture=R.bigPicture),R.collapseId&&(this.collapseId=R.collapseId),R.groupMessage&&(this.groupMessage=R.groupMessage),R.fromProjectNumber&&(this.fromProjectNumber=R.fromProjectNumber),R.smallIconAccentColor&&(this.smallIconAccentColor=R.smallIconAccentColor),R.lockScreenVisibility&&(this.lockScreenVisibility=R.lockScreenVisibility),R.androidNotificationId&&(this.androidNotificationId=R.androidNotificationId),R.groupedNotifications&&R.groupedNotifications.length&&(this.groupedNotifications=R.groupedNotifications),R.badge&&(this.badge=R.badge),R.category&&(this.category=R.category),R.threadId&&(this.threadId=R.threadId),R.subtitle&&(this.subtitle=R.subtitle),R.templateId&&(this.templateId=R.templateId),R.attachments&&(this.attachments=R.attachments),R.templateName&&(this.templateName=R.templateName),R.mutableContent&&(this.mutableContent=R.mutableContent),R.badgeIncrement&&(this.badgeIncrement=R.badgeIncrement),R.contentAvailable&&(this.contentAvailable=R.contentAvailable),R.relevanceScore&&(this.relevanceScore=R.relevanceScore),R.interruptionLevel&&(this.interruptionLevel=R.interruptionLevel)}display(){window.cordova.exec(l,l,"OneSignalPush","displayNotification",[this.notificationId])}}class v{constructor(R){this.notification=new S(R)}preventDefault(R=!1){window.cordova.exec(l,l,"OneSignalPush","preventDefault",[this.notification.notificationId,R])}getNotification(){return this.notification}}var A=(Y=>(Y[Y.NotDetermined=0]="NotDetermined",Y[Y.Denied=1]="Denied",Y[Y.Authorized=2]="Authorized",Y[Y.Provisional=3]="Provisional",Y[Y.Ephemeral=4]="Ephemeral",Y))(A||{});class k{constructor(){this._permissionObserverList=[],this._notificationClickedListeners=[],this._notificationWillDisplayListeners=[]}_processFunctionList(R,N){for(let M=0;M<R.length;M++)R[M](N)}_setPropertyAndObserver(){const R=N=>{this._permission=N};window.cordova.exec(R,l,"OneSignalPush","getPermissionInternal"),this.addEventListener("permissionChange",N=>{this._permission=N})}hasPermission(){return this._permission||!1}getPermissionAsync(){return new Promise((R,N)=>{window.cordova.exec(R,N,"OneSignalPush","getPermissionInternal")})}permissionNative(){return new Promise((R,N)=>{window.cordova.exec(R,N,"OneSignalPush","permissionNative",[])})}requestPermission(R){let N=R??!1;return new Promise((M,D)=>{window.cordova.exec(M,D,"OneSignalPush","requestPermission",[N])})}canRequestPermission(){return new Promise((R,N)=>{window.cordova.exec(R,N,"OneSignalPush","canRequestPermission",[])})}registerForProvisionalAuthorization(R=l){window.cordova.exec(R,l,"OneSignalPush","registerForProvisionalAuthorization",[])}addEventListener(R,N){if(R==="click"){this._notificationClickedListeners.push(N);const M=D=>{this._processFunctionList(this._notificationClickedListeners,D)};window.cordova.exec(M,l,"OneSignalPush","addNotificationClickListener",[])}else if(R==="foregroundWillDisplay"){this._notificationWillDisplayListeners.push(N);const M=D=>{this._notificationWillDisplayListeners.forEach(Z=>{Z(new v(D))}),window.cordova.exec(l,l,"OneSignalPush","proceedWithWillDisplay",[D.notificationId])};window.cordova.exec(M,l,"OneSignalPush","addForegroundLifecycleListener",[])}else if(R==="permissionChange"){this._permissionObserverList.push(N);const M=D=>{this._processFunctionList(this._permissionObserverList,D)};window.cordova.exec(M,l,"OneSignalPush","addPermissionObserver",[])}}removeEventListener(R,N){R==="click"?h(this._notificationClickedListeners,N):R==="foregroundWillDisplay"?h(this._notificationWillDisplayListeners,N):R==="permissionChange"&&h(this._permissionObserverList,N)}clearAll(){window.cordova.exec(l,l,"OneSignalPush","clearAllNotifications",[])}removeNotification(R){window.cordova.exec(l,l,"OneSignalPush","removeNotification",[R])}removeGroupedNotifications(R){window.cordova.exec(l,l,"OneSignalPush","removeGroupedNotifications",[R])}}class O{addOutcome(R){window.cordova.exec(l,l,"OneSignalPush","addOutcome",[R])}addUniqueOutcome(R){window.cordova.exec(l,l,"OneSignalPush","addUniqueOutcome",[R])}addOutcomeWithValue(R,N){window.cordova.exec(l,l,"OneSignalPush","addOutcomeWithValue",[R,N])}}class X{constructor(){this._subscriptionObserverList=[]}_processFunctionList(R,N){for(let M=0;M<R.length;M++)R[M](N)}_setPropertiesAndObserver(){const R=D=>{this._id=D};window.cordova.exec(R,l,"OneSignalPush","getPushSubscriptionId");const N=D=>{this._token=D};window.cordova.exec(N,l,"OneSignalPush","getPushSubscriptionToken");const M=D=>{this._optedIn=D};window.cordova.exec(M,l,"OneSignalPush","getPushSubscriptionOptedIn"),this.addEventListener("change",D=>{this._id=D.current.id,this._token=D.current.token,this._optedIn=D.current.optedIn})}get id(){return console.warn("OneSignal: This method has been deprecated. Use getIdAsync instead for getting push subscription id."),this._id}get token(){return console.warn("OneSignal: This method has been deprecated. Use getTokenAsync instead for getting push subscription token."),this._token}get optedIn(){return console.warn("OneSignal: This method has been deprecated. Use getOptedInAsync instead for getting push subscription opted in status."),this._optedIn||!1}getIdAsync(){return new Promise((R,N)=>{window.cordova.exec(R,N,"OneSignalPush","getPushSubscriptionId")})}getTokenAsync(){return new Promise((R,N)=>{window.cordova.exec(R,N,"OneSignalPush","getPushSubscriptionToken")})}getOptedInAsync(){return new Promise((R,N)=>{window.cordova.exec(R,N,"OneSignalPush","getPushSubscriptionOptedIn")})}addEventListener(R,N){this._subscriptionObserverList.push(N);const M=D=>{this._processFunctionList(this._subscriptionObserverList,D)};window.cordova.exec(M,l,"OneSignalPush","addPushSubscriptionObserver",[])}removeEventListener(R,N){h(this._subscriptionObserverList,N)}optIn(){window.cordova.exec(l,l,"OneSignalPush","optInPushSubscription")}optOut(){window.cordova.exec(l,l,"OneSignalPush","optOutPushSubscription")}}class q{constructor(){this.pushSubscription=new X,this._userStateObserverList=[]}_processFunctionList(R,N){for(let M=0;M<R.length;M++)R[M](N)}setLanguage(R){window.cordova.exec(l,l,"OneSignalPush","setLanguage",[R])}addAlias(R,N){const M={[R]:N};window.cordova.exec(l,l,"OneSignalPush","addAliases",[M])}addAliases(R){window.cordova.exec(l,l,"OneSignalPush","addAliases",[R])}removeAlias(R){window.cordova.exec(l,l,"OneSignalPush","removeAliases",[R])}removeAliases(R){window.cordova.exec(l,l,"OneSignalPush","removeAliases",R)}addEmail(R){window.cordova.exec(l,l,"OneSignalPush","addEmail",[R])}removeEmail(R){window.cordova.exec(l,l,"OneSignalPush","removeEmail",[R])}addSms(R){window.cordova.exec(l,l,"OneSignalPush","addSms",[R])}removeSms(R){window.cordova.exec(l,l,"OneSignalPush","removeSms",[R])}addTag(R,N){const M={[R]:N};window.cordova.exec(l,l,"OneSignalPush","addTags",[M])}addTags(R){const N=R;Object.keys(R).forEach(function(M){typeof N[M]!="string"&&(N[M]=JSON.stringify(N[M]))}),window.cordova.exec(l,l,"OneSignalPush","addTags",[N])}removeTag(R){window.cordova.exec(l,l,"OneSignalPush","removeTags",[R])}removeTags(R){window.cordova.exec(l,l,"OneSignalPush","removeTags",R)}getTags(){return new Promise((R,N)=>{window.cordova.exec(R,N,"OneSignalPush","getTags",[])})}addEventListener(R,N){this._userStateObserverList.push(N);const M=D=>{this._processFunctionList(this._userStateObserverList,D)};window.cordova.exec(M,l,"OneSignalPush","addUserStateObserver",[])}removeEventListener(R,N){h(this._userStateObserverList,N)}getOnesignalId(){return new Promise((R,N)=>{window.cordova.exec(R,N,"OneSignalPush","getOnesignalId",[])})}getExternalId(){return new Promise((R,N)=>{window.cordova.exec(R,N,"OneSignalPush","getExternalId",[])})}}class F{constructor(){this.User=new q,this.Debug=new y,this.Session=new O,this.Location=new I,this.InAppMessages=new x,this.Notifications=new k,this.LiveActivities=new b,this._appID=""}initialize(R){this._appID=R;const N=()=>{this.User.pushSubscription._setPropertiesAndObserver(),this.Notifications._setPropertyAndObserver()};window.cordova.exec(N,l,"OneSignalPush","init",[this._appID])}login(R){window.cordova.exec(l,l,"OneSignalPush","login",[R])}logout(){window.cordova.exec(l,l,"OneSignalPush","logout")}setConsentRequired(R){window.cordova.exec(l,l,"OneSignalPush","setPrivacyConsentRequired",[R])}setConsentGiven(R){window.cordova.exec(l,l,"OneSignalPush","setPrivacyConsentGiven",[R])}}const V=new F;window.plugins||(window.plugins={}),window.plugins.OneSignal||(window.plugins.OneSignal=V),u.LogLevel=g,u.NotificationWillDisplayEvent=v,u.OSNotification=S,u.OSNotificationPermission=A,u.OneSignalPlugin=F,u.default=V})(hd)),hd}Xp();const Yp="a2ee0c7f-460f-4d5e-a36f-635a0492d6b5",Es="https://gatherly-backend-3vmv.onrender.com";class Zp{constructor(){this.initialized=!1,this.userId=null,this.playerId=null}getOneSignal(){return window.plugins?.OneSignal||window.OneSignal}async initialize(){if(this.initialized){console.log("OneSignal already initialized");return}await this.waitForOneSignal();try{console.log(" Initializing OneSignal..."),window.plugins.OneSignal.initialize(Yp),this.setupNotificationHandlers(),console.log(" Requesting notification permission..."),window.plugins.OneSignal.Notifications.requestPermission(!0).then(h=>{console.log(" Notification permission:",h?"Granted":"Denied")}),this.initialized=!0,console.log(" OneSignal initialized successfully")}catch(h){console.error(" Error initializing OneSignal:",h)}}async waitForOneSignal(){return new Promise(h=>{if(window.plugins?.OneSignal){h();return}const l=setInterval(()=>{window.plugins?.OneSignal&&(clearInterval(l),h())},100);setTimeout(()=>{clearInterval(l),window.plugins?.OneSignal||console.error(" OneSignal not available after timeout"),h()},1e4)})}setupNotificationHandlers(){window.plugins.OneSignal.Notifications.addEventListener("foregroundWillDisplay",h=>{console.log(" Notification will display in foreground:",h),h.preventDefault(),h.notification.display()}),window.plugins.OneSignal.Notifications.addEventListener("click",h=>{console.log(" Notification clicked:",h);const l=h.notification.additionalData;l&&this.handleNotificationTap(l)})}handleNotificationTap(h){switch(console.log(" Handling notification tap:",h),h.type){case"guest_added":h.eventId&&(window.location.href=`/event/${h.eventId}`);break;case"event_wall_post":h.eventId&&(window.location.href=`/event/${h.eventId}/wall`);break;default:console.log("Unknown notification type:",h.type)}}async registerDevice(h,l){try{this.userId=h;const g=await window.plugins.OneSignal.User.pushSubscription.getIdAsync();if(!g){console.error("No OneSignal subscription ID available");return}this.playerId=g,console.log(" OneSignal Subscription ID:",this.playerId);const y=this.getPlatform();if(!(await fetch(`${Es}/notifications/register-device`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({playerId:this.playerId,platform:y})})).ok)throw new Error("Failed to register device");window.plugins.OneSignal.login(h),console.log(" Device registered successfully")}catch(g){console.error(" Error registering device:",g)}}async unregisterDevice(){try{if(!this.playerId)return;window.plugins.OneSignal.logout(),console.log(" Device unregistered"),this.userId=null}catch(h){console.error(" Error unregistering device:",h)}}async getUnreadCount(h){try{const l=await fetch(`${Es}/notifications/unread-count`,{headers:{Authorization:`Bearer ${h}`}});return l.ok&&(await l.json()).count||0}catch(l){return console.error("Error fetching unread count:",l),0}}getPlatform(){const h=navigator.userAgent||navigator.vendor||window.opera;return/android/i.test(h)?"android":/iPad|iPhone|iPod/.test(h)&&!window.MSStream?"ios":"web"}async getUnreadCount(h){try{const l=await fetch(`${Es}/notifications/unread-count`,{headers:{Authorization:`Bearer ${h}`}});if(!l.ok)throw new Error("Failed to get unread count");return(await l.json()).count||0}catch(l){return console.error("Error getting unread count:",l),0}}async getNotifications(h,l={}){try{const{limit:g=20,offset:y=0,unreadOnly:x=!1}=l,b=new URLSearchParams({limit:g.toString(),offset:y.toString(),unreadOnly:x.toString()}),I=await fetch(`${Es}/notifications?${b}`,{headers:{Authorization:`Bearer ${h}`}});if(!I.ok)throw new Error("Failed to fetch notifications");return await I.json()}catch(g){return console.error("Error fetching notifications:",g),{notifications:[],hasMore:!1}}}async markAsRead(h,l){try{if(!(await fetch(`${Es}/notifications/${h}/read`,{method:"PATCH",headers:{Authorization:`Bearer ${l}`}})).ok)throw new Error("Failed to mark notification as read");return!0}catch(g){return console.error("Error marking notification as read:",g),!1}}async markAllAsRead(h){try{if(!(await fetch(`${Es}/notifications/mark-all-read`,{method:"PATCH",headers:{Authorization:`Bearer ${h}`}})).ok)throw new Error("Failed to mark all notifications as read");return!0}catch(l){return console.error("Error marking all notifications as read:",l),!1}}async deleteNotification(h,l){try{if(!(await fetch(`${Es}/notifications/${h}`,{method:"DELETE",headers:{Authorization:`Bearer ${l}`}})).ok)throw new Error("Failed to delete notification");return!0}catch(g){return console.error("Error deleting notification:",g),!1}}}const Xi=new Zp,nf=W.createContext(),Sl="https://gatherly-backend-3vmv.onrender.com/api",qp=({children:u})=>{const[h,l]=W.useState(null),[g,y]=W.useState(localStorage.getItem("token")),[x,b]=W.useState(!0),[I,S]=W.useState(!1),v="hosteze-app";W.useEffect(()=>{(async()=>{const N=localStorage.getItem("token");if(N){if(N.startsWith("guest_")){const M=localStorage.getItem("guestUser");M&&l(JSON.parse(M)),b(!1);return}try{const M=await oo(`${Sl}/auth/me`,{headers:{Authorization:`Bearer ${N}`}},3,15e3);if(M.ok){const D=await M.json();l(D.user),y(N)}else localStorage.removeItem("token"),y(null)}catch(M){console.error("Auth check failed:",M),localStorage.removeItem("token"),y(null)}}b(!1)})(),so.isAvailable().then(S)},[g]);const A=async(R,N,M,D)=>{const Z=await oo(`${Sl}/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:R,email:N,phone:D,password:M})},3,3e4);if(!Z.ok){const Q=await Z.json();throw new Error(Q.error||"Signup failed")}return await Z.json()},k=async(R,N,M=!1)=>{const D=M?{phone:R,password:N}:{email:R,password:N},Z=await oo(`${Sl}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)},3,3e4);if(!Z.ok){const Q=await Z.json();throw new Error(Q.error||"Login failed")}const z=await Z.json();localStorage.setItem("token",z.token),y(z.token),l(z.user);try{await Xi.registerDevice(z.user.id,z.token)}catch(Q){console.error("Failed to register device for push notifications:",Q)}return z},O=async()=>{try{if(!await so.authenticate())throw new Error("Biometric authentication failed");const N=await so.getCredentials(v);if(!N||!N.username||!N.password)throw new Error("No saved credentials found");await k(N.username,N.password)}catch(R){throw console.error("Biometric login failed:",R),R}},X=async(R,N)=>{try{await so.saveCredentials(v,R,N)}catch(M){throw console.error("Failed to enable biometric:",M),M}},q=async()=>{try{await so.deleteCredentials(v)}catch(R){throw console.error("Failed to disable biometric:",R),R}},F=()=>{const R=Math.floor(1e4+Math.random()*9e4),N=`guest-${R}`,M={id:N,name:`Guest ${R}`,email:`${N}@guest.local`,isGuest:!0},D=`guest_${N}`;localStorage.setItem("token",D),localStorage.setItem("guestUser",JSON.stringify(M)),y(D),l(M)},V=()=>{Xi.unregisterDevice().catch(R=>{console.error("Failed to unregister device:",R)}),localStorage.removeItem("token"),localStorage.removeItem("guestUser"),y(null),l(null)},Y=async()=>{const R=localStorage.getItem("token");if(!(!R||R.startsWith("guest_")))try{const N=await oo(`${Sl}/auth/me`,{headers:{Authorization:`Bearer ${R}`}},3,15e3);if(N.ok){const M=await N.json();l(M.user)}}catch(N){console.error("Failed to refresh user:",N)}};return r.jsx(nf.Provider,{value:{user:h,token:g,loading:x,biometricAvailable:I,signup:A,login:k,loginWithBiometric:O,enableBiometric:X,disableBiometric:q,continueAsGuest:F,logout:V,refreshUser:Y,isAuthenticated:!!h},children:u})},Wr=()=>{const u=W.useContext(nf);if(!u)throw new Error("useAuth must be used within an AuthProvider");return u},Rn=[];for(let u=0;u<256;++u)Rn.push((u+256).toString(16).slice(1));function Kp(u,h=0){return(Rn[u[h+0]]+Rn[u[h+1]]+Rn[u[h+2]]+Rn[u[h+3]]+"-"+Rn[u[h+4]]+Rn[u[h+5]]+"-"+Rn[u[h+6]]+Rn[u[h+7]]+"-"+Rn[u[h+8]]+Rn[u[h+9]]+"-"+Rn[u[h+10]]+Rn[u[h+11]]+Rn[u[h+12]]+Rn[u[h+13]]+Rn[u[h+14]]+Rn[u[h+15]]).toLowerCase()}let fd;const $p=new Uint8Array(16);function Qp(){if(!fd){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");fd=crypto.getRandomValues.bind(crypto)}return fd($p)}const Jp=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),d0={randomUUID:Jp};function eg(u,h,l){u=u||{};const g=u.random??u.rng?.()??Qp();if(g.length<16)throw new Error("Random bytes length must be >= 16");return g[6]=g[6]&15|64,g[8]=g[8]&63|128,Kp(g)}function El(u,h,l){return d0.randomUUID&&!u?d0.randomUUID():eg(u)}const rf=W.createContext(),Sn="https://gatherly-backend-3vmv.onrender.com/api",tg=({children:u})=>{const{user:h}=Wr(),[l,g]=W.useState([]),[y,x]=W.useState([]),[b,I]=W.useState(!0),[S,v]=W.useState(null),A=()=>{const le=localStorage.getItem("token");return le?{"Content-Type":"application/json",Authorization:`Bearer ${le}`}:{"Content-Type":"application/json"}},k=async()=>{try{const le=localStorage.getItem("token");if(console.log("Fetching events, token exists:",!!le),le?.startsWith("guest_")){const J=localStorage.getItem("guestEvents");g(J?JSON.parse(J):[]),I(!1);return}console.log("Fetching from server with headers");const ne=await oo(`${Sn}/events`,{headers:A()},3,3e4);if(console.log("Fetch response status:",ne.status),!ne.ok){if(ne.status===401){console.error("401 Unauthorized - clearing token"),localStorage.removeItem("token"),g([]);return}throw new Error("Failed to fetch events")}const G=await ne.json();console.log("Events fetched successfully:",G.length,"events"),g(G)}catch(le){console.error("Error fetching events:",le),v("Could not connect to server. Backend may be starting up, please wait...")}finally{I(!1)}},O=async()=>{try{if(console.log(" FETCH-CONTACTS: Starting fetch..."),localStorage.getItem("token")?.startsWith("guest_")){const G=localStorage.getItem("guestContacts");x(G?JSON.parse(G):[]),console.log(" FETCH-CONTACTS: Loaded guest contacts from localStorage");return}const ne=await oo(`${Sn}/contacts`,{headers:A()},3,3e4);if(ne.ok){const G=await ne.json();console.log(" FETCH-CONTACTS: Received",G.length,"contacts from server"),x(G)}else console.error(" FETCH-CONTACTS: Request failed with status",ne.status)}catch(le){console.error(" FETCH-CONTACTS: Error -",le)}};W.useEffect(()=>{const le=localStorage.getItem("token");if(!le){I(!1);return}if(k(),O(),!le.startsWith("guest_")){const ne=setInterval(()=>{if(!localStorage.getItem("token")){clearInterval(ne);return}k(),O()},5e3),G=setInterval(async()=>{try{await fetch(`${Sn}/health`,{method:"GET"}),console.log("Backend keep-alive ping sent")}catch(J){console.log("Keep-alive ping failed:",J)}},24e4);return()=>{clearInterval(ne),clearInterval(G)}}},[h]);const X=async le=>{const ne={id:El(),createdAt:new Date().toISOString(),guests:[],...le};if(g(J=>[ne,...J]),localStorage.getItem("token")?.startsWith("guest_")){const J=[ne,...l];return localStorage.setItem("guestEvents",JSON.stringify(J)),ne}else try{const J=await fetch(`${Sn}/events`,{method:"POST",headers:A(),body:JSON.stringify(le)});if(!J.ok)throw console.error("Failed to save event to server:",J.status),g(ce=>ce.filter(Se=>Se.id!==ne.id)),new Error("Failed to save event");const oe=await J.json();return console.log("Event saved successfully:",oe),g(ce=>ce.map(Se=>Se.id===ne.id?oe:Se)),oe}catch(J){throw console.error("Error saving event:",J),g(oe=>oe.filter(ce=>ce.id!==ne.id)),J}},q=async le=>{g(ne=>ne.filter(G=>G.id!==le));try{const ne=await fetch(`${Sn}/events/${le}`,{method:"DELETE",headers:A()});if(!ne.ok)throw console.error("Failed to delete event on server:",ne.status),await k(),new Error("Failed to delete event")}catch(ne){throw console.error("Error deleting event:",ne),await k(),ne}},F=le=>l.find(ne=>ne.id===le),V=async(le,ne)=>{const G={id:El(),addedAt:new Date().toISOString(),attended:!1,attendedCount:0,...ne};g(J=>J.map(oe=>oe.id===le?{...oe,guests:[...oe.guests,G]}:oe));try{const J=await fetch(`${Sn}/events/${le}/guests`,{method:"POST",headers:A(),body:JSON.stringify({...ne,email:ne.email&&ne.email.trim()?ne.email:null,phone:ne.phone&&ne.phone.trim()?ne.phone:null})});if(!J.ok)throw console.error("Failed to add guest to server:",J.status),g(ce=>ce.map(Se=>Se.id===le?{...Se,guests:Se.guests.filter(K=>K.id!==G.id)}:Se)),new Error("Failed to add guest");const oe=await J.json();return console.log("Guest added successfully:",oe),console.log(" ADD-GUEST: Guest contact_id:",oe.contact_id),g(ce=>ce.map(Se=>Se.id===le?{...Se,guests:Se.guests.map(K=>K.id===G.id?oe:K)}:Se)),console.log(" ADD-GUEST: Calling fetchContacts to refresh..."),await O(),console.log(" ADD-GUEST: fetchContacts completed"),oe}catch(J){throw console.error("Error adding guest:",J),g(oe=>oe.map(ce=>ce.id===le?{...ce,guests:ce.guests.filter(Se=>Se.id!==G.id)}:ce)),J}},Y=async(le,ne,G=1)=>{console.log("markGuestAttended called:",{eventId:le,guestId:ne,count:G}),g(J=>J.map(oe=>oe.id===le?{...oe,guests:oe.guests.map(ce=>ce.id===ne?{...ce,attended:!0,attendedCount:(ce.attendedCount||0)+G,checkInTime:new Date().toISOString()}:ce)}:oe));try{const J=await fetch(`${Sn}/events/${le}/guests/${ne}/checkin`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({count:G})});if(!J.ok){const oe=await J.json();throw console.error("Check-in API failed:",oe),new Error(oe.error||"Failed to check in guest")}console.log("Check-in successful"),await k()}catch(J){throw console.error("markGuestAttended error:",J),g(oe=>oe.map(ce=>ce.id===le?{...ce,guests:ce.guests.map(Se=>Se.id===ne?{...Se,attended:!1,attendedCount:Math.max(0,(Se.attendedCount||0)-G),checkInTime:null}:Se)}:ce)),J}},R=async(le,ne,G)=>{const J=l;g(oe=>oe.map(ce=>ce.id===le?{...ce,guests:ce.guests.map(Se=>Se.id===ne?{...Se,rsvp:G,rsvpTime:new Date().toISOString()}:Se)}:ce));try{if(!(await fetch(`${Sn}/events/${le}/guests/${ne}/rsvp`,{method:"PUT",headers:{...A(),"Content-Type":"application/json"},body:JSON.stringify({rsvp:G})})).ok)throw new Error("Failed to update RSVP")}catch(oe){throw console.error("RSVP update failed:",oe),g(J),oe}},N=async(le,ne)=>{const G=ne.map(J=>({id:El(),addedAt:new Date().toISOString(),attended:!1,attendedCount:0,...J}));g(J=>J.map(oe=>oe.id===le?{...oe,guests:[...oe.guests,...G]}:oe));try{const J=await fetch(`${Sn}/events/${le}/guests/bulk`,{method:"POST",headers:A(),body:JSON.stringify({guests:ne})});if(!J.ok)throw console.error("Failed to add guests to server:",J.status),g(Se=>Se.map(K=>{if(K.id===le){const B=G.map(ee=>ee.id);return{...K,guests:K.guests.filter(ee=>!B.includes(ee.id))}}return K})),new Error("Failed to add guests");const oe=await J.json(),ce=oe.added||oe;return oe.skipped&&oe.skipped.length>0&&console.log(`Skipped ${oe.skipped.length} duplicate guests:`,oe.skipped),console.log("Bulk guests added successfully"),g(Se=>Se.map(K=>{if(K.id===le){const B=K.guests.filter(ee=>!G.some(ve=>ve.id===ee.id));return{...K,guests:[...B,...ce]}}return K})),ce}catch(J){throw console.error("Error adding bulk guests:",J),g(oe=>oe.map(ce=>{if(ce.id===le){const Se=G.map(K=>K.id);return{...ce,guests:ce.guests.filter(K=>!Se.includes(K.id))}}return ce})),J}},M=async(le,ne)=>{let G=null;g(J=>J.map(oe=>oe.id===le?(G=oe.guests.find(ce=>ce.id===ne),{...oe,guests:oe.guests.filter(ce=>ce.id!==ne)}):oe));try{const J=await fetch(`${Sn}/events/${le}/guests/${ne}`,{method:"DELETE",headers:A()});if(!J.ok)throw console.error("Failed to delete guest from server:",J.status),G&&g(oe=>oe.map(ce=>ce.id===le?{...ce,guests:[...ce.guests,G]}:ce)),new Error("Failed to delete guest");console.log("Guest deleted successfully")}catch(J){throw console.error("Error deleting guest:",J),G&&g(oe=>oe.map(ce=>ce.id===le?{...ce,guests:[...ce.guests,G]}:ce)),J}},D=async(le,ne)=>{const G=[...l];if(g(oe=>oe.map(ce=>ce.id===le?{...ce,...ne}:ce)),localStorage.getItem("token")?.startsWith("guest_")){const oe=l.map(ce=>ce.id===le?{...ce,...ne}:ce);localStorage.setItem("guestEvents",JSON.stringify(oe))}else try{const oe=await fetch(`${Sn}/events/${le}`,{method:"PUT",headers:A(),body:JSON.stringify(ne)});if(!oe.ok)throw console.error("Failed to update event, reverting:",oe.status),g(G),new Error("Failed to update event")}catch(oe){throw console.error("Error updating event:",oe),g(G),oe}},Z=async le=>{if(localStorage.getItem("token")?.startsWith("guest_")){const J={id:El(),...le,addedAt:new Date().toISOString()},oe=[...y,J];return x(oe),localStorage.setItem("guestContacts",JSON.stringify(oe)),J}const G=await fetch(`${Sn}/contacts`,{method:"POST",headers:A(),body:JSON.stringify(le)});if(G.ok){const J=await G.json();return x(oe=>[...oe,J]),J}},z=async(le,ne)=>{if(localStorage.getItem("token")?.startsWith("guest_")){const J=y.map(oe=>oe.id===le?{...oe,...ne}:oe);x(J),localStorage.setItem("guestContacts",JSON.stringify(J));return}await fetch(`${Sn}/contacts/${le}`,{method:"PUT",headers:A(),body:JSON.stringify(ne)}),x(J=>J.map(oe=>oe.id===le?{...oe,...ne}:oe))},Q=async le=>{if(localStorage.getItem("token")?.startsWith("guest_")){const G=y.filter(J=>J.id!==le);x(G),localStorage.setItem("guestContacts",JSON.stringify(G));return}await fetch(`${Sn}/contacts/${le}`,{method:"DELETE",headers:A()}),x(G=>G.filter(J=>J.id!==le))},he=async(le,ne)=>{try{const G=await fetch(`${Sn}/contacts/add-to-event/${le}`,{method:"POST",headers:A(),body:JSON.stringify({contactIds:ne})});if(!G.ok)throw new Error("Failed to add contacts to event");const J=await G.json();return await k(),J}catch(G){throw console.error("Error adding contacts to event:",G),G}},Ae=async le=>{const ne=y.find(G=>G.phone&&G.phone===le.phone);return ne||await Z({name:le.name,phone:le.phone||"",email:le.email||"",notes:""})},we=async le=>{const ne=localStorage.getItem("guestEvents");if(ne){const J=JSON.parse(ne).find(oe=>oe.id===le);if(J)return{id:J.id,title:J.title,venue:J.venue,date:J.date,time:J.time,description:J.description}}try{const G=await fetch(`${Sn}/public/events/${le}`);if(G.ok)return await G.json()}catch(G){console.error("Failed to fetch public event:",G)}throw new Error("Event not found")},xe=async(le,ne)=>{const G=localStorage.getItem("guestEvents");if(G){const J=JSON.parse(G),oe=J.findIndex(ce=>ce.id===le);if(oe!==-1){const ce=J[oe];let Se=ce.guests.find(K=>ne.phone&&K.phone===ne.phone||ne.email&&K.email===ne.email);if(Se)Se.rsvp=ne.response==="yes"?!0:ne.response==="no"?!1:null,Se.rsvpTime=new Date().toISOString(),Se.plusOnes=ne.plusOnes||0,Se.dietaryRestrictions=ne.dietaryRestrictions||"";else{const K={id:Date.now().toString(),name:ne.name,phone:ne.phone||"",email:ne.email||"",rsvp:ne.response==="yes"?!0:ne.response==="no"?!1:null,rsvpTime:new Date().toISOString(),plusOnes:ne.plusOnes||0,dietaryRestrictions:ne.dietaryRestrictions||"",addedAt:new Date().toISOString(),attended:!1,attendedCount:0,source:"public_invitation"};ce.guests.push(K)}return localStorage.setItem("guestEvents",JSON.stringify(J)),{success:!0,message:"RSVP submitted successfully"}}}try{const J=await fetch(`${Sn}/public/events/${le}/rsvp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)});if(J.ok)return await J.json()}catch(J){console.error("Failed to submit RSVP:",J)}throw new Error("Failed to submit RSVP")};return r.jsx(rf.Provider,{value:{API_URL:Sn,events:l,contacts:y,loading:b,error:S,createEvent:X,deleteEvent:q,getEvent:F,addGuest:V,addBulkGuests:N,deleteGuest:M,markGuestAttended:Y,rsvpGuest:R,updateEvent:D,fetchContacts:O,addContact:Z,updateContact:z,deleteContact:Q,addContactsToEvent:he,saveGuestToContacts:Ae,fetchPublicEvent:we,submitPublicRSVP:xe},children:u})},Tr=()=>{const u=W.useContext(rf);if(!u)throw new Error("useApp must be used within an AppProvider");return u},sf=W.createContext(),ng=({children:u})=>{const[h,l]=W.useState(()=>localStorage.getItem("theme")||"light");W.useEffect(()=>{document.documentElement.setAttribute("data-theme",h),localStorage.setItem("theme",h)},[h]);const g=()=>{l(y=>y==="light"?"dark":"light")};return r.jsx(sf.Provider,{value:{theme:h,toggleTheme:g},children:u})},rg=()=>{const u=W.useContext(sf);if(!u)throw new Error("useTheme must be used within ThemeProvider");return u};var ig={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const sg=u=>u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ve=(u,h)=>{const l=W.forwardRef(({color:g="currentColor",size:y=24,strokeWidth:x=2,absoluteStrokeWidth:b,className:I="",children:S,...v},A)=>W.createElement("svg",{ref:A,...ig,width:y,height:y,stroke:g,strokeWidth:b?Number(x)*24/Number(y):x,className:["lucide",`lucide-${sg(u)}`,I].join(" "),...v},[...h.map(([k,O])=>W.createElement(k,O)),...Array.isArray(S)?S:[S]]));return l.displayName=`${u}`,l};const mo=Ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const mi=Ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const of=Ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const co=Ve("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const af=Ve("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);const og=Ve("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const Nr=Ve("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const lf=Ve("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const u0=Ve("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const js=Ve("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const cf=Ve("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);const $t=Ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const ag=Ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const Nd=Ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Zi=Ve("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const df=Ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const pd=Ve("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const gd=Ve("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const lg=Ve("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);const h0=Ve("Fingerprint",[["path",{d:"M2 12C2 6.5 6.5 2 12 2a10 10 0 0 1 8 4",key:"1jc9o5"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12c0-.7.12-1.37.34-2",key:"1mxgy1"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2c0 .47 0 1.17-.02 2",key:"1fgabc"}]]);const cg=Ve("Flashlight",[["path",{d:"M18 6c0 2-2 2-2 4v10a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4V2h12z",key:"1orkel"}],["line",{x1:"6",x2:"18",y1:"6",y2:"6",key:"1z11jq"}],["line",{x1:"12",x2:"12",y1:"12",y2:"12",key:"1f4yc1"}]]);const Td=Ve("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);const uf=Ve("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);const kl=Ve("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const dg=Ve("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const f0=Ve("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const ug=Ve("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const hf=Ve("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const p0=Ve("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const Nl=Ve("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);const ha=Ve("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const hg=Ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const ks=Ve("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const qi=Ve("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Tl=Ve("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const _d=Ve("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const fg=Ve("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const ff=Ve("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);const pg=Ve("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const pi=Ve("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);const uo=Ve("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const Ft=Ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const pf=Ve("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);const gg=Ve("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);const gf=Ve("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const mf=Ve("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);const mg=Ve("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);const xo=Ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const xf=Ve("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const Rd=Ve("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const xg=Ve("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);const yf=Ve("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);const vf=Ve("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const yg=Ve("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const Qt=Ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const vg=Ve("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const wg=Ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const fa=Ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const Cg=Ve("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const bg=Ve("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const wf=Ve("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const Wd=Ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Vt=Ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Cf=Ve("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);const Ud=Ve("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const kt=Ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Sg=({showAuth:u=!0})=>{const{user:h,logout:l}=Wr();return!u||!h?null:r.jsxs("div",{style:{padding:"12px 16px",paddingTop:"calc(env(safe-area-inset-top) + 12px)",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid var(--border)",backgroundColor:"var(--bg-primary)",position:"sticky",top:0,zIndex:100},children:[r.jsxs(kr,{to:"/profile",style:{textDecoration:"none",display:"flex",alignItems:"center",gap:"8px",padding:"6px 12px",background:"var(--bg-secondary)",borderRadius:"20px",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:g=>g.currentTarget.style.background="var(--bg-tertiary)",onMouseLeave:g=>g.currentTarget.style.background="var(--bg-secondary)",children:[h.profilePictureUrl?r.jsx("img",{src:h.profilePictureUrl,alt:h.name,style:{width:"28px",height:"28px",borderRadius:"50%",objectFit:"cover"}}):r.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"linear-gradient(135deg, #6366f1, #a855f7)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:"700"},children:h.name?.charAt(0).toUpperCase()||"U"}),r.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text-primary)",maxWidth:"100px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:h.name})]}),r.jsxs(kr,{to:"/",style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"18px",fontWeight:"700",color:"var(--text-primary)",textDecoration:"none",position:"absolute",left:"50%",transform:"translateX(-50%)"},children:[r.jsx(mg,{size:22,style:{color:"var(--primary)"}}),r.jsxs("span",{children:["Host",r.jsx("i",{children:"Eze"})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[h?.is_admin&&r.jsx(kr,{to:"/admin",title:"Admin Dashboard","data-testid":"admin-dashboard-button","aria-label":"Admin Dashboard",accessibilityLabel:"Admin Dashboard",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"36px",height:"36px",background:"linear-gradient(135deg, #6366f1, #a855f7)",border:"none",borderRadius:"50%",color:"white",textDecoration:"none",transition:"all 0.2s",boxShadow:"0 2px 8px rgba(99, 102, 241, 0.3)"},onMouseEnter:g=>{g.currentTarget.style.transform="scale(1.1)",g.currentTarget.style.boxShadow="0 4px 12px rgba(99, 102, 241, 0.5)"},onMouseLeave:g=>{g.currentTarget.style.transform="scale(1)",g.currentTarget.style.boxShadow="0 2px 8px rgba(99, 102, 241, 0.3)"},children:r.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:r.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})}),r.jsxs("button",{onClick:l,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:"#fee2e2",border:"none",borderRadius:"8px",color:"#dc2626",fontWeight:"600",fontSize:"13px",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:g=>g.currentTarget.style.background="#fecaca",onMouseLeave:g=>g.currentTarget.style.background="#fee2e2",children:[r.jsx(hg,{size:16}),"Logout"]})]})]})},Eg=()=>{const u=Wn(),h=Ts(),[l,g]=ir.useState(0);ir.useEffect(()=>{const b=async()=>{const S=localStorage.getItem("token");if(S){const v=await Xi.getUnreadCount(S);g(v)}};b();const I=setInterval(b,3e4);return()=>clearInterval(I)},[]);const y=[{id:"home",label:"Home",icon:ug,path:"/",isActive:h.pathname==="/"||h.pathname==="/manager"||h.pathname.startsWith("/event")},{id:"scanner",label:"Scanner",icon:mf,path:"/scanner",isActive:h.pathname==="/scanner"},{id:"contacts",label:"Contacts",icon:Vt,path:"/contacts",isActive:h.pathname==="/contacts"},{id:"notifications",label:"Notifications",icon:co,path:"/notifications",isActive:h.pathname==="/notifications",badge:l}],x=b=>{u(b)};return r.jsx("nav",{className:"bottom-navigation",children:r.jsx("div",{className:"bottom-nav-container",children:y.map(b=>{const I=b.icon;return r.jsxs("button",{onClick:()=>x(b.path),className:`nav-item ${b.isActive?"active":""}`,children:[r.jsxs("div",{className:"nav-icon-wrapper",children:[r.jsx(I,{size:24,className:"nav-icon"}),b.badge>0&&r.jsx("span",{className:"nav-badge",children:b.badge>99?"99+":b.badge})]}),r.jsx("span",{className:"nav-label",children:b.label})]},b.id)})})})},ui=({children:u})=>{const{user:h}=Wr();return r.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[r.jsx(Sg,{showAuth:!0}),h?.isGuest&&r.jsx("div",{style:{background:"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)",padding:"0.75rem 1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:600,color:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:" Viewing as Guest"}),r.jsx("main",{style:{flex:1,paddingBottom:"calc(60px + env(safe-area-inset-bottom))",overflow:"auto"},children:u}),r.jsx(Eg,{})]})},hi=({children:u})=>{const{isAuthenticated:h,loading:l}=Wr();return l?r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{style:{marginTop:"1rem",color:"var(--text-secondary)"},children:"Loading..."})]})}):h?u:r.jsx(ef,{to:"/login",replace:!0})},Ag=()=>{const u=Wn(),{login:h,loginWithBiometric:l,enableBiometric:g,continueAsGuest:y,biometricAvailable:x}=Wr(),[b,I]=W.useState("email"),[S,v]=W.useState(""),[A,k]=W.useState("+91"),[O,X]=W.useState(""),[q,F]=W.useState(""),[V,Y]=W.useState(""),[R,N]=W.useState(!1),[M,D]=W.useState(!1),[Z,z]=W.useState(null);W.useEffect(()=>{(async()=>{if(x)try{const{BiometricService:xe}=await jr(async()=>{const{BiometricService:ne}=await Promise.resolve().then(()=>l0);return{BiometricService:ne}},void 0);if(await xe.hasCredentials("hosteze-app")&&await xe.authenticate()){const G=await xe.getCredentials("hosteze-app");G&&G.username&&G.password&&(await h(G.username,G.password),u("/"))}}catch(xe){console.log("Auto biometric login failed:",xe)}})()},[x]);const Q=async we=>{we.preventDefault(),Y(""),N(!0);try{const xe=b==="phone",le=xe?`${A}${O}`:S;if(await h(le,q,xe),x){const{BiometricService:ne}=await jr(async()=>{const{BiometricService:J}=await Promise.resolve().then(()=>l0);return{BiometricService:J}},void 0);await ne.hasCredentials("hosteze-app")?u("/"):(z({email:le,password:q}),D(!0))}else u("/")}catch(xe){Y(xe.message)}finally{N(!1)}},he=async()=>{try{await g(Z.email,Z.password),u("/")}catch(we){console.error("Failed to save biometric:",we),u("/")}},Ae=()=>{u("/")};return M?r.jsx("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",backgroundColor:"var(--bg-primary)"},children:r.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem 1rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"440px",width:"100%"},children:[r.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[r.jsx(h0,{size:64,style:{color:"var(--primary)",margin:"0 auto 1rem"}}),r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"0.5rem"},children:"Enable Biometric Login?"}),r.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.9375rem"},children:"Use your fingerprint or face to login faster next time"})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[r.jsxs("button",{onClick:he,className:"btn btn-primary",style:{width:"100%",padding:"0.875rem"},children:[r.jsx(h0,{size:18}),"Enable Biometric"]}),r.jsx("button",{onClick:Ae,className:"btn",style:{width:"100%",padding:"0.875rem",background:"var(--bg-secondary)",border:"1px solid var(--border)",color:"var(--text-primary)"},children:"Skip for Now"})]})]})})}):r.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",backgroundColor:"var(--bg-primary)"},children:[r.jsx("div",{style:{padding:"3rem 0 2rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("div",{className:"container",style:{textAlign:"center"},children:[r.jsxs("h1",{style:{fontSize:"2.5rem",fontWeight:700,color:"var(--text-primary)",margin:0},children:[" Host",r.jsx("i",{children:"Eze"})]}),r.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginTop:"0.5rem"},children:"Event Management Made Easy"})]})}),r.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem 1rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"440px",width:"100%"},children:[r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"0.5rem"},children:"Welcome Back"}),r.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.9375rem"},children:"Sign in to manage your events"})]}),V&&r.jsxs("div",{style:{padding:"0.875rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"var(--radius-md)",marginBottom:"1.5rem",display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[r.jsx(mo,{size:18,style:{color:"#dc2626",flexShrink:0,marginTop:"0.125rem"}}),r.jsx("span",{style:{color:"#991b1b",fontSize:"0.875rem",lineHeight:"1.5"},children:V})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",background:"var(--bg-secondary)",padding:"4px",borderRadius:"10px"},children:[r.jsxs("button",{type:"button",onClick:()=>I("email"),style:{flex:1,padding:"0.5rem",borderRadius:"8px",border:"none",background:b==="email"?"white":"transparent",color:b==="email"?"var(--primary)":"var(--text-secondary)",fontWeight:600,fontSize:"0.875rem",cursor:"pointer",boxShadow:b==="email"?"0 2px 4px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[r.jsx(ks,{size:16,style:{verticalAlign:"middle",marginRight:"4px"}}),"Email"]}),r.jsxs("button",{type:"button",onClick:()=>I("phone"),style:{flex:1,padding:"0.5rem",borderRadius:"8px",border:"none",background:b==="phone"?"white":"transparent",color:b==="phone"?"var(--primary)":"var(--text-secondary)",fontWeight:600,fontSize:"0.875rem",cursor:"pointer",boxShadow:b==="phone"?"0 2px 4px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[r.jsx(uo,{size:16,style:{verticalAlign:"middle",marginRight:"4px"}}),"Phone"]})]}),r.jsxs("form",{onSubmit:Q,style:{display:"flex",flexDirection:"column",gap:"1.25rem",marginBottom:"1.5rem"},children:[b==="email"?r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:"Email Address"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(ks,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),r.jsx("input",{type:"email",value:S,onChange:we=>v(we.target.value),className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"your@email.com",required:!0})]})]}):r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:"Phone Number"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("div",{style:{position:"relative",width:"120px"},children:r.jsxs("select",{value:A,onChange:we=>k(we.target.value),className:"form-input",style:{paddingLeft:"1rem",paddingRight:"0.5rem"},children:[r.jsx("option",{value:"+91",children:" +91"}),r.jsx("option",{value:"+1",children:" +1"}),r.jsx("option",{value:"+44",children:" +44"}),r.jsx("option",{value:"+61",children:" +61"}),r.jsx("option",{value:"+971",children:" +971"})]})}),r.jsxs("div",{style:{position:"relative",flex:1},children:[r.jsx(uo,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),r.jsx("input",{type:"tel",value:O,onChange:we=>X(we.target.value.replace(/\D/g,"")),className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"9876543210",maxLength:10,required:!0})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:"Password"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(ha,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),r.jsx("input",{type:"password",value:q,onChange:we=>F(we.target.value),className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"Enter your password",required:!0})]})]}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:R,style:{width:"100%",padding:"0.875rem",fontSize:"1rem",fontWeight:600},children:R?"Signing in...":"Sign In"})]}),r.jsxs("div",{style:{margin:"1.5rem 0",display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{flex:1,height:"1px",background:"var(--border)"}}),r.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.875rem",fontWeight:500},children:"OR"}),r.jsx("div",{style:{flex:1,height:"1px",background:"var(--border)"}})]}),r.jsx("button",{onClick:()=>{y(),u("/")},className:"btn",style:{width:"100%",padding:"0.875rem",fontSize:"1rem",fontWeight:600,background:"var(--bg-secondary)",border:"1px solid var(--border)",color:"var(--text-primary)"},children:"Continue as Guest"}),r.jsxs("div",{style:{marginTop:"1.5rem",textAlign:"center",fontSize:"0.9375rem",color:"var(--text-secondary)"},children:["Don't have an account?"," ",r.jsx(kr,{to:"/signup",style:{color:"var(--primary)",fontWeight:600,textDecoration:"none"},children:"Create Account"})]})]})})]})},Ig=({password:u})=>{const l=(()=>{if(!u)return{score:0,label:"None",color:"#6b7280",width:"0%"};let y=0;u.length>=8&&y++,u.length>=12&&y++,/[a-z]/.test(u)&&/[A-Z]/.test(u)&&y++,/[0-9]/.test(u)&&y++,/[!@#$%^&*(),.?":{}|<>]/.test(u)&&y++;const x=[{score:0,label:"None",color:"#6b7280",width:"0%"},{score:1,label:"Very Weak",color:"#ef4444",width:"20%"},{score:2,label:"Weak",color:"#f97316",width:"40%"},{score:3,label:"Fair",color:"#eab308",width:"60%"},{score:4,label:"Good",color:"#22c55e",width:"80%"},{score:5,label:"Strong",color:"#10b981",width:"100%"}],b=Math.min(y,5);return x[b]})(),g=[{met:u.length>=8,text:"8+ characters"},{met:/[A-Z]/.test(u),text:"Uppercase letter"},{met:/[a-z]/.test(u),text:"Lowercase letter"},{met:/[0-9]/.test(u),text:"Number"},{met:/[!@#$%^&*(),.?":{}|<>]/.test(u),text:"Special character"}];return r.jsxs("div",{style:{marginTop:"0.5rem"},children:[r.jsxs("div",{style:{marginBottom:"0.5rem"},children:[r.jsx("div",{style:{height:"4px",backgroundColor:"var(--bg-secondary)",borderRadius:"2px",overflow:"hidden"},children:r.jsx("div",{style:{height:"100%",width:l.width,backgroundColor:l.color,transition:"all 0.3s ease"}})}),u&&r.jsx("div",{style:{fontSize:"0.75rem",color:l.color,fontWeight:600,marginTop:"0.25rem"},children:l.label})]}),u&&r.jsx("div",{style:{fontSize:"0.75rem",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.25rem",marginTop:"0.5rem"},children:g.map((y,x)=>r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:y.met?"#10b981":"var(--text-secondary)"},children:[r.jsx("span",{children:y.met?"":""}),r.jsx("span",{children:y.text})]},x))})]})},jg=()=>{const{signup:u}=Wr(),[h,l]=W.useState(""),[g,y]=W.useState(""),[x,b]=W.useState("+91"),[I,S]=W.useState(""),[v,A]=W.useState(""),[k,O]=W.useState(""),[X,q]=W.useState(""),[F,V]=W.useState(!1),[Y,R]=W.useState(!1),[N,M]=W.useState(""),D=z=>z?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(z):!0,Z=async z=>{if(z.preventDefault(),q(""),!g&&!I){q("Please enter either email or phone number");return}if(g&&!D(g)){q("Please enter a valid email address");return}if(v!==k){q("Passwords do not match");return}if(v.length<8){q("Password must be at least 8 characters");return}V(!0);try{const Q=I?`${x}${I}`:null,he=await u(h,g||null,v,Q);M(he.email||g||I),R(!0)}catch(Q){q(Q.message)}finally{V(!1)}};return Y?r.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",backgroundColor:"var(--bg-primary)"},children:[r.jsx("div",{style:{padding:"3rem 0 2rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("div",{className:"container",style:{textAlign:"center"},children:[r.jsxs("h1",{style:{fontSize:"2.5rem",fontWeight:700,color:"var(--text-primary)",margin:0},children:[" Host",r.jsx("i",{children:"Eze"})]}),r.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginTop:"0.5rem"},children:"Event Management Made Easy"})]})}),r.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem 1rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"440px",width:"100%",textAlign:"center"},children:[r.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:r.jsx(js,{size:32,color:"white"})}),r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"0.75rem"},children:"Account Created!"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem",lineHeight:"1.6"},children:g?r.jsxs(r.Fragment,{children:["We've sent a verification link to:",r.jsx("br",{}),r.jsx("strong",{style:{color:"var(--text-primary)"},children:N})]}):"Your account has been created successfully!"}),r.jsx(kr,{to:"/login",className:"btn btn-primary",style:{display:"inline-block",padding:"0.875rem 2rem"},children:"Continue to Login"})]})})]}):r.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",backgroundColor:"var(--bg-primary)"},children:[r.jsx("div",{style:{padding:"3rem 0 2rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("div",{className:"container",style:{textAlign:"center"},children:[r.jsxs("h1",{style:{fontSize:"2.5rem",fontWeight:700,color:"var(--text-primary)",margin:0},children:[" Host",r.jsx("i",{children:"Eze"})]}),r.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginTop:"0.5rem"},children:"Event Management Made Easy"})]})}),r.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem 1rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"440px",width:"100%"},children:[r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"0.5rem"},children:"Create Account"}),r.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.9375rem"},children:"Start managing your events today"})]}),X&&r.jsxs("div",{style:{padding:"0.875rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"var(--radius-md)",marginBottom:"1.5rem",display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[r.jsx(mo,{size:18,style:{color:"#dc2626",flexShrink:0,marginTop:"0.125rem"}}),r.jsx("span",{style:{color:"#991b1b",fontSize:"0.875rem",lineHeight:"1.5"},children:X})]}),r.jsxs("form",{onSubmit:Z,style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:"Full Name"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(Wd,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),r.jsx("input",{type:"text",value:h,onChange:z=>l(z.target.value),className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"John Doe",required:!0})]})]}),r.jsxs("div",{children:[r.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:["Email Address ",r.jsx("span",{style:{color:"var(--text-secondary)",fontWeight:400},children:"(Optional)"})]}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(ks,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),r.jsx("input",{type:"email",value:g,onChange:z=>y(z.target.value),className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"your@email.com"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:["Phone Number ",r.jsx("span",{style:{color:"var(--text-secondary)",fontWeight:400},children:"(Optional)"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("div",{style:{position:"relative",width:"120px"},children:r.jsxs("select",{value:x,onChange:z=>b(z.target.value),className:"form-input",style:{paddingLeft:"1rem",paddingRight:"0.5rem"},children:[r.jsx("option",{value:"+91",children:" +91"}),r.jsx("option",{value:"+1",children:" +1"}),r.jsx("option",{value:"+44",children:" +44"}),r.jsx("option",{value:"+61",children:" +61"}),r.jsx("option",{value:"+971",children:" +971"})]})}),r.jsxs("div",{style:{position:"relative",flex:1},children:[r.jsx(uo,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),r.jsx("input",{type:"tel",value:I,onChange:z=>S(z.target.value.replace(/\D/g,"")),className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"9876543210",maxLength:10})]})]}),r.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:"0.375rem"},children:"Enter email OR phone number"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:"Password"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(ha,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),r.jsx("input",{type:"password",value:v,onChange:z=>A(z.target.value),className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"Strong password",required:!0})]}),r.jsx(Ig,{password:v})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:"Confirm Password"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(ha,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),r.jsx("input",{type:"password",value:k,onChange:z=>O(z.target.value),className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"Confirm your password",required:!0})]})]}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:F,style:{width:"100%",padding:"0.875rem",fontSize:"1rem",fontWeight:600},children:F?"Creating Account...":"Create Account"})]}),r.jsxs("div",{style:{marginTop:"1.5rem",textAlign:"center",fontSize:"0.9375rem",color:"var(--text-secondary)"},children:["Already have an account?"," ",r.jsx(kr,{to:"/login",style:{color:"var(--primary)",fontWeight:600,textDecoration:"none"},children:"Sign In"})]})]})})]})};var Vd={};(function u(h,l,g,y){var x=!!(h.Worker&&h.Blob&&h.Promise&&h.OffscreenCanvas&&h.OffscreenCanvasRenderingContext2D&&h.HTMLCanvasElement&&h.HTMLCanvasElement.prototype.transferControlToOffscreen&&h.URL&&h.URL.createObjectURL),b=typeof Path2D=="function"&&typeof DOMMatrix=="function",I=(function(){if(!h.OffscreenCanvas)return!1;try{var K=new OffscreenCanvas(1,1),B=K.getContext("2d");B.fillRect(0,0,1,1);var ee=K.transferToImageBitmap();B.createPattern(ee,"no-repeat")}catch{return!1}return!0})();function S(){}function v(K){var B=l.exports.Promise,ee=B!==void 0?B:h.Promise;return typeof ee=="function"?new ee(K):(K(S,S),null)}var A=(function(K,B){return{transform:function(ee){if(K)return ee;if(B.has(ee))return B.get(ee);var ve=new OffscreenCanvas(ee.width,ee.height),be=ve.getContext("2d");return be.drawImage(ee,0,0),B.set(ee,ve),ve},clear:function(){B.clear()}}})(I,new Map),k=(function(){var K=Math.floor(16.666666666666668),B,ee,ve={},be=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(B=function(Oe){var Ce=Math.random();return ve[Ce]=requestAnimationFrame(function Me(fe){be===fe||be+K-1<fe?(be=fe,delete ve[Ce],Oe()):ve[Ce]=requestAnimationFrame(Me)}),Ce},ee=function(Oe){ve[Oe]&&cancelAnimationFrame(ve[Oe])}):(B=function(Oe){return setTimeout(Oe,K)},ee=function(Oe){return clearTimeout(Oe)}),{frame:B,cancel:ee}})(),O=(function(){var K,B,ee={};function ve(be){function Oe(Ce,Me){be.postMessage({options:Ce||{},callback:Me})}be.init=function(Me){var fe=Me.transferControlToOffscreen();be.postMessage({canvas:fe},[fe])},be.fire=function(Me,fe,De){if(B)return Oe(Me,null),B;var Ke=Math.random().toString(36).slice(2);return B=v(function(He){function st(We){We.data.callback===Ke&&(delete ee[Ke],be.removeEventListener("message",st),B=null,A.clear(),De(),He())}be.addEventListener("message",st),Oe(Me,Ke),ee[Ke]=st.bind(null,{data:{callback:Ke}})}),B},be.reset=function(){be.postMessage({reset:!0});for(var Me in ee)ee[Me](),delete ee[Me]}}return function(){if(K)return K;if(!g&&x){var be=["var CONFETTI, SIZE = {}, module = {};","("+u.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{K=new Worker(URL.createObjectURL(new Blob([be])))}catch(Oe){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",Oe),null}ve(K)}return K}})(),X={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function q(K,B){return B?B(K):K}function F(K){return K!=null}function V(K,B,ee){return q(K&&F(K[B])?K[B]:X[B],ee)}function Y(K){return K<0?0:Math.floor(K)}function R(K,B){return Math.floor(Math.random()*(B-K))+K}function N(K){return parseInt(K,16)}function M(K){return K.map(D)}function D(K){var B=String(K).replace(/[^0-9a-f]/gi,"");return B.length<6&&(B=B[0]+B[0]+B[1]+B[1]+B[2]+B[2]),{r:N(B.substring(0,2)),g:N(B.substring(2,4)),b:N(B.substring(4,6))}}function Z(K){var B=V(K,"origin",Object);return B.x=V(B,"x",Number),B.y=V(B,"y",Number),B}function z(K){K.width=document.documentElement.clientWidth,K.height=document.documentElement.clientHeight}function Q(K){var B=K.getBoundingClientRect();K.width=B.width,K.height=B.height}function he(K){var B=document.createElement("canvas");return B.style.position="fixed",B.style.top="0px",B.style.left="0px",B.style.pointerEvents="none",B.style.zIndex=K,B}function Ae(K,B,ee,ve,be,Oe,Ce,Me,fe){K.save(),K.translate(B,ee),K.rotate(Oe),K.scale(ve,be),K.arc(0,0,1,Ce,Me,fe),K.restore()}function we(K){var B=K.angle*(Math.PI/180),ee=K.spread*(Math.PI/180);return{x:K.x,y:K.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:K.startVelocity*.5+Math.random()*K.startVelocity,angle2D:-B+(.5*ee-Math.random()*ee),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:K.color,shape:K.shape,tick:0,totalTicks:K.ticks,decay:K.decay,drift:K.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:K.gravity*3,ovalScalar:.6,scalar:K.scalar,flat:K.flat}}function xe(K,B){B.x+=Math.cos(B.angle2D)*B.velocity+B.drift,B.y+=Math.sin(B.angle2D)*B.velocity+B.gravity,B.velocity*=B.decay,B.flat?(B.wobble=0,B.wobbleX=B.x+10*B.scalar,B.wobbleY=B.y+10*B.scalar,B.tiltSin=0,B.tiltCos=0,B.random=1):(B.wobble+=B.wobbleSpeed,B.wobbleX=B.x+10*B.scalar*Math.cos(B.wobble),B.wobbleY=B.y+10*B.scalar*Math.sin(B.wobble),B.tiltAngle+=.1,B.tiltSin=Math.sin(B.tiltAngle),B.tiltCos=Math.cos(B.tiltAngle),B.random=Math.random()+2);var ee=B.tick++/B.totalTicks,ve=B.x+B.random*B.tiltCos,be=B.y+B.random*B.tiltSin,Oe=B.wobbleX+B.random*B.tiltCos,Ce=B.wobbleY+B.random*B.tiltSin;if(K.fillStyle="rgba("+B.color.r+", "+B.color.g+", "+B.color.b+", "+(1-ee)+")",K.beginPath(),b&&B.shape.type==="path"&&typeof B.shape.path=="string"&&Array.isArray(B.shape.matrix))K.fill(oe(B.shape.path,B.shape.matrix,B.x,B.y,Math.abs(Oe-ve)*.1,Math.abs(Ce-be)*.1,Math.PI/10*B.wobble));else if(B.shape.type==="bitmap"){var Me=Math.PI/10*B.wobble,fe=Math.abs(Oe-ve)*.1,De=Math.abs(Ce-be)*.1,Ke=B.shape.bitmap.width*B.scalar,He=B.shape.bitmap.height*B.scalar,st=new DOMMatrix([Math.cos(Me)*fe,Math.sin(Me)*fe,-Math.sin(Me)*De,Math.cos(Me)*De,B.x,B.y]);st.multiplySelf(new DOMMatrix(B.shape.matrix));var We=K.createPattern(A.transform(B.shape.bitmap),"no-repeat");We.setTransform(st),K.globalAlpha=1-ee,K.fillStyle=We,K.fillRect(B.x-Ke/2,B.y-He/2,Ke,He),K.globalAlpha=1}else if(B.shape==="circle")K.ellipse?K.ellipse(B.x,B.y,Math.abs(Oe-ve)*B.ovalScalar,Math.abs(Ce-be)*B.ovalScalar,Math.PI/10*B.wobble,0,2*Math.PI):Ae(K,B.x,B.y,Math.abs(Oe-ve)*B.ovalScalar,Math.abs(Ce-be)*B.ovalScalar,Math.PI/10*B.wobble,0,2*Math.PI);else if(B.shape==="star")for(var Qe=Math.PI/2*3,St=4*B.scalar,ln=8*B.scalar,xt=B.x,dt=B.y,ot=5,Jt=Math.PI/ot;ot--;)xt=B.x+Math.cos(Qe)*ln,dt=B.y+Math.sin(Qe)*ln,K.lineTo(xt,dt),Qe+=Jt,xt=B.x+Math.cos(Qe)*St,dt=B.y+Math.sin(Qe)*St,K.lineTo(xt,dt),Qe+=Jt;else K.moveTo(Math.floor(B.x),Math.floor(B.y)),K.lineTo(Math.floor(B.wobbleX),Math.floor(be)),K.lineTo(Math.floor(Oe),Math.floor(Ce)),K.lineTo(Math.floor(ve),Math.floor(B.wobbleY));return K.closePath(),K.fill(),B.tick<B.totalTicks}function le(K,B,ee,ve,be){var Oe=B.slice(),Ce=K.getContext("2d"),Me,fe,De=v(function(Ke){function He(){Me=fe=null,Ce.clearRect(0,0,ve.width,ve.height),A.clear(),be(),Ke()}function st(){g&&!(ve.width===y.width&&ve.height===y.height)&&(ve.width=K.width=y.width,ve.height=K.height=y.height),!ve.width&&!ve.height&&(ee(K),ve.width=K.width,ve.height=K.height),Ce.clearRect(0,0,ve.width,ve.height),Oe=Oe.filter(function(We){return xe(Ce,We)}),Oe.length?Me=k.frame(st):He()}Me=k.frame(st),fe=He});return{addFettis:function(Ke){return Oe=Oe.concat(Ke),De},canvas:K,promise:De,reset:function(){Me&&k.cancel(Me),fe&&fe()}}}function ne(K,B){var ee=!K,ve=!!V(B||{},"resize"),be=!1,Oe=V(B,"disableForReducedMotion",Boolean),Ce=x&&!!V(B||{},"useWorker"),Me=Ce?O():null,fe=ee?z:Q,De=K&&Me?!!K.__confetti_initialized:!1,Ke=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,He;function st(Qe,St,ln){for(var xt=V(Qe,"particleCount",Y),dt=V(Qe,"angle",Number),ot=V(Qe,"spread",Number),Jt=V(Qe,"startVelocity",Number),Le=V(Qe,"decay",Number),Ur=V(Qe,"gravity",Number),Qi=V(Qe,"drift",Number),Un=V(Qe,"colors",M),xi=V(Qe,"ticks",Number),An=V(Qe,"shapes"),yi=V(Qe,"scalar"),Vn=!!V(Qe,"flat"),en=Z(Qe),_r=xt,Zn=[],yo=K.width*en.x,Mt=K.height*en.y;_r--;)Zn.push(we({x:yo,y:Mt,angle:dt,spread:ot,startVelocity:Jt,color:Un[_r%Un.length],shape:An[R(0,An.length)],ticks:xi,decay:Le,gravity:Ur,drift:Qi,scalar:yi,flat:Vn}));return He?He.addFettis(Zn):(He=le(K,Zn,fe,St,ln),He.promise)}function We(Qe){var St=Oe||V(Qe,"disableForReducedMotion",Boolean),ln=V(Qe,"zIndex",Number);if(St&&Ke)return v(function(Jt){Jt()});ee&&He?K=He.canvas:ee&&!K&&(K=he(ln),document.body.appendChild(K)),ve&&!De&&fe(K);var xt={width:K.width,height:K.height};Me&&!De&&Me.init(K),De=!0,Me&&(K.__confetti_initialized=!0);function dt(){if(Me){var Jt={getBoundingClientRect:function(){if(!ee)return K.getBoundingClientRect()}};fe(Jt),Me.postMessage({resize:{width:Jt.width,height:Jt.height}});return}xt.width=xt.height=null}function ot(){He=null,ve&&(be=!1,h.removeEventListener("resize",dt)),ee&&K&&(document.body.contains(K)&&document.body.removeChild(K),K=null,De=!1)}return ve&&!be&&(be=!0,h.addEventListener("resize",dt,!1)),Me?Me.fire(Qe,xt,ot):st(Qe,xt,ot)}return We.reset=function(){Me&&Me.reset(),He&&He.reset()},We}var G;function J(){return G||(G=ne(null,{useWorker:!0,resize:!0})),G}function oe(K,B,ee,ve,be,Oe,Ce){var Me=new Path2D(K),fe=new Path2D;fe.addPath(Me,new DOMMatrix(B));var De=new Path2D;return De.addPath(fe,new DOMMatrix([Math.cos(Ce)*be,Math.sin(Ce)*be,-Math.sin(Ce)*Oe,Math.cos(Ce)*Oe,ee,ve])),De}function ce(K){if(!b)throw new Error("path confetti are not supported in this browser");var B,ee;typeof K=="string"?B=K:(B=K.path,ee=K.matrix);var ve=new Path2D(B),be=document.createElement("canvas"),Oe=be.getContext("2d");if(!ee){for(var Ce=1e3,Me=Ce,fe=Ce,De=0,Ke=0,He,st,We=0;We<Ce;We+=2)for(var Qe=0;Qe<Ce;Qe+=2)Oe.isPointInPath(ve,We,Qe,"nonzero")&&(Me=Math.min(Me,We),fe=Math.min(fe,Qe),De=Math.max(De,We),Ke=Math.max(Ke,Qe));He=De-Me,st=Ke-fe;var St=10,ln=Math.min(St/He,St/st);ee=[ln,0,0,ln,-Math.round(He/2+Me)*ln,-Math.round(st/2+fe)*ln]}return{type:"path",path:B,matrix:ee}}function Se(K){var B,ee=1,ve="#000000",be='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof K=="string"?B=K:(B=K.text,ee="scalar"in K?K.scalar:ee,be="fontFamily"in K?K.fontFamily:be,ve="color"in K?K.color:ve);var Oe=10*ee,Ce=""+Oe+"px "+be,Me=new OffscreenCanvas(Oe,Oe),fe=Me.getContext("2d");fe.font=Ce;var De=fe.measureText(B),Ke=Math.ceil(De.actualBoundingBoxRight+De.actualBoundingBoxLeft),He=Math.ceil(De.actualBoundingBoxAscent+De.actualBoundingBoxDescent),st=2,We=De.actualBoundingBoxLeft+st,Qe=De.actualBoundingBoxAscent+st;Ke+=st+st,He+=st+st,Me=new OffscreenCanvas(Ke,He),fe=Me.getContext("2d"),fe.font=Ce,fe.fillStyle=ve,fe.fillText(B,We,Qe);var St=1/ee;return{type:"bitmap",bitmap:Me.transferToImageBitmap(),matrix:[St,0,0,St,-Ke*St/2,-He*St/2]}}l.exports=function(){return J().apply(this,arguments)},l.exports.reset=function(){J().reset()},l.exports.create=ne,l.exports.shapeFromPath=ce,l.exports.shapeFromText=Se})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),Vd,!1);const bf=Vd.exports;Vd.exports.create;const kg=()=>{const{events:u,createEvent:h,deleteEvent:l}=Tr(),g=Wn(),[y,x]=W.useState(!1),[b,I]=W.useState({title:"",date:"",location:""}),S=async A=>{if(A.preventDefault(),!!b.title)try{const k=await h(b);bf({particleCount:100,spread:70,origin:{y:.6},colors:["#6366f1","#a855f7","#ec4899","#f472b6"]}),I({title:"",date:"",location:""}),x(!1),k&&k.id&&g(`/event/${k.id}`)}catch(k){console.error("Failed to create event:",k),alert("Failed to create event. Please try again.")}},v=(A,k)=>{A.preventDefault(),confirm("Are you sure you want to delete this event?")&&l(k)};return r.jsxs("div",{style:{maxWidth:"56rem",margin:"0 auto",padding:"16px"},children:[r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[r.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",margin:0},children:"My Events"}),r.jsxs("button",{onClick:()=>x(!0),className:"btn btn-primary",style:{fontSize:"14px",padding:"8px 16px"},children:[r.jsx(Ft,{size:16})," New Event"]})]}),r.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",margin:0},children:"Create and manage your events"})]}),y&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:50,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:()=>x(!1),children:r.jsxs("div",{className:"card",style:{maxWidth:"32rem",width:"100%",padding:"2rem"},onClick:A=>A.stopPropagation(),children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"1.5rem",color:"var(--text-primary)"},children:"Create New Event"}),r.jsxs("form",{onSubmit:S,style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Event Type"}),r.jsxs("select",{className:"input",value:b.eventType||"host",onChange:A=>I({...b,eventType:A.target.value}),children:[r.jsx("option",{value:"host",children:" Host Event (Birthday, Wedding, Party)"}),r.jsx("option",{value:"shared",children:" Shared Event (Trip, Outing, Group Activity)"})]}),r.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-tertiary)",marginTop:"0.5rem"},children:b.eventType==="shared"?"Everyone can add expenses and manage the event together":"You host, others are guests with limited permissions"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Event Title"}),r.jsx("input",{type:"text",value:b.title,onChange:A=>I({...b,title:A.target.value}),className:"input",placeholder:"e.g. Annual Conference 2024",autoFocus:!0})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Date"}),r.jsx("input",{type:"date",value:b.date,onChange:A=>I({...b,date:A.target.value}),className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Location"}),r.jsx("input",{type:"text",value:b.location,onChange:A=>I({...b,location:A.target.value}),className:"input",placeholder:"Grand Hall"})]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.75rem",marginTop:"1rem"},children:[r.jsx("button",{type:"button",onClick:()=>x(!1),className:"btn btn-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",children:"Create Event"})]})]})]})}),u.length===0?r.jsxs("div",{className:"card",style:{padding:"4rem 2rem",textAlign:"center",backgroundColor:"var(--bg-secondary)"},children:[r.jsx("div",{style:{width:"4rem",height:"4rem",margin:"0 auto 1.5rem",borderRadius:"50%",backgroundColor:"var(--bg-tertiary)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-tertiary)"},children:r.jsx(Nr,{size:32})}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"0.5rem"},children:"No events yet"}),r.jsx("p",{style:{color:"var(--text-secondary)"},children:'Click "New Event" to create your first event'})]}):r.jsx("div",{style:{display:"grid",gap:"12px"},children:u.sort((A,k)=>!A.date&&!k.date?0:A.date?k.date?new Date(A.date)-new Date(k.date):-1:1).map(A=>{const k=A.role==="guest",O=k?`/guest/event/${A.id}`:`/event/${A.id}`;return r.jsx(kr,{to:O,style:{textDecoration:"none"},children:r.jsxs("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",padding:"16px",border:"1px solid var(--border)",boxShadow:"0 1px 3px rgba(0,0,0,0.05)",display:"flex",alignItems:"center",gap:"16px",transition:"all 0.2s",cursor:"pointer"},onMouseEnter:X=>{X.currentTarget.style.transform="translateY(-2px)",X.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},onMouseLeave:X=>{X.currentTarget.style.transform="translateY(0)",X.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.05)"},children:[r.jsxs("div",{style:{width:"56px",height:"56px",background:k?"linear-gradient(135deg, #60a5fa, #3b82f6)":"linear-gradient(135deg, #6366f1, #a855f7)",borderRadius:"12px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexShrink:0,color:"white"},children:[r.jsx("span",{style:{fontSize:"10px",fontWeight:700,textTransform:"uppercase",opacity:.9},children:A.date?new Date(A.date).toLocaleString("default",{month:"short"}):"TBD"}),r.jsx("span",{style:{fontSize:"20px",fontWeight:700,lineHeight:1},children:A.date?new Date(A.date).getDate():"?"})]}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[r.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"var(--text-primary)",margin:0,wordBreak:"break-word",lineHeight:"1.3"},children:A.title}),k&&r.jsx("span",{style:{padding:"2px 8px",background:"#dbeafe",color:"#1e40af",borderRadius:"12px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",flexShrink:0},children:"GUEST"})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",fontSize:"13px",color:"var(--text-secondary)"},children:[A.location&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[r.jsx(qi,{size:12}),A.location]}),!k&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx(Vt,{size:12}),A.guests?.length||0]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[!k&&r.jsx("button",{onClick:X=>v(X,A.id),style:{padding:"8px",color:"#9ca3af",transition:"all 0.2s",border:"none",background:"none",cursor:"pointer",borderRadius:"8px"},onMouseEnter:X=>{X.currentTarget.style.background="#fee2e2",X.currentTarget.style.color="#ef4444"},onMouseLeave:X=>{X.currentTarget.style.background="none",X.currentTarget.style.color="#9ca3af"},title:"Delete Event",children:r.jsx(Qt,{size:16})}),r.jsx(ag,{size:18,style:{color:"#9ca3af"}})]})]})},A.id)})})]})},Ng=({tabs:u,activeTab:h,onTabChange:l})=>r.jsx("div",{style:{borderBottom:"2px solid var(--border)",marginBottom:"2rem"},children:r.jsx("div",{style:{display:"flex",gap:"0.25rem",justifyContent:"center",flexWrap:"wrap",padding:"0.5rem"},children:u.map(g=>{const y=h===g.id,x=g.icon;return r.jsxs("button",{onClick:()=>l(g.id),title:g.label,style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"0.25rem",padding:"0.75rem 1rem",background:y?"var(--bg-secondary)":"transparent",border:"none",borderBottom:y?"3px solid var(--primary)":"3px solid transparent",borderRadius:y?"8px 8px 0 0":"0",color:y?"var(--primary)":"var(--text-secondary)",fontSize:"0.75rem",fontWeight:y?600:500,cursor:"pointer",transition:"all 0.2s ease",position:"relative",marginBottom:"-2px",minWidth:"64px"},onMouseEnter:b=>{y||(b.currentTarget.style.background="var(--bg-secondary)",b.currentTarget.style.color="var(--text-primary)")},onMouseLeave:b=>{y||(b.currentTarget.style.background="transparent",b.currentTarget.style.color="var(--text-secondary)")},children:[r.jsxs("div",{style:{position:"relative"},children:[r.jsx(x,{size:22}),g.badge&&g.badge>0&&r.jsx("span",{style:{position:"absolute",top:"-6px",right:"-8px",display:"inline-flex",alignItems:"center",justifyContent:"center",minWidth:"18px",height:"18px",padding:"0 4px",background:y?"var(--primary)":"#ef4444",color:"white",borderRadius:"999px",fontSize:"0.625rem",fontWeight:700},children:g.badge})]}),r.jsx("span",{style:{fontSize:"0.6875rem",fontWeight:500},children:g.label})]},g.id)})})}),Tg=({event:u})=>{const[h,l]=W.useState(!1),[g,y]=W.useState(""),[x,b]=W.useState([]);if(!u)return null;const I=u.guests?.length||0,S=u.guests?.filter(F=>F.rsvp===!0)||[],v=u.guests?.filter(F=>F.attended)||[],A=u.guests?.filter(F=>F.rsvp===null||F.rsvp===void 0).length||0,k=u.guests?.filter(F=>F.rsvp===!1).length||0,O=I>0?Math.round(v.length/I*100):0,X=I>0?Math.round((S.length+k)/I*100):0,q=(F,V)=>{y(F),b(V),l(!0)};return r.jsxs("div",{children:[r.jsxs("div",{className:"card",style:{marginBottom:"2rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"2rem"},children:[r.jsx("h1",{style:{fontSize:"2.25rem",fontWeight:900,marginBottom:"1rem",color:"white",lineHeight:"1.2",letterSpacing:"-0.02em",textShadow:"0 2px 12px rgba(0,0,0,0.15)"},children:u.title}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1.5rem",fontSize:"0.9375rem",opacity:.95},children:[r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Nr,{size:16}),u.date?new Date(u.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Date TBD"]}),u.location&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(qi,{size:16}),u.location]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1.75rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[r.jsx("div",{style:{width:"3.5rem",height:"3.5rem",borderRadius:"var(--radius-lg)",background:"rgba(99, 102, 241, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Vt,{size:28,style:{color:"var(--primary)"}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--text-primary)"},children:I}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",fontWeight:500},children:"Total Invited"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.8125rem",paddingTop:"0.75rem",borderTop:"1px solid var(--border)",flexWrap:"wrap"},children:[r.jsxs("button",{onClick:()=>q("Confirmed Guests",S),style:{background:"none",border:"none",padding:0,color:"#10b981",fontWeight:500,cursor:"pointer",textDecoration:"underline"},children:[" ",S.length," confirmed"]}),r.jsxs("button",{onClick:()=>q("Declined Guests",u.guests?.filter(F=>F.rsvp===!1)||[]),style:{background:"none",border:"none",padding:0,color:"#ef4444",fontWeight:500,cursor:"pointer",textDecoration:"underline"},children:[" ",k," declined"]}),r.jsxs("span",{style:{color:"#94a3b8",fontWeight:500},children:[" ",A," pending"]})]})]}),r.jsxs("div",{className:"card",style:{padding:"1.75rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[r.jsx("div",{style:{width:"3.5rem",height:"3.5rem",borderRadius:"var(--radius-lg)",background:"rgba(16, 185, 129, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(js,{size:28,style:{color:"#10b981"}})}),r.jsxs("div",{children:[r.jsx("button",{onClick:()=>q("Checked-In Guests",v),style:{background:"none",border:"none",padding:0,cursor:"pointer"},children:r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--text-primary)",textDecoration:"underline"},children:v.length})}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",fontWeight:500},children:"Checked In"})]})]}),r.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)",paddingTop:"0.75rem",borderTop:"1px solid var(--border)"},children:[r.jsxs("span",{style:{fontWeight:600,color:"#10b981"},children:[O,"%"]})," attendance rate"]})]}),r.jsxs("div",{className:"card",style:{padding:"1.75rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[r.jsx("div",{style:{width:"3.5rem",height:"3.5rem",borderRadius:"var(--radius-lg)",background:"rgba(99, 102, 241, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(ks,{size:28,style:{color:"var(--primary)"}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--text-primary)"},children:S.length+k}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",fontWeight:500},children:"RSVPs"})]})]}),r.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)",paddingTop:"0.75rem",borderTop:"1px solid var(--border)"},children:[r.jsxs("span",{style:{fontWeight:600,color:"var(--primary)"},children:[X,"%"]})," response rate"]})]})]}),h&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"100%",maxHeight:"80vh",display:"flex",flexDirection:"column",padding:0},children:[r.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:700},children:[g," (",x.length,")"]}),r.jsx("button",{onClick:()=>l(!1),className:"btn btn-secondary",style:{padding:"0.5rem"},children:r.jsx(kt,{size:20})})]}),r.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:x.length===0?r.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:"No guests found"}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:x.map(F=>r.jsxs("div",{className:"card",style:{padding:"1rem",background:"var(--bg-secondary)"},children:[r.jsx("div",{style:{fontWeight:600,color:"var(--text-primary)",marginBottom:"0.25rem"},children:F.name}),F.phone&&r.jsx("div",{style:{fontSize:"0.875rem"},children:r.jsxs("a",{href:`tel:${F.phone}`,style:{color:"var(--primary)",textDecoration:"none"},children:[" ",F.phone]})}),F.attended&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"#10b981",marginTop:"0.5rem",fontWeight:500},children:[" Checked in ",F.attendedCount,"x"]})]},F.id))})})]})})]})},_g=({event:u,onUpdateCatering:h})=>{const[l,g]=W.useState(u.catering?.items||[]),[y,x]=W.useState(!1),[b,I]=W.useState(null),[S,v]=W.useState({name:"",category:"appetizer",quantity:"",servings:"",cost:"",vendor:"",status:"planned"}),A=[{id:"appetizer",label:"Appetizers",emoji:""},{id:"main",label:"Main Course",emoji:""},{id:"dessert",label:"Desserts",emoji:""},{id:"beverage",label:"Beverages",emoji:""},{id:"other",label:"Other",emoji:""}],k=[{id:"planned",label:"Planned",color:"var(--text-tertiary)"},{id:"ordered",label:"Ordered",color:"var(--warning)"},{id:"confirmed",label:"Confirmed",color:"var(--success)"}],O=()=>{if(!S.name)return;const D={id:Date.now().toString(),...S,quantity:parseInt(S.quantity)||0,servings:parseInt(S.servings)||0,cost:parseFloat(S.cost)||0},Z=[...l,D];g(Z),h?.(Z),v({name:"",category:"appetizer",quantity:"",servings:"",cost:"",vendor:"",status:"planned"}),x(!1)},X=D=>{const Z=l.filter(z=>z.id!==D);g(Z),h?.(Z)},q=(D,Z)=>{const z=l.map(Q=>Q.id===D?{...Q,status:Z}:Q);g(z),h?.(z)},F=D=>{I({...D})},V=()=>{if(!b.name)return;const D=l.map(Z=>Z.id===b.id?{...b,quantity:parseInt(b.quantity)||0,servings:parseInt(b.servings)||0,cost:parseFloat(b.cost)||0}:Z);g(D),h?.(D),I(null)},Y=()=>{I(null)},R=l.reduce((D,Z)=>D+(Z.cost||0),0),N=l.reduce((D,Z)=>D+(Z.servings||0),0),M=u.guests?.filter(D=>D.rsvp===!0).length||0;return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>x(!y),className:"btn btn-primary",style:{marginBottom:"1.5rem"},children:[r.jsx(Ft,{size:16})," Add Menu Item"]}),y&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"New Menu Item"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Item Name*"}),r.jsx("input",{type:"text",className:"form-input",value:S.name,onChange:D=>v({...S,name:D.target.value}),placeholder:"e.g., Caesar Salad",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Category"}),r.jsx("select",{className:"form-input",value:S.category,onChange:D=>v({...S,category:D.target.value}),children:A.map(D=>r.jsxs("option",{value:D.id,children:[D.emoji," ",D.label]},D.id))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Quantity"}),r.jsx("input",{type:"number",className:"form-input",value:S.quantity,onChange:D=>v({...S,quantity:D.target.value}),placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Servings"}),r.jsx("input",{type:"number",className:"form-input",value:S.servings,onChange:D=>v({...S,servings:D.target.value}),placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Cost ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:S.cost,onChange:D=>v({...S,cost:D.target.value}),placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Vendor (Optional)"}),r.jsx("input",{type:"text",className:"form-input",value:S.vendor,onChange:D=>v({...S,vendor:D.target.value}),placeholder:"Vendor name"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{onClick:O,className:"btn btn-primary",children:[r.jsx($t,{size:16})," Add Item"]}),r.jsxs("button",{onClick:()=>x(!1),className:"btn btn-secondary",children:[r.jsx(kt,{size:16})," Cancel"]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Menu Items"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--primary)"},children:l.length})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Servings"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--success)"},children:N})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Confirmed Guests"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--text-primary)"},children:M})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Cost"}),r.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--warning)"},children:["$",R.toFixed(2)]})]})]}),A.map(D=>{const Z=l.filter(z=>z.category===D.id);return Z.length===0?null:r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{children:D.emoji}),D.label,r.jsx("span",{className:"badge badge-primary",children:Z.length})]}),r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:Z.map(z=>r.jsx("div",{children:b?.id===z.id?r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.75rem"},children:"Edit Menu Item"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.75rem",marginBottom:"0.75rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Item Name"}),r.jsx("input",{type:"text",className:"form-input",value:b.name,onChange:Q=>I({...b,name:Q.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Category"}),r.jsx("select",{className:"form-input",value:b.category,onChange:Q=>I({...b,category:Q.target.value}),style:{padding:"0.5rem"},children:A.map(Q=>r.jsx("option",{value:Q.id,children:Q.label},Q.id))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Quantity"}),r.jsx("input",{type:"number",className:"form-input",value:b.quantity,onChange:Q=>I({...b,quantity:Q.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Servings"}),r.jsx("input",{type:"number",className:"form-input",value:b.servings,onChange:Q=>I({...b,servings:Q.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Cost ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:b.cost,onChange:Q=>I({...b,cost:Q.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Vendor"}),r.jsx("input",{type:"text",className:"form-input",value:b.vendor||"",onChange:Q=>I({...b,vendor:Q.target.value}),style:{padding:"0.5rem"}})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("button",{onClick:V,className:"btn btn-primary",style:{padding:"0.5rem 1rem"},children:[r.jsx($t,{size:14})," Save"]}),r.jsxs("button",{onClick:Y,className:"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:[r.jsx(kt,{size:14})," Cancel"]})]})]}):r.jsx("div",{className:"card",style:{padding:"1rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.5rem"},children:z.name}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:[r.jsxs("span",{children:["Qty: ",z.quantity]}),r.jsxs("span",{children:["Servings: ",z.servings]}),r.jsxs("span",{style:{fontWeight:600,color:"var(--warning)"},children:["$",z.cost.toFixed(2)]}),z.vendor&&r.jsxs("span",{children:["Vendor: ",z.vendor]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("select",{value:z.status,onChange:Q=>q(z.id,Q.target.value),style:{padding:"0.375rem 0.75rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border)",fontSize:"0.875rem",fontWeight:500,color:k.find(Q=>Q.id===z.status)?.color,cursor:"pointer"},children:k.map(Q=>r.jsx("option",{value:Q.id,children:Q.label},Q.id))}),r.jsx("button",{onClick:()=>F(z),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--primary)",cursor:"pointer",borderRadius:"var(--radius-md)"},title:"Edit item",children:r.jsx(pi,{size:16})}),r.jsx("button",{onClick:()=>X(z.id),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--error)",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(Qt,{size:16})})]})]})})},z.id))})]},D.id)}),l.length===0&&!y&&r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[r.jsx(Cf,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"No Menu Items Yet"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Start planning your menu by adding items"}),r.jsxs("button",{onClick:()=>x(!0),className:"btn btn-primary",children:[r.jsx(Ft,{size:16})," Add First Item"]})]})]})},Rg=({event:u,onUpdateTasks:h})=>{const[l,g]=W.useState(u.tasks||[]),[y,x]=W.useState(!1),[b,I]=W.useState({title:"",category:"planning",priority:"medium",deadline:"",status:"not-started"}),S=[{id:"planning",label:"Planning",emoji:""},{id:"booking",label:"Booking",emoji:""},{id:"day-of",label:"Day-of Event",emoji:""},{id:"post-event",label:"Post-Event",emoji:""}],v=[{id:"high",label:"High",color:"var(--error)"},{id:"medium",label:"Medium",color:"var(--warning)"},{id:"low",label:"Low",color:"var(--success)"}],A=[{id:"not-started",label:"Not Started",color:"var(--text-tertiary)"},{id:"in-progress",label:"In Progress",color:"var(--warning)"},{id:"completed",label:"Completed",color:"var(--success)"}],k=()=>{if(!b.title)return;const N={id:Date.now().toString(),...b,createdAt:new Date().toISOString()},M=[...l,N];g(M),h?.(M),I({title:"",category:"planning",priority:"medium",deadline:"",status:"not-started"}),x(!1)},O=N=>{const M=l.filter(D=>D.id!==N);g(M),h?.(M)},X=(N,M)=>{const D=l.map(Z=>Z.id===N?{...Z,status:M}:Z);g(D),h?.(D)},q=l.length,F=l.filter(N=>N.status==="completed").length,V=l.filter(N=>N.status==="in-progress").length,Y=q>0?F/q*100:0,R=l.filter(N=>!N.deadline||N.status==="completed"?!1:new Date(N.deadline)<new Date);return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>x(!y),className:"btn btn-primary",style:{marginBottom:"1.5rem"},children:[r.jsx(Ft,{size:16})," Add Task"]}),y&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"New Task"}),r.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Task Title*"}),r.jsx("input",{type:"text",className:"form-input",value:b.title,onChange:N=>I({...b,title:N.target.value}),placeholder:"e.g., Book photographer",autoFocus:!0})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Category"}),r.jsx("select",{className:"form-input",value:b.category,onChange:N=>I({...b,category:N.target.value}),children:S.map(N=>r.jsxs("option",{value:N.id,children:[N.emoji," ",N.label]},N.id))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Priority"}),r.jsx("select",{className:"form-input",value:b.priority,onChange:N=>I({...b,priority:N.target.value}),children:v.map(N=>r.jsx("option",{value:N.id,children:N.label},N.id))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Deadline (Optional)"}),r.jsx("input",{type:"date",className:"form-input",value:b.deadline,onChange:N=>I({...b,deadline:N.target.value})})]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{onClick:k,className:"btn btn-primary",children:[r.jsx($t,{size:16})," Add Task"]}),r.jsxs("button",{onClick:()=>x(!1),className:"btn btn-secondary",children:[r.jsx(kt,{size:16})," Cancel"]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Tasks"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--primary)"},children:q})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Completed"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--success)"},children:F})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"In Progress"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--warning)"},children:V})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Overdue"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--error)"},children:R.length})]})]}),r.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[r.jsx("span",{style:{fontSize:"0.9375rem",fontWeight:500},children:"Overall Progress"}),r.jsxs("span",{style:{fontSize:"0.9375rem",fontWeight:600,color:"var(--primary)"},children:[Y.toFixed(0),"%"]})]}),r.jsx("div",{style:{height:"12px",background:"var(--bg-secondary)",borderRadius:"999px",overflow:"hidden"},children:r.jsx("div",{style:{height:"100%",width:`${Y}%`,background:"linear-gradient(90deg, var(--success) 0%, #059669 100%)",transition:"width 0.5s ease",borderRadius:"999px"}})})]}),S.map(N=>{const M=l.filter(D=>D.category===N.id);return M.length===0?null:r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{children:N.emoji}),N.label,r.jsx("span",{className:"badge badge-primary",children:M.length})]}),r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:M.map(D=>{const Z=D.deadline&&new Date(D.deadline)<new Date&&D.status!=="completed",z=v.find(Q=>Q.id===D.priority)?.color;return r.jsx("div",{className:"card",style:{padding:"1rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600},children:D.title}),r.jsx("span",{style:{padding:"0.25rem 0.5rem",background:z,color:"white",borderRadius:"var(--radius-sm)",fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase"},children:D.priority})]}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:D.deadline&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:Z?"var(--error)":"inherit"},children:[r.jsx(Nr,{size:14}),new Date(D.deadline).toLocaleDateString(),Z&&" (Overdue)"]})})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("select",{value:D.status,onChange:Q=>X(D.id,Q.target.value),style:{padding:"0.375rem 0.75rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border)",fontSize:"0.875rem",fontWeight:500,color:A.find(Q=>Q.id===D.status)?.color,cursor:"pointer"},children:A.map(Q=>r.jsx("option",{value:Q.id,children:Q.label},Q.id))}),r.jsx("button",{onClick:()=>O(D.id),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--error)",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(Qt,{size:16})})]})]})},D.id)})})]},N.id)}),l.length===0&&!y&&r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[r.jsx(cf,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"No Tasks Yet"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Start organizing your event with a task checklist"}),r.jsxs("button",{onClick:()=>x(!0),className:"btn btn-primary",children:[r.jsx(Ft,{size:16})," Add First Task"]})]})]})},Og=({event:u,onUpdateVenue:h})=>{const[l,g]=W.useState(u.venue||{name:"",address:"",contact:"",phone:"",capacity:"",setupTime:"",eventTime:"",teardownTime:"",bookingStatus:"not-booked",deposit:"",totalCost:"",notes:"",amenities:[]}),[y,x]=W.useState(!u.venue?.name),b=[{id:"not-booked",label:"Not Booked",color:"var(--text-tertiary)"},{id:"pending",label:"Pending",color:"var(--warning)"},{id:"deposit-paid",label:"Deposit Paid",color:"var(--primary)"},{id:"confirmed",label:"Confirmed",color:"var(--success)"}],I=["Parking","Wheelchair Accessible","WiFi","Sound System","Projector/Screen","Kitchen","Bar","Dance Floor","Outdoor Space","Air Conditioning","Heating","Tables & Chairs"],S=()=>{h?.(l),x(!1)},v=()=>{u.venue&&(g(u.venue),x(!1))},A=O=>{const X=l.amenities||[];X.includes(O)?g({...l,amenities:X.filter(q=>q!==O)}):g({...l,amenities:[...X,O]})},k=l.name||u.venue?.name;return!k&&!y?r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[r.jsx(og,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"No Venue Yet"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Add your venue details to keep track of location and booking information"}),r.jsx("button",{onClick:()=>x(!0),className:"btn btn-primary",children:"Add Venue Information"})]}):r.jsx("div",{children:k&&!y?r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)"},children:l.name}),r.jsx("button",{onClick:()=>x(!0),className:"btn btn-secondary",children:"Edit Venue Details"})]}),r.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1.5rem",background:`linear-gradient(135deg, ${b.find(O=>O.id===l.bookingStatus)?.color||"var(--primary)"} 0%, var(--primary-dark) 100%)`,color:"white"},children:[r.jsx("div",{style:{fontSize:"0.875rem",opacity:.9,marginBottom:"0.5rem"},children:"Booking Status"}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700},children:b.find(O=>O.id===l.bookingStatus)?.label})]}),r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(qi,{size:20,style:{color:"var(--primary)"}}),"Location & Contact"]}),r.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[l.address&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Address"}),r.jsx("div",{style:{fontSize:"1rem",color:"var(--text-primary)"},children:l.address})]}),l.contact&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Contact Person"}),r.jsx("div",{style:{fontSize:"1rem",color:"var(--text-primary)"},children:l.contact})]}),l.phone&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Phone"}),r.jsx("div",{style:{fontSize:"1rem",color:"var(--text-primary)"},children:l.phone})]}),l.capacity&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Capacity"}),r.jsxs("div",{style:{fontSize:"1rem",color:"var(--text-primary)"},children:[l.capacity," guests"]})]})]})]}),(l.setupTime||l.eventTime||l.teardownTime)&&r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"Schedule"}),r.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[l.setupTime&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Setup Time"}),r.jsx("div",{style:{fontSize:"1rem",color:"var(--text-primary)"},children:l.setupTime})]}),l.eventTime&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Event Time"}),r.jsx("div",{style:{fontSize:"1rem",color:"var(--text-primary)"},children:l.eventTime})]}),l.teardownTime&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Teardown Time"}),r.jsx("div",{style:{fontSize:"1rem",color:"var(--text-primary)"},children:l.teardownTime})]})]})]}),(l.deposit||l.totalCost)&&r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"Costs"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[l.deposit&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Deposit Paid"}),r.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--warning)"},children:["$",parseFloat(l.deposit).toFixed(2)]})]}),l.totalCost&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Cost"}),r.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--primary)"},children:["$",parseFloat(l.totalCost).toFixed(2)]})]})]})]}),l.amenities&&l.amenities.length>0&&r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"Amenities"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:l.amenities.map(O=>r.jsx("span",{className:"badge badge-primary",children:O},O))})]}),l.notes&&r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"Notes"}),r.jsx("p",{style:{color:"var(--text-secondary)",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:l.notes})]})]})]}):r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1.5rem"},children:k?"Edit Venue Details":"Add Venue Information"}),r.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Venue Name*"}),r.jsx("input",{type:"text",className:"form-input",value:l.name,onChange:O=>g({...l,name:O.target.value}),placeholder:"e.g., Grand Ballroom Hotel"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Capacity"}),r.jsx("input",{type:"number",className:"form-input",value:l.capacity,onChange:O=>g({...l,capacity:O.target.value}),placeholder:"e.g., 200"})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Address"}),r.jsx("input",{type:"text",className:"form-input",value:l.address,onChange:O=>g({...l,address:O.target.value}),placeholder:"Full venue address"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Contact Person"}),r.jsx("input",{type:"text",className:"form-input",value:l.contact,onChange:O=>g({...l,contact:O.target.value}),placeholder:"Name"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Phone"}),r.jsx("input",{type:"tel",className:"form-input",value:l.phone,onChange:O=>g({...l,phone:O.target.value}),placeholder:"+1 (555) 000-0000"})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Setup Time"}),r.jsx("input",{type:"time",className:"form-input",value:l.setupTime,onChange:O=>g({...l,setupTime:O.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Event Time"}),r.jsx("input",{type:"time",className:"form-input",value:l.eventTime,onChange:O=>g({...l,eventTime:O.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Teardown Time"}),r.jsx("input",{type:"time",className:"form-input",value:l.teardownTime,onChange:O=>g({...l,teardownTime:O.target.value})})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Booking Status"}),r.jsx("select",{className:"form-input",value:l.bookingStatus,onChange:O=>g({...l,bookingStatus:O.target.value}),children:b.map(O=>r.jsx("option",{value:O.id,children:O.label},O.id))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Deposit Paid ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:l.deposit,onChange:O=>g({...l,deposit:O.target.value}),placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Total Cost ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:l.totalCost,onChange:O=>g({...l,totalCost:O.target.value}),placeholder:"0.00"})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.75rem"},children:"Amenities"}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"0.5rem"},children:I.map(O=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",padding:"0.5rem",borderRadius:"var(--radius-md)",background:(l.amenities||[]).includes(O)?"var(--bg-secondary)":"transparent"},children:[r.jsx("input",{type:"checkbox",checked:(l.amenities||[]).includes(O),onChange:()=>A(O),style:{cursor:"pointer"}}),r.jsx("span",{style:{fontSize:"0.875rem"},children:O})]},O))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Notes"}),r.jsx("textarea",{className:"form-input",value:l.notes,onChange:O=>g({...l,notes:O.target.value}),placeholder:"Any special requirements, restrictions, or important details...",rows:4,style:{resize:"vertical"}})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",paddingTop:"1rem",borderTop:"1px solid var(--border)"},children:[r.jsxs("button",{onClick:S,className:"btn btn-primary",disabled:!l.name,children:[r.jsx(gf,{size:16})," Save Venue Details"]}),k&&r.jsxs("button",{onClick:v,className:"btn btn-secondary",children:[r.jsx(kt,{size:16})," Cancel"]})]})]})]})})},Dg=({event:u,onUpdateDecorations:h})=>{const[l,g]=W.useState(u.decorations||{theme:"",colorPalette:[],items:[]}),[y,x]=W.useState(!1),[b,I]=W.useState(null),[S,v]=W.useState({item:"",area:"entrance",quantity:"",cost:"",status:"planned"}),A=[{id:"entrance",label:"Entrance",emoji:""},{id:"stage",label:"Stage/Main Area",emoji:""},{id:"tables",label:"Tables",emoji:""},{id:"ceiling",label:"Ceiling",emoji:""},{id:"walls",label:"Walls",emoji:""},{id:"outdoor",label:"Outdoor",emoji:""}],k=[{id:"planned",label:"Planned",color:"var(--text-tertiary)"},{id:"ordered",label:"Ordered",color:"var(--warning)"},{id:"received",label:"Received",color:"var(--success)"}],O=()=>{if(!S.item)return;const D={id:Date.now().toString(),...S,quantity:parseInt(S.quantity)||0,cost:parseFloat(S.cost)||0},Z={...l,items:[...l.items||[],D]};g(Z),h?.(Z),v({item:"",area:"entrance",quantity:"",cost:"",status:"planned"}),x(!1)},X=D=>{const Z={...l,items:l.items.filter(z=>z.id!==D)};g(Z),h?.(Z)},q=(D,Z)=>{const z={...l,items:l.items.map(Q=>Q.id===D?{...Q,status:Z}:Q)};g(z),h?.(z)},F=(D,Z)=>{const z={...l,theme:D,colorPalette:Z};g(z),h?.(z)},V=D=>{I({...D})},Y=()=>{if(!b.item)return;const D={...l,items:l.items.map(Z=>Z.id===b.id?{...b,quantity:parseInt(b.quantity)||0,cost:parseFloat(b.cost)||0}:Z)};g(D),h?.(D),I(null)},R=()=>{I(null)},N=l.items||[],M=N.reduce((D,Z)=>D+(Z.cost||0),0);return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>x(!y),className:"btn btn-primary",style:{marginBottom:"1.5rem"},children:[r.jsx(Ft,{size:16})," Add Decoration Item"]}),y&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"New Decoration Item"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Item*"}),r.jsx("input",{type:"text",className:"form-input",value:S.item,onChange:D=>v({...S,item:D.target.value}),placeholder:"e.g., Balloons, Flowers",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Area"}),r.jsx("select",{className:"form-input",value:S.area,onChange:D=>v({...S,area:D.target.value}),children:A.map(D=>r.jsxs("option",{value:D.id,children:[D.emoji," ",D.label]},D.id))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Quantity"}),r.jsx("input",{type:"number",className:"form-input",value:S.quantity,onChange:D=>v({...S,quantity:D.target.value}),placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Cost ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:S.cost,onChange:D=>v({...S,cost:D.target.value}),placeholder:"0.00"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{onClick:O,className:"btn btn-primary",children:[r.jsx($t,{size:16})," Add Item"]}),r.jsxs("button",{onClick:()=>x(!1),className:"btn btn-secondary",children:[r.jsx(kt,{size:16})," Cancel"]})]})]}),r.jsxs("div",{className:"card",style:{marginBottom:"2rem",padding:"1.5rem"},children:[r.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(pg,{size:20,style:{color:"var(--primary)"}}),"Theme & Color Palette"]}),r.jsx("div",{style:{display:"grid",gap:"1rem"},children:r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Theme Name"}),r.jsx("input",{type:"text",className:"form-input",value:l.theme,onChange:D=>F(D.target.value,l.colorPalette),placeholder:"e.g., Vintage Garden, Modern Elegance"})]})})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Items"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--primary)"},children:N.length})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Cost"}),r.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--warning)"},children:["$",M.toFixed(2)]})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Received"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--success)"},children:N.filter(D=>D.status==="received").length})]})]}),A.map(D=>{const Z=N.filter(z=>z.area===D.id);return Z.length===0?null:r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{children:D.emoji}),D.label,r.jsx("span",{className:"badge badge-primary",children:Z.length})]}),r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:Z.map(z=>r.jsx("div",{children:b?.id===z.id?r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.75rem"},children:"Edit Decoration"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.75rem",marginBottom:"0.75rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Item"}),r.jsx("input",{type:"text",className:"form-input",value:b.item,onChange:Q=>I({...b,item:Q.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Area"}),r.jsx("select",{className:"form-input",value:b.area,onChange:Q=>I({...b,area:Q.target.value}),style:{padding:"0.5rem"},children:A.map(Q=>r.jsx("option",{value:Q.id,children:Q.label},Q.id))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Quantity"}),r.jsx("input",{type:"number",className:"form-input",value:b.quantity,onChange:Q=>I({...b,quantity:Q.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Cost ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:b.cost,onChange:Q=>I({...b,cost:Q.target.value}),style:{padding:"0.5rem"}})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("button",{onClick:Y,className:"btn btn-primary",style:{padding:"0.5rem 1rem"},children:[r.jsx($t,{size:14})," Save"]}),r.jsxs("button",{onClick:R,className:"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:[r.jsx(kt,{size:14})," Cancel"]})]})]}):r.jsx("div",{className:"card",style:{padding:"1rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.5rem"},children:z.item}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:[r.jsxs("span",{children:["Qty: ",z.quantity]}),r.jsxs("span",{style:{fontWeight:600,color:"var(--warning)"},children:["$",z.cost.toFixed(2)]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("select",{value:z.status,onChange:Q=>q(z.id,Q.target.value),style:{padding:"0.375rem 0.75rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border)",fontSize:"0.875rem",fontWeight:500,color:k.find(Q=>Q.id===z.status)?.color,cursor:"pointer"},children:k.map(Q=>r.jsx("option",{value:Q.id,children:Q.label},Q.id))}),r.jsx("button",{onClick:()=>V(z),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--primary)",cursor:"pointer",borderRadius:"var(--radius-md)"},title:"Edit item",children:r.jsx(pi,{size:16})}),r.jsx("button",{onClick:()=>X(z.id),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--error)",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(Qt,{size:16})})]})]})})},z.id))})]},D.id)}),N.length===0&&!y&&r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[r.jsx(vf,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"No Decorations Yet"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Start planning your decor by adding items"}),r.jsxs("button",{onClick:()=>x(!0),className:"btn btn-primary",children:[r.jsx(Ft,{size:16})," Add First Item"]})]})]})},Pg=({event:u,onUpdateGifts:h})=>{const[l,g]=W.useState(u.gifts?.items||[]),[y,x]=W.useState(!1),[b,I]=W.useState(null),[S,v]=W.useState({name:"",quantity:"",cost:"",personalization:"",status:"planned"}),A=[{id:"planned",label:"Planned",color:"var(--text-tertiary)"},{id:"ordered",label:"Ordered",color:"var(--warning)"},{id:"received",label:"Received",color:"var(--success)"},{id:"distributed",label:"Distributed",color:"var(--primary)"}],k=u.guests?.length||0,O=()=>{if(!S.name)return;const M={id:Date.now().toString(),...S,quantity:parseInt(S.quantity)||0,cost:parseFloat(S.cost)||0},D=[...l,M];g(D),h?.({items:D}),v({name:"",quantity:"",cost:"",personalization:"",status:"planned"}),x(!1)},X=M=>{const D=l.filter(Z=>Z.id!==M);g(D),h?.({items:D})},q=(M,D)=>{const Z=l.map(z=>z.id===M?{...z,status:D}:z);g(Z),h?.({items:Z})},F=M=>{I({...M})},V=()=>{if(!b.name)return;const M=l.map(D=>D.id===b.id?{...b,quantity:parseInt(b.quantity)||0,cost:parseFloat(b.cost)||0}:D);g(M),h?.({items:M}),I(null)},Y=()=>{I(null)},R=l.reduce((M,D)=>M+(D.cost||0),0),N=l.reduce((M,D)=>M+(D.quantity||0),0);return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>x(!y),className:"btn btn-primary",style:{marginBottom:"1.5rem"},children:[r.jsx(Ft,{size:16})," Add Gift Item"]}),y&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"New Gift Item"}),r.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Gift Name*"}),r.jsx("input",{type:"text",className:"form-input",value:S.name,onChange:M=>v({...S,name:M.target.value}),placeholder:"e.g., Personalized Keychains",autoFocus:!0})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Quantity"}),r.jsx("input",{type:"number",className:"form-input",value:S.quantity,onChange:M=>v({...S,quantity:M.target.value}),placeholder:k?`Suggested: ${k}`:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Cost per Item ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:S.cost,onChange:M=>v({...S,cost:M.target.value}),placeholder:"0.00"})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Personalization Notes (Optional)"}),r.jsx("input",{type:"text",className:"form-input",value:S.personalization,onChange:M=>v({...S,personalization:M.target.value}),placeholder:"e.g., Names engraved, Custom message"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{onClick:O,className:"btn btn-primary",children:[r.jsx($t,{size:16})," Add Gift"]}),r.jsxs("button",{onClick:()=>x(!1),className:"btn btn-secondary",children:[r.jsx(kt,{size:16})," Cancel"]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Gift Types"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--primary)"},children:l.length})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Quantity"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--success)"},children:N})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Guests"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--text-primary)"},children:k})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Cost"}),r.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--warning)"},children:["$",R.toFixed(2)]})]})]}),k>0&&N<k&&r.jsx("div",{className:"card",style:{padding:"1rem",marginBottom:"1.5rem",background:"#fef3c7",borderLeft:"4px solid var(--warning)"},children:r.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",fontWeight:500},children:[" You need ",k-N," more gifts to cover all guests"]})}),r.jsxs("button",{onClick:()=>x(!y),className:"btn btn-primary",style:{marginBottom:"1.5rem"},children:[r.jsx(Ft,{size:16})," Add Gift Item"]}),y&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"New Gift Item"}),r.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Gift Name*"}),r.jsx("input",{type:"text",className:"form-input",value:S.name,onChange:M=>v({...S,name:M.target.value}),placeholder:"e.g., Personalized Keychains"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Quantity"}),r.jsx("input",{type:"number",className:"form-input",value:S.quantity,onChange:M=>v({...S,quantity:M.target.value}),placeholder:k?`Suggested: ${k}`:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Cost per Item ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:S.cost,onChange:M=>v({...S,cost:M.target.value}),placeholder:"0.00"})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Personalization Notes (Optional)"}),r.jsx("input",{type:"text",className:"form-input",value:S.personalization,onChange:M=>v({...S,personalization:M.target.value}),placeholder:"e.g., Names engraved, Custom message"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{onClick:O,className:"btn btn-primary",children:[r.jsx($t,{size:16})," Add Gift"]}),r.jsxs("button",{onClick:()=>x(!1),className:"btn btn-secondary",children:[r.jsx(kt,{size:16})," Cancel"]})]})]}),l.length>0&&r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:l.map(M=>r.jsx("div",{children:b?.id===M.id?r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.75rem"},children:"Edit Gift"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.75rem",marginBottom:"0.75rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Gift Name"}),r.jsx("input",{type:"text",className:"form-input",value:b.name,onChange:D=>I({...b,name:D.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Quantity"}),r.jsx("input",{type:"number",className:"form-input",value:b.quantity,onChange:D=>I({...b,quantity:D.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Cost ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:b.cost,onChange:D=>I({...b,cost:D.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Recipient"}),r.jsx("input",{type:"text",className:"form-input",value:b.recipient||"",onChange:D=>I({...b,recipient:D.target.value}),style:{padding:"0.5rem"}})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("button",{onClick:V,className:"btn btn-primary",style:{padding:"0.5rem 1rem"},children:[r.jsx($t,{size:14})," Save"]}),r.jsxs("button",{onClick:Y,className:"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:[r.jsx(kt,{size:14})," Cancel"]})]})]}):r.jsx("div",{className:"card",style:{padding:"1rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.5rem"},children:M.name}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:[r.jsxs("span",{children:["Qty: ",M.quantity]}),r.jsxs("span",{children:["@ $",(M.cost/M.quantity||0).toFixed(2)," each"]}),r.jsxs("span",{style:{fontWeight:600,color:"var(--warning)"},children:["Total: $",M.cost.toFixed(2)]})]}),M.personalization&&r.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)",fontStyle:"italic"},children:M.personalization})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("select",{value:M.status,onChange:D=>q(M.id,D.target.value),style:{padding:"0.375rem 0.75rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border)",fontSize:"0.875rem",fontWeight:500,color:A.find(D=>D.id===M.status)?.color,cursor:"pointer"},children:A.map(D=>r.jsx("option",{value:D.id,children:D.label},D.id))}),r.jsx("button",{onClick:()=>F(M),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--primary)",cursor:"pointer",borderRadius:"var(--radius-md)"},title:"Edit gift",children:r.jsx(pi,{size:16})}),r.jsx("button",{onClick:()=>X(M.id),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--error)",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(Qt,{size:16})})]})]})})},M.id))}),l.length===0&&!y&&r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[r.jsx(uf,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"No Gifts Yet"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Add return gifts or party favors for your guests"}),r.jsxs("button",{onClick:()=>x(!0),className:"btn btn-primary",children:[r.jsx(Ft,{size:16})," Add First Gift"]})]})]})},Mg=({event:u,onUpdateEntertainment:h})=>{const[l,g]=W.useState(u.entertainment||{activities:[],playlist:[]}),[y,x]=W.useState(!1),[b,I]=W.useState(null),[S,v]=W.useState({name:"",time:"",duration:"",performer:"",notes:""}),A=()=>{if(!S.name)return;const Y={id:Date.now().toString(),...S},R={...l,activities:[...l.activities||[],Y]};g(R),h?.(R),v({name:"",time:"",duration:"",performer:"",notes:""}),x(!1)},k=Y=>{const R={...l,activities:l.activities.filter(N=>N.id!==Y)};g(R),h?.(R)},O=Y=>{I({...Y})},X=()=>{if(!b.name)return;const Y={...l,activities:l.activities.map(R=>R.id===b.id?{...b}:R)};g(Y),h?.(Y),I(null)},q=()=>{I(null)},F=l.activities||[],V=[...F].sort((Y,R)=>!Y.time||!R.time?0:Y.time.localeCompare(R.time));return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>x(!y),className:"btn btn-primary",style:{marginBottom:"1.5rem"},children:[r.jsx(Ft,{size:16})," Add Activity"]}),y&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"New Activity"}),r.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Activity Name*"}),r.jsx("input",{type:"text",className:"form-input",value:S.name,onChange:Y=>v({...S,name:Y.target.value}),placeholder:"e.g., DJ Performance, Games, Dance",autoFocus:!0})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Start Time"}),r.jsx("input",{type:"time",className:"form-input",value:S.time,onChange:Y=>v({...S,time:Y.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Duration (minutes)"}),r.jsx("input",{type:"number",className:"form-input",value:S.duration,onChange:Y=>v({...S,duration:Y.target.value}),placeholder:"30"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Performer/Host (Optional)"}),r.jsx("input",{type:"text",className:"form-input",value:S.performer,onChange:Y=>v({...S,performer:Y.target.value}),placeholder:"Name"})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Notes (Optional)"}),r.jsx("textarea",{className:"form-input",value:S.notes,onChange:Y=>v({...S,notes:Y.target.value}),placeholder:"Equipment needed, special instructions, etc.",rows:2})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{onClick:A,className:"btn btn-primary",children:[r.jsx($t,{size:16})," Add Activity"]}),r.jsxs("button",{onClick:()=>x(!1),className:"btn btn-secondary",children:[r.jsx(kt,{size:16})," Cancel"]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Activities"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--primary)"},children:F.length})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Scheduled"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--success)"},children:F.filter(Y=>Y.time).length})]})]}),V.length>0&&r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Nd,{size:20,style:{color:"var(--primary)"}}),"Event Timeline"]}),r.jsx("div",{style:{display:"grid",gap:"1rem"},children:V.map((Y,R)=>r.jsxs("div",{style:{position:"relative",paddingLeft:"2.5rem"},children:[r.jsx("div",{style:{position:"absolute",left:"0",top:"0.5rem",width:"12px",height:"12px",borderRadius:"50%",background:"var(--primary)",border:"3px solid var(--bg-primary)"}}),R<V.length-1&&r.jsx("div",{style:{position:"absolute",left:"5px",top:"1.5rem",bottom:"-1rem",width:"2px",background:"var(--border)"}}),b?.id===Y.id?r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.75rem"},children:"Edit Activity"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.75rem",marginBottom:"0.75rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Activity Name"}),r.jsx("input",{type:"text",className:"form-input",value:b.name,onChange:N=>I({...b,name:N.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Time"}),r.jsx("input",{type:"time",className:"form-input",value:b.time,onChange:N=>I({...b,time:N.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Duration (mins)"}),r.jsx("input",{type:"text",className:"form-input",value:b.duration,onChange:N=>I({...b,duration:N.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Performer/Host"}),r.jsx("input",{type:"text",className:"form-input",value:b.performer||"",onChange:N=>I({...b,performer:N.target.value}),style:{padding:"0.5rem"}})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("button",{onClick:X,className:"btn btn-primary",style:{padding:"0.5rem 1rem"},children:[r.jsx($t,{size:14})," Save"]}),r.jsxs("button",{onClick:q,className:"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:[r.jsx(kt,{size:14})," Cancel"]})]})]}):r.jsx("div",{style:{background:"var(--bg-secondary)",padding:"1rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border)"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.5rem"},children:Y.name}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:[Y.time&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(Nd,{size:14}),Y.time]}),Y.duration&&r.jsxs("span",{children:[" ",Y.duration," mins"]}),Y.performer&&r.jsxs("span",{children:[" ",Y.performer]})]}),Y.notes&&r.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)",fontStyle:"italic"},children:Y.notes})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("button",{onClick:()=>O(Y),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--primary)",cursor:"pointer",borderRadius:"var(--radius-md)"},title:"Edit activity",children:r.jsx(pi,{size:16})}),r.jsx("button",{onClick:()=>k(Y.id),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--error)",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(Qt,{size:16})})]})]})})]},Y.id))})]}),F.length===0&&!y&&r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[r.jsx(ff,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"No Activities Yet"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Plan your entertainment schedule and activities"}),r.jsxs("button",{onClick:()=>x(!0),className:"btn btn-primary",children:[r.jsx(Ft,{size:16})," Add First Activity"]})]})]})},Bg=({event:u,onUpdateVendors:h})=>{const[l,g]=W.useState(u.vendors||[]),[y,x]=W.useState(!1),[b,I]=W.useState(null),[S,v]=W.useState({name:"",category:"other",contact:"",phone:"",email:"",cost:"",status:"contacted",notes:""}),A=[{id:"photography",label:"Photography",emoji:""},{id:"catering",label:"Catering",emoji:""},{id:"entertainment",label:"Entertainment",emoji:""},{id:"decoration",label:"Decoration",emoji:""},{id:"venue",label:"Venue",emoji:""},{id:"transport",label:"Transportation",emoji:""},{id:"other",label:"Other",emoji:""}],k=[{id:"contacted",label:"Contacted",color:"var(--text-tertiary)"},{id:"quoted",label:"Quoted",color:"var(--warning)"},{id:"booked",label:"Booked",color:"var(--success)"},{id:"paid",label:"Paid",color:"var(--primary)"}],O=()=>{if(!S.name)return;const M={id:Date.now().toString(),...S,cost:parseFloat(S.cost)||0},D=[...l,M];g(D),h?.(D),v({name:"",category:"other",contact:"",phone:"",email:"",cost:"",status:"contacted",notes:""}),x(!1)},X=M=>{const D=l.filter(Z=>Z.id!==M);g(D),h?.(D)},q=(M,D)=>{const Z=l.map(z=>z.id===M?{...z,status:D}:z);g(Z),h?.(Z)},F=M=>{I({...M})},V=()=>{if(!b.name)return;const M=l.map(D=>D.id===b.id?{...b,cost:parseFloat(b.cost)||0}:D);g(M),h?.(M),I(null)},Y=()=>{I(null)},R=l.reduce((M,D)=>M+(D.cost||0),0),N=l.filter(M=>M.status==="booked"||M.status==="paid").length;return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>x(!y),className:"btn btn-primary",style:{marginBottom:"1.5rem"},children:[r.jsx(Ft,{size:16})," Add Vendor"]}),y&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"New Vendor"}),r.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Vendor Name*"}),r.jsx("input",{type:"text",className:"form-input",value:S.name,onChange:M=>v({...S,name:M.target.value}),placeholder:"Company or person name",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Category"}),r.jsx("select",{className:"form-input",value:S.category,onChange:M=>v({...S,category:M.target.value}),children:A.map(M=>r.jsxs("option",{value:M.id,children:[M.emoji," ",M.label]},M.id))})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Contact Person"}),r.jsx("input",{type:"text",className:"form-input",value:S.contact,onChange:M=>v({...S,contact:M.target.value}),placeholder:"Name"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Phone"}),r.jsx("input",{type:"tel",className:"form-input",value:S.phone,onChange:M=>v({...S,phone:M.target.value}),placeholder:"+1 (555) 000-0000"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Email"}),r.jsx("input",{type:"email",className:"form-input",value:S.email,onChange:M=>v({...S,email:M.target.value}),placeholder:"email@example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Cost ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:S.cost,onChange:M=>v({...S,cost:M.target.value}),placeholder:"0.00"})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Notes (Optional)"}),r.jsx("textarea",{className:"form-input",value:S.notes,onChange:M=>v({...S,notes:M.target.value}),placeholder:"Contract details, special requirements, etc.",rows:2})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{onClick:O,className:"btn btn-primary",children:[r.jsx($t,{size:16})," Add Vendor"]}),r.jsxs("button",{onClick:()=>x(!1),className:"btn btn-secondary",children:[r.jsx(kt,{size:16})," Cancel"]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Vendors"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--primary)"},children:l.length})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Booked"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--success)"},children:N})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Cost"}),r.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--warning)"},children:["$",R.toFixed(2)]})]})]}),A.map(M=>{const D=l.filter(Z=>Z.category===M.id);return D.length===0?null:r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{children:M.emoji}),M.label,r.jsx("span",{className:"badge badge-primary",children:D.length})]}),r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:D.map(Z=>r.jsx("div",{children:b?.id===Z.id?r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.75rem"},children:"Edit Vendor"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.75rem",marginBottom:"0.75rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Name"}),r.jsx("input",{type:"text",className:"form-input",value:b.name,onChange:z=>I({...b,name:z.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Category"}),r.jsx("select",{className:"form-input",value:b.category,onChange:z=>I({...b,category:z.target.value}),style:{padding:"0.5rem"},children:A.map(z=>r.jsx("option",{value:z.id,children:z.label},z.id))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Contact Person"}),r.jsx("input",{type:"text",className:"form-input",value:b.contact||"",onChange:z=>I({...b,contact:z.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Phone"}),r.jsx("input",{type:"tel",className:"form-input",value:b.phone||"",onChange:z=>I({...b,phone:z.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Email"}),r.jsx("input",{type:"email",className:"form-input",value:b.email||"",onChange:z=>I({...b,email:z.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Cost ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:b.cost,onChange:z=>I({...b,cost:z.target.value}),style:{padding:"0.5rem"}})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("button",{onClick:V,className:"btn btn-primary",style:{padding:"0.5rem 1rem"},children:[r.jsx($t,{size:14})," Save"]}),r.jsxs("button",{onClick:Y,className:"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:[r.jsx(kt,{size:14})," Cancel"]})]})]}):r.jsx("div",{className:"card",style:{padding:"1rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.5rem"},children:Z.name}),r.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.5rem"},children:[Z.contact&&r.jsxs("div",{children:[" ",Z.contact]}),Z.phone&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(uo,{size:14}),r.jsx("a",{href:`tel:${Z.phone}`,style:{color:"var(--primary)"},children:Z.phone})]}),Z.email&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(ks,{size:14}),r.jsx("a",{href:`mailto:${Z.email}`,style:{color:"var(--primary)"},children:Z.email})]}),Z.cost>0&&r.jsxs("div",{style:{fontWeight:600,color:"var(--warning)",marginTop:"0.25rem"},children:["Cost: $",Z.cost.toFixed(2)]})]}),Z.notes&&r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",fontStyle:"italic",marginTop:"0.5rem"},children:Z.notes})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("select",{value:Z.status,onChange:z=>q(Z.id,z.target.value),style:{padding:"0.375rem 0.75rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border)",fontSize:"0.875rem",fontWeight:500,color:k.find(z=>z.id===Z.status)?.color,cursor:"pointer"},children:k.map(z=>r.jsx("option",{value:z.id,children:z.label},z.id))}),r.jsx("button",{onClick:()=>F(Z),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--primary)",cursor:"pointer",borderRadius:"var(--radius-md)"},title:"Edit vendor",children:r.jsx(pi,{size:16})}),r.jsx("button",{onClick:()=>X(Z.id),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--error)",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(Qt,{size:16})})]})]})})},Z.id))})]},M.id)}),l.length===0&&!y&&r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[r.jsx(af,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"No Vendors Yet"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Build your vendor directory to manage all event suppliers"}),r.jsxs("button",{onClick:()=>x(!0),className:"btn btn-primary",children:[r.jsx(Ft,{size:16})," Add First Vendor"]})]})]})},Lg=["Venue","Catering","Decorations","Entertainment","Photography","Transportation","Gifts","Misc"],zg=({event:u})=>{const{API_URL:h}=Tr(),[l,g]=W.useState(null),[y,x]=W.useState([]),[b,I]=W.useState(null),[S,v]=W.useState(!0),A=(J,oe=2)=>{const ce=parseFloat(J);return isNaN(ce)?"0.00":ce.toFixed(oe)},[k,O]=W.useState(""),[X,q]=W.useState(!1),[F,V]=W.useState(!1),[Y,R]=W.useState(null),[N,M]=W.useState({category:"Venue",description:"",amount:"",vendor:"",paid:!1,date:new Date().toISOString().split("T")[0]});W.useEffect(()=>{u?.id&&D()},[u?.id]);const D=async()=>{try{v(!0);const oe={Authorization:`Bearer ${localStorage.getItem("token")}`},ce=await fetch(`${h}/events/${u.id}/budget`,{headers:oe});if(ce.ok){const B=await ce.json();g(B),B&&O(B.total_budget)}const Se=await fetch(`${h}/events/${u.id}/expenses`,{headers:oe});if(Se.ok){const B=await Se.json(),ee=[];(u.catering?.items||[]).forEach(ve=>{parseFloat(ve.cost)>0&&ee.push({id:`catering-${ve.id||Math.random()}`,category:"Catering",description:ve.name||ve.item||"Catering Item",amount:parseFloat(ve.cost),paid:parseFloat(ve.paid)||!1,source:"Catering Tab",isAutoGenerated:!0,date:new Date().toISOString()})}),(u.decorations?.items||[]).forEach(ve=>{parseFloat(ve.cost)>0&&ee.push({id:`decorations-${ve.id||Math.random()}`,category:"Decorations",description:ve.name||ve.item||"Decoration Item",amount:parseFloat(ve.cost),paid:parseFloat(ve.paid)||!1,source:"Decorations Tab",isAutoGenerated:!0,date:new Date().toISOString()})}),(u.gifts?.items||[]).forEach(ve=>{parseFloat(ve.cost)>0&&ee.push({id:`gifts-${ve.id||Math.random()}`,category:"Gifts",description:ve.name||ve.item||"Gift Item",amount:parseFloat(ve.cost),paid:parseFloat(ve.paid)||!1,source:"Gifts Tab",isAutoGenerated:!0,date:new Date().toISOString()})}),(u.vendors||[]).forEach(ve=>{parseFloat(ve.cost)>0&&ee.push({id:`vendor-${ve.id||Math.random()}`,category:"Vendors",description:ve.name||"Vendor Service",amount:parseFloat(ve.cost),paid:ve.paid||!1,source:"Vendors Tab",isAutoGenerated:!0,date:new Date().toISOString(),vendor:ve.name})}),u.venue?.totalCost&&parseFloat(u.venue.totalCost)>0&&ee.push({id:"venue-cost",category:"Venue",description:u.venue.name||"Venue Rental",amount:parseFloat(u.venue.totalCost),paid:u.venue.deposit&&parseFloat(u.venue.deposit)>0,source:"Venue Tab",isAutoGenerated:!0,date:new Date().toISOString()}),x([...ee,...B])}const K=await fetch(`${h}/events/${u.id}/expenses/summary`,{headers:oe});if(K.ok){const B=await K.json();I(B)}}catch(J){console.error("Error fetching budget data:",J)}finally{v(!1)}},Z=async()=>{try{const J=localStorage.getItem("token");(await fetch(`${h}/events/${u.id}/budget`,{method:"POST",headers:{Authorization:`Bearer ${J}`,"Content-Type":"application/json"},body:JSON.stringify({total_budget:parseFloat(k)})})).ok&&(q(!1),D())}catch(J){console.error("Error creating budget:",J)}},z=async()=>{try{const J=localStorage.getItem("token");(await fetch(`${h}/events/${u.id}/budget`,{method:"PUT",headers:{Authorization:`Bearer ${J}`,"Content-Type":"application/json"},body:JSON.stringify({total_budget:parseFloat(k)})})).ok&&D()}catch(J){console.error("Error updating budget:",J)}},Q=async()=>{try{const J=localStorage.getItem("token"),oe=Y?`${h}/events/${u.id}/expenses/${Y.id}`:`${h}/events/${u.id}/expenses`;(await fetch(oe,{method:Y?"PUT":"POST",headers:{Authorization:`Bearer ${J}`,"Content-Type":"application/json"},body:JSON.stringify({...N,amount:parseFloat(N.amount)})})).ok&&(V(!1),R(null),M({category:"Venue",description:"",amount:"",vendor:"",paid:!1,date:new Date().toISOString().split("T")[0]}),D())}catch(J){console.error("Error saving expense:",J)}},he=async J=>{if(confirm("Delete this expense?"))try{const oe=localStorage.getItem("token");await fetch(`${h}/events/${u.id}/expenses/${J}`,{method:"DELETE",headers:{Authorization:`Bearer ${oe}`}}),D()}catch(oe){console.error("Error deleting expense:",oe)}},Ae=J=>{R(J),M({category:J.category,description:J.description||"",amount:J.amount,vendor:J.vendor||"",paid:J.paid,date:J.date?.split("T")[0]||new Date().toISOString().split("T")[0]}),V(!0)},we=y.reduce((J,oe)=>J+(parseFloat(oe.amount)||0),0),xe=l?.total_budget||0,le=xe-we,ne=xe>0?we/xe*100:0,G=ne>100;return S?r.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Loading budget..."}):r.jsxs("div",{children:[X&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:[r.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:700,marginBottom:"1rem"},children:l?"Update Budget":"Set Budget"}),r.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[r.jsx("input",{type:"number",value:k,onChange:J=>O(J.target.value),placeholder:"Enter total budget",className:"form-input",style:{flex:1,background:"white",color:"var(--text-primary)"},autoFocus:!0}),r.jsxs("button",{onClick:l?z:Z,className:"btn btn-primary",style:{background:"white",color:"var(--primary)"},children:[r.jsx($t,{size:18})," Save"]}),r.jsx("button",{onClick:()=>q(!1),className:"btn btn-secondary",style:{background:"rgba(255,255,255,0.2)",color:"white",border:"1px solid white"},children:r.jsx(kt,{size:18})})]})]}),l?r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700},children:"Budget Overview"}),r.jsx("button",{onClick:()=>{O(l.total_budget),q(!0)},style:{padding:"0.5rem",border:"none",background:"rgba(255,255,255,0.2)",color:"white",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(pi,{size:18})})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem",marginBottom:"0.5rem"},children:[r.jsx("span",{children:"Progress"}),r.jsxs("span",{style:{fontWeight:700},children:[A(ne,1),"%"]})]}),r.jsx("div",{style:{width:"100%",background:"rgba(255,255,255,0.3)",borderRadius:"999px",height:"12px",overflow:"hidden"},children:r.jsx("div",{style:{height:"100%",background:G?"#ef4444":"white",width:`${Math.min(ne,100)}%`,transition:"width 0.3s ease"}})})]}),b?.guest_count>0&&r.jsxs("div",{style:{fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Zi,{size:16}),r.jsxs("span",{children:["Cost per guest: ",r.jsxs("strong",{children:["$",A(b.cost_per_guest)]})," (",b.guest_count," guests)"]})]}),G&&r.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(239,68,68,0.9)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(mo,{size:18}),r.jsx("span",{style:{fontSize:"0.875rem",fontWeight:600},children:"You are over budget!"})]})]}):r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center",marginBottom:"1.5rem"},children:[r.jsx(Zi,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"Set Your Budget"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Track expenses and stay within your event budget"}),r.jsxs("button",{onClick:()=>q(!0),className:"btn btn-primary",children:[r.jsx(Ft,{size:18})," Set Budget"]})]}),l&&r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Budget"}),r.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--primary)"},children:["$",A(xe)]})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Expenses"}),r.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--warning)"},children:["$",A(we)]})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Remaining"}),r.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:700,color:G?"var(--error)":"var(--success)"},children:["$",A(le)]})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Expenses"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--text-primary)"},children:y.length})]})]}),b?.by_category&&Object.keys(b.by_category).length>0&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:700,marginBottom:"1rem"},children:"Expenses by Category"}),r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:Object.entries(b.by_category).map(([J,oe])=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)"},children:[r.jsx("span",{style:{fontWeight:600},children:J}),r.jsxs("span",{style:{color:"var(--warning)",fontWeight:700},children:["$",A(oe)]})]},J))})]}),l&&r.jsxs("button",{onClick:()=>{R(null),M({category:"Venue",description:"",amount:"",vendor:"",paid:!1,date:new Date().toISOString().split("T")[0]}),V(!F)},className:"btn btn-primary",style:{marginBottom:"1.5rem"},children:[r.jsx(Ft,{size:18})," Add Expense"]}),F&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white"},children:[r.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:700,marginBottom:"1rem"},children:Y?"Edit Expense":"Add Expense"}),r.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Category"}),r.jsx("select",{value:N.category,onChange:J=>M({...N,category:J.target.value}),className:"form-input",style:{background:"white",color:"var(--text-primary)"},children:Lg.map(J=>r.jsx("option",{value:J,children:J},J))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Amount ($)"}),r.jsx("input",{type:"number",step:"0.01",value:N.amount,onChange:J=>M({...N,amount:J.target.value}),placeholder:"0.00",className:"form-input",style:{background:"white",color:"var(--text-primary)"},autoFocus:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Description"}),r.jsx("input",{type:"text",value:N.description,onChange:J=>M({...N,description:J.target.value}),placeholder:"Optional description",className:"form-input",style:{background:"white",color:"var(--text-primary)"}})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Vendor"}),r.jsx("input",{type:"text",value:N.vendor,onChange:J=>M({...N,vendor:J.target.value}),placeholder:"Optional vendor name",className:"form-input",style:{background:"white",color:"var(--text-primary)"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Date"}),r.jsx("input",{type:"date",value:N.date,onChange:J=>M({...N,date:J.target.value}),className:"form-input",style:{background:"white",color:"var(--text-primary)"}})]})]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:600},children:[r.jsx("input",{type:"checkbox",checked:N.paid,onChange:J=>M({...N,paid:J.target.checked}),style:{width:"1rem",height:"1rem"}}),r.jsx("span",{children:"Paid"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{onClick:Q,className:"btn btn-primary",style:{flex:1,background:"white",color:"var(--success)"},children:[r.jsx($t,{size:18})," ",Y?"Update":"Add"]}),r.jsx("button",{onClick:()=>{V(!1),R(null)},className:"btn btn-secondary",style:{background:"rgba(255,255,255,0.2)",color:"white",border:"1px solid white"},children:r.jsx(kt,{size:18})})]})]})]}),r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsxs("h4",{style:{fontSize:"1.125rem",fontWeight:700,marginBottom:"1rem"},children:["Expenses (",y.length,")"]}),y.length===0?r.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[r.jsx(Zi,{size:40,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("p",{style:{color:"var(--text-secondary)"},children:"No expenses recorded yet"})]}):r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:y.map(J=>r.jsx("div",{className:"card",style:{padding:"1rem",background:"var(--bg-secondary)"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",flexWrap:"wrap"},children:[r.jsx("span",{style:{fontWeight:700,fontSize:"1rem"},children:J.category}),r.jsxs("span",{style:{fontSize:"1rem",fontWeight:700,color:"var(--warning)"},children:["$",A(J.amount)]}),J.paid&&r.jsx("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",background:"var(--success)",color:"white",borderRadius:"var(--radius-sm)",fontWeight:600},children:"Paid"}),J.source&&r.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",background:"rgba(99,102,241,0.1)",color:"var(--primary)",borderRadius:"var(--radius-sm)",fontWeight:600},children:[" ",J.source]})]}),J.description&&r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:J.description}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-tertiary)",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[J.vendor&&r.jsxs("span",{children:["Vendor: ",J.vendor]}),r.jsx("span",{children:new Date(J.date).toLocaleDateString()})]})]}),!J.isAutoGenerated&&r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>Ae(J),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--primary)",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(pi,{size:16})}),r.jsx("button",{onClick:()=>he(J.id),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--error)",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(Qt,{size:16})})]})]})},J.id))})]})]})},Fg=[{value:"rsvp_followup",label:"RSVP Follow-up"},{value:"event_tomorrow",label:"Day Before Event"},{value:"event_starting",label:"Event Starting Soon"},{value:"custom",label:"Custom Reminder"}],Wg=({event:u})=>{const{API_URL:h}=Tr(),[l,g]=W.useState([]),[y,x]=W.useState(!0),[b,I]=W.useState(!1),[S,v]=W.useState({reminder_type:"custom",recipient_type:"guests",send_at:"",message:""});W.useEffect(()=>{u?.id&&A()},[u?.id]);const A=async()=>{try{x(!0);const Y=localStorage.getItem("token"),R=await fetch(`${h}/events/${u.id}/reminders`,{headers:{Authorization:`Bearer ${Y}`}});if(R.ok){const N=await R.json();g(N)}}catch(Y){console.error("Error fetching reminders:",Y)}finally{x(!1)}},k=async()=>{try{const Y=localStorage.getItem("token");(await fetch(`${h}/events/${u.id}/reminders/auto-schedule`,{method:"POST",headers:{Authorization:`Bearer ${Y}`,"Content-Type":"application/json"}})).ok&&(A(),alert("Smart reminders scheduled successfully!"))}catch(Y){console.error("Error scheduling reminders:",Y)}},O=async()=>{try{const Y=localStorage.getItem("token"),R=new Date(S.send_at).toISOString();(await fetch(`${h}/events/${u.id}/reminders`,{method:"POST",headers:{Authorization:`Bearer ${Y}`,"Content-Type":"application/json"},body:JSON.stringify({...S,send_at:R})})).ok&&(I(!1),v({reminder_type:"custom",recipient_type:"guests",send_at:"",message:""}),A())}catch(Y){console.error("Error creating reminder:",Y)}},X=async Y=>{if(confirm("Delete this reminder?"))try{const R=localStorage.getItem("token");await fetch(`${h}/events/${u.id}/reminders/${Y}`,{method:"DELETE",headers:{Authorization:`Bearer ${R}`}}),A()}catch(R){console.error("Error deleting reminder:",R)}},q=Y=>new Date(Y).toLocaleString();if(y)return r.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Loading reminders..."});const F=l.filter(Y=>Y.sent).length,V=l.filter(Y=>!Y.sent).length;return r.jsxs("div",{children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Reminders"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--primary)"},children:l.length})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Sent"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--success)"},children:F})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Pending"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--warning)"},children:V})]})]}),r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,marginBottom:"0.5rem"},children:"Smart Reminders"}),r.jsx("p",{style:{fontSize:"0.875rem",opacity:.9},children:"Automatically schedule reminders for your event"})]}),r.jsx(co,{size:32,style:{opacity:.9}})]}),r.jsxs("button",{onClick:k,className:"btn btn-primary",style:{width:"100%",background:"white",color:"var(--primary)",marginBottom:"1rem"},children:[r.jsx(Nr,{size:18})," Auto-Schedule Reminders"]}),r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8,display:"grid",gap:"0.25rem"},children:[r.jsx("p",{children:" RSVP Follow-up: 7 days before event"}),r.jsx("p",{children:" Day Before: 24 hours before event"}),r.jsx("p",{children:" Event Starting: 2 hours before event"})]})]}),r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsxs("h4",{style:{fontSize:"1.125rem",fontWeight:700},children:["Scheduled Reminders (",l.length,")"]}),r.jsxs("button",{onClick:()=>I(!b),className:"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:[r.jsx(Ft,{size:16})," Add Custom"]})]}),b&&r.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",border:"2px solid var(--primary)"},children:[r.jsx("h5",{style:{fontWeight:700,marginBottom:"1rem"},children:"Create Custom Reminder"}),r.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Type"}),r.jsx("select",{value:S.reminder_type,onChange:Y=>v({...S,reminder_type:Y.target.value}),className:"form-input",children:Fg.map(Y=>r.jsx("option",{value:Y.value,children:Y.label},Y.value))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Recipients"}),r.jsxs("select",{value:S.recipient_type,onChange:Y=>v({...S,recipient_type:Y.target.value}),className:"form-input",children:[r.jsx("option",{value:"guests",children:"All Guests"}),r.jsx("option",{value:"host",children:"Event Host (Me)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Send Date & Time"}),r.jsx("input",{type:"datetime-local",value:S.send_at,onChange:Y=>v({...S,send_at:Y.target.value}),className:"form-input"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Message"}),r.jsx("textarea",{value:S.message,onChange:Y=>v({...S,message:Y.target.value}),placeholder:"Enter reminder message...",className:"form-input",rows:"3"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{onClick:O,className:"btn btn-primary",style:{flex:1},children:[r.jsx($t,{size:16})," Create"]}),r.jsx("button",{onClick:()=>I(!1),className:"btn btn-secondary",children:r.jsx(kt,{size:16})})]})]})]}),l.length===0?r.jsxs("div",{style:{padding:"3rem",textAlign:"center"},children:[r.jsx(co,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"0.5rem"},children:"No Reminders Scheduled"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Set up smart reminders to notify guests about your event"}),r.jsxs("button",{onClick:k,className:"btn btn-primary",children:[r.jsx(Nr,{size:18})," Auto-Schedule Now"]})]}):r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:l.map(Y=>r.jsx("div",{className:"card",style:{padding:"1rem",background:Y.sent?"var(--bg-secondary)":"white"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx(co,{size:16,style:{color:"var(--primary)"}}),r.jsx("span",{style:{fontWeight:700,textTransform:"capitalize"},children:Y.reminder_type.replace("_"," ")}),Y.sent&&r.jsx("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",background:"var(--success)",color:"white",borderRadius:"var(--radius-sm)",fontWeight:600},children:"Sent"}),!Y.sent&&r.jsx("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",background:"var(--warning)",color:"white",borderRadius:"var(--radius-sm)",fontWeight:600},children:"Pending"})]}),r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.5rem"},children:Y.message}),r.jsxs("p",{style:{fontSize:"0.75rem",color:"var(--text-tertiary)"},children:[q(Y.send_at),"  ",Y.recipient_type]})]}),!Y.sent&&r.jsx("button",{onClick:()=>X(Y.id),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--error)",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(Qt,{size:18})})]})},Y.id))})]})]})},Ug=({event:u})=>{const{token:h,user:l}=Wr(),[g,y]=W.useState("announcement"),[x,b]=W.useState(""),[I,S]=W.useState("all"),[v,A]=W.useState(l?.name||"Your Event Team"),[k,O]=W.useState(!1),[X,q]=W.useState([]),[F,V]=W.useState(!0),Y="https://gatherly-backend-3vmv.onrender.com";W.useEffect(()=>{R()},[u.id]);const R=async()=>{try{const z=await fetch(`${Y}/api/events/${u.id}/communications`,{headers:{Authorization:`Bearer ${h}`}});if(z.ok){const Q=await z.json();q(Q)}}catch(z){console.error("Error fetching communications:",z)}finally{V(!1)}},N=()=>u.guests?I==="all"?u.guests.length:I==="confirmed"?u.guests.filter(z=>z.rsvp===!0).length:I==="attended"?u.guests.filter(z=>z.attended===!0).length:0:0,M=async()=>{if(!x.trim()){alert("Please enter a message");return}if(x.length>320){alert("Message must be 320 characters or less");return}const z=N();if(z===0){alert("No guests match the selected filter");return}if(confirm(`Send announcement to ${z} guests?`)){O(!0);try{const Q=await fetch(`${Y}/api/events/${u.id}/communications/announcement`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({message:x,recipientFilter:I,senderName:v})});if(Q.ok)alert("Announcement sent successfully!"),b(""),R();else{const he=await Q.json();alert(he.error||"Failed to send announcement")}}catch(Q){console.error("Error sending announcement:",Q),alert("Failed to send announcement")}finally{O(!1)}}},D=async()=>{const z=u.guests?.filter(Q=>Q.attended===!0).length||0;if(z===0){alert("No guests have attended this event yet");return}if(confirm(`Send thank you messages to ${z} guests who attended?`)){O(!0);try{const Q=await fetch(`${Y}/api/events/${u.id}/communications/thank-you`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({senderName:v})});if(Q.ok)alert("Thank you messages sent successfully!"),R();else{const he=await Q.json();alert(he.error||"Failed to send thank you messages")}}catch(Q){console.error("Error sending thank you:",Q),alert("Failed to send thank you messages")}finally{O(!1)}}},Z=z=>new Date(z).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});return r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",gap:"0.5rem",borderBottom:"2px solid var(--border)",paddingBottom:"0.5rem"},children:[r.jsxs("button",{onClick:()=>y("announcement"),style:{padding:"0.5rem 1rem",background:g==="announcement"?"var(--primary)":"transparent",color:g==="announcement"?"white":"var(--text-secondary)",border:"none",borderRadius:"var(--radius-md)",fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(_d,{size:16})," Announcement"]}),r.jsxs("button",{onClick:()=>y("thankyou"),style:{padding:"0.5rem 1rem",background:g==="thankyou"?"var(--primary)":"transparent",color:g==="thankyou"?"white":"var(--text-secondary)",border:"none",borderRadius:"var(--radius-md)",fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(kl,{size:16})," Thank You"]}),r.jsxs("button",{onClick:()=>y("history"),style:{padding:"0.5rem 1rem",background:g==="history"?"var(--primary)":"transparent",color:g==="history"?"white":"var(--text-secondary)",border:"none",borderRadius:"var(--radius-md)",fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(f0,{size:16})," History"]})]}),g==="announcement"&&r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-primary)"},children:"Send Announcement"}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-secondary)"},children:"Message"}),r.jsx("textarea",{value:x,onChange:z=>b(z.target.value),placeholder:"Type your announcement here...",style:{width:"100%",minHeight:"120px",padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",fontSize:"0.875rem",resize:"vertical",fontFamily:"inherit"},maxLength:320}),r.jsxs("div",{style:{textAlign:"right",fontSize:"0.75rem",color:"var(--text-tertiary)",marginTop:"0.25rem"},children:[x.length,"/320 characters"]})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-secondary)"},children:"Sender Name"}),r.jsx("input",{type:"text",value:v,onChange:z=>A(z.target.value),placeholder:"Your name or organization",style:{width:"100%",padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",fontSize:"0.875rem",fontFamily:"inherit"}})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-secondary)"},children:"Send to"}),r.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"recipient",value:"all",checked:I==="all",onChange:z=>S(z.target.value)}),r.jsx("span",{style:{fontSize:"0.875rem"},children:"All Guests"})]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"recipient",value:"confirmed",checked:I==="confirmed",onChange:z=>S(z.target.value)}),r.jsx("span",{style:{fontSize:"0.875rem"},children:"Confirmed Only"})]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"recipient",value:"attended",checked:I==="attended",onChange:z=>S(z.target.value)}),r.jsx("span",{style:{fontSize:"0.875rem"},children:"Attended Only"})]})]})]}),r.jsx("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:[r.jsx(Vt,{size:16}),r.jsxs("span",{children:["Will send to ",r.jsx("strong",{style:{color:"var(--primary)"},children:N()})," guests"]})]})}),r.jsx("button",{onClick:M,disabled:k||!x.trim(),className:"btn btn-primary",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:k?r.jsxs(r.Fragment,{children:[r.jsx(Nl,{size:16,className:"animate-spin"})," Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx(xf,{size:16})," Send Announcement"]})})]}),g==="thankyou"&&r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-primary)"},children:"Send Thank You Messages"}),r.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Send personalized thank you messages to all guests who attended your event."}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:[r.jsx(Vt,{size:16}),r.jsxs("span",{children:["Will send to ",r.jsx("strong",{style:{color:"var(--primary)"},children:u.guests?.filter(z=>z.attended===!0).length||0})," attended guests"]})]})]}),r.jsx("button",{onClick:D,disabled:k||(u.guests?.filter(z=>z.attended===!0).length||0)===0,className:"btn btn-primary",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:k?r.jsxs(r.Fragment,{children:[r.jsx(Nl,{size:16,className:"animate-spin"})," Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx(kl,{size:16})," Send Thank You Messages"]})})]}),g==="history"&&r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-primary)"},children:"Message History"}),F?r.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:[r.jsx(Nl,{size:24,className:"animate-spin",style:{margin:"0 auto"}}),r.jsx("p",{style:{marginTop:"0.5rem"},children:"Loading..."})]}):X.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:[r.jsx(f0,{size:48,style:{margin:"0 auto",opacity:.3}}),r.jsx("p",{style:{marginTop:"1rem"},children:"No messages sent yet"})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:X.map(z=>r.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",borderLeft:`4px solid ${z.type==="announcement"?"var(--primary)":"#10b981"}`},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"0.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[z.type==="announcement"?r.jsx(_d,{size:16}):r.jsx(kl,{size:16}),r.jsx("span",{style:{fontWeight:600,fontSize:"0.875rem"},children:z.type==="announcement"?"Announcement":"Thank You"})]}),r.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-tertiary)"},children:Z(z.created_at)})]}),z.type==="announcement"&&r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.5rem"},children:z.message}),r.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.75rem",color:"var(--text-tertiary)"},children:[r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(js,{size:12,style:{color:"#10b981"}}),z.sent_count," sent"]}),z.failed_count>0&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(Ud,{size:12,style:{color:"#ef4444"}}),z.failed_count," failed"]}),r.jsxs("span",{children:[" ",z.recipient_filter]})]})]},z.id))})]})]})};var Vg=Object.defineProperty,Ol=Object.getOwnPropertySymbols,Sf=Object.prototype.hasOwnProperty,Ef=Object.prototype.propertyIsEnumerable,g0=(u,h,l)=>h in u?Vg(u,h,{enumerable:!0,configurable:!0,writable:!0,value:l}):u[h]=l,m0=(u,h)=>{for(var l in h||(h={}))Sf.call(h,l)&&g0(u,l,h[l]);if(Ol)for(var l of Ol(h))Ef.call(h,l)&&g0(u,l,h[l]);return u},Gg=(u,h)=>{var l={};for(var g in u)Sf.call(u,g)&&h.indexOf(g)<0&&(l[g]=u[g]);if(u!=null&&Ol)for(var g of Ol(u))h.indexOf(g)<0&&Ef.call(u,g)&&(l[g]=u[g]);return l};var Ns;(u=>{const h=class{constructor(S,v,A,k){if(this.version=S,this.errorCorrectionLevel=v,this.modules=[],this.isFunction=[],S<h.MIN_VERSION||S>h.MAX_VERSION)throw new RangeError("Version value out of range");if(k<-1||k>7)throw new RangeError("Mask value out of range");this.size=S*4+17;let O=[];for(let q=0;q<this.size;q++)O.push(!1);for(let q=0;q<this.size;q++)this.modules.push(O.slice()),this.isFunction.push(O.slice());this.drawFunctionPatterns();const X=this.addEccAndInterleave(A);if(this.drawCodewords(X),k==-1){let q=1e9;for(let F=0;F<8;F++){this.applyMask(F),this.drawFormatBits(F);const V=this.getPenaltyScore();V<q&&(k=F,q=V),this.applyMask(F)}}x(0<=k&&k<=7),this.mask=k,this.applyMask(k),this.drawFormatBits(k),this.isFunction=[]}static encodeText(S,v){const A=u.QrSegment.makeSegments(S);return h.encodeSegments(A,v)}static encodeBinary(S,v){const A=u.QrSegment.makeBytes(S);return h.encodeSegments([A],v)}static encodeSegments(S,v,A=1,k=40,O=-1,X=!0){if(!(h.MIN_VERSION<=A&&A<=k&&k<=h.MAX_VERSION)||O<-1||O>7)throw new RangeError("Invalid value");let q,F;for(q=A;;q++){const N=h.getNumDataCodewords(q,v)*8,M=I.getTotalBits(S,q);if(M<=N){F=M;break}if(q>=k)throw new RangeError("Data too long")}for(const N of[h.Ecc.MEDIUM,h.Ecc.QUARTILE,h.Ecc.HIGH])X&&F<=h.getNumDataCodewords(q,N)*8&&(v=N);let V=[];for(const N of S){g(N.mode.modeBits,4,V),g(N.numChars,N.mode.numCharCountBits(q),V);for(const M of N.getData())V.push(M)}x(V.length==F);const Y=h.getNumDataCodewords(q,v)*8;x(V.length<=Y),g(0,Math.min(4,Y-V.length),V),g(0,(8-V.length%8)%8,V),x(V.length%8==0);for(let N=236;V.length<Y;N^=253)g(N,8,V);let R=[];for(;R.length*8<V.length;)R.push(0);return V.forEach((N,M)=>R[M>>>3]|=N<<7-(M&7)),new h(q,v,R,O)}getModule(S,v){return 0<=S&&S<this.size&&0<=v&&v<this.size&&this.modules[v][S]}getModules(){return this.modules}drawFunctionPatterns(){for(let A=0;A<this.size;A++)this.setFunctionModule(6,A,A%2==0),this.setFunctionModule(A,6,A%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const S=this.getAlignmentPatternPositions(),v=S.length;for(let A=0;A<v;A++)for(let k=0;k<v;k++)A==0&&k==0||A==0&&k==v-1||A==v-1&&k==0||this.drawAlignmentPattern(S[A],S[k]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(S){const v=this.errorCorrectionLevel.formatBits<<3|S;let A=v;for(let O=0;O<10;O++)A=A<<1^(A>>>9)*1335;const k=(v<<10|A)^21522;x(k>>>15==0);for(let O=0;O<=5;O++)this.setFunctionModule(8,O,y(k,O));this.setFunctionModule(8,7,y(k,6)),this.setFunctionModule(8,8,y(k,7)),this.setFunctionModule(7,8,y(k,8));for(let O=9;O<15;O++)this.setFunctionModule(14-O,8,y(k,O));for(let O=0;O<8;O++)this.setFunctionModule(this.size-1-O,8,y(k,O));for(let O=8;O<15;O++)this.setFunctionModule(8,this.size-15+O,y(k,O));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let S=this.version;for(let A=0;A<12;A++)S=S<<1^(S>>>11)*7973;const v=this.version<<12|S;x(v>>>18==0);for(let A=0;A<18;A++){const k=y(v,A),O=this.size-11+A%3,X=Math.floor(A/3);this.setFunctionModule(O,X,k),this.setFunctionModule(X,O,k)}}drawFinderPattern(S,v){for(let A=-4;A<=4;A++)for(let k=-4;k<=4;k++){const O=Math.max(Math.abs(k),Math.abs(A)),X=S+k,q=v+A;0<=X&&X<this.size&&0<=q&&q<this.size&&this.setFunctionModule(X,q,O!=2&&O!=4)}}drawAlignmentPattern(S,v){for(let A=-2;A<=2;A++)for(let k=-2;k<=2;k++)this.setFunctionModule(S+k,v+A,Math.max(Math.abs(k),Math.abs(A))!=1)}setFunctionModule(S,v,A){this.modules[v][S]=A,this.isFunction[v][S]=!0}addEccAndInterleave(S){const v=this.version,A=this.errorCorrectionLevel;if(S.length!=h.getNumDataCodewords(v,A))throw new RangeError("Invalid argument");const k=h.NUM_ERROR_CORRECTION_BLOCKS[A.ordinal][v],O=h.ECC_CODEWORDS_PER_BLOCK[A.ordinal][v],X=Math.floor(h.getNumRawDataModules(v)/8),q=k-X%k,F=Math.floor(X/k);let V=[];const Y=h.reedSolomonComputeDivisor(O);for(let N=0,M=0;N<k;N++){let D=S.slice(M,M+F-O+(N<q?0:1));M+=D.length;const Z=h.reedSolomonComputeRemainder(D,Y);N<q&&D.push(0),V.push(D.concat(Z))}let R=[];for(let N=0;N<V[0].length;N++)V.forEach((M,D)=>{(N!=F-O||D>=q)&&R.push(M[N])});return x(R.length==X),R}drawCodewords(S){if(S.length!=Math.floor(h.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let v=0;for(let A=this.size-1;A>=1;A-=2){A==6&&(A=5);for(let k=0;k<this.size;k++)for(let O=0;O<2;O++){const X=A-O,F=(A+1&2)==0?this.size-1-k:k;!this.isFunction[F][X]&&v<S.length*8&&(this.modules[F][X]=y(S[v>>>3],7-(v&7)),v++)}}x(v==S.length*8)}applyMask(S){if(S<0||S>7)throw new RangeError("Mask value out of range");for(let v=0;v<this.size;v++)for(let A=0;A<this.size;A++){let k;switch(S){case 0:k=(A+v)%2==0;break;case 1:k=v%2==0;break;case 2:k=A%3==0;break;case 3:k=(A+v)%3==0;break;case 4:k=(Math.floor(A/3)+Math.floor(v/2))%2==0;break;case 5:k=A*v%2+A*v%3==0;break;case 6:k=(A*v%2+A*v%3)%2==0;break;case 7:k=((A+v)%2+A*v%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[v][A]&&k&&(this.modules[v][A]=!this.modules[v][A])}}getPenaltyScore(){let S=0;for(let O=0;O<this.size;O++){let X=!1,q=0,F=[0,0,0,0,0,0,0];for(let V=0;V<this.size;V++)this.modules[O][V]==X?(q++,q==5?S+=h.PENALTY_N1:q>5&&S++):(this.finderPenaltyAddHistory(q,F),X||(S+=this.finderPenaltyCountPatterns(F)*h.PENALTY_N3),X=this.modules[O][V],q=1);S+=this.finderPenaltyTerminateAndCount(X,q,F)*h.PENALTY_N3}for(let O=0;O<this.size;O++){let X=!1,q=0,F=[0,0,0,0,0,0,0];for(let V=0;V<this.size;V++)this.modules[V][O]==X?(q++,q==5?S+=h.PENALTY_N1:q>5&&S++):(this.finderPenaltyAddHistory(q,F),X||(S+=this.finderPenaltyCountPatterns(F)*h.PENALTY_N3),X=this.modules[V][O],q=1);S+=this.finderPenaltyTerminateAndCount(X,q,F)*h.PENALTY_N3}for(let O=0;O<this.size-1;O++)for(let X=0;X<this.size-1;X++){const q=this.modules[O][X];q==this.modules[O][X+1]&&q==this.modules[O+1][X]&&q==this.modules[O+1][X+1]&&(S+=h.PENALTY_N2)}let v=0;for(const O of this.modules)v=O.reduce((X,q)=>X+(q?1:0),v);const A=this.size*this.size,k=Math.ceil(Math.abs(v*20-A*10)/A)-1;return x(0<=k&&k<=9),S+=k*h.PENALTY_N4,x(0<=S&&S<=2568888),S}getAlignmentPatternPositions(){if(this.version==1)return[];{const S=Math.floor(this.version/7)+2,v=this.version==32?26:Math.ceil((this.version*4+4)/(S*2-2))*2;let A=[6];for(let k=this.size-7;A.length<S;k-=v)A.splice(1,0,k);return A}}static getNumRawDataModules(S){if(S<h.MIN_VERSION||S>h.MAX_VERSION)throw new RangeError("Version number out of range");let v=(16*S+128)*S+64;if(S>=2){const A=Math.floor(S/7)+2;v-=(25*A-10)*A-55,S>=7&&(v-=36)}return x(208<=v&&v<=29648),v}static getNumDataCodewords(S,v){return Math.floor(h.getNumRawDataModules(S)/8)-h.ECC_CODEWORDS_PER_BLOCK[v.ordinal][S]*h.NUM_ERROR_CORRECTION_BLOCKS[v.ordinal][S]}static reedSolomonComputeDivisor(S){if(S<1||S>255)throw new RangeError("Degree out of range");let v=[];for(let k=0;k<S-1;k++)v.push(0);v.push(1);let A=1;for(let k=0;k<S;k++){for(let O=0;O<v.length;O++)v[O]=h.reedSolomonMultiply(v[O],A),O+1<v.length&&(v[O]^=v[O+1]);A=h.reedSolomonMultiply(A,2)}return v}static reedSolomonComputeRemainder(S,v){let A=v.map(k=>0);for(const k of S){const O=k^A.shift();A.push(0),v.forEach((X,q)=>A[q]^=h.reedSolomonMultiply(X,O))}return A}static reedSolomonMultiply(S,v){if(S>>>8||v>>>8)throw new RangeError("Byte out of range");let A=0;for(let k=7;k>=0;k--)A=A<<1^(A>>>7)*285,A^=(v>>>k&1)*S;return x(A>>>8==0),A}finderPenaltyCountPatterns(S){const v=S[1];x(v<=this.size*3);const A=v>0&&S[2]==v&&S[3]==v*3&&S[4]==v&&S[5]==v;return(A&&S[0]>=v*4&&S[6]>=v?1:0)+(A&&S[6]>=v*4&&S[0]>=v?1:0)}finderPenaltyTerminateAndCount(S,v,A){return S&&(this.finderPenaltyAddHistory(v,A),v=0),v+=this.size,this.finderPenaltyAddHistory(v,A),this.finderPenaltyCountPatterns(A)}finderPenaltyAddHistory(S,v){v[0]==0&&(S+=this.size),v.pop(),v.unshift(S)}};let l=h;l.MIN_VERSION=1,l.MAX_VERSION=40,l.PENALTY_N1=3,l.PENALTY_N2=3,l.PENALTY_N3=40,l.PENALTY_N4=10,l.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],l.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],u.QrCode=l;function g(S,v,A){if(v<0||v>31||S>>>v)throw new RangeError("Value out of range");for(let k=v-1;k>=0;k--)A.push(S>>>k&1)}function y(S,v){return(S>>>v&1)!=0}function x(S){if(!S)throw new Error("Assertion error")}const b=class{constructor(S,v,A){if(this.mode=S,this.numChars=v,this.bitData=A,v<0)throw new RangeError("Invalid argument");this.bitData=A.slice()}static makeBytes(S){let v=[];for(const A of S)g(A,8,v);return new b(b.Mode.BYTE,S.length,v)}static makeNumeric(S){if(!b.isNumeric(S))throw new RangeError("String contains non-numeric characters");let v=[];for(let A=0;A<S.length;){const k=Math.min(S.length-A,3);g(parseInt(S.substr(A,k),10),k*3+1,v),A+=k}return new b(b.Mode.NUMERIC,S.length,v)}static makeAlphanumeric(S){if(!b.isAlphanumeric(S))throw new RangeError("String contains unencodable characters in alphanumeric mode");let v=[],A;for(A=0;A+2<=S.length;A+=2){let k=b.ALPHANUMERIC_CHARSET.indexOf(S.charAt(A))*45;k+=b.ALPHANUMERIC_CHARSET.indexOf(S.charAt(A+1)),g(k,11,v)}return A<S.length&&g(b.ALPHANUMERIC_CHARSET.indexOf(S.charAt(A)),6,v),new b(b.Mode.ALPHANUMERIC,S.length,v)}static makeSegments(S){return S==""?[]:b.isNumeric(S)?[b.makeNumeric(S)]:b.isAlphanumeric(S)?[b.makeAlphanumeric(S)]:[b.makeBytes(b.toUtf8ByteArray(S))]}static makeEci(S){let v=[];if(S<0)throw new RangeError("ECI assignment value out of range");if(S<128)g(S,8,v);else if(S<16384)g(2,2,v),g(S,14,v);else if(S<1e6)g(6,3,v),g(S,21,v);else throw new RangeError("ECI assignment value out of range");return new b(b.Mode.ECI,0,v)}static isNumeric(S){return b.NUMERIC_REGEX.test(S)}static isAlphanumeric(S){return b.ALPHANUMERIC_REGEX.test(S)}getData(){return this.bitData.slice()}static getTotalBits(S,v){let A=0;for(const k of S){const O=k.mode.numCharCountBits(v);if(k.numChars>=1<<O)return 1/0;A+=4+O+k.bitData.length}return A}static toUtf8ByteArray(S){S=encodeURI(S);let v=[];for(let A=0;A<S.length;A++)S.charAt(A)!="%"?v.push(S.charCodeAt(A)):(v.push(parseInt(S.substr(A+1,2),16)),A+=2);return v}};let I=b;I.NUMERIC_REGEX=/^[0-9]*$/,I.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,I.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",u.QrSegment=I})(Ns||(Ns={}));(u=>{(h=>{const l=class{constructor(y,x){this.ordinal=y,this.formatBits=x}};let g=l;g.LOW=new l(0,1),g.MEDIUM=new l(1,0),g.QUARTILE=new l(2,3),g.HIGH=new l(3,2),h.Ecc=g})(u.QrCode||(u.QrCode={}))})(Ns||(Ns={}));(u=>{(h=>{const l=class{constructor(y,x){this.modeBits=y,this.numBitsCharCount=x}numCharCountBits(y){return this.numBitsCharCount[Math.floor((y+7)/17)]}};let g=l;g.NUMERIC=new l(1,[10,12,14]),g.ALPHANUMERIC=new l(2,[9,11,13]),g.BYTE=new l(4,[8,16,16]),g.KANJI=new l(8,[8,10,12]),g.ECI=new l(7,[0,0,0]),h.Mode=g})(u.QrSegment||(u.QrSegment={}))})(Ns||(Ns={}));var aa=Ns;var Hg={L:aa.QrCode.Ecc.LOW,M:aa.QrCode.Ecc.MEDIUM,Q:aa.QrCode.Ecc.QUARTILE,H:aa.QrCode.Ecc.HIGH},Xg=128,Yg="L",Zg="#FFFFFF",qg="#000000",Kg=!1,Af=4,$g=.1;function Qg(u,h=0){const l=[];return u.forEach(function(g,y){let x=null;g.forEach(function(b,I){if(!b&&x!==null){l.push(`M${x+h} ${y+h}h${I-x}v1H${x+h}z`),x=null;return}if(I===g.length-1){if(!b)return;x===null?l.push(`M${I+h},${y+h} h1v1H${I+h}z`):l.push(`M${x+h},${y+h} h${I+1-x}v1H${x+h}z`);return}b&&x===null&&(x=I)})}),l.join("")}function Jg(u,h){return u.slice().map((l,g)=>g<h.y||g>=h.y+h.h?l:l.map((y,x)=>x<h.x||x>=h.x+h.w?y:!1))}function em(u,h,l,g){if(g==null)return null;const y=l?Af:0,x=u.length+y*2,b=Math.floor(h*$g),I=x/h,S=(g.width||b)*I,v=(g.height||b)*I,A=g.x==null?u.length/2-S/2:g.x*I,k=g.y==null?u.length/2-v/2:g.y*I;let O=null;if(g.excavate){let X=Math.floor(A),q=Math.floor(k),F=Math.ceil(S+A-X),V=Math.ceil(v+k-q);O={x:X,y:q,w:F,h:V}}return{x:A,y:k,h:v,w:S,excavation:O}}var tm=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function nm(u){const h=u,{value:l,size:g=Xg,level:y=Yg,bgColor:x=Zg,fgColor:b=qg,includeMargin:I=Kg,style:S,imageSettings:v}=h,A=Gg(h,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),k=v?.src,O=ir.useRef(null),X=ir.useRef(null),[q,F]=ir.useState(!1);ir.useEffect(()=>{if(O.current!=null){const R=O.current,N=R.getContext("2d");if(!N)return;let M=aa.QrCode.encodeText(l,Hg[y]).getModules();const D=I?Af:0,Z=M.length+D*2,z=em(M,g,I,v),Q=X.current,he=z!=null&&Q!==null&&Q.complete&&Q.naturalHeight!==0&&Q.naturalWidth!==0;he&&z.excavation!=null&&(M=Jg(M,z.excavation));const Ae=window.devicePixelRatio||1;R.height=R.width=g*Ae;const we=g/Z*Ae;N.scale(we,we),N.fillStyle=x,N.fillRect(0,0,Z,Z),N.fillStyle=b,tm?N.fill(new Path2D(Qg(M,D))):M.forEach(function(xe,le){xe.forEach(function(ne,G){ne&&N.fillRect(G+D,le+D,1,1)})}),he&&N.drawImage(Q,z.x+D,z.y+D,z.w,z.h)}}),ir.useEffect(()=>{F(!1)},[k]);const V=m0({height:g,width:g},S);let Y=null;return k!=null&&(Y=ir.createElement("img",{src:k,key:k,style:{display:"none"},onLoad:()=>{F(!0)},ref:X})),ir.createElement(ir.Fragment,null,ir.createElement("canvas",m0({style:V,height:g,width:g,ref:O},A)),Y)}const If=({payload:u,name:h,eventTitle:l,phoneNumber:g})=>{const y=W.useRef(),[x,b]=W.useState(!1),I=async()=>{try{const v=y.current.querySelector("canvas");if(!v){console.error("Canvas not found");return}const A=await new Promise(X=>v.toBlob(X,"image/png"));try{const{Capacitor:X}=await jr(async()=>{const{Capacitor:q}=await Promise.resolve().then(()=>kd);return{Capacitor:q}},void 0);if(X.isNativePlatform()){const{Filesystem:q,Directory:F}=await jr(async()=>{const{Filesystem:M,Directory:D}=await import("./index-CHbx6J8E.js");return{Filesystem:M,Directory:D}},[]),V=new FileReader;V.readAsDataURL(A),await new Promise(M=>V.onloadend=M);const Y=V.result.split(",")[1],R=`invite-${h.replace(/\s+/g,"-").toLowerCase()}-${Date.now()}.png`,N=await q.writeFile({path:R,data:Y,directory:F.Documents});alert(`QR code saved to Documents folder as ${R}`);return}}catch(X){console.log("Not a native platform, using browser download:",X)}const k=URL.createObjectURL(A),O=document.createElement("a");O.download=`invite-${h.replace(/\s+/g,"-").toLowerCase()}.png`,O.href=k,O.click(),URL.revokeObjectURL(k)}catch(v){console.error("Error downloading QR code:",v),alert("Failed to save QR code")}},S=async()=>{b(!0);try{const v=y.current.querySelector("canvas");if(!v)throw new Error("QR code not found");const A=await new Promise(O=>v.toBlob(O,"image/png"));try{const{Capacitor:O}=await jr(async()=>{const{Capacitor:X}=await Promise.resolve().then(()=>kd);return{Capacitor:X}},void 0);if(O.isNativePlatform()){const{Share:X}=await jr(async()=>{const{Share:M}=await import("./index-BkYK6l9f.js");return{Share:M}},[]),{Filesystem:q,Directory:F}=await jr(async()=>{const{Filesystem:M,Directory:D}=await import("./index-CHbx6J8E.js");return{Filesystem:M,Directory:D}},[]),V=new FileReader;V.readAsDataURL(A),await new Promise(M=>V.onloadend=M);const Y=V.result.split(",")[1],R=`${h}-qr-code.png`,N=await q.writeFile({path:R,data:Y,directory:F.Cache});await X.share({title:"Event QR Code",text:`QR Code for ${h} - ${l}`,url:N.uri,dialogTitle:"Share QR Code"}),b(!1);return}}catch(O){console.log("Capacitor share not available, trying web API:",O)}const k=new File([A],`${h}-qr-ticket.png`,{type:"image/png"});navigator.canShare&&navigator.canShare({files:[k]})?await navigator.share({files:[k],title:"Event QR Code"}):navigator.share?await navigator.share({text:"Event QR Code",title:"Event QR Code"}):I()}catch(v){v.name!=="AbortError"&&(console.error("Error sharing:",v),I())}finally{b(!1)}};return r.jsxs("div",{ref:y,className:"card",style:{maxWidth:"340px",width:"100%",overflow:"hidden"},children:[r.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"1.5rem 1.25rem",textAlign:"center"},children:[r.jsx("p",{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:"0.6875rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.375rem"},children:l}),r.jsx("h4",{style:{color:"white",fontSize:"1.375rem",fontWeight:"700",margin:"0",lineHeight:"1.2"},children:h}),g&&r.jsx("p",{style:{color:"rgba(255, 255, 255, 0.85)",fontSize:"0.875rem",marginTop:"0.375rem",fontWeight:"500"},children:g})]}),r.jsx("div",{style:{padding:"2rem 1.5rem",background:"var(--bg-secondary)",display:"flex",justifyContent:"center"},children:r.jsx("div",{style:{padding:"1rem",background:"white",borderRadius:"var(--radius-lg)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)",border:"1px solid var(--border)"},children:r.jsx(nm,{value:JSON.stringify(u),size:180,level:"H",includeMargin:!0})})}),r.jsxs("div",{style:{padding:"1.25rem"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsxs("button",{onClick:I,className:"btn btn-secondary",style:{padding:"0.75rem",fontSize:"0.875rem",justifyContent:"center"},children:[r.jsx(df,{size:16})," Save"]}),r.jsx("button",{onClick:S,disabled:x,className:"btn btn-primary",style:{padding:"0.75rem",fontSize:"0.875rem",justifyContent:"center"},children:x?"Sharing...":r.jsxs(r.Fragment,{children:[r.jsx(Rd,{size:16})," Share"]})})]}),r.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-tertiary)",textAlign:"center",marginTop:"1rem",lineHeight:"1.4"},children:"Scan this code at the event to check in"})]})]})},rm=({onImport:u,onClose:h})=>{const[l,g]=W.useState(""),[y,x]=W.useState([]),b=v=>{const A=v.trim().split(`
`),k=[];for(let O of A){if(O=O.trim(),!O)continue;let X=O.match(/^(.+?)[,\-]\s*(.+)$/);X?k.push({name:X[1].trim(),phone:X[2].trim()}):k.push({name:O,phone:""})}return k},I=v=>{const A=v.target.value;g(A),x(b(A))},S=()=>{y.length>0&&(u(y),h())};return r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:h,children:r.jsxs("div",{className:"card",style:{maxWidth:"40rem",width:"100%",maxHeight:"90vh",overflow:"auto"},onClick:v=>v.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[r.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(fa,{size:24,style:{color:"var(--primary)"}}),"Bulk Add Guests"]}),r.jsx("button",{onClick:h,style:{padding:"0.5rem",border:"none",background:"none",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(kt,{size:20})})]}),r.jsxs("div",{style:{padding:"1rem",backgroundColor:"#e0e7ff",borderRadius:"var(--radius-md)",marginBottom:"1.5rem"},children:[r.jsx("p",{style:{fontSize:"0.875rem",color:"#3730a3",marginBottom:"0.5rem",fontWeight:500},children:"Paste your guest list below. Formats supported:"}),r.jsxs("ul",{style:{fontSize:"0.875rem",color:"#4338ca",paddingLeft:"1.25rem",lineHeight:1.6},children:[r.jsx("li",{children:"John Doe, +1 555-0100"}),r.jsx("li",{children:"Jane Smith - 555-0101"}),r.jsx("li",{children:"Bob Johnson (name only)"})]})]}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Paste Contact List"}),r.jsx("textarea",{value:l,onChange:I,className:"input",rows:8,placeholder:`John Doe, +1 555-0100
Jane Smith, 555-0101
Bob Johnson`,style:{fontFamily:"monospace",fontSize:"0.875rem",resize:"vertical"}})]}),y.length>0&&r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[r.jsx(Vt,{size:16,style:{color:"var(--success)"}}),r.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--success)"},children:[y.length," guest",y.length!==1?"s":""," ready to import"]})]}),r.jsx("div",{style:{maxHeight:"12rem",overflow:"auto",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",padding:"0.75rem"},children:y.map((v,A)=>r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.5rem",fontSize:"0.875rem",borderBottom:A<y.length-1?"1px solid var(--border-light)":"none"},children:[r.jsx("span",{style:{fontWeight:500,color:"var(--text-primary)"},children:v.name}),r.jsx("span",{style:{color:"var(--text-secondary)"},children:v.phone||"No phone"})]},A))})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:h,className:"btn btn-secondary",children:"Cancel"}),r.jsxs("button",{onClick:S,className:"btn btn-primary",disabled:y.length===0,style:{opacity:y.length===0?.5:1},children:[r.jsx(fa,{size:16})," Add ",y.length," Guest",y.length!==1?"s":""]})]})]})})};var x0;(function(u){u.Home="home",u.Work="work",u.Other="other",u.Custom="custom",u.Mobile="mobile",u.FaxWork="fax_work",u.FaxHome="fax_home",u.Pager="pager",u.Callback="callback",u.Car="car",u.CompanyMain="company_main",u.Isdn="isdn",u.Main="main",u.OtherFax="other_fax",u.Radio="radio",u.Telex="telex",u.TtyTdd="tty_tdd",u.WorkMobile="work_mobile",u.WorkPager="work_pager",u.Assistant="assistant",u.Mms="mms"})(x0||(x0={}));var y0;(function(u){u.Home="home",u.Work="work",u.Other="other",u.Custom="custom",u.Mobile="mobile"})(y0||(y0={}));var v0;(function(u){u.Home="home",u.Work="work",u.Other="other",u.Custom="custom"})(v0||(v0={}));const w0=$i("Contacts",{web:()=>jr(()=>import("./web-CeEdAcGs.js"),[]).then(u=>new u.ContactsWeb)}),jf=({onImport:u,onClose:h})=>{const[l,g]=W.useState([]),[y,x]=W.useState([]),[b,I]=W.useState(new Set),[S,v]=W.useState(""),[A,k]=W.useState(!0),[O,X]=W.useState(null),[q,F]=W.useState(!1);W.useEffect(()=>{V()},[]),W.useEffect(()=>{if(S){const D=l.filter(Z=>Z.name?.toLowerCase().includes(S.toLowerCase())||Z.phoneNumbers?.some(z=>z.number?.includes(S)));x(D)}else x(l)},[S,l]);const V=async()=>{try{const{Capacitor:D}=await jr(async()=>{const{Capacitor:z}=await Promise.resolve().then(()=>kd);return{Capacitor:z}},void 0),Z=D.getPlatform();if(console.log("Capacitor platform:",Z),console.log("Is native platform:",D.isNativePlatform()),Z==="web"){X(` Contact import only works in the native Android app.

To use this feature:
1. Build the Android APK
2. Install it on your phone
3. Grant contacts permission`),k(!1);return}console.log("Running on native platform, loading contacts plugin..."),await Y()}catch(D){console.error("Contacts plugin error:",D),X(`Failed to load contacts: ${D.message||"Unknown error"}`),k(!1)}},Y=async()=>{try{(await w0.requestPermissions()).contacts==="granted"?(F(!0),await R()):(X("Permission denied. Please enable contacts access in your phone settings."),k(!1))}catch(D){console.error("Error requesting contacts permission:",D),X(`Failed to access contacts: ${D.message||"Unknown error"}`),k(!1)}},R=async()=>{try{const D=await w0.getContacts({projection:{name:!0,phones:!0}});console.log("Contacts loaded:",D.contacts?.length||0);const Z=D.contacts.filter(z=>z.name?.display).map(z=>({id:z.contactId,name:z.name.display,phoneNumbers:z.phones||[],primaryPhone:z.phones?.[0]?.number||""})).sort((z,Q)=>z.name.localeCompare(Q.name));g(Z),x(Z),k(!1)}catch(D){console.error("Error loading contacts:",D),X(`Failed to load contacts: ${D.message||"Unknown error"}`),k(!1)}},N=D=>{const Z=new Set(b);Z.has(D)?Z.delete(D):Z.add(D),I(Z)},M=()=>{const D=l.filter(Z=>b.has(Z.id)).map(Z=>({name:Z.name,phone:Z.primaryPhone}));D.length>0&&(u(D),h())};return r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:h,children:r.jsxs("div",{className:"card",style:{maxWidth:"40rem",width:"100%",maxHeight:"90vh",display:"flex",flexDirection:"column"},onClick:D=>D.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid var(--border)"},children:[r.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(yf,{size:24,style:{color:"var(--primary)"}}),"Select Contacts"]}),r.jsx("button",{onClick:h,style:{padding:"0.5rem",border:"none",background:"none",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(kt,{size:20})})]}),A&&r.jsxs("div",{style:{padding:"3rem",textAlign:"center",color:"var(--text-secondary)"},children:[r.jsx(Vt,{size:48,style:{margin:"0 auto 1rem",opacity:.3}}),r.jsx("p",{children:"Loading contacts..."})]}),O&&r.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[r.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"#fef3c7",borderRadius:"var(--radius-lg)",marginBottom:"1rem"},children:[r.jsx(mo,{size:32,style:{color:"#92400e",margin:"0 auto 1rem"}}),r.jsx("p",{style:{fontSize:"0.9375rem",color:"#92400e",whiteSpace:"pre-line",lineHeight:"1.6"},children:O})]}),r.jsx("button",{onClick:h,className:"btn btn-secondary",children:"Close"})]}),!A&&!O&&q&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{marginBottom:"1rem"},children:r.jsxs("div",{style:{position:"relative"},children:[r.jsx(xo,{size:18,style:{position:"absolute",left:"0.875rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)"}}),r.jsx("input",{type:"text",className:"input",style:{paddingLeft:"2.75rem"},placeholder:"Search contacts...",value:S,onChange:D=>v(D.target.value)})]})}),r.jsxs("div",{style:{padding:"0.75rem 1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("span",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[y.length," contact",y.length!==1?"s":""]}),r.jsxs("span",{className:"badge badge-primary",children:[b.size," selected"]})]}),r.jsx("div",{style:{flex:1,overflow:"auto",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",marginBottom:"1.5rem"},children:y.length===0?r.jsxs("div",{style:{padding:"3rem",textAlign:"center",color:"var(--text-secondary)"},children:[r.jsx(Vt,{size:48,style:{margin:"0 auto 1rem",opacity:.2}}),r.jsx("p",{children:"No contacts found"})]}):y.map(D=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",cursor:"pointer",borderBottom:"1px solid var(--border-light)",transition:"background 0.2s"},onMouseEnter:Z=>Z.currentTarget.style.backgroundColor="var(--bg-secondary)",onMouseLeave:Z=>Z.currentTarget.style.backgroundColor="transparent",children:[r.jsx("input",{type:"checkbox",checked:b.has(D.id),onChange:()=>N(D.id),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:600,color:"var(--text-primary)",marginBottom:"0.25rem"},children:D.name}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:D.primaryPhone||"No phone number"})]})]},D.id))}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:h,className:"btn btn-secondary",children:"Cancel"}),r.jsxs("button",{onClick:M,className:"btn btn-primary",disabled:b.size===0,style:{opacity:b.size===0?.5:1},children:[r.jsx(Vt,{size:16})," Add ",b.size," Contact",b.size!==1?"s":""]})]})]})]})})},md="https://gatherly-backend-3vmv.onrender.com",im=({isOpen:u,onClose:h,onSelectContacts:l,event:g})=>{const{contacts:y}=Tr(),[x,b]=W.useState(""),[I,S]=W.useState(new Set),[v,A]=W.useState("contacts"),[k,O]=W.useState([]),[X,q]=W.useState(new Set),[F,V]=W.useState(!1),[Y,R]=W.useState({}),[N,M]=W.useState(null);W.useEffect(()=>{u&&v==="groups"&&D()},[u,v]);const D=async()=>{V(!0),M(null);try{const ne=localStorage.getItem("token");console.log("Fetching contact groups from:",`${md}/contact-groups`);const G=await fetch(`${md}/contact-groups`,{headers:{Authorization:`Bearer ${ne}`}});if(console.log("Contact groups response status:",G.status),G.ok){const J=await G.json();console.log("Contact groups data:",J),O(J),M(null)}else{const J=await G.text();console.error("Failed to fetch groups:",G.status,J),G.status===404?M("Contact groups feature not available. Please update the backend."):M(`Failed to load groups (${G.status})`)}}catch(ne){console.error("Error fetching groups:",ne),M("Network error. Please check your connection.")}finally{V(!1)}},Z=async ne=>{try{const G=localStorage.getItem("token"),J=await fetch(`${md}/contact-groups/${ne}/members`,{headers:{Authorization:`Bearer ${G}`}});if(J.ok){const oe=await J.json();R(ce=>({...ce,[ne]:oe}))}}catch(G){console.error("Error fetching group contacts:",G)}};if(!u)return null;const z=W.useMemo(()=>{const ne=g?.guests||[];return G=>ne.some(J=>J.phone&&G.phone&&J.phone===G.phone||J.name.toLowerCase()===G.name.toLowerCase())},[g]),Q=y.filter(ne=>ne.name.toLowerCase().includes(x.toLowerCase())||ne.phone.includes(x)),he=k.filter(ne=>ne.name.toLowerCase().includes(x.toLowerCase())),Ae=ne=>{const G=new Set(I);G.has(ne)?G.delete(ne):G.add(ne),S(G)},we=async ne=>{const G=new Set(X);G.has(ne)?G.delete(ne):(G.add(ne),Y[ne]||await Z(ne)),q(G)},xe=async(ne=!1)=>{let G=[];if(v==="contacts")G=y.filter(J=>I.has(J.id));else{const J=[];for(const ce of X){const Se=Y[ce]||[];J.push(...Se)}const oe=new Set;G=J.filter(ce=>{const Se=ce.phone||ce.name.toLowerCase();return oe.has(Se)?!1:(oe.add(Se),!0)})}l(G,ne),S(new Set),q(new Set),b(""),h()},le=()=>{if(v==="contacts")return I.size;{const ne=[];for(const J of X){const oe=Y[J]||[];ne.push(...oe)}const G=new Set;return ne.filter(J=>{const oe=J.phone||J.name.toLowerCase();return G.has(oe)?!1:(G.add(oe),!0)}).length}};return r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"600px",width:"100%",maxHeight:"80vh",display:"flex",flexDirection:"column",padding:0},children:[r.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:700,display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Vt,{size:24,style:{color:"var(--primary)"}}),"Import Contacts"]}),r.jsx("button",{onClick:h,className:"btn btn-secondary",style:{padding:"0.5rem"},children:r.jsx(kt,{size:20})})]}),r.jsxs("div",{style:{display:"flex",borderBottom:"1px solid var(--border)"},children:[r.jsxs("button",{onClick:()=>A("contacts"),style:{flex:1,padding:"1rem",background:"none",border:"none",borderBottom:`3px solid ${v==="contacts"?"var(--primary)":"transparent"}`,color:v==="contacts"?"var(--primary)":"var(--text-secondary)",fontWeight:v==="contacts"?600:500,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[r.jsx(Vt,{size:18}),"Contacts"]}),r.jsxs("button",{onClick:()=>A("groups"),style:{flex:1,padding:"1rem",background:"none",border:"none",borderBottom:`3px solid ${v==="groups"?"var(--primary)":"transparent"}`,color:v==="groups"?"var(--primary)":"var(--text-secondary)",fontWeight:v==="groups"?600:500,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[r.jsx(Td,{size:18}),"Groups"]})]}),r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("div",{style:{position:"relative"},children:[r.jsx(xo,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)"}}),r.jsx("input",{type:"text",className:"form-input",value:x,onChange:ne=>b(ne.target.value),placeholder:v==="contacts"?"Search by name or phone...":"Search groups...",style:{paddingLeft:"2.5rem"}})]})}),r.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:v==="contacts"?Q.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:[r.jsx(Vt,{size:48,style:{margin:"0 auto 1rem",opacity:.3}}),r.jsx("p",{children:"No contacts found"})]}):r.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:Q.map(ne=>{const G=z(ne);return r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"var(--radius-md)",background:G?"#f3f4f6":I.has(ne.id)?"var(--bg-secondary)":"transparent",border:`2px solid ${G?"#e5e7eb":I.has(ne.id)?"var(--primary)":"var(--border)"}`,cursor:G?"not-allowed":"pointer",opacity:G?.6:1,transition:"all 0.2s"},children:[r.jsx("input",{type:"checkbox",checked:I.has(ne.id),onChange:()=>Ae(ne.id),disabled:G,style:{cursor:G?"not-allowed":"pointer",width:"18px",height:"18px"}}),r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{fontWeight:600,color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[ne.name,G&&r.jsx("span",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:500},children:"(Already added)"})]}),ne.phone&&r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:ne.phone})]}),I.has(ne.id)&&!G&&r.jsx($t,{size:20,style:{color:"var(--primary)"}})]},ne.id)})}):F?r.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:r.jsx("p",{children:"Loading groups..."})}):he.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:[r.jsx(Td,{size:48,style:{margin:"0 auto 1rem",opacity:.3}}),r.jsx("p",{children:"No groups found"}),r.jsx("p",{style:{fontSize:"0.875rem",marginTop:"0.5rem"},children:"Create contact groups in the Contacts page"})]}):r.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:he.map(ne=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"var(--radius-md)",background:X.has(ne.id)?"var(--bg-secondary)":"transparent",border:`2px solid ${X.has(ne.id)?"var(--primary)":"var(--border)"}`,cursor:"pointer",transition:"all 0.2s"},children:[r.jsx("input",{type:"checkbox",checked:X.has(ne.id),onChange:()=>we(ne.id),style:{cursor:"pointer",width:"18px",height:"18px"}}),r.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:ne.color||"#6B7280"}}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:600,color:"var(--text-primary)"},children:ne.name}),r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[ne.member_count||0," contacts"]})]}),X.has(ne.id)&&r.jsx($t,{size:20,style:{color:"var(--primary)"}})]},ne.id))})}),r.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[le()," contacts selected"]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsx("button",{onClick:h,className:"btn btn-secondary",children:"Cancel"}),r.jsxs("button",{onClick:()=>xe(!1),className:"btn btn-secondary",disabled:le()===0,children:[r.jsx($t,{size:16})," Add to List"]}),r.jsxs("button",{onClick:()=>xe(!0),className:"btn btn-primary",disabled:le()===0,children:[r.jsx($t,{size:16})," Add & Invite All"]})]})]})]})})},sm=u=>{if(u.length===0)return"";const h=Object.keys(u[0]);return[h.join(","),...u.map(g=>h.map(y=>{const x=g[y],b=String(x).replace(/"/g,'""');return b.includes(",")?`"${b}"`:b}).join(","))].join(`
`)},om=(u,h)=>{const l=new Blob([u],{type:"text/csv;charset=utf-8;"}),g=document.createElement("a"),y=URL.createObjectURL(l);g.setAttribute("href",y),g.setAttribute("download",h),g.style.visibility="hidden",document.body.appendChild(g),g.click(),document.body.removeChild(g)},am=u=>{if(!u||!u.guests||u.guests.length===0){alert("No guests to export");return}const h=u.guests.map(y=>({Name:y.name,Phone:y.phone||"N/A","RSVP Status":y.rsvp===!0?"Confirmed":y.rsvp===!1?"Declined":"No Response","Checked In":y.attended?"Yes":"No","Times Checked In":y.attendedCount||0,"Added Date":new Date(y.addedAt).toLocaleDateString(),"Added Time":new Date(y.addedAt).toLocaleTimeString()})),l=sm(h),g=`${u.title.replace(/[^a-z0-9]/gi,"_")}_all_guests_${new Date().toISOString().split("T")[0]}.csv`;om(l,g)},lm=()=>{const{id:u}=go(),h=Wn(),{getEvent:l,addGuest:g,addBulkGuests:y,deleteGuest:x,deleteEvent:b}=Tr(),I=l(u),[S,v]=W.useState({name:"",phone:"",email:""}),[A,k]=W.useState("+91"),[O,X]=W.useState(""),[q,F]=W.useState(null),[V,Y]=W.useState(!1),[R,N]=W.useState(!1),[M,D]=W.useState(!1),[Z,z]=W.useState(!1),[Q,he]=W.useState(null),[Ae,we]=W.useState(null),[xe,le]=W.useState(!1),[ne,G]=W.useState(null),[J,oe]=W.useState(!1);if(!I)return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",textAlign:"center",gap:"1.5rem"},children:[r.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:700,color:"var(--text-primary)"},children:"Event not found"}),r.jsxs(kr,{to:"/manager",className:"btn btn-secondary",children:[r.jsx(mi,{size:18})," Back to Dashboard"]})]});const ce=async(fe,De=!1)=>{if(fe.preventDefault(),!S.name.trim()||xe)return;if(I.guests.some(He=>He.name.toLowerCase()===S.name.trim().toLowerCase()&&(!S.phone||He.phone===S.phone))){alert("This guest has already been added!");return}le(!0);try{const He=await g(u,{name:S.name.trim(),phone:S.phone.trim()?`${A}${S.phone.trim()}`:null,email:S.email.trim()||null});De&&He&&setTimeout(()=>ee(He),500),v({name:"",phone:"",email:""}),z(!1)}catch(He){console.error("Failed to add guest:",He),alert("Failed to add guest. Please try again.")}finally{le(!1)}},Se=fe=>{y(u,fe)},K=async(fe,De=!1)=>{const Ke=fe.filter(st=>!I.guests.some(Qe=>Qe.name.toLowerCase()===st.name.toLowerCase()||st.phone&&Qe.phone===st.phone));if(Ke.length===0){alert("All selected contacts have already been added as guests!");return}if(Ke.length<fe.length){const st=fe.length-Ke.length;alert(`${st} duplicate${st>1?"s":""} skipped. Adding ${Ke.length} new guest${Ke.length>1?"s":""}.`)}const He=Ke.map(st=>({name:st.name,phone:st.phone,email:st.email||""}));await y(u,He),De&&He.length>0&&setTimeout(async()=>{const We=l(u).guests.slice(-He.length);for(const Qe of We)Qe.phone&&(await ee(Qe),await new Promise(St=>setTimeout(St,500)))},500)},B=async fe=>{if(!Ae)try{if(we(fe.id),!fe.phone){alert("No phone number for this guest!");return}const Ke=`${window.location.origin.includes("localhost")?"https://gatherly-backend-3vmv.onrender.com":window.location.origin}/invite/${u}?guest=${fe.id}`,He=`You're invited to ${I.title}!

Event Details:
${I.venue?`Venue: ${I.venue}
`:""}${I.date?`Date: ${new Date(I.date).toLocaleDateString()}
`:""}${I.time?`Time: ${I.time}
`:""}

RSVP here: ${Ke}

 Download the HostEze app:
Play Store: https://play.google.com/store/apps/details?id=com.guestscanner.app
App Store: https://apps.apple.com/app/hosteze`,We=`https://wa.me/${fe.phone.replace(/\D/g,"")}?text=${encodeURIComponent(He)}`;window.open(We,"_blank"),he(fe.id),setTimeout(()=>he(null),2e3)}catch(De){console.error("Error sending WhatsApp invite:",De),alert(`Failed to send WhatsApp invitation: ${De.message}`)}finally{we(null)}},ee=async fe=>{if(!Ae)try{we(fe.id);const Ke=`${window.location.origin.includes("localhost")?"https://gatherly-backend-3vmv.onrender.com":window.location.origin}/invite/${u}?guest=${fe.id}`,He=`You're invited to ${I.title}!

Event Details:
${I.venue?`Venue: ${I.venue}
`:""}${I.date?`Date: ${new Date(I.date).toLocaleDateString()}
`:""}${I.time?`Time: ${I.time}
`:""}

RSVP here: ${Ke}

 Download the HostEze app:
Play Store: https://play.google.com/store/apps/details?id=com.guestscanner.app
App Store: https://apps.apple.com/app/hosteze`,{Share:st}=await jr(async()=>{const{Share:We}=await import("./index-BkYK6l9f.js");return{Share:We}},[]);try{await st.share({title:`Invitation to ${I.title}`,text:He,dialogTitle:`Invite ${fe.name}`}),he(fe.id),setTimeout(()=>he(null),2e3)}catch(We){if(We.message&&!We.message.includes("canceled")&&!We.message.includes("cancelled")){console.error("Share failed:",We);try{await navigator.clipboard.writeText(He),alert("Share failed. Invitation copied to clipboard instead!")}catch(Qe){console.error("Clipboard fallback failed:",Qe),alert("Failed to share invitation. Please try again.")}}}}catch(De){console.error("Error inviting guest:",De),alert(`Failed to send invitation: ${De.message}`)}finally{we(null)}},ve=async fe=>{try{await x(u,fe.id),G(null)}catch(De){console.error("Error deleting guest:",De),alert("Failed to delete guest. Please try again.")}},be=async()=>{try{await b(u),oe(!1),h("/manager")}catch(fe){console.error("Error deleting event:",fe),alert("Failed to delete event. Please try again.")}},Oe=I.guests?.filter(fe=>fe.name.toLowerCase().includes(O.toLowerCase())||fe.phone.includes(O)).sort((fe,De)=>new Date(De.addedAt)-new Date(fe.addedAt))||[],Ce=I.guests?.length||0,Me=I.guests?.filter(fe=>fe.attended).length||0;return r.jsxs("div",{style:{maxWidth:"75rem",margin:"0 auto"},children:[r.jsx("div",{style:{marginBottom:"2rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.875rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"0.5rem"},children:"Guests"}),r.jsxs("p",{style:{fontSize:"0.9375rem",color:"var(--text-secondary)"},children:[Ce," invited  ",Me," checked in"]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",alignItems:"center"},children:[r.jsxs("button",{onClick:()=>am(I),className:"btn btn-secondary",style:{fontSize:"0.875rem"},children:[r.jsx(df,{size:16})," Export"]}),r.jsxs("button",{onClick:()=>z(!0),className:"btn btn-primary",children:[r.jsx(Ft,{size:18})," Add Guest"]})]})]})}),r.jsx("div",{style:{marginBottom:"1.5rem"},children:r.jsxs("div",{style:{position:"relative"},children:[r.jsx(xo,{size:18,style:{position:"absolute",left:"0.875rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)"}}),r.jsx("input",{type:"text",className:"input",style:{paddingLeft:"2.75rem"},placeholder:"Search guests by name or phone...",value:O,onChange:fe=>X(fe.target.value)})]})}),Oe.length===0?r.jsxs("div",{className:"card",style:{padding:"3rem 2rem",textAlign:"center",backgroundColor:"var(--bg-secondary)"},children:[r.jsx(Vt,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("p",{style:{color:"var(--text-secondary)"},children:O?"No guests found matching your search.":"No guests added yet."}),!O&&r.jsxs("button",{onClick:()=>z(!0),className:"btn btn-primary",style:{marginTop:"1rem"},children:[r.jsx(Ft,{size:18})," Add Your First Guest"]})]}):r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:Oe.map(fe=>r.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"0.375rem"},children:fe.name}),r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[fe.phone?r.jsxs("a",{href:`tel:${fe.phone}`,style:{color:"var(--primary)",textDecoration:"none"},children:[" ",fe.phone]}):r.jsx("span",{children:"No phone"}),fe.attended&&r.jsxs("span",{className:"badge badge-success",children:[r.jsx(u0,{size:12})," Checked In"]}),fe.rsvp===!0&&!fe.attended&&r.jsx("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",fontWeight:"600",color:"#059669",background:"#d1fae5",padding:"0.25rem 0.5rem",borderRadius:"0.375rem"},children:" Confirmed"}),fe.rsvp===!1&&r.jsx("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",fontWeight:"600",color:"#dc2626",background:"#fee2e2",padding:"0.25rem 0.5rem",borderRadius:"0.375rem"},children:" Declined"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0},children:[fe.phone&&r.jsx("button",{onClick:()=>B(fe),className:"btn btn-secondary",style:{fontSize:"0.875rem",padding:"0.5rem 0.875rem",background:"#25D366",color:"white",border:"none"},title:"Send via WhatsApp",children:r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L0 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})}),r.jsx("button",{onClick:()=>ee(fe),className:"btn btn-secondary",style:{fontSize:"0.875rem",padding:"0.5rem 0.875rem"},title:"Share invitation",children:Q===fe.id?r.jsxs(r.Fragment,{children:[r.jsx(u0,{size:16})," Shared!"]}):r.jsx(r.Fragment,{children:r.jsx(Rd,{size:16})})}),r.jsxs("button",{onClick:()=>F(fe.id),className:"btn btn-secondary",style:{fontSize:"0.875rem",padding:"0.5rem 0.875rem"},children:[r.jsx(pf,{size:16})," QR"]}),r.jsx("button",{onClick:()=>G(fe),className:"btn btn-secondary",style:{fontSize:"0.875rem",padding:"0.5rem 0.875rem",background:"#ef4444",color:"white",border:"none"},title:"Delete guest",children:r.jsx(Qt,{size:16})})]})]}),q===fe.id&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:()=>F(null),children:r.jsxs("div",{onClick:De=>De.stopPropagation(),style:{position:"relative"},children:[r.jsx("button",{onClick:()=>F(null),style:{position:"absolute",top:"-12px",right:"-12px",width:"40px",height:"40px",borderRadius:"50%",background:"white",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:"#64748b",fontWeight:"bold",zIndex:10,transition:"all 0.2s"},onMouseEnter:De=>{De.currentTarget.style.background="#ef4444",De.currentTarget.style.color="white",De.currentTarget.style.transform="scale(1.1)"},onMouseLeave:De=>{De.currentTarget.style.background="white",De.currentTarget.style.color="#64748b",De.currentTarget.style.transform="scale(1)"},children:r.jsx(kt,{size:24})}),r.jsx(If,{name:fe.name,eventTitle:I.title,phoneNumber:fe.phone,payload:{eventId:I.id,guestId:fe.id,name:fe.name,valid:!0,timestamp:Date.now()}})]})})]},fe.id))}),Z&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:()=>z(!1),children:r.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"100%",padding:"2rem"},onClick:fe=>fe.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)"},children:"Add Guest"}),r.jsx("button",{onClick:()=>z(!1),style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(kt,{size:24})})]}),r.jsxs("form",{onSubmit:ce,style:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Name *"}),r.jsx("input",{type:"text",className:"input",value:S.name,onChange:fe=>v({...S,name:fe.target.value}),placeholder:"John Doe",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Phone (optional)"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("select",{value:A,onChange:fe=>k(fe.target.value),className:"input",style:{width:"120px"},children:[r.jsx("option",{value:"+91",children:" +91"}),r.jsx("option",{value:"+1",children:" +1"}),r.jsx("option",{value:"+44",children:" +44"}),r.jsx("option",{value:"+61",children:" +61"}),r.jsx("option",{value:"+971",children:" +971"})]}),r.jsx("input",{type:"tel",className:"input",value:S.phone,onChange:fe=>v({...S,phone:fe.target.value.replace(/\D/g,"")}),placeholder:"9876543210",maxLength:10,style:{flex:1}})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Email (optional)"}),r.jsx("input",{type:"email",className:"input",value:S.email,onChange:fe=>v({...S,email:fe.target.value}),placeholder:"john@example.com"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginTop:"0.5rem"},children:[r.jsxs("button",{type:"button",onClick:fe=>ce(fe,!1),className:"btn btn-secondary",style:{justifyContent:"center"},disabled:xe,children:[r.jsx(wf,{size:16})," ",xe?"Adding...":"Add to List"]}),r.jsxs("button",{type:"button",onClick:fe=>ce(fe,!0),className:"btn btn-primary",style:{justifyContent:"center"},disabled:xe,children:[r.jsx(Rd,{size:16})," ",xe?"Adding...":"Add & Invite"]})]})]}),r.jsxs("div",{style:{paddingTop:"1.5rem",borderTop:"1px solid var(--border)"},children:[r.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-secondary)",marginBottom:"1rem"},children:"Quick Import"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[r.jsxs("button",{type:"button",onClick:()=>{z(!1),D(!0)},className:"btn btn-secondary",style:{width:"100%",justifyContent:"center"},children:[r.jsx(Vt,{size:16})," Add from Contacts"]}),r.jsxs("button",{type:"button",onClick:()=>{z(!1),Y(!0)},className:"btn btn-secondary",style:{width:"100%",justifyContent:"center"},children:[r.jsx(fa,{size:16})," Import from CSV"]}),r.jsxs("button",{type:"button",onClick:()=>{z(!1),N(!0)},className:"btn btn-secondary",style:{width:"100%",justifyContent:"center"},children:[r.jsx(yf,{size:16})," Import from Phone"]})]})]})]})}),V&&r.jsx(rm,{onImport:Se,onClose:()=>Y(!1)}),R&&r.jsx(jf,{onImport:Se,onClose:()=>N(!1)}),M&&r.jsx(im,{isOpen:M,onClose:()=>D(!1),onSelectContacts:K,event:I}),ne&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:()=>G(null),children:r.jsx("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"2rem"},onClick:fe=>fe.stopPropagation(),children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)"},children:"Delete Guest?"}),r.jsxs("p",{style:{color:"var(--text-secondary)"},children:["Are you sure you want to delete ",r.jsx("strong",{children:ne.name}),"? This action cannot be undone."]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginTop:"0.5rem"},children:[r.jsx("button",{onClick:()=>G(null),className:"btn btn-secondary",style:{justifyContent:"center"},children:"Cancel"}),r.jsxs("button",{onClick:()=>ve(ne),className:"btn btn-primary",style:{justifyContent:"center",background:"#ef4444",border:"none"},children:[r.jsx(Qt,{size:16})," Delete"]})]})]})})}),J&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:()=>oe(!1),children:r.jsx("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"2rem"},onClick:fe=>fe.stopPropagation(),children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)"},children:"Delete Event?"}),r.jsxs("p",{style:{color:"var(--text-secondary)"},children:["Are you sure you want to delete ",r.jsx("strong",{children:I.title}),"? This will permanently delete the event and all ",Ce," guest",Ce!==1?"s":"",". This action cannot be undone."]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginTop:"0.5rem"},children:[r.jsx("button",{onClick:()=>oe(!1),className:"btn btn-secondary",style:{justifyContent:"center"},children:"Cancel"}),r.jsxs("button",{onClick:be,className:"btn btn-primary",style:{justifyContent:"center",background:"#ef4444",border:"none"},children:[r.jsx(Qt,{size:16})," Delete Event"]})]})]})})})]})},cm=({eventId:u,event:h,onClose:l,onExpenseAdded:g})=>{const[y,x]=W.useState({amount:"",currency:"USD",description:"",category:"food",paidBy:"",expenseDate:new Date().toISOString().split("T")[0],splitType:"equal"}),[b,I]=W.useState({}),[S,v]=W.useState([]),[A,k]=W.useState(!1),[O,X]=W.useState(""),q="https://gatherly-backend-3vmv.onrender.com",F=[{id:h.user_id,name:h.user_name||"Event Owner"},...(h.guests||[]).filter(D=>D.user_id).map(D=>({id:D.user_id,name:D.name}))].filter((D,Z,z)=>Z===z.findIndex(Q=>Q.id===D.id));ir.useEffect(()=>{if(S.length===0&&F.length>0){v(F.map(z=>z.id));const D=localStorage.getItem("userId"),Z=F.find(z=>z.id===D)?D:F[0]?.id;Z&&!y.paidBy&&x(z=>({...z,paidBy:Z}))}},[F.length]);const V=async D=>{D.preventDefault(),X(""),k(!0);try{const Z=parseFloat(y.amount);if(isNaN(Z)||Z<=0){X("Please enter a valid amount"),k(!1);return}if(S.length===0){X("Please select at least one participant"),k(!1);return}let z=[];if(y.splitType==="equal"){const xe=Z/S.length;z=S.map(le=>({userId:le,amount:xe}))}else{z=S.map(le=>({userId:le,amount:parseFloat(b[le]||0)}));const xe=z.reduce((le,ne)=>le+ne.amount,0);if(Math.abs(xe-Z)>.01){X(`Split amounts ($${xe.toFixed(2)}) must equal total amount ($${Z.toFixed(2)})`),k(!1);return}}const Q=localStorage.getItem("token"),he={...y,amount:Z,splits:z};console.log("Sending expense creation request:",he),console.log("Splits:",z);const Ae=await fetch(`${q}/api/events/${u}/expenses`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Q}`},body:JSON.stringify(he)});console.log("Expense creation response status:",Ae.status);const we=await Ae.text();if(console.log("Expense creation response:",we),Ae.ok){const xe=JSON.parse(we);console.log("Expense created successfully:",xe),g(),l()}else{const xe=we?JSON.parse(we):{};console.error("Expense creation failed:",xe),X(xe.error||"Failed to create expense")}}catch(Z){console.error("Error creating expense:",Z),X("Failed to create expense")}finally{k(!1)}},Y=D=>{v(Z=>Z.includes(D)?Z.filter(z=>z!==D):[...Z,D])},R=(D,Z)=>{I(z=>({...z,[D]:Z}))},N=["USD","EUR","GBP","INR","AUD","CAD","SGD","AED"],M=["food","transport","accommodation","activities","entertainment","other"];return r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:l,children:r.jsxs("div",{className:"card",style:{maxWidth:"600px",width:"100%",padding:"2rem",maxHeight:"90vh",overflowY:"auto"},onClick:D=>D.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)"},children:"Add Expense"}),r.jsx("button",{onClick:l,style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(kt,{size:24})})]}),O&&r.jsx("div",{style:{padding:"0.75rem",marginBottom:"1rem",borderRadius:"8px",background:"#fee2e2",color:"#991b1b",fontSize:"0.875rem"},children:O}),r.jsxs("form",{onSubmit:V,style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Amount *"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(Zi,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)"}}),r.jsx("input",{type:"number",step:"0.01",className:"input",style:{paddingLeft:"2.5rem"},value:y.amount,onChange:D=>x({...y,amount:D.target.value}),placeholder:"0.00",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Currency"}),r.jsx("select",{className:"input",value:y.currency,onChange:D=>x({...y,currency:D.target.value}),children:N.map(D=>r.jsx("option",{value:D,children:D},D))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Description *"}),r.jsx("input",{type:"text",className:"input",value:y.description,onChange:D=>x({...y,description:D.target.value}),placeholder:"e.g., Dinner at restaurant",required:!0})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Category"}),r.jsx("select",{className:"input",value:y.category,onChange:D=>x({...y,category:D.target.value}),children:M.map(D=>r.jsx("option",{value:D,children:D.charAt(0).toUpperCase()+D.slice(1)},D))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Date"}),r.jsx("input",{type:"date",className:"input",value:y.expenseDate,onChange:D=>x({...y,expenseDate:D.target.value})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Paid By"}),r.jsx("select",{className:"input",value:y.paidBy,onChange:D=>x({...y,paidBy:D.target.value}),children:F.map(D=>r.jsx("option",{value:D.id,children:D.name},D.id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Split Type"}),r.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"splitType",value:"equal",checked:y.splitType==="equal",onChange:D=>x({...y,splitType:D.target.value})}),r.jsx("span",{style:{color:"var(--text-primary)"},children:"Equal Split"})]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"splitType",value:"custom",checked:y.splitType==="custom",onChange:D=>x({...y,splitType:D.target.value})}),r.jsx("span",{style:{color:"var(--text-primary)"},children:"Custom Split"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.75rem",fontWeight:500},children:["Split Among (",S.length," selected)"]}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:F.map(D=>r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"8px",background:S.includes(D.id)?"var(--bg-secondary)":"transparent",border:"1px solid var(--border)"},children:[r.jsx("input",{type:"checkbox",checked:S.includes(D.id),onChange:()=>Y(D.id),style:{cursor:"pointer"}}),r.jsx("span",{style:{flex:1,color:"var(--text-primary)"},children:D.name}),y.splitType==="custom"&&S.includes(D.id)&&r.jsx("input",{type:"number",step:"0.01",className:"input",style:{width:"100px"},placeholder:"0.00",value:b[D.id]||"",onChange:Z=>R(D.id,Z.target.value)}),y.splitType==="equal"&&S.includes(D.id)&&y.amount&&r.jsxs("span",{style:{color:"var(--text-secondary)",fontSize:"0.875rem"},children:["$",(parseFloat(y.amount)/S.length).toFixed(2)]})]},D.id))})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1rem"},children:[r.jsx("button",{type:"button",onClick:l,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",style:{flex:1},disabled:A,children:A?"Adding...":"Add Expense"})]})]})]})})},dm=({expenses:u,eventId:h,onExpenseDeleted:l})=>{const g="https://gatherly-backend-3vmv.onrender.com",y=async x=>{if(confirm("Are you sure you want to delete this expense?"))try{const b=localStorage.getItem("token");(await fetch(`${g}/api/events/${h}/expenses/${x}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}})).ok&&l()}catch(b){console.error("Error deleting expense:",b)}};return u.length===0?r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[r.jsx(Zi,{size:48,style:{margin:"0 auto 1rem",color:"var(--text-tertiary)"}}),r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"0.5rem"},children:"No expenses yet"}),r.jsx("p",{style:{color:"var(--text-secondary)"},children:'Click "Add Expense" to start tracking expenses'})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:u.map(x=>r.jsxs("div",{className:"card",style:{padding:"1.5rem",position:"relative",transition:"transform 0.2s, box-shadow 0.2s"},children:[r.jsx("button",{onClick:()=>y(x.id),style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",cursor:"pointer",color:"var(--text-tertiary)",padding:"0.5rem",borderRadius:"var(--radius)",transition:"all 0.2s"},onMouseEnter:b=>{b.currentTarget.style.background="rgba(239, 68, 68, 0.1)",b.currentTarget.style.color="#ef4444"},onMouseLeave:b=>{b.currentTarget.style.background="none",b.currentTarget.style.color="var(--text-tertiary)"},title:"Delete expense",children:r.jsx(Qt,{size:18})}),r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1.25rem"},children:[r.jsx("div",{style:{width:"3.5rem",height:"3.5rem",borderRadius:"var(--radius-lg)",background:hm(x.category),display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:r.jsx("span",{style:{fontSize:"1.75rem"},children:um(x.category)})}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("h4",{style:{fontSize:"1.0625rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"0.5rem",paddingRight:"2rem"},children:x.description}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem",fontSize:"0.8125rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:[r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[r.jsx(Wd,{size:14}),x.paid_by_name]}),r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[r.jsx(Nr,{size:14}),new Date(x.expense_date).toLocaleDateString()]}),r.jsx("span",{style:{padding:"0.125rem 0.5rem",borderRadius:"var(--radius)",background:"var(--bg-secondary)",fontWeight:500,fontSize:"0.75rem"},children:x.category})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"0.75rem",borderTop:"1px solid var(--border)"},children:[r.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",display:"flex",alignItems:"baseline",gap:"0.25rem"},children:[r.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,color:"var(--text-secondary)"},children:x.currency}),parseFloat(x.amount).toFixed(2)]}),r.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)",fontWeight:500},children:["Split ",x.splits?.length||0," ways"]})]})]})]})]},x.id))})},um=u=>({food:"",transport:"",accommodation:"",activities:"",entertainment:"",other:""})[u]||"",hm=u=>{const h={food:"linear-gradient(135deg, #667eea, #764ba2)",transport:"linear-gradient(135deg, #f093fb, #f5576c)",accommodation:"linear-gradient(135deg, #4facfe, #00f2fe)",activities:"linear-gradient(135deg, #43e97b, #38f9d7)",entertainment:"linear-gradient(135deg, #fa709a, #fee140)",other:"linear-gradient(135deg, #a8edea, #fed6e3)"};return h[u]||h.other},fm=({balances:u,eventId:h,onSettled:l})=>{const[g,y]=W.useState(null),x="https://gatherly-backend-3vmv.onrender.com",b=async I=>{if(confirm(`Settle ${I.currency} ${parseFloat(I.amount).toFixed(2)} from ${I.fromUserName} to ${I.toUserName}?`)){y(I);try{const S=localStorage.getItem("token");(await fetch(`${x}/api/events/${h}/settlements`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify({fromUser:I.fromUser,toUser:I.toUser,amount:I.amount,currency:I.currency})})).ok&&l()}catch(S){console.error("Error settling balance:",S)}finally{y(null)}}};return u.length===0?null:r.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"1rem"},children:"Balances to Settle"}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:u.map((I,S)=>r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",borderRadius:"8px",background:"var(--bg-secondary)",border:"1px solid var(--border)"},children:[r.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:I.fromUserName}),r.jsx(of,{size:18,style:{color:"var(--text-tertiary)"}}),r.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:I.toUserName})]}),r.jsxs("span",{style:{fontSize:"1.125rem",fontWeight:700,color:"#ef4444"},children:[I.currency," ",parseFloat(I.amount).toFixed(2)]}),r.jsxs("button",{onClick:()=>b(I),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},disabled:g===I,children:[r.jsx($t,{size:16}),g===I?"Settling...":"Settle Up"]})]},S))})]})},pm=({eventId:u,event:h})=>{const[l,g]=W.useState([]),[y,x]=W.useState([]),[b,I]=W.useState(null),[S,v]=W.useState(!1),[A,k]=W.useState(!0),[O,X]=W.useState("all"),q="https://gatherly-backend-3vmv.onrender.com";W.useEffect(()=>{F(),V()},[u]);const F=async()=>{try{const Ae=localStorage.getItem("token"),we=O==="all"?`${q}/api/events/${u}/expenses`:`${q}/api/events/${u}/expenses?category=${O}`,xe=await fetch(we,{headers:{Authorization:`Bearer ${Ae}`}});if(xe.ok){const le=await xe.json();g(le.expenses||[])}}catch(Ae){console.error("Error fetching expenses:",Ae)}finally{k(!1)}},V=async()=>{try{const Ae=localStorage.getItem("token"),we=await fetch(`${q}/api/events/${u}/balances`,{headers:{Authorization:`Bearer ${Ae}`}});if(we.ok){const xe=await we.json();x(xe.balances||[]),I(xe.summary)}}catch(Ae){console.error("Error fetching balances:",Ae)}},Y=()=>{v(!1),F(),V()},R=()=>{F(),V()},N=l.reduce((Ae,we)=>Ae+parseFloat(we.amount||0),0),D=l.filter(Ae=>Ae.paid_by===localStorage.getItem("userId")).reduce((Ae,we)=>Ae+parseFloat(we.amount||0),0),Z=localStorage.getItem("userId"),z=y.filter(Ae=>Ae.fromUser===Z||Ae.from_user===Z).reduce((Ae,we)=>Ae+parseFloat(we.amount||0),0),Q=y.filter(Ae=>Ae.toUser===Z||Ae.to_user===Z).reduce((Ae,we)=>Ae+parseFloat(we.amount||0),0),he=["all","food","transport","accommodation","activities","entertainment","other"];return A?r.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:r.jsx("p",{style:{color:"var(--text-secondary)"},children:"Loading expenses..."})}):r.jsxs("div",{style:{maxWidth:"75rem",margin:"0 auto"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsx("div",{className:"card",style:{padding:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[r.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"8px",background:"linear-gradient(135deg, #667eea, #764ba2)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Zi,{size:20,color:"#fff"})}),r.jsxs("div",{children:[r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Expenses"}),r.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)"},children:["$",N.toFixed(2)]})]})]})}),r.jsx("div",{className:"card",style:{padding:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[r.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"8px",background:"linear-gradient(135deg, #f093fb, #f5576c)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(wg,{size:20,color:"#fff"})}),r.jsxs("div",{children:[r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"You Paid"}),r.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)"},children:["$",D.toFixed(2)]})]})]})}),r.jsx("div",{className:"card",style:{padding:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[r.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"8px",background:z>0?"linear-gradient(135deg, #fa709a, #fee140)":"var(--bg-tertiary)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(vg,{size:20,color:z>0?"#fff":"var(--text-tertiary)"})}),r.jsxs("div",{children:[r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"You Owe"}),r.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:z>0?"#ef4444":"var(--text-primary)"},children:["$",z.toFixed(2)]})]})]})}),r.jsx("div",{className:"card",style:{padding:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[r.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"8px",background:Q>0?"linear-gradient(135deg, #4facfe, #00f2fe)":"var(--bg-tertiary)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Vt,{size:20,color:Q>0?"#fff":"var(--text-tertiary)"})}),r.jsxs("div",{children:[r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Owed to You"}),r.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:Q>0?"#10b981":"var(--text-primary)"},children:["$",Q.toFixed(2)]})]})]})})]}),y.length>0&&r.jsx(fm,{balances:y,eventId:u,onSettled:V}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)"},children:"Expenses"}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center",flexWrap:"wrap"},children:[r.jsx("select",{value:O,onChange:Ae=>{X(Ae.target.value),setTimeout(F,100)},className:"input",style:{width:"auto",minWidth:"150px"},children:he.map(Ae=>r.jsx("option",{value:Ae,children:Ae.charAt(0).toUpperCase()+Ae.slice(1)},Ae))}),r.jsxs("button",{onClick:()=>v(!0),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Ft,{size:18}),"Add Expense"]})]})]}),r.jsx(dm,{expenses:l,eventId:u,onExpenseDeleted:R}),S&&r.jsx(cm,{eventId:u,event:h,onClose:()=>v(!1),onExpenseAdded:Y})]})},gm=()=>{const{id:u}=go(),h=Wn(),{getEvent:l,updateEvent:g,deleteEvent:y}=Tr(),x=l(u),[b,I]=W.useState("overview"),[S,v]=W.useState(!1);if(!x)return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",textAlign:"center",gap:"1.5rem"},children:[r.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:700,color:"var(--text-primary)"},children:"Event not found"}),r.jsxs(kr,{to:"/manager",className:"btn btn-secondary",children:[r.jsx(mi,{size:18})," Back to Dashboard"]})]});const A=Z=>{g(u,{...x,catering:{items:Z}})},k=Z=>{g(u,{...x,tasks:Z})},O=Z=>{g(u,{...x,venue:Z})},X=Z=>{g(u,{...x,decorations:Z})},q=Z=>{g(u,{...x,gifts:Z})},F=Z=>{g(u,{...x,entertainment:Z})},V=Z=>{g(u,{...x,vendors:Z})},Y=async()=>{try{await y(u),v(!1),h("/manager")}catch(Z){console.error("Error deleting event:",Z),alert("Failed to delete event. Please try again.")}},R=x.event_type==="shared",N=[{id:"overview",label:"Overview",icon:p0},{id:"guests",label:"Guests",icon:Vt,badge:x.guests?.length||0},{id:"catering",label:"Catering",icon:Cf,badge:x.catering?.items?.length||null},{id:"tasks",label:"Tasks",icon:cf,badge:x.tasks?.length||null},{id:"venue",label:"Venue",icon:qi,badge:null},{id:"decorations",label:"Decorations",icon:vf,badge:x.decorations?.items?.length||null},{id:"gifts",label:"Gifts",icon:uf,badge:x.gifts?.items?.length||null},{id:"entertainment",label:"Entertainment",icon:ff,badge:x.entertainment?.activities?.length||null},{id:"vendors",label:"Vendors",icon:af,badge:x.vendors?.length||null},{id:"budget",label:"Budget",icon:Zi,badge:null},{id:"reminders",label:"Reminders",icon:co,badge:null},{id:"messages",label:"Messages",icon:Tl,badge:null}],M=[{id:"overview",label:"Overview",icon:p0},{id:"guests",label:"Participants",icon:Vt,badge:x.guests?.length||0},{id:"expenses",label:"Expenses",icon:Zi,badge:null},{id:"messages",label:"Messages",icon:Tl,badge:null}],D=R?M:N;return r.jsxs("div",{style:{maxWidth:"75rem",margin:"0 auto",padding:"16px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},children:[r.jsxs(kr,{to:`/event/${u}/wall`,style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 20px",borderRadius:"12px",background:"linear-gradient(135deg, #6366f1, #a855f7)",border:"none",color:"#ffffff",fontWeight:700,fontSize:"14px",textDecoration:"none",boxShadow:"0 4px 12px rgba(99,102,241,0.3)",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:Z=>{Z.currentTarget.style.transform="translateY(-2px)",Z.currentTarget.style.boxShadow="0 6px 16px rgba(99,102,241,0.4)"},onMouseLeave:Z=>{Z.currentTarget.style.transform="translateY(0)",Z.currentTarget.style.boxShadow="0 4px 12px rgba(99,102,241,0.3)"},children:[r.jsx(Tl,{size:18,strokeWidth:2.5})," Event Wall"]}),r.jsx("button",{onClick:()=>v(!0),style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"8px",background:"#ef4444",border:"none",color:"#ffffff",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:Z=>Z.currentTarget.style.background="#dc2626",onMouseLeave:Z=>Z.currentTarget.style.background="#ef4444",title:"Delete Event",children:r.jsx(Qt,{size:16})})]}),r.jsx(Ng,{tabs:D,activeTab:b,onTabChange:I}),r.jsxs("div",{children:[b==="overview"&&r.jsx(Tg,{event:x}),b==="guests"&&r.jsx(lm,{}),b==="expenses"&&r.jsx(pm,{eventId:u,event:x}),b==="catering"&&r.jsx(_g,{event:x,onUpdate:A}),b==="tasks"&&r.jsx(Rg,{event:x,onUpdateTasks:k}),b==="venue"&&r.jsx(Og,{event:x,onUpdateVenue:O}),b==="decorations"&&r.jsx(Dg,{event:x,onUpdateDecorations:X}),b==="gifts"&&r.jsx(Pg,{event:x,onUpdateGifts:q}),b==="entertainment"&&r.jsx(Mg,{event:x,onUpdateEntertainment:F}),b==="vendors"&&r.jsx(Bg,{event:x,onUpdateVendors:V}),b==="budget"&&r.jsx(zg,{event:x}),b==="reminders"&&r.jsx(Wg,{event:x}),b==="messages"&&r.jsx(Ug,{event:x})]}),S&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:()=>v(!1),children:r.jsx("div",{style:{maxWidth:"400px",width:"100%",padding:"2rem",background:"var(--bg-primary)",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},onClick:Z=>Z.stopPropagation(),children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)"},children:"Delete Event?"}),r.jsxs("p",{style:{color:"var(--text-secondary)"},children:["Are you sure you want to delete ",r.jsx("strong",{children:x.title}),"? This will permanently delete the event and all ",x.guests?.length||0," guest",x.guests?.length!==1?"s":"",". This action cannot be undone."]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginTop:"0.5rem"},children:[r.jsx("button",{onClick:()=>v(!1),style:{padding:"10px 20px",borderRadius:"8px",background:"var(--bg-secondary)",border:"1px solid var(--border)",color:"var(--text-primary)",fontWeight:600,cursor:"pointer"},children:"Cancel"}),r.jsxs("button",{onClick:Y,style:{padding:"10px 20px",borderRadius:"8px",background:"#ef4444",border:"none",color:"#ffffff",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[r.jsx(Qt,{size:16})," Delete Event"]})]})]})})})]})},mm=()=>{const{id:u}=go(),h=Wn(),{getEvent:l,rsvpGuest:g}=Tr(),{user:y}=Wr(),x=l(u),[b,I]=W.useState(null),[S,v]=W.useState(!1);if(W.useEffect(()=>{if(!x||!x.guests)return;const O=q=>q?q.replace(/\D/g,"").slice(-10):null,X=x.guests.find(q=>{const F=y?.email&&q.email===y.email,V=O(y?.phone),Y=O(q.phone),R=V&&Y&&V===Y,N=q.user_id===y?.id;return F||R||N});I(X)},[x,y]),!x)return r.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[r.jsx("h2",{children:"Event not found"}),r.jsx(kr,{to:"/",className:"btn btn-primary",style:{marginTop:"1rem"},children:"Back to Events"})]});const A=b?b.rsvp:x.rsvp,k=A!=null;return r.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem"},children:[r.jsx("button",{onClick:()=>h("/"),style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--bg-secondary)",border:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(mi,{size:20})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{display:"inline-block",padding:"4px 12px",background:"rgba(99,102,241,0.1)",color:"var(--primary)",borderRadius:"12px",fontSize:"12px",fontWeight:600,marginBottom:"8px"},children:"YOU'RE INVITED"}),r.jsx("h1",{style:{fontSize:"28px",fontWeight:900,color:"var(--text-primary)",margin:0},children:x.title})]})]}),r.jsxs("div",{className:"card",style:{padding:"2rem",marginBottom:"1.5rem"},children:[r.jsx("h2",{style:{fontSize:"18px",fontWeight:700,color:"var(--text-primary)",marginBottom:"1.5rem"},children:"Event Details"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[x.date&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #6366f1, #a855f7)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r.jsx(Nr,{size:24,color:"white"})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",fontWeight:600,marginBottom:"2px"},children:"DATE & TIME"}),r.jsx("div",{style:{fontSize:"16px",fontWeight:700,color:"var(--text-primary)"},children:new Date(x.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),x.location&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #10b981, #14b8a6)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r.jsx(qi,{size:24,color:"white"})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",fontWeight:600,marginBottom:"2px"},children:"LOCATION"}),r.jsx("div",{style:{fontSize:"16px",fontWeight:700,color:"var(--text-primary)"},children:x.location})]})]}),x.description&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",fontWeight:600,marginBottom:"8px"},children:"DESCRIPTION"}),r.jsx("p",{style:{fontSize:"15px",color:"var(--text-primary)",lineHeight:"1.6",margin:0},children:x.description})]})]})]}),r.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:"1.5rem"},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:r.jsxs("div",{children:[r.jsx("h3",{style:{fontSize:"16px",fontWeight:700,color:"var(--text-primary)",marginBottom:"4px"},children:"Your RSVP"}),k?r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:A?r.jsxs(r.Fragment,{children:[r.jsx(js,{size:18,color:"#10b981"}),r.jsx("span",{style:{color:"#10b981",fontWeight:600,fontSize:"14px"},children:"Attending"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Ud,{size:18,color:"#ef4444"}),r.jsx("span",{style:{color:"#ef4444",fontWeight:600,fontSize:"14px"},children:"Not Attending"})]})}):r.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:"Please respond to your invitation"})]})}),b&&r.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--border)"},children:[r.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:k?"Want to change your response?":"Will you be attending?"}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsx("button",{onClick:async()=>{v(!0);try{await g(x.id,b.id,!1)}catch(O){console.error("RSVP error:",O),alert("Failed to update RSVP. Please try again.")}finally{v(!1)}},disabled:S,className:"btn",style:{flex:1,padding:"0.75rem",background:A===!1?"linear-gradient(135deg, #ef4444, #dc2626)":"var(--bg-secondary)",color:A===!1?"white":"var(--text-primary)",border:A===!1?"none":"1px solid var(--border)",fontWeight:600,fontSize:"14px"},children:A===!1?" Not Attending":"Can't Make It"}),r.jsx("button",{onClick:async()=>{v(!0);try{await g(x.id,b.id,!0)}catch(O){console.error("RSVP error:",O),alert("Failed to update RSVP. Please try again.")}finally{v(!1)}},disabled:S,className:"btn btn-primary",style:{flex:1,padding:"0.75rem",background:A===!0?"linear-gradient(135deg, #10b981, #059669)":"",fontWeight:600,fontSize:"14px"},children:A===!0?" Attending":"I'll Be There!"})]})]})]}),b&&r.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx(pf,{size:20,color:"var(--primary)"}),r.jsx("h3",{style:{fontSize:"16px",fontWeight:700,color:"var(--text-primary)",margin:0},children:"Your Check-in QR Code"})]}),r.jsx("p",{style:{fontSize:"14px",color:"var(--text-secondary)",margin:0},children:"Show this QR code at the event entrance for quick check-in"})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center"},children:r.jsx(If,{payload:{eventId:x.id,guestId:b.id,name:b.name,valid:!0,timestamp:Date.now()},name:b.name,eventTitle:x.title,phoneNumber:b.phone})})]}),r.jsxs(kr,{to:`/event/${u}/wall`,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, #6366f1, #a855f7)",border:"none",color:"#ffffff",fontWeight:900,fontSize:"16px",textDecoration:"none",boxShadow:"0 8px 20px rgba(99,102,241,0.3)",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseEnter:O=>{O.currentTarget.style.transform="translateY(-2px)",O.currentTarget.style.boxShadow="0 12px 24px rgba(99,102,241,0.4)"},onMouseLeave:O=>{O.currentTarget.style.transform="translateY(0)",O.currentTarget.style.boxShadow="0 8px 20px rgba(99,102,241,0.3)"},children:[r.jsx(Tl,{size:22,strokeWidth:2.5}),"Open Event Wall"]})]})};var Fe;(function(u){u[u.QR_CODE=0]="QR_CODE",u[u.AZTEC=1]="AZTEC",u[u.CODABAR=2]="CODABAR",u[u.CODE_39=3]="CODE_39",u[u.CODE_93=4]="CODE_93",u[u.CODE_128=5]="CODE_128",u[u.DATA_MATRIX=6]="DATA_MATRIX",u[u.MAXICODE=7]="MAXICODE",u[u.ITF=8]="ITF",u[u.EAN_13=9]="EAN_13",u[u.EAN_8=10]="EAN_8",u[u.PDF_417=11]="PDF_417",u[u.RSS_14=12]="RSS_14",u[u.RSS_EXPANDED=13]="RSS_EXPANDED",u[u.UPC_A=14]="UPC_A",u[u.UPC_E=15]="UPC_E",u[u.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Fe||(Fe={}));var C0=new Map([[Fe.QR_CODE,"QR_CODE"],[Fe.AZTEC,"AZTEC"],[Fe.CODABAR,"CODABAR"],[Fe.CODE_39,"CODE_39"],[Fe.CODE_93,"CODE_93"],[Fe.CODE_128,"CODE_128"],[Fe.DATA_MATRIX,"DATA_MATRIX"],[Fe.MAXICODE,"MAXICODE"],[Fe.ITF,"ITF"],[Fe.EAN_13,"EAN_13"],[Fe.EAN_8,"EAN_8"],[Fe.PDF_417,"PDF_417"],[Fe.RSS_14,"RSS_14"],[Fe.RSS_EXPANDED,"RSS_EXPANDED"],[Fe.UPC_A,"UPC_A"],[Fe.UPC_E,"UPC_E"],[Fe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),b0;(function(u){u[u.UNKNOWN=0]="UNKNOWN",u[u.URL=1]="URL"})(b0||(b0={}));function xm(u){return Object.values(Fe).includes(u)}var Dl;(function(u){u[u.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",u[u.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Dl||(Dl={}));var ym=(function(){function u(){}return u.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",u.SCAN_DEFAULT_FPS=2,u.DEFAULT_DISABLE_FLIP=!1,u.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,u.DEFAULT_SUPPORTED_SCAN_TYPE=[Dl.SCAN_TYPE_CAMERA,Dl.SCAN_TYPE_FILE],u})(),kf=(function(){function u(h,l){this.format=h,this.formatName=l}return u.prototype.toString=function(){return this.formatName},u.create=function(h){if(!C0.has(h))throw"".concat(h," not in html5QrcodeSupportedFormatsTextMap");return new u(h,C0.get(h))},u})(),S0=(function(){function u(){}return u.createFromText=function(h){var l={text:h};return{decodedText:h,result:l}},u.createFromQrcodeResult=function(h){return{decodedText:h.text,result:h}},u})(),Od;(function(u){u[u.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",u[u.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",u[u.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Od||(Od={}));var vm=(function(){function u(){}return u.createFrom=function(h){return{errorMessage:h,type:Od.UNKWOWN_ERROR}},u})(),wm=(function(){function u(h){this.verbose=h}return u.prototype.log=function(h){this.verbose&&console.log(h)},u.prototype.warn=function(h){this.verbose&&console.warn(h)},u.prototype.logError=function(h,l){(this.verbose||l===!0)&&console.error(h)},u.prototype.logErrors=function(h){if(h.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(h)},u})();function fi(u){return typeof u>"u"||u===null}var ao=(function(){function u(){}return u.codeParseError=function(h){return"QR code parse error, error = ".concat(h)},u.errorGettingUserMedia=function(h){return"Error getting userMedia, error = ".concat(h)},u.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},u.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},u.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},u.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},u.scannerPaused=function(){return"Scanner paused"},u})(),Nf=(function(){function u(){}return u.isMediaStreamConstraintsValid=function(h,l){if(typeof h!="object"){var g=typeof h;return l.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(g,"."),!0),!1}for(var y=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],x=new Set(y),b=Object.keys(h),I=0,S=b;I<S.length;I++){var v=S[I];if(x.has(v))return l.logError("".concat(v," is not supported videoConstaints."),!0),!1}return!0},u})(),la={exports:{}},Cm=la.exports,E0;function bm(){return E0||(E0=1,(function(u,h){(function(l,g){g(h)})(Cm,(function(l){function g(T){return T==null}var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,e){T.__proto__=e}||function(T,e){for(var n in e)e.hasOwnProperty(n)&&(T[n]=e[n])};function x(T,e){y(T,e);function n(){this.constructor=T}T.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function b(T,e){var n=Object.setPrototypeOf;n?n(T,e):T.__proto__=e}function I(T,e){e===void 0&&(e=T.constructor);var n=Error.captureStackTrace;n&&n(T,e)}var S=(function(T){x(e,T);function e(n){var i=this.constructor,o=T.call(this,n)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1}),b(o,i.prototype),I(o),o}return e})(Error);class v extends S{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}v.kind="Exception";class A extends v{}A.kind="ArgumentException";class k extends v{}k.kind="IllegalArgumentException";class O{constructor(e){if(this.binarizer=e,e===null)throw new k("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,n){return this.binarizer.getBlackRow(e,n)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,n,i,o){const a=this.binarizer.getLuminanceSource().crop(e,n,i,o);return new O(this.binarizer.createBinarizer(a))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new O(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new O(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class X extends v{static getChecksumInstance(){return new X}}X.kind="ChecksumException";class q{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class F{static arraycopy(e,n,i,o,a){for(;a--;)i[o++]=e[n++]}static currentTimeMillis(){return Date.now()}}class V extends v{}V.kind="IndexOutOfBoundsException";class Y extends V{constructor(e=void 0,n=void 0){super(n),this.index=e,this.message=n}}Y.kind="ArrayIndexOutOfBoundsException";class R{static fill(e,n){for(let i=0,o=e.length;i<o;i++)e[i]=n}static fillWithin(e,n,i,o){R.rangeCheck(e.length,n,i);for(let a=n;a<i;a++)e[a]=o}static rangeCheck(e,n,i){if(n>i)throw new k("fromIndex("+n+") > toIndex("+i+")");if(n<0)throw new Y(n);if(i>e)throw new Y(i)}static asList(...e){return e}static create(e,n,i){return Array.from({length:e}).map(a=>Array.from({length:n}).fill(i))}static createInt32Array(e,n,i){return Array.from({length:e}).map(a=>Int32Array.from({length:n}).fill(i))}static equals(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(let i=0,o=e.length;i<o;i++)if(e[i]!==n[i])return!1;return!0}static hashCode(e){if(e===null)return 0;let n=1;for(const i of e)n=31*n+i;return n}static fillUint8Array(e,n){for(let i=0;i!==e.length;i++)e[i]=n}static copyOf(e,n){return e.slice(0,n)}static copyOfUint8Array(e,n){if(e.length<=n){const i=new Uint8Array(n);return i.set(e),i}return e.slice(0,n)}static copyOfRange(e,n,i){const o=i-n,a=new Int32Array(o);return F.arraycopy(e,n,a,0,o),a}static binarySearch(e,n,i){i===void 0&&(i=R.numberComparator);let o=0,a=e.length-1;for(;o<=a;){const c=a+o>>1,f=i(n,e[c]);if(f>0)o=c+1;else if(f<0)a=c-1;else return c}return-o-1}static numberComparator(e,n){return e-n}}class N{static numberOfTrailingZeros(e){let n;if(e===0)return 32;let i=31;return n=e<<16,n!==0&&(i-=16,e=n),n=e<<8,n!==0&&(i-=8,e=n),n=e<<4,n!==0&&(i-=4,e=n),n=e<<2,n!==0&&(i-=2,e=n),i-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,n){return Math.trunc(e/n)}static parseInt(e,n=void 0){return parseInt(e,n)}}N.MIN_VALUE_32_BITS=-2147483648,N.MAX_VALUE=Number.MAX_SAFE_INTEGER;class M{constructor(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=M.makeArray(e):this.bits=n)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const n=M.makeArray(e);F.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const n=this.size;if(e>=n)return n;const i=this.bits;let o=Math.floor(e/32),a=i[o];a&=~((1<<(e&31))-1);const c=i.length;for(;a===0;){if(++o===c)return n;a=i[o]}const f=o*32+N.numberOfTrailingZeros(a);return f>n?n:f}getNextUnset(e){const n=this.size;if(e>=n)return n;const i=this.bits;let o=Math.floor(e/32),a=~i[o];a&=~((1<<(e&31))-1);const c=i.length;for(;a===0;){if(++o===c)return n;a=~i[o]}const f=o*32+N.numberOfTrailingZeros(a);return f>n?n:f}setBulk(e,n){this.bits[Math.floor(e/32)]=n}setRange(e,n){if(n<e||e<0||n>this.size)throw new k;if(n===e)return;n--;const i=Math.floor(e/32),o=Math.floor(n/32),a=this.bits;for(let c=i;c<=o;c++){const f=c>i?0:e&31,w=(2<<(c<o?31:n&31))-(1<<f);a[c]|=w}}clear(){const e=this.bits.length,n=this.bits;for(let i=0;i<e;i++)n[i]=0}isRange(e,n,i){if(n<e||e<0||n>this.size)throw new k;if(n===e)return!0;n--;const o=Math.floor(e/32),a=Math.floor(n/32),c=this.bits;for(let f=o;f<=a;f++){const m=f>o?0:e&31,j=(2<<(f<a?31:n&31))-(1<<m)&4294967295;if((c[f]&j)!==(i?j:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,n){if(n<0||n>32)throw new k("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(let i=n;i>0;i--)this.appendBit((e>>i-1&1)===1)}appendBitArray(e){const n=e.size;this.ensureCapacity(this.size+n);for(let i=0;i<n;i++)this.appendBit(e.get(i))}xor(e){if(this.size!==e.size)throw new k("Sizes don't match");const n=this.bits;for(let i=0,o=n.length;i<o;i++)n[i]^=e.bits[i]}toBytes(e,n,i,o){for(let a=0;a<o;a++){let c=0;for(let f=0;f<8;f++)this.get(e)&&(c|=1<<7-f),e++;n[i+a]=c}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),i=n+1,o=this.bits;for(let a=0;a<i;a++){let c=o[a];c=c>>1&1431655765|(c&1431655765)<<1,c=c>>2&858993459|(c&858993459)<<2,c=c>>4&252645135|(c&252645135)<<4,c=c>>8&16711935|(c&16711935)<<8,c=c>>16&65535|(c&65535)<<16,e[n-a]=c}if(this.size!==i*32){const a=i*32-this.size;let c=e[0]>>>a;for(let f=1;f<i;f++){const m=e[f];c|=m<<32-a,e[f-1]=c,c=m>>>a}e[i-1]=c}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof M))return!1;const n=e;return this.size===n.size&&R.equals(this.bits,n.bits)}hashCode(){return 31*this.size+R.hashCode(this.bits)}toString(){let e="";for(let n=0,i=this.size;n<i;n++)(n&7)===0&&(e+=" "),e+=this.get(n)?"X":".";return e}clone(){return new M(this.size,this.bits.slice())}}var D;(function(T){T[T.OTHER=0]="OTHER",T[T.PURE_BARCODE=1]="PURE_BARCODE",T[T.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",T[T.TRY_HARDER=3]="TRY_HARDER",T[T.CHARACTER_SET=4]="CHARACTER_SET",T[T.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",T[T.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",T[T.ASSUME_GS1=7]="ASSUME_GS1",T[T.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",T[T.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",T[T.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(D||(D={}));var Z=D;class z extends v{static getFormatInstance(){return new z}}z.kind="FormatException";var Q;(function(T){T[T.Cp437=0]="Cp437",T[T.ISO8859_1=1]="ISO8859_1",T[T.ISO8859_2=2]="ISO8859_2",T[T.ISO8859_3=3]="ISO8859_3",T[T.ISO8859_4=4]="ISO8859_4",T[T.ISO8859_5=5]="ISO8859_5",T[T.ISO8859_6=6]="ISO8859_6",T[T.ISO8859_7=7]="ISO8859_7",T[T.ISO8859_8=8]="ISO8859_8",T[T.ISO8859_9=9]="ISO8859_9",T[T.ISO8859_10=10]="ISO8859_10",T[T.ISO8859_11=11]="ISO8859_11",T[T.ISO8859_13=12]="ISO8859_13",T[T.ISO8859_14=13]="ISO8859_14",T[T.ISO8859_15=14]="ISO8859_15",T[T.ISO8859_16=15]="ISO8859_16",T[T.SJIS=16]="SJIS",T[T.Cp1250=17]="Cp1250",T[T.Cp1251=18]="Cp1251",T[T.Cp1252=19]="Cp1252",T[T.Cp1256=20]="Cp1256",T[T.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",T[T.UTF8=22]="UTF8",T[T.ASCII=23]="ASCII",T[T.Big5=24]="Big5",T[T.GB18030=25]="GB18030",T[T.EUC_KR=26]="EUC_KR"})(Q||(Q={}));class he{constructor(e,n,i,...o){this.valueIdentifier=e,this.name=i,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=o,he.VALUE_IDENTIFIER_TO_ECI.set(e,this),he.NAME_TO_ECI.set(i,this);const a=this.values;for(let c=0,f=a.length;c!==f;c++){const m=a[c];he.VALUES_TO_ECI.set(m,this)}for(const c of o)he.NAME_TO_ECI.set(c,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new z("incorect value");const n=he.VALUES_TO_ECI.get(e);if(n===void 0)throw new z("incorect value");return n}static getCharacterSetECIByName(e){const n=he.NAME_TO_ECI.get(e);if(n===void 0)throw new z("incorect value");return n}equals(e){if(!(e instanceof he))return!1;const n=e;return this.getName()===n.getName()}}he.VALUE_IDENTIFIER_TO_ECI=new Map,he.VALUES_TO_ECI=new Map,he.NAME_TO_ECI=new Map,he.Cp437=new he(Q.Cp437,Int32Array.from([0,2]),"Cp437"),he.ISO8859_1=new he(Q.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),he.ISO8859_2=new he(Q.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),he.ISO8859_3=new he(Q.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),he.ISO8859_4=new he(Q.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),he.ISO8859_5=new he(Q.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),he.ISO8859_6=new he(Q.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),he.ISO8859_7=new he(Q.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),he.ISO8859_8=new he(Q.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),he.ISO8859_9=new he(Q.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),he.ISO8859_10=new he(Q.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),he.ISO8859_11=new he(Q.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),he.ISO8859_13=new he(Q.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),he.ISO8859_14=new he(Q.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),he.ISO8859_15=new he(Q.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),he.ISO8859_16=new he(Q.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),he.SJIS=new he(Q.SJIS,20,"SJIS","Shift_JIS"),he.Cp1250=new he(Q.Cp1250,21,"Cp1250","windows-1250"),he.Cp1251=new he(Q.Cp1251,22,"Cp1251","windows-1251"),he.Cp1252=new he(Q.Cp1252,23,"Cp1252","windows-1252"),he.Cp1256=new he(Q.Cp1256,24,"Cp1256","windows-1256"),he.UnicodeBigUnmarked=new he(Q.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),he.UTF8=new he(Q.UTF8,26,"UTF8","UTF-8"),he.ASCII=new he(Q.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),he.Big5=new he(Q.Big5,28,"Big5"),he.GB18030=new he(Q.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),he.EUC_KR=new he(Q.EUC_KR,30,"EUC_KR","EUC-KR");class Ae extends v{}Ae.kind="UnsupportedOperationException";class we{static decode(e,n){const i=this.encodingName(n);return this.customDecoder?this.customDecoder(e,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(e,i):new TextDecoder(i).decode(e)}static shouldDecodeOnFallback(e){return!we.isBrowser()&&e==="ISO-8859-1"}static encode(e,n){const i=this.encodingName(n);return this.customEncoder?this.customEncoder(e,i):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof he?e:he.getCharacterSetECIByName(e)}static decodeFallback(e,n){const i=this.encodingCharacterSet(n);if(we.isDecodeFallbackSupported(i)){let o="";for(let a=0,c=e.length;a<c;a++){let f=e[a].toString(16);f.length<2&&(f="0"+f),o+="%"+f}return decodeURIComponent(o)}if(i.equals(he.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Ae(`Encoding ${this.encodingName(n)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(he.UTF8)||e.equals(he.ISO8859_1)||e.equals(he.ASCII)}static encodeFallback(e){const i=btoa(unescape(encodeURIComponent(e))).split(""),o=[];for(let a=0;a<i.length;a++)o.push(i[a].charCodeAt(0));return new Uint8Array(o)}}class xe{static castAsNonUtf8Char(e,n=null){const i=n?n.getName():this.ISO88591;return we.decode(new Uint8Array([e]),i)}static guessEncoding(e,n){if(n!=null&&n.get(Z.CHARACTER_SET)!==void 0)return n.get(Z.CHARACTER_SET).toString();const i=e.length;let o=!0,a=!0,c=!0,f=0,m=0,w=0,j=0,_=0,L=0,H=0,te=0,ie=0,ae=0,ge=0;const Te=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let _e=0;_e<i&&(o||a||c);_e++){const je=e[_e]&255;c&&(f>0?(je&128)===0?c=!1:f--:(je&128)!==0&&((je&64)===0?c=!1:(f++,(je&32)===0?m++:(f++,(je&16)===0?w++:(f++,(je&8)===0?j++:c=!1))))),o&&(je>127&&je<160?o=!1:je>159&&(je<192||je===215||je===247)&&ge++),a&&(_>0?je<64||je===127||je>252?a=!1:_--:je===128||je===160||je>239?a=!1:je>160&&je<224?(L++,te=0,H++,H>ie&&(ie=H)):je>127?(_++,H=0,te++,te>ae&&(ae=te)):(H=0,te=0))}return c&&f>0&&(c=!1),a&&_>0&&(a=!1),c&&(Te||m+w+j>0)?xe.UTF8:a&&(xe.ASSUME_SHIFT_JIS||ie>=3||ae>=3)?xe.SHIFT_JIS:o&&a?ie===2&&L===2||ge*10>=i?xe.SHIFT_JIS:xe.ISO88591:o?xe.ISO88591:a?xe.SHIFT_JIS:c?xe.UTF8:xe.PLATFORM_DEFAULT_ENCODING}static format(e,...n){let i=-1;function o(c,f,m,w,j,_){if(c==="%%")return"%";if(n[++i]===void 0)return;c=w?parseInt(w.substr(1)):void 0;let L=j?parseInt(j.substr(1)):void 0,H;switch(_){case"s":H=n[i];break;case"c":H=n[i][0];break;case"f":H=parseFloat(n[i]).toFixed(c);break;case"p":H=parseFloat(n[i]).toPrecision(c);break;case"e":H=parseFloat(n[i]).toExponential(c);break;case"x":H=parseInt(n[i]).toString(L||16);break;case"d":H=parseFloat(parseInt(n[i],L||10).toPrecision(c)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(L);let te=parseInt(m),ie=m&&m[0]+""=="0"?"0":" ";for(;H.length<te;)H=f!==void 0?H+ie:ie+H;return H}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,o)}static getBytes(e,n){return we.encode(e,n)}static getCharCode(e,n=0){return e.charCodeAt(n)}static getCharAt(e){return String.fromCharCode(e)}}xe.SHIFT_JIS=he.SJIS.getName(),xe.GB2312="GB2312",xe.ISO88591=he.ISO8859_1.getName(),xe.EUC_JP="EUC_JP",xe.UTF8=he.UTF8.getName(),xe.PLATFORM_DEFAULT_ENCODING=xe.UTF8,xe.ASSUME_SHIFT_JIS=!1;class le{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=xe.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,n,i){for(let o=n;n<n+i;o++)this.append(e[o]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)}substring(e,n){return this.value.substring(e,n)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+n.length)}}class ne{constructor(e,n,i,o){if(this.width=e,this.height=n,this.rowSize=i,this.bits=o,n==null&&(n=e),this.height=n,e<1||n<1)throw new k("Both dimensions must be greater than 0");i==null&&(i=Math.floor((e+31)/32)),this.rowSize=i,o==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const n=e.length,i=e[0].length,o=new ne(i,n);for(let a=0;a<n;a++){const c=e[a];for(let f=0;f<i;f++)c[f]&&o.set(f,a)}return o}static parseFromString(e,n,i){if(e===null)throw new k("stringRepresentation cannot be null");const o=new Array(e.length);let a=0,c=0,f=-1,m=0,w=0;for(;w<e.length;)if(e.charAt(w)===`
`||e.charAt(w)==="\r"){if(a>c){if(f===-1)f=a-c;else if(a-c!==f)throw new k("row lengths do not match");c=a,m++}w++}else if(e.substring(w,w+n.length)===n)w+=n.length,o[a]=!0,a++;else if(e.substring(w,w+i.length)===i)w+=i.length,o[a]=!1,a++;else throw new k("illegal character encountered: "+e.substring(w));if(a>c){if(f===-1)f=a-c;else if(a-c!==f)throw new k("row lengths do not match");m++}const j=new ne(f,m);for(let _=0;_<a;_++)o[_]&&j.set(Math.floor(_%f),Math.floor(_/f));return j}get(e,n){const i=n*this.rowSize+Math.floor(e/32);return(this.bits[i]>>>(e&31)&1)!==0}set(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]|=1<<(e&31)&4294967295}unset(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]&=~(1<<(e&31)&4294967295)}flip(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new k("input matrix dimensions do not match");const n=new M(Math.floor(this.width/32)+1),i=this.rowSize,o=this.bits;for(let a=0,c=this.height;a<c;a++){const f=a*i,m=e.getRow(a,n).getBitArray();for(let w=0;w<i;w++)o[f+w]^=m[w]}}clear(){const e=this.bits,n=e.length;for(let i=0;i<n;i++)e[i]=0}setRegion(e,n,i,o){if(n<0||e<0)throw new k("Left and top must be nonnegative");if(o<1||i<1)throw new k("Height and width must be at least 1");const a=e+i,c=n+o;if(c>this.height||a>this.width)throw new k("The region must fit inside the matrix");const f=this.rowSize,m=this.bits;for(let w=n;w<c;w++){const j=w*f;for(let _=e;_<a;_++)m[j+Math.floor(_/32)]|=1<<(_&31)&4294967295}}getRow(e,n){n==null||n.getSize()<this.width?n=new M(this.width):n.clear();const i=this.rowSize,o=this.bits,a=e*i;for(let c=0;c<i;c++)n.setBulk(c*32,o[a+c]);return n}setRow(e,n){F.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),n=this.getHeight();let i=new M(e),o=new M(e);for(let a=0,c=Math.floor((n+1)/2);a<c;a++)i=this.getRow(a,i),o=this.getRow(n-1-a,o),i.reverse(),o.reverse(),this.setRow(a,o),this.setRow(n-1-a,i)}getEnclosingRectangle(){const e=this.width,n=this.height,i=this.rowSize,o=this.bits;let a=e,c=n,f=-1,m=-1;for(let w=0;w<n;w++)for(let j=0;j<i;j++){const _=o[w*i+j];if(_!==0){if(w<c&&(c=w),w>m&&(m=w),j*32<a){let L=0;for(;(_<<31-L&4294967295)===0;)L++;j*32+L<a&&(a=j*32+L)}if(j*32+31>f){let L=31;for(;!(_>>>L);)L--;j*32+L>f&&(f=j*32+L)}}}return f<a||m<c?null:Int32Array.from([a,c,f-a+1,m-c+1])}getTopLeftOnBit(){const e=this.rowSize,n=this.bits;let i=0;for(;i<n.length&&n[i]===0;)i++;if(i===n.length)return null;const o=i/e;let a=i%e*32;const c=n[i];let f=0;for(;(c<<31-f&4294967295)===0;)f++;return a+=f,Int32Array.from([a,o])}getBottomRightOnBit(){const e=this.rowSize,n=this.bits;let i=n.length-1;for(;i>=0&&n[i]===0;)i--;if(i<0)return null;const o=Math.floor(i/e);let a=Math.floor(i%e)*32;const c=n[i];let f=31;for(;!(c>>>f);)f--;return a+=f,Int32Array.from([a,o])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof ne))return!1;const n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&R.equals(this.bits,n.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+R.hashCode(this.bits),e}toString(e="X ",n="  ",i=`
`){return this.buildToString(e,n,i)}buildToString(e,n,i){let o=new le;for(let a=0,c=this.height;a<c;a++){for(let f=0,m=this.width;f<m;f++)o.append(this.get(f,a)?e:n);o.append(i)}return o.toString()}clone(){return new ne(this.width,this.height,this.rowSize,this.bits.slice())}}class G extends v{static getNotFoundInstance(){return new G}}G.kind="NotFoundException";class J extends q{constructor(e){super(e),this.luminances=J.EMPTY,this.buckets=new Int32Array(J.LUMINANCE_BUCKETS)}getBlackRow(e,n){const i=this.getLuminanceSource(),o=i.getWidth();n==null||n.getSize()<o?n=new M(o):n.clear(),this.initArrays(o);const a=i.getRow(e,this.luminances),c=this.buckets;for(let m=0;m<o;m++)c[(a[m]&255)>>J.LUMINANCE_SHIFT]++;const f=J.estimateBlackPoint(c);if(o<3)for(let m=0;m<o;m++)(a[m]&255)<f&&n.set(m);else{let m=a[0]&255,w=a[1]&255;for(let j=1;j<o-1;j++){const _=a[j+1]&255;(w*4-m-_)/2<f&&n.set(j),m=w,w=_}}return n}getBlackMatrix(){const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight(),o=new ne(n,i);this.initArrays(n);const a=this.buckets;for(let m=1;m<5;m++){const w=Math.floor(i*m/5),j=e.getRow(w,this.luminances),_=Math.floor(n*4/5);for(let L=Math.floor(n/5);L<_;L++){const H=j[L]&255;a[H>>J.LUMINANCE_SHIFT]++}}const c=J.estimateBlackPoint(a),f=e.getMatrix();for(let m=0;m<i;m++){const w=m*n;for(let j=0;j<n;j++)(f[w+j]&255)<c&&o.set(j,m)}return o}createBinarizer(e){return new J(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const n=this.buckets;for(let i=0;i<J.LUMINANCE_BUCKETS;i++)n[i]=0}static estimateBlackPoint(e){const n=e.length;let i=0,o=0,a=0;for(let j=0;j<n;j++)e[j]>a&&(o=j,a=e[j]),e[j]>i&&(i=e[j]);let c=0,f=0;for(let j=0;j<n;j++){const _=j-o,L=e[j]*_*_;L>f&&(c=j,f=L)}if(o>c){const j=o;o=c,c=j}if(c-o<=n/16)throw new G;let m=c-1,w=-1;for(let j=c-1;j>o;j--){const _=j-o,L=_*_*(c-j)*(i-e[j]);L>w&&(m=j,w=L)}return m<<J.LUMINANCE_SHIFT}}J.LUMINANCE_BITS=5,J.LUMINANCE_SHIFT=8-J.LUMINANCE_BITS,J.LUMINANCE_BUCKETS=1<<J.LUMINANCE_BITS,J.EMPTY=Uint8ClampedArray.from([0]);class oe extends J{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight();if(n>=oe.MINIMUM_DIMENSION&&i>=oe.MINIMUM_DIMENSION){const o=e.getMatrix();let a=n>>oe.BLOCK_SIZE_POWER;(n&oe.BLOCK_SIZE_MASK)!==0&&a++;let c=i>>oe.BLOCK_SIZE_POWER;(i&oe.BLOCK_SIZE_MASK)!==0&&c++;const f=oe.calculateBlackPoints(o,a,c,n,i),m=new ne(n,i);oe.calculateThresholdForBlock(o,a,c,n,i,f,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new oe(e)}static calculateThresholdForBlock(e,n,i,o,a,c,f){const m=a-oe.BLOCK_SIZE,w=o-oe.BLOCK_SIZE;for(let j=0;j<i;j++){let _=j<<oe.BLOCK_SIZE_POWER;_>m&&(_=m);const L=oe.cap(j,2,i-3);for(let H=0;H<n;H++){let te=H<<oe.BLOCK_SIZE_POWER;te>w&&(te=w);const ie=oe.cap(H,2,n-3);let ae=0;for(let Te=-2;Te<=2;Te++){const _e=c[L+Te];ae+=_e[ie-2]+_e[ie-1]+_e[ie]+_e[ie+1]+_e[ie+2]}const ge=ae/25;oe.thresholdBlock(e,te,_,ge,o,f)}}}static cap(e,n,i){return e<n?n:e>i?i:e}static thresholdBlock(e,n,i,o,a,c){for(let f=0,m=i*a+n;f<oe.BLOCK_SIZE;f++,m+=a)for(let w=0;w<oe.BLOCK_SIZE;w++)(e[m+w]&255)<=o&&c.set(n+w,i+f)}static calculateBlackPoints(e,n,i,o,a){const c=a-oe.BLOCK_SIZE,f=o-oe.BLOCK_SIZE,m=new Array(i);for(let w=0;w<i;w++){m[w]=new Int32Array(n);let j=w<<oe.BLOCK_SIZE_POWER;j>c&&(j=c);for(let _=0;_<n;_++){let L=_<<oe.BLOCK_SIZE_POWER;L>f&&(L=f);let H=0,te=255,ie=0;for(let ge=0,Te=j*o+L;ge<oe.BLOCK_SIZE;ge++,Te+=o){for(let _e=0;_e<oe.BLOCK_SIZE;_e++){const je=e[Te+_e]&255;H+=je,je<te&&(te=je),je>ie&&(ie=je)}if(ie-te>oe.MIN_DYNAMIC_RANGE)for(ge++,Te+=o;ge<oe.BLOCK_SIZE;ge++,Te+=o)for(let _e=0;_e<oe.BLOCK_SIZE;_e++)H+=e[Te+_e]&255}let ae=H>>oe.BLOCK_SIZE_POWER*2;if(ie-te<=oe.MIN_DYNAMIC_RANGE&&(ae=te/2,w>0&&_>0)){const ge=(m[w-1][_]+2*m[w][_-1]+m[w-1][_-1])/4;te<ge&&(ae=ge)}m[w][_]=ae}}return m}}oe.BLOCK_SIZE_POWER=3,oe.BLOCK_SIZE=1<<oe.BLOCK_SIZE_POWER,oe.BLOCK_SIZE_MASK=oe.BLOCK_SIZE-1,oe.MINIMUM_DIMENSION=oe.BLOCK_SIZE*5,oe.MIN_DYNAMIC_RANGE=24;class ce{constructor(e,n){this.width=e,this.height=n}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,n,i,o){throw new Ae("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Ae("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Ae("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let n=new le;for(let i=0;i<this.height;i++){const o=this.getRow(i,e);for(let a=0;a<this.width;a++){const c=o[a]&255;let f;c<64?f="#":c<128?f="+":c<192?f=".":f=" ",n.append(f)}n.append(`
`)}return n.toString()}}class Se extends ce{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,n){const i=this.delegate.getRow(e,n),o=this.getWidth();for(let a=0;a<o;a++)i[a]=255-(i[a]&255);return i}getMatrix(){const e=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n);for(let o=0;o<n;o++)i[o]=255-(e[o]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(e,n,i,o){return new Se(this.delegate.crop(e,n,i,o))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Se(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Se(this.delegate.rotateCounterClockwise45())}}class K extends ce{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=K.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const n=e.getContext("2d").getImageData(0,0,e.width,e.height);return K.toGrayscaleBuffer(n.data,e.width,e.height)}static toGrayscaleBuffer(e,n,i){const o=new Uint8ClampedArray(n*i);for(let a=0,c=0,f=e.length;a<f;a+=4,c++){let m;if(e[a+3]===0)m=255;else{const j=e[a],_=e[a+1],L=e[a+2];m=306*j+601*_+117*L+512>>10}o[c]=m}return o}getRow(e,n){if(e<0||e>=this.getHeight())throw new k("Requested row is outside the image: "+e);const i=this.getWidth(),o=e*i;return n===null?n=this.buffer.slice(o,o+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(o,o+i))),n}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,n,i,o){return super.crop(e,n,i,o),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const n=this.getTempCanvasElement(),i=n.getContext("2d"),o=e*K.DEGREE_TO_RADIANS,a=this.canvas.width,c=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(o))*a+Math.abs(Math.sin(o))*c),m=Math.ceil(Math.abs(Math.sin(o))*a+Math.abs(Math.cos(o))*c);return n.width=f,n.height=m,i.translate(f/2,m/2),i.rotate(o),i.drawImage(this.canvas,a/-2,c/-2),this.buffer=K.makeBufferFromCanvasImageData(n),this}invert(){return new Se(this)}}K.DEGREE_TO_RADIANS=Math.PI/180;class B{constructor(e,n,i){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ee=(globalThis||Cl||self||window||void 0)&&(globalThis||Cl||self||window||void 0).__awaiter||function(T,e,n,i){function o(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function f(j){try{w(i.next(j))}catch(_){c(_)}}function m(j){try{w(i.throw(j))}catch(_){c(_)}}function w(j){j.done?a(j.value):o(j.value).then(f,m)}w((i=i.apply(T,e||[])).next())})};class ve{constructor(e,n=500,i){this.reader=e,this.timeBetweenScansMillis=n,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return ee(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),n=[];for(const i of e){const o=i.kind==="video"?"videoinput":i.kind;if(o!=="videoinput")continue;const a=i.deviceId||i.id,c=i.label||`Video device ${n.length+1}`,f=i.groupId,m={deviceId:a,label:c,kind:o,groupId:f};n.push(m)}return n})}getVideoInputDevices(){return ee(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(n=>new B(n.deviceId,n.label))})}findDeviceById(e){return ee(this,void 0,void 0,function*(){const n=yield this.listVideoInputDevices();return n?n.find(i=>i.deviceId===e):null})}decodeFromInputVideoDevice(e,n){return ee(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,n)})}decodeOnceFromVideoDevice(e,n){return ee(this,void 0,void 0,function*(){this.reset();let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const o={video:i};return yield this.decodeOnceFromConstraints(o,n)})}decodeOnceFromConstraints(e,n){return ee(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(i,n)})}decodeOnceFromStream(e,n){return ee(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,n);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(e,n,i){return ee(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,n,i)})}decodeFromVideoDevice(e,n,i){return ee(this,void 0,void 0,function*(){let o;e?o={deviceId:{exact:e}}:o={facingMode:"environment"};const a={video:o};return yield this.decodeFromConstraints(a,n,i)})}decodeFromConstraints(e,n,i){return ee(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(o,n,i)})}decodeFromStream(e,n,i){return ee(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(e,n);return yield this.decodeContinuously(o,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,n){return ee(this,void 0,void 0,function*(){const i=this.prepareVideoElement(n);return this.addVideoSource(i,e),this.videoElement=i,this.stream=e,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(e){return new Promise((n,i)=>this.playVideoOnLoad(e,()=>n()))}playVideoOnLoad(e,n){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return ee(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,n){const i=document.getElementById(e);if(!i)throw new A(`element with id '${e}' not found`);if(i.nodeName.toLowerCase()!==n.toLowerCase())throw new A(`element with id '${e}' must be an ${n} element`);return i}decodeFromImage(e,n){if(!e&&!n)throw new A("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)}decodeFromVideo(e,n){if(!e&&!n)throw new A("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,n,i){if(e===void 0&&n===void 0)throw new A("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,i):this.decodeFromVideoElementContinuously(e,i)}decodeFromImageElement(e){if(!e)throw new A("An image element must be provided.");this.reset();const n=this.prepareImageElement(e);this.imageElement=n;let i;return this.isImageLoaded(n)?i=this.decodeOnce(n,!1,!0):i=this._decodeOnLoadImage(n),i}decodeFromVideoElement(e){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)}decodeFromVideoElementContinuously(e,n){const i=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(i,n)}_decodeFromVideoElementSetup(e){if(!e)throw new A("A video element must be provided.");this.reset();const n=this.prepareVideoElement(e);return this.videoElement=n,n}decodeFromImageUrl(e){if(!e)throw new A("An URL must be provided.");this.reset();const n=this.prepareImageElement();this.imageElement=n;const i=this._decodeOnLoadImage(n);return n.src=e,i}decodeFromVideoUrl(e){if(!e)throw new A("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),i=this.decodeFromVideoElement(n);return n.src=e,i}decodeFromVideoUrlContinuously(e,n){if(!e)throw new A("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),o=this.decodeFromVideoElementContinuously(i,n);return i.src=e,o}_decodeOnLoadImage(e){return new Promise((n,i)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(n,i),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return ee(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,n){return ee(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,n)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n}prepareVideoElement(e){let n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n}decodeOnce(e,n=!0,i=!0){this._stopAsyncDecode=!1;const o=(a,c)=>{if(this._stopAsyncDecode){c(new G("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const f=this.decode(e);a(f)}catch(f){const m=n&&f instanceof G,j=(f instanceof X||f instanceof z)&&i;if(m||j)return setTimeout(o,this._timeBetweenDecodingAttempts,a,c);c(f)}};return new Promise((a,c)=>o(a,c))}decodeContinuously(e,n){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const o=this.decode(e);n(o,null),setTimeout(i,this.timeBetweenScansMillis)}catch(o){n(null,o);const a=o instanceof X||o instanceof z,c=o instanceof G;(a||c)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(e){const n=this.createBinaryBitmap(e);return this.decodeBitmap(n)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,n,i){n||(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}drawImageOnCanvas(e,n,i=this.captureCanvasContext){n||(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const n=this.getCaptureCanvas(e),i=new K(n),o=new oe(i);return new O(o)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const n=document.createElement("canvas");let i,o;return typeof e<"u"&&(e instanceof HTMLVideoElement?(i=e.videoWidth,o=e.videoHeight):e instanceof HTMLImageElement&&(i=e.naturalWidth||e.width,o=e.naturalHeight||e.height)),n.style.width=i+"px",n.style.height=o+"px",n.width=i,n.height=o,n}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class be{constructor(e,n,i=n==null?0:8*n.length,o,a,c=F.currentTimeMillis()){this.text=e,this.rawBytes=n,this.numBits=i,this.resultPoints=o,this.format=a,this.timestamp=c,this.text=e,this.rawBytes=n,i==null?this.numBits=n==null?0:8*n.length:this.numBits=i,this.resultPoints=o,this.format=a,this.resultMetadata=null,c==null?this.timestamp=F.currentTimeMillis():this.timestamp=c}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){const i=new Array(n.length+e.length);F.arraycopy(n,0,i,0,n.length),F.arraycopy(e,0,i,n.length,e.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Oe;(function(T){T[T.AZTEC=0]="AZTEC",T[T.CODABAR=1]="CODABAR",T[T.CODE_39=2]="CODE_39",T[T.CODE_93=3]="CODE_93",T[T.CODE_128=4]="CODE_128",T[T.DATA_MATRIX=5]="DATA_MATRIX",T[T.EAN_8=6]="EAN_8",T[T.EAN_13=7]="EAN_13",T[T.ITF=8]="ITF",T[T.MAXICODE=9]="MAXICODE",T[T.PDF_417=10]="PDF_417",T[T.QR_CODE=11]="QR_CODE",T[T.RSS_14=12]="RSS_14",T[T.RSS_EXPANDED=13]="RSS_EXPANDED",T[T.UPC_A=14]="UPC_A",T[T.UPC_E=15]="UPC_E",T[T.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Oe||(Oe={}));var Ce=Oe,Me;(function(T){T[T.OTHER=0]="OTHER",T[T.ORIENTATION=1]="ORIENTATION",T[T.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",T[T.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",T[T.ISSUE_NUMBER=4]="ISSUE_NUMBER",T[T.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",T[T.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",T[T.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",T[T.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",T[T.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",T[T.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Me||(Me={}));var fe=Me;class De{constructor(e,n,i,o,a=-1,c=-1){this.rawBytes=e,this.text=n,this.byteSegments=i,this.ecLevel=o,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=c,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ke{exp(e){return this.expTable[e]}log(e){if(e===0)throw new k;return this.logTable[e]}static addOrSubtract(e,n){return e^n}}class He{constructor(e,n){if(n.length===0)throw new k;this.field=e;const i=n.length;if(i>1&&n[0]===0){let o=1;for(;o<i&&n[o]===0;)o++;o===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-o),F.arraycopy(n,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const n=this.coefficients;let i;if(e===1){i=0;for(let c=0,f=n.length;c!==f;c++){const m=n[c];i=Ke.addOrSubtract(i,m)}return i}i=n[0];const o=n.length,a=this.field;for(let c=1;c<o;c++)i=Ke.addOrSubtract(a.multiply(e,i),n[c]);return i}addOrSubtract(e){if(!this.field.equals(e.field))throw new k("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){const c=n;n=i,i=c}let o=new Int32Array(i.length);const a=i.length-n.length;F.arraycopy(i,0,o,0,a);for(let c=a;c<i.length;c++)o[c]=Ke.addOrSubtract(n[c-a],i[c]);return new He(this.field,o)}multiply(e){if(!this.field.equals(e.field))throw new k("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const n=this.coefficients,i=n.length,o=e.coefficients,a=o.length,c=new Int32Array(i+a-1),f=this.field;for(let m=0;m<i;m++){const w=n[m];for(let j=0;j<a;j++)c[m+j]=Ke.addOrSubtract(c[m+j],f.multiply(w,o[j]))}return new He(f,c)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const n=this.coefficients.length,i=this.field,o=new Int32Array(n),a=this.coefficients;for(let c=0;c<n;c++)o[c]=i.multiply(a[c],e);return new He(i,o)}multiplyByMonomial(e,n){if(e<0)throw new k;if(n===0)return this.field.getZero();const i=this.coefficients,o=i.length,a=new Int32Array(o+e),c=this.field;for(let f=0;f<o;f++)a[f]=c.multiply(i[f],n);return new He(c,a)}divide(e){if(!this.field.equals(e.field))throw new k("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new k("Divide by 0");const n=this.field;let i=n.getZero(),o=this;const a=e.getCoefficient(e.getDegree()),c=n.inverse(a);for(;o.getDegree()>=e.getDegree()&&!o.isZero();){const f=o.getDegree()-e.getDegree(),m=n.multiply(o.getCoefficient(o.getDegree()),c),w=e.multiplyByMonomial(f,m),j=n.buildMonomial(f,m);i=i.addOrSubtract(j),o=o.addOrSubtract(w)}return[i,o]}toString(){let e="";for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);if(i!==0){if(i<0?(e+=" - ",i=-i):e.length>0&&(e+=" + "),n===0||i!==1){const o=this.field.log(i);o===0?e+="1":o===1?e+="a":(e+="a^",e+=o)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e}}class st extends v{}st.kind="ArithmeticException";class We extends Ke{constructor(e,n,i){super(),this.primitive=e,this.size=n,this.generatorBase=i;const o=new Int32Array(n);let a=1;for(let f=0;f<n;f++)o[f]=a,a*=2,a>=n&&(a^=e,a&=n-1);this.expTable=o;const c=new Int32Array(n);for(let f=0;f<n-1;f++)c[o[f]]=f;this.logTable=c,this.zero=new He(this,Int32Array.from([0])),this.one=new He(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new k;if(n===0)return this.zero;const i=new Int32Array(e+1);return i[0]=n,new He(this,i)}inverse(e){if(e===0)throw new st;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+N.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}We.AZTEC_DATA_12=new We(4201,4096,1),We.AZTEC_DATA_10=new We(1033,1024,1),We.AZTEC_DATA_6=new We(67,64,1),We.AZTEC_PARAM=new We(19,16,1),We.QR_CODE_FIELD_256=new We(285,256,0),We.DATA_MATRIX_FIELD_256=new We(301,256,1),We.AZTEC_DATA_8=We.DATA_MATRIX_FIELD_256,We.MAXICODE_FIELD_64=We.AZTEC_DATA_6;class Qe extends v{}Qe.kind="ReedSolomonException";class St extends v{}St.kind="IllegalStateException";class ln{constructor(e){this.field=e}decode(e,n){const i=this.field,o=new He(i,e),a=new Int32Array(n);let c=!0;for(let H=0;H<n;H++){const te=o.evaluateAt(i.exp(H+i.getGeneratorBase()));a[a.length-1-H]=te,te!==0&&(c=!1)}if(c)return;const f=new He(i,a),m=this.runEuclideanAlgorithm(i.buildMonomial(n,1),f,n),w=m[0],j=m[1],_=this.findErrorLocations(w),L=this.findErrorMagnitudes(j,_);for(let H=0;H<_.length;H++){const te=e.length-1-i.log(_[H]);if(te<0)throw new Qe("Bad error location");e[te]=We.addOrSubtract(e[te],L[H])}}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){const H=e;e=n,n=H}const o=this.field;let a=e,c=n,f=o.getZero(),m=o.getOne();for(;c.getDegree()>=(i/2|0);){let H=a,te=f;if(a=c,f=m,a.isZero())throw new Qe("r_{i-1} was zero");c=H;let ie=o.getZero();const ae=a.getCoefficient(a.getDegree()),ge=o.inverse(ae);for(;c.getDegree()>=a.getDegree()&&!c.isZero();){const Te=c.getDegree()-a.getDegree(),_e=o.multiply(c.getCoefficient(c.getDegree()),ge);ie=ie.addOrSubtract(o.buildMonomial(Te,_e)),c=c.addOrSubtract(a.multiplyByMonomial(Te,_e))}if(m=ie.multiply(f).addOrSubtract(te),c.getDegree()>=a.getDegree())throw new St("Division algorithm failed to reduce polynomial?")}const w=m.getCoefficient(0);if(w===0)throw new Qe("sigmaTilde(0) was zero");const j=o.inverse(w),_=m.multiplyScalar(j),L=c.multiplyScalar(j);return[_,L]}findErrorLocations(e){const n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);const i=new Int32Array(n);let o=0;const a=this.field;for(let c=1;c<a.getSize()&&o<n;c++)e.evaluateAt(c)===0&&(i[o]=a.inverse(c),o++);if(o!==n)throw new Qe("Error locator degree does not match number of roots");return i}findErrorMagnitudes(e,n){const i=n.length,o=new Int32Array(i),a=this.field;for(let c=0;c<i;c++){const f=a.inverse(n[c]);let m=1;for(let w=0;w<i;w++)if(c!==w){const j=a.multiply(n[w],f),_=(j&1)===0?j|1:j&-2;m=a.multiply(m,_)}o[c]=a.multiply(e.evaluateAt(f),a.inverse(m)),a.getGeneratorBase()!==0&&(o[c]=a.multiply(o[c],f))}return o}}var xt;(function(T){T[T.UPPER=0]="UPPER",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.DIGIT=3]="DIGIT",T[T.PUNCT=4]="PUNCT",T[T.BINARY=5]="BINARY"})(xt||(xt={}));class dt{decode(e){this.ddata=e;let n=e.getBits(),i=this.extractBits(n),o=this.correctBits(i),a=dt.convertBoolArrayToByteArray(o),c=dt.getEncodedData(o),f=new De(a,c,null,null);return f.setNumBits(o.length),f}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let n=e.length,i=xt.UPPER,o=xt.UPPER,a="",c=0;for(;c<n;)if(o===xt.BINARY){if(n-c<5)break;let f=dt.readCode(e,c,5);if(c+=5,f===0){if(n-c<11)break;f=dt.readCode(e,c,11)+31,c+=11}for(let m=0;m<f;m++){if(n-c<8){c=n;break}const w=dt.readCode(e,c,8);a+=xe.castAsNonUtf8Char(w),c+=8}o=i}else{let f=o===xt.DIGIT?4:5;if(n-c<f)break;let m=dt.readCode(e,c,f);c+=f;let w=dt.getCharacter(o,m);w.startsWith("CTRL_")?(i=o,o=dt.getTable(w.charAt(5)),w.charAt(6)==="L"&&(i=o)):(a+=w,o=i)}return a}static getTable(e){switch(e){case"L":return xt.LOWER;case"P":return xt.PUNCT;case"M":return xt.MIXED;case"D":return xt.DIGIT;case"B":return xt.BINARY;default:return xt.UPPER}}static getCharacter(e,n){switch(e){case xt.UPPER:return dt.UPPER_TABLE[n];case xt.LOWER:return dt.LOWER_TABLE[n];case xt.MIXED:return dt.MIXED_TABLE[n];case xt.PUNCT:return dt.PUNCT_TABLE[n];case xt.DIGIT:return dt.DIGIT_TABLE[n];default:throw new St("Bad table")}}correctBits(e){let n,i;this.ddata.getNbLayers()<=2?(i=6,n=We.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,n=We.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,n=We.AZTEC_DATA_10):(i=12,n=We.AZTEC_DATA_12);let o=this.ddata.getNbDatablocks(),a=e.length/i;if(a<o)throw new z;let c=e.length%i,f=new Int32Array(a);for(let L=0;L<a;L++,c+=i)f[L]=dt.readCode(e,c,i);try{new ln(n).decode(f,a-o)}catch(L){throw new z(L)}let m=(1<<i)-1,w=0;for(let L=0;L<o;L++){let H=f[L];if(H===0||H===m)throw new z;(H===1||H===m-1)&&w++}let j=new Array(o*i-w),_=0;for(let L=0;L<o;L++){let H=f[L];if(H===1||H===m-1)j.fill(H>1,_,_+i-1),_+=i-1;else for(let te=i-1;te>=0;--te)j[_++]=(H&1<<te)!==0}return j}extractBits(e){let n=this.ddata.isCompact(),i=this.ddata.getNbLayers(),o=(n?11:14)+i*4,a=new Int32Array(o),c=new Array(this.totalBitsInLayer(i,n));if(n)for(let f=0;f<a.length;f++)a[f]=f;else{let f=o+1+2*N.truncDivision(N.truncDivision(o,2)-1,15),m=o/2,w=N.truncDivision(f,2);for(let j=0;j<m;j++){let _=j+N.truncDivision(j,15);a[m-j-1]=w-_-1,a[m+j]=w+_+1}}for(let f=0,m=0;f<i;f++){let w=(i-f)*4+(n?9:12),j=f*2,_=o-1-j;for(let L=0;L<w;L++){let H=L*2;for(let te=0;te<2;te++)c[m+H+te]=e.get(a[j+te],a[j+L]),c[m+2*w+H+te]=e.get(a[j+L],a[_-te]),c[m+4*w+H+te]=e.get(a[_-te],a[_-L]),c[m+6*w+H+te]=e.get(a[_-L],a[j+te])}m+=w*8}return c}static readCode(e,n,i){let o=0;for(let a=n;a<n+i;a++)o<<=1,e[a]&&(o|=1);return o}static readByte(e,n){let i=e.length-n;return i>=8?dt.readCode(e,n,8):dt.readCode(e,n,i)<<8-i}static convertBoolArrayToByteArray(e){let n=new Uint8Array((e.length+7)/8);for(let i=0;i<n.length;i++)n[i]=dt.readByte(e,8*i);return n}totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}dt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],dt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],dt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],dt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],dt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ot{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,n,i,o){const a=e-i,c=n-o;return Math.sqrt(a*a+c*c)}static sum(e){let n=0;for(let i=0,o=e.length;i!==o;i++){const a=e[i];n+=a}return n}}class Jt{static floatToIntBits(e){return e}}Jt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Le{constructor(e,n){this.x=e,this.y=n}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Le){const n=e;return this.x===n.x&&this.y===n.y}return!1}hashCode(){return 31*Jt.floatToIntBits(this.x)+Jt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const n=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),o=this.distance(e[0],e[2]);let a,c,f;if(i>=n&&i>=o?(c=e[0],a=e[1],f=e[2]):o>=i&&o>=n?(c=e[1],a=e[0],f=e[2]):(c=e[2],a=e[0],f=e[1]),this.crossProductZ(a,c,f)<0){const m=a;a=f,f=m}e[0]=a,e[1]=c,e[2]=f}static distance(e,n){return ot.distance(e.x,e.y,n.x,n.y)}static crossProductZ(e,n,i){const o=n.x,a=n.y;return(i.x-o)*(e.y-a)-(i.y-a)*(e.x-o)}}class Ur{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class Qi extends Ur{constructor(e,n,i,o,a){super(e,n),this.compact=i,this.nbDatablocks=o,this.nbLayers=a}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Un{constructor(e,n,i,o){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=Un.INIT_SIZE),i==null&&(i=e.getWidth()/2|0),o==null&&(o=e.getHeight()/2|0);const a=n/2|0;if(this.leftInit=i-a,this.rightInit=i+a,this.upInit=o-a,this.downInit=o+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new G}detect(){let e=this.leftInit,n=this.rightInit,i=this.upInit,o=this.downInit,a=!1,c=!0,f=!1,m=!1,w=!1,j=!1,_=!1;const L=this.width,H=this.height;for(;c;){c=!1;let te=!0;for(;(te||!m)&&n<L;)te=this.containsBlackPoint(i,o,n,!1),te?(n++,c=!0,m=!0):m||n++;if(n>=L){a=!0;break}let ie=!0;for(;(ie||!w)&&o<H;)ie=this.containsBlackPoint(e,n,o,!0),ie?(o++,c=!0,w=!0):w||o++;if(o>=H){a=!0;break}let ae=!0;for(;(ae||!j)&&e>=0;)ae=this.containsBlackPoint(i,o,e,!1),ae?(e--,c=!0,j=!0):j||e--;if(e<0){a=!0;break}let ge=!0;for(;(ge||!_)&&i>=0;)ge=this.containsBlackPoint(e,n,i,!0),ge?(i--,c=!0,_=!0):_||i--;if(i<0){a=!0;break}c&&(f=!0)}if(!a&&f){const te=n-e;let ie=null;for(let _e=1;ie===null&&_e<te;_e++)ie=this.getBlackPointOnSegment(e,o-_e,e+_e,o);if(ie==null)throw new G;let ae=null;for(let _e=1;ae===null&&_e<te;_e++)ae=this.getBlackPointOnSegment(e,i+_e,e+_e,i);if(ae==null)throw new G;let ge=null;for(let _e=1;ge===null&&_e<te;_e++)ge=this.getBlackPointOnSegment(n,i+_e,n-_e,i);if(ge==null)throw new G;let Te=null;for(let _e=1;Te===null&&_e<te;_e++)Te=this.getBlackPointOnSegment(n,o-_e,n-_e,o);if(Te==null)throw new G;return this.centerEdges(Te,ie,ge,ae)}else throw new G}getBlackPointOnSegment(e,n,i,o){const a=ot.round(ot.distance(e,n,i,o)),c=(i-e)/a,f=(o-n)/a,m=this.image;for(let w=0;w<a;w++){const j=ot.round(e+w*c),_=ot.round(n+w*f);if(m.get(j,_))return new Le(j,_)}return null}centerEdges(e,n,i,o){const a=e.getX(),c=e.getY(),f=n.getX(),m=n.getY(),w=i.getX(),j=i.getY(),_=o.getX(),L=o.getY(),H=Un.CORR;return a<this.width/2?[new Le(_-H,L+H),new Le(f+H,m+H),new Le(w-H,j-H),new Le(a+H,c-H)]:[new Le(_+H,L+H),new Le(f+H,m-H),new Le(w-H,j+H),new Le(a-H,c-H)]}containsBlackPoint(e,n,i,o){const a=this.image;if(o){for(let c=e;c<=n;c++)if(a.get(c,i))return!0}else for(let c=e;c<=n;c++)if(a.get(i,c))return!0;return!1}}Un.INIT_SIZE=10,Un.CORR=1;class xi{static checkAndNudgePoints(e,n){const i=e.getWidth(),o=e.getHeight();let a=!0;for(let c=0;c<n.length&&a;c+=2){const f=Math.floor(n[c]),m=Math.floor(n[c+1]);if(f<-1||f>i||m<-1||m>o)throw new G;a=!1,f===-1?(n[c]=0,a=!0):f===i&&(n[c]=i-1,a=!0),m===-1?(n[c+1]=0,a=!0):m===o&&(n[c+1]=o-1,a=!0)}a=!0;for(let c=n.length-2;c>=0&&a;c-=2){const f=Math.floor(n[c]),m=Math.floor(n[c+1]);if(f<-1||f>i||m<-1||m>o)throw new G;a=!1,f===-1?(n[c]=0,a=!0):f===i&&(n[c]=i-1,a=!0),m===-1?(n[c+1]=0,a=!0):m===o&&(n[c+1]=o-1,a=!0)}}}class An{constructor(e,n,i,o,a,c,f,m,w){this.a11=e,this.a21=n,this.a31=i,this.a12=o,this.a22=a,this.a32=c,this.a13=f,this.a23=m,this.a33=w}static quadrilateralToQuadrilateral(e,n,i,o,a,c,f,m,w,j,_,L,H,te,ie,ae){const ge=An.quadrilateralToSquare(e,n,i,o,a,c,f,m);return An.squareToQuadrilateral(w,j,_,L,H,te,ie,ae).times(ge)}transformPoints(e){const n=e.length,i=this.a11,o=this.a12,a=this.a13,c=this.a21,f=this.a22,m=this.a23,w=this.a31,j=this.a32,_=this.a33;for(let L=0;L<n;L+=2){const H=e[L],te=e[L+1],ie=a*H+m*te+_;e[L]=(i*H+c*te+w)/ie,e[L+1]=(o*H+f*te+j)/ie}}transformPointsWithValues(e,n){const i=this.a11,o=this.a12,a=this.a13,c=this.a21,f=this.a22,m=this.a23,w=this.a31,j=this.a32,_=this.a33,L=e.length;for(let H=0;H<L;H++){const te=e[H],ie=n[H],ae=a*te+m*ie+_;e[H]=(i*te+c*ie+w)/ae,n[H]=(o*te+f*ie+j)/ae}}static squareToQuadrilateral(e,n,i,o,a,c,f,m){const w=e-i+a-f,j=n-o+c-m;if(w===0&&j===0)return new An(i-e,a-i,e,o-n,c-o,n,0,0,1);{const _=i-a,L=f-a,H=o-c,te=m-c,ie=_*te-L*H,ae=(w*te-L*j)/ie,ge=(_*j-w*H)/ie;return new An(i-e+ae*i,f-e+ge*f,e,o-n+ae*o,m-n+ge*m,n,ae,ge,1)}}static quadrilateralToSquare(e,n,i,o,a,c,f,m){return An.squareToQuadrilateral(e,n,i,o,a,c,f,m).buildAdjoint()}buildAdjoint(){return new An(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new An(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class yi extends xi{sampleGrid(e,n,i,o,a,c,f,m,w,j,_,L,H,te,ie,ae,ge,Te,_e){const je=An.quadrilateralToQuadrilateral(o,a,c,f,m,w,j,_,L,H,te,ie,ae,ge,Te,_e);return this.sampleGridWithTransform(e,n,i,je)}sampleGridWithTransform(e,n,i,o){if(n<=0||i<=0)throw new G;const a=new ne(n,i),c=new Float32Array(2*n);for(let f=0;f<i;f++){const m=c.length,w=f+.5;for(let j=0;j<m;j+=2)c[j]=j/2+.5,c[j+1]=w;o.transformPoints(c),xi.checkAndNudgePoints(e,c);try{for(let j=0;j<m;j+=2)e.get(Math.floor(c[j]),Math.floor(c[j+1]))&&a.set(j/2,f)}catch{throw new G}}return a}}class Vn{static setGridSampler(e){Vn.gridSampler=e}static getInstance(){return Vn.gridSampler}}Vn.gridSampler=new yi;class en{constructor(e,n){this.x=e,this.y=n}toResultPoint(){return new Le(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class _r{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let n=this.getMatrixCenter(),i=this.getBullsEyeCorners(n);if(e){let c=i[0];i[0]=i[2],i[2]=c}this.extractParameters(i);let o=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),a=this.getMatrixCornerPoints(i);return new Qi(o,a,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new G;let n=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(i,n);let o=0;for(let c=0;c<4;c++){let f=i[(this.shift+c)%4];this.compact?(o<<=7,o+=f>>1&127):(o<<=10,o+=(f>>2&992)+(f>>1&31))}let a=this.getCorrectedParameterData(o,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)}getRotation(e,n){let i=0;e.forEach((o,a,c)=>{let f=(o>>n-2<<1)+(o&1);i=(i<<3)+f}),i=((i&1)<<11)+(i>>1);for(let o=0;o<4;o++)if(N.bitCount(i^this.EXPECTED_CORNER_BITS[o])<=2)return o;throw new G}getCorrectedParameterData(e,n){let i,o;n?(i=7,o=2):(i=10,o=4);let a=i-o,c=new Int32Array(i);for(let m=i-1;m>=0;--m)c[m]=e&15,e>>=4;try{new ln(We.AZTEC_PARAM).decode(c,a)}catch{throw new G}let f=0;for(let m=0;m<o;m++)f=(f<<4)+c[m];return f}getBullsEyeCorners(e){let n=e,i=e,o=e,a=e,c=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let _=this.getFirstDifferent(n,c,1,-1),L=this.getFirstDifferent(i,c,1,1),H=this.getFirstDifferent(o,c,-1,1),te=this.getFirstDifferent(a,c,-1,-1);if(this.nbCenterLayers>2){let ie=this.distancePoint(te,_)*this.nbCenterLayers/(this.distancePoint(a,n)*(this.nbCenterLayers+2));if(ie<.75||ie>1.25||!this.isWhiteOrBlackRectangle(_,L,H,te))break}n=_,i=L,o=H,a=te,c=!c}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new G;this.compact=this.nbCenterLayers===5;let f=new Le(n.getX()+.5,n.getY()-.5),m=new Le(i.getX()+.5,i.getY()+.5),w=new Le(o.getX()-.5,o.getY()+.5),j=new Le(a.getX()-.5,a.getY()-.5);return this.expandSquare([f,m,w,j],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,n,i,o;try{let f=new Un(this.image).detect();e=f[0],n=f[1],i=f[2],o=f[3]}catch{let m=this.image.getWidth()/2,w=this.image.getHeight()/2;e=this.getFirstDifferent(new en(m+7,w-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new en(m+7,w+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new en(m-7,w+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new en(m-7,w-7),!1,-1,-1).toResultPoint()}let a=ot.round((e.getX()+o.getX()+n.getX()+i.getX())/4),c=ot.round((e.getY()+o.getY()+n.getY()+i.getY())/4);try{let f=new Un(this.image,15,a,c).detect();e=f[0],n=f[1],i=f[2],o=f[3]}catch{e=this.getFirstDifferent(new en(a+7,c-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new en(a+7,c+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new en(a-7,c+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new en(a-7,c-7),!1,-1,-1).toResultPoint()}return a=ot.round((e.getX()+o.getX()+n.getX()+i.getX())/4),c=ot.round((e.getY()+o.getY()+n.getY()+i.getY())/4),new en(a,c)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,n,i,o,a){let c=Vn.getInstance(),f=this.getDimension(),m=f/2-this.nbCenterLayers,w=f/2+this.nbCenterLayers;return c.sampleGrid(e,f,f,m,m,w,m,w,w,m,w,n.getX(),n.getY(),i.getX(),i.getY(),o.getX(),o.getY(),a.getX(),a.getY())}sampleLine(e,n,i){let o=0,a=this.distanceResultPoint(e,n),c=a/i,f=e.getX(),m=e.getY(),w=c*(n.getX()-e.getX())/a,j=c*(n.getY()-e.getY())/a;for(let _=0;_<i;_++)this.image.get(ot.round(f+_*w),ot.round(m+_*j))&&(o|=1<<i-_-1);return o}isWhiteOrBlackRectangle(e,n,i,o){let a=3;e=new en(e.getX()-a,e.getY()+a),n=new en(n.getX()-a,n.getY()-a),i=new en(i.getX()+a,i.getY()-a),o=new en(o.getX()+a,o.getY()+a);let c=this.getColor(o,e);if(c===0)return!1;let f=this.getColor(e,n);return f!==c||(f=this.getColor(n,i),f!==c)?!1:(f=this.getColor(i,o),f===c)}getColor(e,n){let i=this.distancePoint(e,n),o=(n.getX()-e.getX())/i,a=(n.getY()-e.getY())/i,c=0,f=e.getX(),m=e.getY(),w=this.image.get(e.getX(),e.getY()),j=Math.ceil(i);for(let L=0;L<j;L++)f+=o,m+=a,this.image.get(ot.round(f),ot.round(m))!==w&&c++;let _=c/i;return _>.1&&_<.9?0:_<=.1===w?1:-1}getFirstDifferent(e,n,i,o){let a=e.getX()+i,c=e.getY()+o;for(;this.isValid(a,c)&&this.image.get(a,c)===n;)a+=i,c+=o;for(a-=i,c-=o;this.isValid(a,c)&&this.image.get(a,c)===n;)a+=i;for(a-=i;this.isValid(a,c)&&this.image.get(a,c)===n;)c+=o;return c-=o,new en(a,c)}expandSquare(e,n,i){let o=i/(2*n),a=e[0].getX()-e[2].getX(),c=e[0].getY()-e[2].getY(),f=(e[0].getX()+e[2].getX())/2,m=(e[0].getY()+e[2].getY())/2,w=new Le(f+o*a,m+o*c),j=new Le(f-o*a,m-o*c);a=e[1].getX()-e[3].getX(),c=e[1].getY()-e[3].getY(),f=(e[1].getX()+e[3].getX())/2,m=(e[1].getY()+e[3].getY())/2;let _=new Le(f+o*a,m+o*c),L=new Le(f-o*a,m-o*c);return[w,_,j,L]}isValid(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()}isValidPoint(e){let n=ot.round(e.getX()),i=ot.round(e.getY());return this.isValid(n,i)}distancePoint(e,n){return ot.distance(e.getX(),e.getY(),n.getX(),n.getY())}distanceResultPoint(e,n){return ot.distance(e.getX(),e.getY(),n.getX(),n.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(N.truncDivision(this.nbLayers-4,8)+1)+15}}class Zn{decode(e,n=null){let i=null,o=new _r(e.getBlackMatrix()),a=null,c=null;try{let j=o.detectMirror(!1);a=j.getPoints(),this.reportFoundResultPoints(n,a),c=new dt().decode(j)}catch(j){i=j}if(c==null)try{let j=o.detectMirror(!0);a=j.getPoints(),this.reportFoundResultPoints(n,a),c=new dt().decode(j)}catch(j){throw i??j}let f=new be(c.getText(),c.getRawBytes(),c.getNumBits(),a,Ce.AZTEC,F.currentTimeMillis()),m=c.getByteSegments();m!=null&&f.putMetadata(fe.BYTE_SEGMENTS,m);let w=c.getECLevel();return w!=null&&f.putMetadata(fe.ERROR_CORRECTION_LEVEL,w),f}reportFoundResultPoints(e,n){if(e!=null){let i=e.get(Z.NEED_RESULT_POINT_CALLBACK);i!=null&&n.forEach((o,a,c)=>{i.foundPossibleResultPoint(o)})}}reset(){}}class yo extends ve{constructor(e=500){super(new Zn,e)}}class Mt{decode(e,n){try{return this.doDecode(e,n)}catch{if(n&&n.get(Z.TRY_HARDER)===!0&&e.isRotateSupported()){const a=e.rotateCounterClockwise(),c=this.doDecode(a,n),f=c.getResultMetadata();let m=270;f!==null&&f.get(fe.ORIENTATION)===!0&&(m=m+f.get(fe.ORIENTATION)%360),c.putMetadata(fe.ORIENTATION,m);const w=c.getResultPoints();if(w!==null){const j=a.getHeight();for(let _=0;_<w.length;_++)w[_]=new Le(j-w[_].getY()-1,w[_].getX())}return c}else throw new G}}reset(){}doDecode(e,n){const i=e.getWidth(),o=e.getHeight();let a=new M(i);const c=n&&n.get(Z.TRY_HARDER)===!0,f=Math.max(1,o>>(c?8:5));let m;c?m=o:m=15;const w=Math.trunc(o/2);for(let j=0;j<m;j++){const _=Math.trunc((j+1)/2),L=(j&1)===0,H=w+f*(L?_:-_);if(H<0||H>=o)break;try{a=e.getBlackRow(H,a)}catch{continue}for(let te=0;te<2;te++){if(te===1&&(a.reverse(),n&&n.get(Z.NEED_RESULT_POINT_CALLBACK)===!0)){const ie=new Map;n.forEach((ae,ge)=>ie.set(ge,ae)),ie.delete(Z.NEED_RESULT_POINT_CALLBACK),n=ie}try{const ie=this.decodeRow(H,a,n);if(te===1){ie.putMetadata(fe.ORIENTATION,180);const ae=ie.getResultPoints();ae!==null&&(ae[0]=new Le(i-ae[0].getX()-1,ae[0].getY()),ae[1]=new Le(i-ae[1].getX()-1,ae[1].getY()))}return ie}catch{}}}throw new G}static recordPattern(e,n,i){const o=i.length;for(let w=0;w<o;w++)i[w]=0;const a=e.getSize();if(n>=a)throw new G;let c=!e.get(n),f=0,m=n;for(;m<a;){if(e.get(m)!==c)i[f]++;else{if(++f===o)break;i[f]=1,c=!c}m++}if(!(f===o||f===o-1&&m===a))throw new G}static recordPatternInReverse(e,n,i){let o=i.length,a=e.get(n);for(;n>0&&o>=0;)e.get(--n)!==a&&(o--,a=!a);if(o>=0)throw new G;Mt.recordPattern(e,n+1,i)}static patternMatchVariance(e,n,i){const o=e.length;let a=0,c=0;for(let w=0;w<o;w++)a+=e[w],c+=n[w];if(a<c)return Number.POSITIVE_INFINITY;const f=a/c;i*=f;let m=0;for(let w=0;w<o;w++){const j=e[w],_=n[w]*f,L=j>_?j-_:_-j;if(L>i)return Number.POSITIVE_INFINITY;m+=L}return m/a}}class Pe extends Mt{static findStartPattern(e){const n=e.getSize(),i=e.getNextSet(0);let o=0,a=Int32Array.from([0,0,0,0,0,0]),c=i,f=!1;const m=6;for(let w=i;w<n;w++)if(e.get(w)!==f)a[o]++;else{if(o===m-1){let j=Pe.MAX_AVG_VARIANCE,_=-1;for(let L=Pe.CODE_START_A;L<=Pe.CODE_START_C;L++){const H=Mt.patternMatchVariance(a,Pe.CODE_PATTERNS[L],Pe.MAX_INDIVIDUAL_VARIANCE);H<j&&(j=H,_=L)}if(_>=0&&e.isRange(Math.max(0,c-(w-c)/2),c,!1))return Int32Array.from([c,w,_]);c+=a[0]+a[1],a=a.slice(2,a.length-1),a[o-1]=0,a[o]=0,o--}else o++;a[o]=1,f=!f}throw new G}static decodeCode(e,n,i){Mt.recordPattern(e,i,n);let o=Pe.MAX_AVG_VARIANCE,a=-1;for(let c=0;c<Pe.CODE_PATTERNS.length;c++){const f=Pe.CODE_PATTERNS[c],m=this.patternMatchVariance(n,f,Pe.MAX_INDIVIDUAL_VARIANCE);m<o&&(o=m,a=c)}if(a>=0)return a;throw new G}decodeRow(e,n,i){const o=i&&i.get(Z.ASSUME_GS1)===!0,a=Pe.findStartPattern(n),c=a[2];let f=0;const m=new Uint8Array(20);m[f++]=c;let w;switch(c){case Pe.CODE_START_A:w=Pe.CODE_CODE_A;break;case Pe.CODE_START_B:w=Pe.CODE_CODE_B;break;case Pe.CODE_START_C:w=Pe.CODE_CODE_C;break;default:throw new z}let j=!1,_=!1,L="",H=a[0],te=a[1];const ie=Int32Array.from([0,0,0,0,0,0]);let ae=0,ge=0,Te=c,_e=0,je=!0,ut=!1,it=!1;for(;!j;){const Pr=_;switch(_=!1,ae=ge,ge=Pe.decodeCode(n,ie,te),m[f++]=ge,ge!==Pe.CODE_STOP&&(je=!0),ge!==Pe.CODE_STOP&&(_e++,Te+=_e*ge),H=te,te+=ie.reduce((Ni,zo)=>Ni+zo,0),ge){case Pe.CODE_START_A:case Pe.CODE_START_B:case Pe.CODE_START_C:throw new z}switch(w){case Pe.CODE_CODE_A:if(ge<64)it===ut?L+=String.fromCharCode(32+ge):L+=String.fromCharCode(32+ge+128),it=!1;else if(ge<96)it===ut?L+=String.fromCharCode(ge-64):L+=String.fromCharCode(ge+64),it=!1;else switch(ge!==Pe.CODE_STOP&&(je=!1),ge){case Pe.CODE_FNC_1:o&&(L.length===0?L+="]C1":L+="");break;case Pe.CODE_FNC_2:case Pe.CODE_FNC_3:break;case Pe.CODE_FNC_4_A:!ut&&it?(ut=!0,it=!1):ut&&it?(ut=!1,it=!1):it=!0;break;case Pe.CODE_SHIFT:_=!0,w=Pe.CODE_CODE_B;break;case Pe.CODE_CODE_B:w=Pe.CODE_CODE_B;break;case Pe.CODE_CODE_C:w=Pe.CODE_CODE_C;break;case Pe.CODE_STOP:j=!0;break}break;case Pe.CODE_CODE_B:if(ge<96)it===ut?L+=String.fromCharCode(32+ge):L+=String.fromCharCode(32+ge+128),it=!1;else switch(ge!==Pe.CODE_STOP&&(je=!1),ge){case Pe.CODE_FNC_1:o&&(L.length===0?L+="]C1":L+="");break;case Pe.CODE_FNC_2:case Pe.CODE_FNC_3:break;case Pe.CODE_FNC_4_B:!ut&&it?(ut=!0,it=!1):ut&&it?(ut=!1,it=!1):it=!0;break;case Pe.CODE_SHIFT:_=!0,w=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_A:w=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_C:w=Pe.CODE_CODE_C;break;case Pe.CODE_STOP:j=!0;break}break;case Pe.CODE_CODE_C:if(ge<100)ge<10&&(L+="0"),L+=ge;else switch(ge!==Pe.CODE_STOP&&(je=!1),ge){case Pe.CODE_FNC_1:o&&(L.length===0?L+="]C1":L+="");break;case Pe.CODE_CODE_A:w=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_B:w=Pe.CODE_CODE_B;break;case Pe.CODE_STOP:j=!0;break}break}Pr&&(w=w===Pe.CODE_CODE_A?Pe.CODE_CODE_B:Pe.CODE_CODE_A)}const Mn=te-H;if(te=n.getNextUnset(te),!n.isRange(te,Math.min(n.getSize(),te+(te-H)/2),!1))throw new G;if(Te-=_e*ae,Te%103!==ae)throw new X;const ur=L.length;if(ur===0)throw new G;ur>0&&je&&(w===Pe.CODE_CODE_C?L=L.substring(0,ur-2):L=L.substring(0,ur-1));const sn=(a[1]+a[0])/2,bt=H+Mn/2,Gt=m.length,Nn=new Uint8Array(Gt);for(let Pr=0;Pr<Gt;Pr++)Nn[Pr]=m[Pr];const ni=[new Le(sn,e),new Le(bt,e)];return new be(L,Nn,0,ni,Ce.CODE_128,new Date().getTime())}}Pe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Pe.MAX_AVG_VARIANCE=.25,Pe.MAX_INDIVIDUAL_VARIANCE=.7,Pe.CODE_SHIFT=98,Pe.CODE_CODE_C=99,Pe.CODE_CODE_B=100,Pe.CODE_CODE_A=101,Pe.CODE_FNC_1=102,Pe.CODE_FNC_2=97,Pe.CODE_FNC_3=96,Pe.CODE_FNC_4_A=101,Pe.CODE_FNC_4_B=100,Pe.CODE_START_A=103,Pe.CODE_START_B=104,Pe.CODE_START_C=105,Pe.CODE_STOP=106;class tn extends Mt{constructor(e=!1,n=!1){super(),this.usingCheckDigit=e,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,n,i){let o=this.counters;o.fill(0),this.decodeRowResult="";let a=tn.findAsteriskPattern(n,o),c=n.getNextSet(a[1]),f=n.getSize(),m,w;do{tn.recordPattern(n,c,o);let ie=tn.toNarrowWidePattern(o);if(ie<0)throw new G;m=tn.patternToChar(ie),this.decodeRowResult+=m,w=c;for(let ae of o)c+=ae;c=n.getNextSet(c)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let j=0;for(let ie of o)j+=ie;let _=c-w-j;if(c!==f&&_*2<j)throw new G;if(this.usingCheckDigit){let ie=this.decodeRowResult.length-1,ae=0;for(let ge=0;ge<ie;ge++)ae+=tn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ge));if(this.decodeRowResult.charAt(ie)!==tn.ALPHABET_STRING.charAt(ae%43))throw new X;this.decodeRowResult=this.decodeRowResult.substring(0,ie)}if(this.decodeRowResult.length===0)throw new G;let L;this.extendedMode?L=tn.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;let H=(a[1]+a[0])/2,te=w+j/2;return new be(L,null,0,[new Le(H,e),new Le(te,e)],Ce.CODE_39,new Date().getTime())}static findAsteriskPattern(e,n){let i=e.getSize(),o=e.getNextSet(0),a=0,c=o,f=!1,m=n.length;for(let w=o;w<i;w++)if(e.get(w)!==f)n[a]++;else{if(a===m-1){if(this.toNarrowWidePattern(n)===tn.ASTERISK_ENCODING&&e.isRange(Math.max(0,c-Math.floor((w-c)/2)),c,!1))return[c,w];c+=n[0]+n[1],n.copyWithin(0,2,2+a-1),n[a-1]=0,n[a]=0,a--}else a++;n[a]=1,f=!f}throw new G}static toNarrowWidePattern(e){let n=e.length,i=0,o;do{let a=2147483647;for(let m of e)m<a&&m>i&&(a=m);i=a,o=0;let c=0,f=0;for(let m=0;m<n;m++){let w=e[m];w>i&&(f|=1<<n-1-m,o++,c+=w)}if(o===3){for(let m=0;m<n&&o>0;m++){let w=e[m];if(w>i&&(o--,w*2>=c))return-1}return f}}while(o>3);return-1}static patternToChar(e){for(let n=0;n<tn.CHARACTER_ENCODINGS.length;n++)if(tn.CHARACTER_ENCODINGS[n]===e)return tn.ALPHABET_STRING.charAt(n);if(e===tn.ASTERISK_ENCODING)return"*";throw new G}static decodeExtended(e){let n=e.length,i="";for(let o=0;o<n;o++){let a=e.charAt(o);if(a==="+"||a==="$"||a==="%"||a==="/"){let c=e.charAt(o+1),f="\0";switch(a){case"+":if(c>="A"&&c<="Z")f=String.fromCharCode(c.charCodeAt(0)+32);else throw new z;break;case"$":if(c>="A"&&c<="Z")f=String.fromCharCode(c.charCodeAt(0)-64);else throw new z;break;case"%":if(c>="A"&&c<="E")f=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")f=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")f=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")f=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")f="\0";else if(c==="V")f="@";else if(c==="W")f="`";else if(c==="X"||c==="Y"||c==="Z")f="";else throw new z;break;case"/":if(c>="A"&&c<="O")f=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")f=":";else throw new z;break}i+=f,o++}else i+=a}return i}}tn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",tn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],tn.ASTERISK_ENCODING=148;class Ct extends Mt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,n,i){let o=this.decodeStart(n),a=this.decodeEnd(n),c=new le;Ct.decodeMiddle(n,o[1],a[0],c);let f=c.toString(),m=null;i!=null&&(m=i.get(Z.ALLOWED_LENGTHS)),m==null&&(m=Ct.DEFAULT_ALLOWED_LENGTHS);let w=f.length,j=!1,_=0;for(let te of m){if(w===te){j=!0;break}te>_&&(_=te)}if(!j&&w>_&&(j=!0),!j)throw new z;const L=[new Le(o[1],e),new Le(a[0],e)];return new be(f,null,0,L,Ce.ITF,new Date().getTime())}static decodeMiddle(e,n,i,o){let a=new Int32Array(10),c=new Int32Array(5),f=new Int32Array(5);for(a.fill(0),c.fill(0),f.fill(0);n<i;){Mt.recordPattern(e,n,a);for(let w=0;w<5;w++){let j=2*w;c[w]=a[j],f[w]=a[j+1]}let m=Ct.decodeDigit(c);o.append(m.toString()),m=this.decodeDigit(f),o.append(m.toString()),a.forEach(function(w){n+=w})}}decodeStart(e){let n=Ct.skipWhiteSpace(e),i=Ct.findGuardPattern(e,n,Ct.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i}validateQuietZone(e,n){let i=this.narrowLineWidth*10;i=i<n?i:n;for(let o=n-1;i>0&&o>=0&&!e.get(o);o--)i--;if(i!==0)throw new G}static skipWhiteSpace(e){const n=e.getSize(),i=e.getNextSet(0);if(i===n)throw new G;return i}decodeEnd(e){e.reverse();try{let n=Ct.skipWhiteSpace(e),i;try{i=Ct.findGuardPattern(e,n,Ct.END_PATTERN_REVERSED[0])}catch(a){a instanceof G&&(i=Ct.findGuardPattern(e,n,Ct.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);let o=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-o,i}finally{e.reverse()}}static findGuardPattern(e,n,i){let o=i.length,a=new Int32Array(o),c=e.getSize(),f=!1,m=0,w=n;a.fill(0);for(let j=n;j<c;j++)if(e.get(j)!==f)a[m]++;else{if(m===o-1){if(Mt.patternMatchVariance(a,i,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE)return[w,j];w+=a[0]+a[1],F.arraycopy(a,2,a,0,m-1),a[m-1]=0,a[m]=0,m--}else m++;a[m]=1,f=!f}throw new G}static decodeDigit(e){let n=Ct.MAX_AVG_VARIANCE,i=-1,o=Ct.PATTERNS.length;for(let a=0;a<o;a++){let c=Ct.PATTERNS[a],f=Mt.patternMatchVariance(e,c,Ct.MAX_INDIVIDUAL_VARIANCE);f<n?(n=f,i=a):f===n&&(i=-1)}if(i>=0)return i%10;throw new G}}Ct.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ct.MAX_AVG_VARIANCE=.38,Ct.MAX_INDIVIDUAL_VARIANCE=.5,Ct.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ct.START_PATTERN=Int32Array.from([1,1,1,1]),Ct.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class _t extends Mt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let n=!1,i,o=0,a=Int32Array.from([0,0,0]);for(;!n;){a=Int32Array.from([0,0,0]),i=_t.findGuardPattern(e,o,!1,this.START_END_PATTERN,a);let c=i[0];o=i[1];let f=c-(o-c);f>=0&&(n=e.isRange(f,c,!1))}return i}static checkChecksum(e){return _t.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return _t.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let o=n-1;o>=0;o-=2){let a=e.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new z;i+=a}i*=3;for(let o=n-2;o>=0;o-=2){let a=e.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new z;i+=a}return(1e3-i)%10}static decodeEnd(e,n){return _t.findGuardPattern(e,n,!1,_t.START_END_PATTERN,new Int32Array(_t.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,n,i,o){return this.findGuardPattern(e,n,i,o,new Int32Array(o.length))}static findGuardPattern(e,n,i,o,a){let c=e.getSize();n=i?e.getNextUnset(n):e.getNextSet(n);let f=0,m=n,w=o.length,j=i;for(let _=n;_<c;_++)if(e.get(_)!==j)a[f]++;else{if(f===w-1){if(Mt.patternMatchVariance(a,o,_t.MAX_INDIVIDUAL_VARIANCE)<_t.MAX_AVG_VARIANCE)return Int32Array.from([m,_]);m+=a[0]+a[1];let L=a.slice(2,a.length-1);for(let H=0;H<f-1;H++)a[H]=L[H];a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,j=!j}throw new G}static decodeDigit(e,n,i,o){this.recordPattern(e,i,n);let a=this.MAX_AVG_VARIANCE,c=-1,f=o.length;for(let m=0;m<f;m++){let w=o[m],j=Mt.patternMatchVariance(n,w,_t.MAX_INDIVIDUAL_VARIANCE);j<a&&(a=j,c=m)}if(c>=0)return c;throw new G}}_t.MAX_AVG_VARIANCE=.48,_t.MAX_INDIVIDUAL_VARIANCE=.7,_t.START_END_PATTERN=Int32Array.from([1,1,1]),_t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),_t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),_t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class $r{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let o=this.decodeRowStringBuffer,a=this.decodeMiddle(n,i,o),c=o.toString(),f=$r.parseExtensionString(c),m=[new Le((i[0]+i[1])/2,e),new Le(a,e)],w=new be(c,null,0,m,Ce.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&w.putAllMetadata(f),w}decodeMiddle(e,n,i){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=e.getSize(),c=n[1],f=0;for(let w=0;w<5&&c<a;w++){let j=_t.decodeDigit(e,o,c,_t.L_AND_G_PATTERNS);i+=String.fromCharCode(48+j%10);for(let _ of o)c+=_;j>=10&&(f|=1<<4-w),w!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(i.length!==5)throw new G;let m=this.determineCheckDigit(f);if($r.extensionChecksum(i.toString())!==m)throw new G;return c}static extensionChecksum(e){let n=e.length,i=0;for(let o=n-2;o>=0;o-=2)i+=e.charAt(o).charCodeAt(0)-48;i*=3;for(let o=n-1;o>=0;o-=2)i+=e.charAt(o).charCodeAt(0)-48;return i*=3,i%10}determineCheckDigit(e){for(let n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new G}static parseExtensionString(e){if(e.length!==5)return null;let n=$r.parseExtension5String(e);return n==null?null:new Map([[fe.SUGGESTED_PRICE,n]])}static parseExtension5String(e){let n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}let i=parseInt(e.substring(1)),o=(i/100).toString(),a=i%100,c=a<10?"0"+a:a.toString();return n+o+"."+c}}class Ji{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let o=this.decodeRowStringBuffer,a=this.decodeMiddle(n,i,o),c=o.toString(),f=Ji.parseExtensionString(c),m=[new Le((i[0]+i[1])/2,e),new Le(a,e)],w=new be(c,null,0,m,Ce.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&w.putAllMetadata(f),w}decodeMiddle(e,n,i){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=e.getSize(),c=n[1],f=0;for(let m=0;m<2&&c<a;m++){let w=_t.decodeDigit(e,o,c,_t.L_AND_G_PATTERNS);i+=String.fromCharCode(48+w%10);for(let j of o)c+=j;w>=10&&(f|=1<<1-m),m!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(i.length!==2)throw new G;if(parseInt(i.toString())%4!==f)throw new G;return c}static parseExtensionString(e){return e.length!==2?null:new Map([[fe.ISSUE_NUMBER,parseInt(e)]])}}class _s{static decodeRow(e,n,i){let o=_t.findGuardPattern(n,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new $r().decodeRow(e,n,o)}catch{return new Ji().decodeRow(e,n,o)}}}_s.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ht extends _t{constructor(){super(),this.decodeRowStringBuffer="",ht.L_AND_G_PATTERNS=ht.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let n=ht.L_PATTERNS[e-10],i=new Int32Array(n.length);for(let o=0;o<n.length;o++)i[o]=n[n.length-o-1];ht.L_AND_G_PATTERNS[e]=i}}decodeRow(e,n,i){let o=ht.findStartGuardPattern(n),a=i==null?null:i.get(Z.NEED_RESULT_POINT_CALLBACK);if(a!=null){const je=new Le((o[0]+o[1])/2,e);a.foundPossibleResultPoint(je)}let c=this.decodeMiddle(n,o,this.decodeRowStringBuffer),f=c.rowOffset,m=c.resultString;if(a!=null){const je=new Le(f,e);a.foundPossibleResultPoint(je)}let w=this.decodeEnd(n,f);if(a!=null){const je=new Le((w[0]+w[1])/2,e);a.foundPossibleResultPoint(je)}let j=w[1],_=j+(j-w[0]);if(_>=n.getSize()||!n.isRange(j,_,!1))throw new G;let L=m.toString();if(L.length<8)throw new z;if(!ht.checkChecksum(L))throw new X;let H=(o[1]+o[0])/2,te=(w[1]+w[0])/2,ie=this.getBarcodeFormat(),ae=[new Le(H,e),new Le(te,e)],ge=new be(L,null,0,ae,ie,new Date().getTime()),Te=0;try{let je=_s.decodeRow(e,n,w[1]);ge.putMetadata(fe.UPC_EAN_EXTENSION,je.getText()),ge.putAllMetadata(je.getResultMetadata()),ge.addResultPoints(je.getResultPoints()),Te=je.getText().length}catch{}let _e=i==null?null:i.get(Z.ALLOWED_EAN_EXTENSIONS);if(_e!=null){let je=!1;for(let ut in _e)if(Te.toString()===ut){je=!0;break}if(!je)throw new G}return ge}decodeEnd(e,n){return ht.findGuardPattern(e,n,!1,ht.START_END_PATTERN,new Int32Array(ht.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return ht.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return ht.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let o=n-1;o>=0;o-=2){let a=e.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new z;i+=a}i*=3;for(let o=n-2;o>=0;o-=2){let a=e.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new z;i+=a}return(1e3-i)%10}}class qn extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=e.getSize(),c=n[1],f=0;for(let w=0;w<6&&c<a;w++){let j=ht.decodeDigit(e,o,c,ht.L_AND_G_PATTERNS);i+=String.fromCharCode(48+j%10);for(let _ of o)c+=_;j>=10&&(f|=1<<5-w)}i=qn.determineFirstDigit(i,f),c=ht.findGuardPattern(e,c,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<6&&c<a;w++){let j=ht.decodeDigit(e,o,c,ht.L_PATTERNS);i+=String.fromCharCode(48+j);for(let _ of o)c+=_}return{rowOffset:c,resultString:i}}getBarcodeFormat(){return Ce.EAN_13}static determineFirstDigit(e,n){for(let i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new G}}qn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class vo extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){const o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=e.getSize(),c=n[1];for(let m=0;m<4&&c<a;m++){let w=ht.decodeDigit(e,o,c,ht.L_PATTERNS);i+=String.fromCharCode(48+w);for(let j of o)c+=j}c=ht.findGuardPattern(e,c,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&c<a;m++){let w=ht.decodeDigit(e,o,c,ht.L_PATTERNS);i+=String.fromCharCode(48+w);for(let j of o)c+=j}return{rowOffset:c,resultString:i}}getBarcodeFormat(){return Ce.EAN_8}}class wo extends ht{constructor(){super(...arguments),this.ean13Reader=new qn}getBarcodeFormat(){return Ce.UPC_A}decode(e,n){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,n,i))}decodeMiddle(e,n,i){return this.ean13Reader.decodeMiddle(e,n,i)}maybeReturnResult(e){let n=e.getText();if(n.charAt(0)==="0"){let i=new be(n.substring(1),null,null,e.getResultPoints(),Ce.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new G}reset(){this.ean13Reader.reset()}}class Kn extends ht{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,n,i){const o=this.decodeMiddleCounters.map(w=>w);o[0]=0,o[1]=0,o[2]=0,o[3]=0;const a=e.getSize();let c=n[1],f=0;for(let w=0;w<6&&c<a;w++){const j=Kn.decodeDigit(e,o,c,Kn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+j%10);for(let _ of o)c+=_;j>=10&&(f|=1<<5-w)}let m=Kn.determineNumSysAndCheckDigit(i,f);return{rowOffset:c,resultString:m}}decodeEnd(e,n){return Kn.findGuardPatternWithoutCounters(e,n,!0,Kn.MIDDLE_END_PATTERN)}checkChecksum(e){return ht.checkChecksum(Kn.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,n){for(let i=0;i<=1;i++)for(let o=0;o<10;o++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){let a=String.fromCharCode(48+i),c=String.fromCharCode(48+o);return a+e+c}throw G.getNotFoundInstance()}getBarcodeFormat(){return Ce.UPC_E}static convertUPCEtoUPCA(e){const n=e.slice(1,7).split("").map(a=>a.charCodeAt(0)),i=new le;i.append(e.charAt(0));let o=n[5];switch(o){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(o),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(o);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()}}Kn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Kn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Rs extends Mt{constructor(e){super();let n=e==null?null:e.get(Z.POSSIBLE_FORMATS),i=[];g(n)?(i.push(new qn),i.push(new wo),i.push(new vo),i.push(new Kn)):(n.indexOf(Ce.EAN_13)>-1&&i.push(new qn),n.indexOf(Ce.UPC_A)>-1&&i.push(new wo),n.indexOf(Ce.EAN_8)>-1&&i.push(new vo),n.indexOf(Ce.UPC_E)>-1&&i.push(new Kn)),this.readers=i}decodeRow(e,n,i){for(let o of this.readers)try{const a=o.decodeRow(e,n,i),c=a.getBarcodeFormat()===Ce.EAN_13&&a.getText().charAt(0)==="0",f=i==null?null:i.get(Z.POSSIBLE_FORMATS),m=f==null||f.includes(Ce.UPC_A);if(c&&m){const w=a.getRawBytes(),j=new be(a.getText().substring(1),w,w?w.length:null,a.getResultPoints(),Ce.UPC_A);return j.putAllMetadata(a.getResultMetadata()),j}return a}catch{}throw new G}reset(){for(let e of this.readers)e.reset()}}class un extends Mt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,n){for(let i=0;i<n.length;i++)if(Mt.patternMatchVariance(e,n[i],un.MAX_INDIVIDUAL_VARIANCE)<un.MAX_AVG_VARIANCE)return i;throw new G}static count(e){return ot.sum(new Int32Array(e))}static increment(e,n){let i=0,o=n[0];for(let a=1;a<e.length;a++)n[a]>o&&(o=n[a],i=a);e[i]++}static decrement(e,n){let i=0,o=n[0];for(let a=1;a<e.length;a++)n[a]<o&&(o=n[a],i=a);e[i]--}static isFinderPattern(e){let n=e[0]+e[1],i=n+e[2]+e[3],o=n/i;if(o>=un.MIN_FINDER_PATTERN_RATIO&&o<=un.MAX_FINDER_PATTERN_RATIO){let a=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;for(let f of e)f>c&&(c=f),f<a&&(a=f);return c<10*a}return!1}}un.MAX_AVG_VARIANCE=.2,un.MAX_INDIVIDUAL_VARIANCE=.45,un.MIN_FINDER_PATTERN_RATIO=9.5/12,un.MAX_FINDER_PATTERN_RATIO=12.5/14;class Vr{constructor(e,n){this.value=e,this.checksumPortion=n}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Vr))return!1;const n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class es{constructor(e,n,i,o,a){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new Le(i,a)),this.resultPoints.push(new Le(o,a))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof es))return!1;const n=e;return this.value===n.value}hashCode(){return this.value}}class On{constructor(){}static getRSSvalue(e,n,i){let o=0;for(let m of e)o+=m;let a=0,c=0,f=e.length;for(let m=0;m<f-1;m++){let w;for(w=1,c|=1<<m;w<e[m];w++,c&=~(1<<m)){let j=On.combins(o-w-1,f-m-2);if(i&&c===0&&o-w-(f-m-1)>=f-m-1&&(j-=On.combins(o-w-(f-m),f-m-2)),f-m-1>1){let _=0;for(let L=o-w-(f-m-2);L>n;L--)_+=On.combins(o-w-L-1,f-m-3);j-=_*(f-1-m)}else o-w>n&&j--;a+=j}o-=w}return a}static combins(e,n){let i,o;e-n>n?(o=n,i=e-n):(o=e-n,i=n);let a=1,c=1;for(let f=e;f>i;f--)a*=f,c<=o&&(a/=c,c++);for(;c<=o;)a/=c,c++;return a}}class Co{static buildBitArray(e){let n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);let i=12*n,o=new M(i),a=0,f=e[0].getRightChar().getValue();for(let m=11;m>=0;--m)(f&1<<m)!=0&&o.set(a),a++;for(let m=1;m<e.length;++m){let w=e[m],j=w.getLeftChar().getValue();for(let _=11;_>=0;--_)(j&1<<_)!=0&&o.set(a),a++;if(w.getRightChar()!=null){let _=w.getRightChar().getValue();for(let L=11;L>=0;--L)(_&1<<L)!=0&&o.set(a),a++}}return o}}class sr{constructor(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class bo{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class cn extends bo{constructor(e,n){super(e),this.value=n}getValue(){return this.value}isFNC1(){return this.value===cn.FNC1}}cn.FNC1="$";class mr extends bo{constructor(e,n,i){super(e),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=n}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class In extends bo{constructor(e,n,i){if(super(e),n<0||n>10||i<0||i>10)throw new z;this.firstDigit=n,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===In.FNC1}isSecondDigitFNC1(){return this.secondDigit===In.FNC1}isAnyFNC1(){return this.firstDigit===In.FNC1||this.secondDigit===In.FNC1}}In.FNC1=10;class Be{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new G;let n=e.substring(0,2);for(let a of Be.TWO_DIGIT_DATA_LENGTH)if(a[0]===n)return a[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(2,a[2],e):Be.processFixedAI(2,a[1],e);if(e.length<3)throw new G;let i=e.substring(0,3);for(let a of Be.THREE_DIGIT_DATA_LENGTH)if(a[0]===i)return a[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(3,a[2],e):Be.processFixedAI(3,a[1],e);for(let a of Be.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(a[0]===i)return a[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(4,a[2],e):Be.processFixedAI(4,a[1],e);if(e.length<4)throw new G;let o=e.substring(0,4);for(let a of Be.FOUR_DIGIT_DATA_LENGTH)if(a[0]===o)return a[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(4,a[2],e):Be.processFixedAI(4,a[1],e);throw new G}static processFixedAI(e,n,i){if(i.length<e)throw new G;let o=i.substring(0,e);if(i.length<e+n)throw new G;let a=i.substring(e,e+n),c=i.substring(e+n),f="("+o+")"+a,m=Be.parseFieldsInGeneralPurpose(c);return m==null?f:f+m}static processVariableAI(e,n,i){let o=i.substring(0,e),a;i.length<e+n?a=i.length:a=e+n;let c=i.substring(e,a),f=i.substring(a),m="("+o+")"+c,w=Be.parseFieldsInGeneralPurpose(f);return w==null?m:m+w}}Be.VARIABLE_LENGTH=[],Be.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Be.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Be.VARIABLE_LENGTH,20],["22",Be.VARIABLE_LENGTH,29],["30",Be.VARIABLE_LENGTH,8],["37",Be.VARIABLE_LENGTH,8],["90",Be.VARIABLE_LENGTH,30],["91",Be.VARIABLE_LENGTH,30],["92",Be.VARIABLE_LENGTH,30],["93",Be.VARIABLE_LENGTH,30],["94",Be.VARIABLE_LENGTH,30],["95",Be.VARIABLE_LENGTH,30],["96",Be.VARIABLE_LENGTH,30],["97",Be.VARIABLE_LENGTH,3],["98",Be.VARIABLE_LENGTH,30],["99",Be.VARIABLE_LENGTH,30]],Be.THREE_DIGIT_DATA_LENGTH=[["240",Be.VARIABLE_LENGTH,30],["241",Be.VARIABLE_LENGTH,30],["242",Be.VARIABLE_LENGTH,6],["250",Be.VARIABLE_LENGTH,30],["251",Be.VARIABLE_LENGTH,30],["253",Be.VARIABLE_LENGTH,17],["254",Be.VARIABLE_LENGTH,20],["400",Be.VARIABLE_LENGTH,30],["401",Be.VARIABLE_LENGTH,30],["402",17],["403",Be.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Be.VARIABLE_LENGTH,20],["421",Be.VARIABLE_LENGTH,15],["422",3],["423",Be.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Be.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Be.VARIABLE_LENGTH,15],["391",Be.VARIABLE_LENGTH,18],["392",Be.VARIABLE_LENGTH,15],["393",Be.VARIABLE_LENGTH,18],["703",Be.VARIABLE_LENGTH,30]],Be.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Be.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Be.VARIABLE_LENGTH,20],["8003",Be.VARIABLE_LENGTH,30],["8004",Be.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Be.VARIABLE_LENGTH,30],["8008",Be.VARIABLE_LENGTH,12],["8018",18],["8020",Be.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Be.VARIABLE_LENGTH,70],["8200",Be.VARIABLE_LENGTH,70]];class vi{constructor(e){this.buffer=new le,this.information=e}decodeAllCodes(e,n){let i=n,o=null;do{let a=this.decodeGeneralPurposeField(i,o),c=Be.parseFieldsInGeneralPurpose(a.getNewString());if(c!=null&&e.append(c),a.isRemaining()?o=""+a.getRemainingValue():o=null,i===a.getNewPosition())break;i=a.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let a=this.extractNumericValueFromBitArray(e,4);return a===0?new In(this.information.getSize(),In.FNC1,In.FNC1):new In(this.information.getSize(),a-1,In.FNC1)}let n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,o=(n-8)%11;return new In(e+7,i,o)}extractNumericValueFromBitArray(e,n){return vi.extractNumericValueFromBitArray(this.information,e,n)}static extractNumericValueFromBitArray(e,n,i){let o=0;for(let a=0;a<i;++a)e.get(n+a)&&(o|=1<<i-a-1);return o}decodeGeneralPurposeField(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new mr(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new mr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,n;do{let i=this.current.getPosition();if(this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished()),!(i!==this.current.getPosition())&&!e)break}while(!e);return n.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let n;return e.isSecondDigitFNC1()?n=new mr(this.current.getPosition(),this.buffer.toString()):n=new mr(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new sr(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let n=new mr(this.current.getPosition(),this.buffer.toString());return new sr(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new sr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new mr(this.current.getPosition(),this.buffer.toString());return new sr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new sr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new mr(this.current.getPosition(),this.buffer.toString());return new sr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new sr(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<116)return!0;if(e+8>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(e,8);return o>=232&&o<253}decodeIsoIec646(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new cn(e+5,cn.FNC1);if(n>=5&&n<15)return new cn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new cn(e+7,""+(i+1));if(i>=90&&i<116)return new cn(e+7,""+(i+7));let o=this.extractNumericValueFromBitArray(e,8),a;switch(o){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new z}return new cn(e+8,a)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,6);return i>=16&&i<63}decodeAlphanumeric(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new cn(e+5,cn.FNC1);if(n>=5&&n<15)return new cn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new cn(e+6,""+(i+33));let o;switch(i){case 58:o="*";break;case 59:o=",";break;case 60:o="-";break;case 61:o=".";break;case 62:o="/";break;default:throw new St("Decoding invalid alphanumeric value: "+i)}return new cn(e+6,o)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0}}class So{constructor(e){this.information=e,this.generalDecoder=new vi(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Dn extends So{constructor(e){super(e)}encodeCompressedGtin(e,n){e.append("(01)");let i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,n,i)}encodeCompressedGtinWithoutAI(e,n,i){for(let o=0;o<4;++o){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*o,10);a/100===0&&e.append("0"),a/10===0&&e.append("0"),e.append(a)}Dn.appendCheckDigit(e,i)}static appendCheckDigit(e,n){let i=0;for(let o=0;o<13;o++){let a=e.charAt(o+n).charCodeAt(0)-48;i+=(o&1)===0?3*a:a}i=10-i%10,i===10&&(i=0),e.append(i)}}Dn.GTIN_SIZE=40;class $n extends Dn{constructor(e){super(e)}parseInformation(){let e=new le;e.append("(01)");let n=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray($n.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,$n.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,$n.HEADER_SIZE+44)}}$n.HEADER_SIZE=4;class ts extends So{constructor(e){super(e)}parseInformation(){let e=new le;return this.getGeneralDecoder().decodeAllCodes(e,ts.HEADER_SIZE)}}ts.HEADER_SIZE=5;class ns extends Dn{constructor(e){super(e)}encodeCompressedWeight(e,n,i){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(e,o);let a=this.checkWeight(o),c=1e5;for(let f=0;f<5;++f)a/c===0&&e.append("0"),c/=10;e.append(a)}}class xr extends ns{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=xr.HEADER_SIZE+ns.GTIN_SIZE+xr.WEIGHT_SIZE)throw new G;let e=new le;return this.encodeCompressedGtin(e,xr.HEADER_SIZE),this.encodeCompressedWeight(e,xr.HEADER_SIZE+ns.GTIN_SIZE,xr.WEIGHT_SIZE),e.toString()}}xr.HEADER_SIZE=5,xr.WEIGHT_SIZE=15;class ga extends xr{constructor(e){super(e)}addWeightCode(e,n){e.append("(3103)")}checkWeight(e){return e}}class ma extends xr{constructor(e){super(e)}addWeightCode(e,n){n<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class or extends Dn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<or.HEADER_SIZE+Dn.GTIN_SIZE)throw new G;let e=new le;this.encodeCompressedGtin(e,or.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(or.HEADER_SIZE+Dn.GTIN_SIZE,or.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(or.HEADER_SIZE+Dn.GTIN_SIZE+or.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()}}or.HEADER_SIZE=8,or.LAST_DIGIT_SIZE=2;class yn extends Dn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<yn.HEADER_SIZE+Dn.GTIN_SIZE)throw new G;let e=new le;this.encodeCompressedGtin(e,yn.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(yn.HEADER_SIZE+Dn.GTIN_SIZE,yn.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(yn.HEADER_SIZE+Dn.GTIN_SIZE+yn.LAST_DIGIT_SIZE,yn.FIRST_THREE_DIGITS_SIZE);i/100==0&&e.append("0"),i/10==0&&e.append("0"),e.append(i);let o=this.getGeneralDecoder().decodeGeneralPurposeField(yn.HEADER_SIZE+Dn.GTIN_SIZE+yn.LAST_DIGIT_SIZE+yn.FIRST_THREE_DIGITS_SIZE,null);return e.append(o.getNewString()),e.toString()}}yn.HEADER_SIZE=8,yn.LAST_DIGIT_SIZE=2,yn.FIRST_THREE_DIGITS_SIZE=10;class Rt extends ns{constructor(e,n,i){super(e),this.dateCode=i,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=Rt.HEADER_SIZE+Rt.GTIN_SIZE+Rt.WEIGHT_SIZE+Rt.DATE_SIZE)throw new G;let e=new le;return this.encodeCompressedGtin(e,Rt.HEADER_SIZE),this.encodeCompressedWeight(e,Rt.HEADER_SIZE+Rt.GTIN_SIZE,Rt.WEIGHT_SIZE),this.encodeCompressedDate(e,Rt.HEADER_SIZE+Rt.GTIN_SIZE+Rt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,n){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,Rt.DATE_SIZE);if(i==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let o=i%32;i/=32;let a=i%12+1;i/=12;let c=i;c/10==0&&e.append("0"),e.append(c),a/10==0&&e.append("0"),e.append(a),o/10==0&&e.append("0"),e.append(o)}addWeightCode(e,n){e.append("("),e.append(this.firstAIdigits),e.append(n/1e5),e.append(")")}checkWeight(e){return e%1e5}}Rt.HEADER_SIZE=8,Rt.WEIGHT_SIZE=20,Rt.DATE_SIZE=16;function xa(T){try{if(T.get(1))return new $n(T);if(!T.get(2))return new ts(T);switch(vi.extractNumericValueFromBitArray(T,1,4)){case 4:return new ga(T);case 5:return new ma(T)}switch(vi.extractNumericValueFromBitArray(T,1,5)){case 12:return new or(T);case 13:return new yn(T)}switch(vi.extractNumericValueFromBitArray(T,1,7)){case 56:return new Rt(T,"310","11");case 57:return new Rt(T,"320","11");case 58:return new Rt(T,"310","13");case 59:return new Rt(T,"320","13");case 60:return new Rt(T,"310","15");case 61:return new Rt(T,"320","15");case 62:return new Rt(T,"310","17");case 63:return new Rt(T,"320","17")}}catch(e){throw console.log(e),new St("unknown decoder: "+T)}}class Et{constructor(e,n,i,o){this.leftchar=e,this.rightchar=n,this.finderpattern=i,this.maybeLast=o}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,n){return e instanceof Et?Et.equalsOrNull(e.leftchar,n.leftchar)&&Et.equalsOrNull(e.rightchar,n.rightchar)&&Et.equalsOrNull(e.finderpattern,n.finderpattern):!1}static equalsOrNull(e,n){return e===null?n===null:Et.equals(e,n)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Eo{constructor(e,n,i){this.pairs=e,this.rowNumber=n,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,n){return e instanceof Eo?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1}checkEqualitity(e,n){if(!e||!n)return;let i;return e.forEach((o,a)=>{n.forEach(c=>{o.getLeftChar().getValue()===c.getLeftChar().getValue()&&o.getRightChar().getValue()===c.getRightChar().getValue()&&o.getFinderPatter().getValue()===c.getFinderPatter().getValue()&&(i=!0)})}),i}}class Ee extends un{constructor(e){super(...arguments),this.pairs=new Array(Ee.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,n,i){this.pairs.length=0,this.startFromEven=!1;try{return Ee.constructResult(this.decodeRow2pairs(e,n))}catch(o){this.verbose&&console.log(o)}return this.pairs.length=0,this.startFromEven=!0,Ee.constructResult(this.decodeRow2pairs(e,n))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,n){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,e))}catch(a){if(a instanceof G){if(!this.pairs.length)throw new G;i=!0}}if(this.checkChecksum())return this.pairs;let o;if(this.rows.length?o=!0:o=!1,this.storeRow(e,!1),o){let a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new G}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let n=null;try{n=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return e&&(this.rows=this.rows.reverse()),n}checkRows(e,n){for(let i=n;i<this.rows.length;i++){let o=this.rows[i];this.pairs.length=0;for(let c of e)this.pairs.push(c.getPairs());if(this.pairs.push(o.getPairs()),!Ee.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let a=new Array(e);a.push(o);try{return this.checkRows(a,i+1)}catch(c){this.verbose&&console.log(c)}}throw new G}static isValidSequence(e){for(let n of Ee.FINDER_PATTERN_SEQUENCES){if(e.length>n.length)continue;let i=!0;for(let o=0;o<e.length;o++)if(e[o].getFinderPattern().getValue()!=n[o]){i=!1;break}if(i)return!0}return!1}storeRow(e,n){let i=0,o=!1,a=!1;for(;i<this.rows.length;){let c=this.rows[i];if(c.getRowNumber()>e){a=c.isEquivalent(this.pairs);break}o=c.isEquivalent(this.pairs),i++}a||o||Ee.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new Eo(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,n){for(let i of n)if(i.getPairs().length!==e.length){for(let o of i.getPairs())for(let a of e)if(Et.equals(o,a))break}}static isPartialRow(e,n){for(let i of n){let o=!0;for(let a of e){let c=!1;for(let f of i.getPairs())if(a.equals(f)){c=!0;break}if(!c){o=!1;break}}if(o)return!0}return!1}getRows(){return this.rows}static constructResult(e){let n=Co.buildBitArray(e),o=xa(n).parseInformation(),a=e[0].getFinderPattern().getResultPoints(),c=e[e.length-1].getFinderPattern().getResultPoints(),f=[a[0],a[1],c[0],c[1]];return new be(o,null,null,f,Ce.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),n=e.getLeftChar(),i=e.getRightChar();if(i==null)return!1;let o=i.getChecksumPortion(),a=2;for(let f=1;f<this.pairs.size();++f){let m=this.pairs.get(f);o+=m.getLeftChar().getChecksumPortion(),a++;let w=m.getRightChar();w!=null&&(o+=w.getChecksumPortion(),a++)}return o%=211,211*(a-4)+o==n.getValue()}static getNextSecondBar(e,n){let i;return e.get(n)?(i=e.getNextUnset(n),i=e.getNextSet(i)):(i=e.getNextSet(n),i=e.getNextUnset(i)),i}retrieveNextPair(e,n,i){let o=n.length%2==0;this.startFromEven&&(o=!o);let a,c=!0,f=-1;do this.findNextPair(e,n,f),a=this.parseFoundFinderPattern(e,i,o),a==null?f=Ee.getNextSecondBar(e,this.startEnd[0]):c=!1;while(c);let m=this.decodeDataCharacter(e,a,o,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new G;let w;try{w=this.decodeDataCharacter(e,a,o,!1)}catch(j){w=null,this.verbose&&console.log(j)}return new Et(m,w,a,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,n,i){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=e.getSize(),c;i>=0?c=i:this.isEmptyPair(n)?c=0:c=n[n.length-1].getFinderPattern().getStartEnd()[1];let f=n.length%2!=0;this.startFromEven&&(f=!f);let m=!1;for(;c<a&&(m=!e.get(c),!!m);)c++;let w=0,j=c;for(let _=c;_<a;_++)if(e.get(_)!=m)o[w]++;else{if(w==3){if(f&&Ee.reverseCounters(o),Ee.isFinderPattern(o)){this.startEnd[0]=j,this.startEnd[1]=_;return}f&&Ee.reverseCounters(o),j+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,w--}else w++;o[w]=1,m=!m}throw new G}static reverseCounters(e){let n=e.length;for(let i=0;i<n/2;++i){let o=e[i];e[i]=e[n-i-1],e[n-i-1]=o}}parseFoundFinderPattern(e,n,i){let o,a,c;if(i){let w=this.startEnd[0]-1;for(;w>=0&&!e.get(w);)w--;w++,o=this.startEnd[0]-w,a=w,c=this.startEnd[1]}else a=this.startEnd[0],c=e.getNextUnset(this.startEnd[1]+1),o=c-this.startEnd[1];let f=this.getDecodeFinderCounters();F.arraycopy(f,0,f,1,f.length-1),f[0]=o;let m;try{m=this.parseFinderValue(f,Ee.FINDER_PATTERNS)}catch{return null}return new es(m,[a,c],a,c,n)}decodeDataCharacter(e,n,i,o){let a=this.getDataCharacterCounters();for(let bt=0;bt<a.length;bt++)a[bt]=0;if(o)Ee.recordPatternInReverse(e,n.getStartEnd()[0],a);else{Ee.recordPattern(e,n.getStartEnd()[1],a);for(let bt=0,Gt=a.length-1;bt<Gt;bt++,Gt--){let Nn=a[bt];a[bt]=a[Gt],a[Gt]=Nn}}let c=17,f=ot.sum(new Int32Array(a))/c,m=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(f-m)/m>.3)throw new G;let w=this.getOddCounts(),j=this.getEvenCounts(),_=this.getOddRoundingErrors(),L=this.getEvenRoundingErrors();for(let bt=0;bt<a.length;bt++){let Gt=1*a[bt]/f,Nn=Gt+.5;if(Nn<1){if(Gt<.3)throw new G;Nn=1}else if(Nn>8){if(Gt>8.7)throw new G;Nn=8}let ni=bt/2;(bt&1)==0?(w[ni]=Nn,_[ni]=Gt-Nn):(j[ni]=Nn,L[ni]=Gt-Nn)}this.adjustOddEvenCounts(c);let H=4*n.getValue()+(i?0:2)+(o?0:1)-1,te=0,ie=0;for(let bt=w.length-1;bt>=0;bt--){if(Ee.isNotA1left(n,i,o)){let Gt=Ee.WEIGHTS[H][2*bt];ie+=w[bt]*Gt}te+=w[bt]}let ae=0;for(let bt=j.length-1;bt>=0;bt--)if(Ee.isNotA1left(n,i,o)){let Gt=Ee.WEIGHTS[H][2*bt+1];ae+=j[bt]*Gt}let ge=ie+ae;if((te&1)!=0||te>13||te<4)throw new G;let Te=(13-te)/2,_e=Ee.SYMBOL_WIDEST[Te],je=9-_e,ut=On.getRSSvalue(w,_e,!0),it=On.getRSSvalue(j,je,!1),Mn=Ee.EVEN_TOTAL_SUBSET[Te],ur=Ee.GSUM[Te],sn=ut*Mn+it+ur;return new Vr(sn,ge)}static isNotA1left(e,n,i){return!(e.getValue()==0&&n&&i)}adjustOddEvenCounts(e){let n=ot.sum(new Int32Array(this.getOddCounts())),i=ot.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1;n>13?a=!0:n<4&&(o=!0);let c=!1,f=!1;i>13?f=!0:i<4&&(c=!0);let m=n+i-e,w=(n&1)==1,j=(i&1)==0;if(m==1)if(w){if(j)throw new G;a=!0}else{if(!j)throw new G;f=!0}else if(m==-1)if(w){if(j)throw new G;o=!0}else{if(!j)throw new G;c=!0}else if(m==0){if(w){if(!j)throw new G;n<i?(o=!0,f=!0):(a=!0,c=!0)}else if(j)throw new G}else throw new G;if(o){if(a)throw new G;Ee.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&Ee.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new G;Ee.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&Ee.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ee.SYMBOL_WIDEST=[7,5,4,3,1],Ee.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ee.GSUM=[0,348,1388,2948,3988],Ee.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ee.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ee.FINDER_PAT_A=0,Ee.FINDER_PAT_B=1,Ee.FINDER_PAT_C=2,Ee.FINDER_PAT_D=3,Ee.FINDER_PAT_E=4,Ee.FINDER_PAT_F=5,Ee.FINDER_PATTERN_SEQUENCES=[[Ee.FINDER_PAT_A,Ee.FINDER_PAT_A],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_B,Ee.FINDER_PAT_B],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_C,Ee.FINDER_PAT_B,Ee.FINDER_PAT_D],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_E,Ee.FINDER_PAT_B,Ee.FINDER_PAT_D,Ee.FINDER_PAT_C],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_E,Ee.FINDER_PAT_B,Ee.FINDER_PAT_D,Ee.FINDER_PAT_D,Ee.FINDER_PAT_F],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_E,Ee.FINDER_PAT_B,Ee.FINDER_PAT_D,Ee.FINDER_PAT_E,Ee.FINDER_PAT_F,Ee.FINDER_PAT_F],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_A,Ee.FINDER_PAT_B,Ee.FINDER_PAT_B,Ee.FINDER_PAT_C,Ee.FINDER_PAT_C,Ee.FINDER_PAT_D,Ee.FINDER_PAT_D],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_A,Ee.FINDER_PAT_B,Ee.FINDER_PAT_B,Ee.FINDER_PAT_C,Ee.FINDER_PAT_C,Ee.FINDER_PAT_D,Ee.FINDER_PAT_E,Ee.FINDER_PAT_E],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_A,Ee.FINDER_PAT_B,Ee.FINDER_PAT_B,Ee.FINDER_PAT_C,Ee.FINDER_PAT_C,Ee.FINDER_PAT_D,Ee.FINDER_PAT_E,Ee.FINDER_PAT_F,Ee.FINDER_PAT_F],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_A,Ee.FINDER_PAT_B,Ee.FINDER_PAT_B,Ee.FINDER_PAT_C,Ee.FINDER_PAT_D,Ee.FINDER_PAT_D,Ee.FINDER_PAT_E,Ee.FINDER_PAT_E,Ee.FINDER_PAT_F,Ee.FINDER_PAT_F]],Ee.MAX_PAIRS=11;class ya extends Vr{constructor(e,n,i){super(e,n),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Nt extends un{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,n,i){const o=this.decodePair(n,!1,e,i);Nt.addOrTally(this.possibleLeftPairs,o),n.reverse();let a=this.decodePair(n,!0,e,i);Nt.addOrTally(this.possibleRightPairs,a),n.reverse();for(let c of this.possibleLeftPairs)if(c.getCount()>1){for(let f of this.possibleRightPairs)if(f.getCount()>1&&Nt.checkChecksum(c,f))return Nt.constructResult(c,f)}throw new G}static addOrTally(e,n){if(n==null)return;let i=!1;for(let o of e)if(o.getValue()===n.getValue()){o.incrementCount(),i=!0;break}i||e.push(n)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,n){let i=4537077*e.getValue()+n.getValue(),o=new String(i).toString(),a=new le;for(let w=13-o.length;w>0;w--)a.append("0");a.append(o);let c=0;for(let w=0;w<13;w++){let j=a.charAt(w).charCodeAt(0)-48;c+=(w&1)===0?3*j:j}c=10-c%10,c===10&&(c=0),a.append(c.toString());let f=e.getFinderPattern().getResultPoints(),m=n.getFinderPattern().getResultPoints();return new be(a.toString(),null,0,[f[0],f[1],m[0],m[1]],Ce.RSS_14,new Date().getTime())}static checkChecksum(e,n){let i=(e.getChecksumPortion()+16*n.getChecksumPortion())%79,o=9*e.getFinderPattern().getValue()+n.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o}decodePair(e,n,i,o){try{let a=this.findFinderPattern(e,n),c=this.parseFoundFinderPattern(e,i,n,a),f=o==null?null:o.get(Z.NEED_RESULT_POINT_CALLBACK);if(f!=null){let j=(a[0]+a[1])/2;n&&(j=e.getSize()-1-j),f.foundPossibleResultPoint(new Le(j,i))}let m=this.decodeDataCharacter(e,c,!0),w=this.decodeDataCharacter(e,c,!1);return new ya(1597*m.getValue()+w.getValue(),m.getChecksumPortion()+4*w.getChecksumPortion(),c)}catch{return null}}decodeDataCharacter(e,n,i){let o=this.getDataCharacterCounters();for(let ae=0;ae<o.length;ae++)o[ae]=0;if(i)Mt.recordPatternInReverse(e,n.getStartEnd()[0],o);else{Mt.recordPattern(e,n.getStartEnd()[1]+1,o);for(let ae=0,ge=o.length-1;ae<ge;ae++,ge--){let Te=o[ae];o[ae]=o[ge],o[ge]=Te}}let a=i?16:15,c=ot.sum(new Int32Array(o))/a,f=this.getOddCounts(),m=this.getEvenCounts(),w=this.getOddRoundingErrors(),j=this.getEvenRoundingErrors();for(let ae=0;ae<o.length;ae++){let ge=o[ae]/c,Te=Math.floor(ge+.5);Te<1?Te=1:Te>8&&(Te=8);let _e=Math.floor(ae/2);(ae&1)===0?(f[_e]=Te,w[_e]=ge-Te):(m[_e]=Te,j[_e]=ge-Te)}this.adjustOddEvenCounts(i,a);let _=0,L=0;for(let ae=f.length-1;ae>=0;ae--)L*=9,L+=f[ae],_+=f[ae];let H=0,te=0;for(let ae=m.length-1;ae>=0;ae--)H*=9,H+=m[ae],te+=m[ae];let ie=L+3*H;if(i){if((_&1)!==0||_>12||_<4)throw new G;let ae=(12-_)/2,ge=Nt.OUTSIDE_ODD_WIDEST[ae],Te=9-ge,_e=On.getRSSvalue(f,ge,!1),je=On.getRSSvalue(m,Te,!0),ut=Nt.OUTSIDE_EVEN_TOTAL_SUBSET[ae],it=Nt.OUTSIDE_GSUM[ae];return new Vr(_e*ut+je+it,ie)}else{if((te&1)!==0||te>10||te<4)throw new G;let ae=(10-te)/2,ge=Nt.INSIDE_ODD_WIDEST[ae],Te=9-ge,_e=On.getRSSvalue(f,ge,!0),je=On.getRSSvalue(m,Te,!1),ut=Nt.INSIDE_ODD_TOTAL_SUBSET[ae],it=Nt.INSIDE_GSUM[ae];return new Vr(je*ut+_e+it,ie)}}findFinderPattern(e,n){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let o=e.getSize(),a=!1,c=0;for(;c<o&&(a=!e.get(c),n!==a);)c++;let f=0,m=c;for(let w=c;w<o;w++)if(e.get(w)!==a)i[f]++;else{if(f===3){if(un.isFinderPattern(i))return[m,w];m+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,f--}else f++;i[f]=1,a=!a}throw new G}parseFoundFinderPattern(e,n,i,o){let a=e.get(o[0]),c=o[0]-1;for(;c>=0&&a!==e.get(c);)c--;c++;const f=o[0]-c,m=this.getDecodeFinderCounters(),w=new Int32Array(m.length);F.arraycopy(m,0,w,1,m.length-1),w[0]=f;const j=this.parseFinderValue(w,Nt.FINDER_PATTERNS);let _=c,L=o[1];return i&&(_=e.getSize()-1-_,L=e.getSize()-1-L),new es(j,[c,o[1]],_,L,n)}adjustOddEvenCounts(e,n){let i=ot.sum(new Int32Array(this.getOddCounts())),o=ot.sum(new Int32Array(this.getEvenCounts())),a=!1,c=!1,f=!1,m=!1;e?(i>12?c=!0:i<4&&(a=!0),o>12?m=!0:o<4&&(f=!0)):(i>11?c=!0:i<5&&(a=!0),o>10?m=!0:o<4&&(f=!0));let w=i+o-n,j=(i&1)===(e?1:0),_=(o&1)===1;if(w===1)if(j){if(_)throw new G;c=!0}else{if(!_)throw new G;m=!0}else if(w===-1)if(j){if(_)throw new G;a=!0}else{if(!_)throw new G;f=!0}else if(w===0){if(j){if(!_)throw new G;i<o?(a=!0,m=!0):(c=!0,f=!0)}else if(_)throw new G}else throw new G;if(a){if(c)throw new G;un.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&un.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(m)throw new G;un.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&un.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Nt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Nt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Nt.OUTSIDE_GSUM=[0,161,961,2015,2715],Nt.INSIDE_GSUM=[0,336,1036,1516],Nt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Nt.INSIDE_ODD_WIDEST=[2,4,6,8],Nt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class wi extends Mt{constructor(e,n){super(),this.readers=[],this.verbose=n===!0;const i=e?e.get(Z.POSSIBLE_FORMATS):null,o=e&&e.get(Z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(Ce.EAN_13)||i.includes(Ce.UPC_A)||i.includes(Ce.EAN_8)||i.includes(Ce.UPC_E))&&this.readers.push(new Rs(e)),i.includes(Ce.CODE_39)&&this.readers.push(new tn(o)),i.includes(Ce.CODE_128)&&this.readers.push(new Pe),i.includes(Ce.ITF)&&this.readers.push(new Ct),i.includes(Ce.RSS_14)&&this.readers.push(new Nt),i.includes(Ce.RSS_EXPANDED)&&this.readers.push(new Ee(this.verbose))):(this.readers.push(new Rs(e)),this.readers.push(new tn),this.readers.push(new Rs(e)),this.readers.push(new Pe),this.readers.push(new Ct),this.readers.push(new Nt),this.readers.push(new Ee(this.verbose)))}decodeRow(e,n,i){for(let o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(e,n,i)}catch{}throw new G}reset(){this.readers.forEach(e=>e.reset())}}class va extends ve{constructor(e=500,n){super(new wi(n),e,n)}}class mt{constructor(e,n,i){this.ecCodewords=e,this.ecBlocks=[n],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class lt{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class pt{constructor(e,n,i,o,a,c){this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=i,this.dataRegionSizeRows=o,this.dataRegionSizeColumns=a,this.ecBlocks=c;let f=0;const m=c.getECCodewords(),w=c.getECBlocks();for(let j of w)f+=j.getCount()*(j.getDataCodewords()+m);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,n){if((e&1)!==0||(n&1)!==0)throw new z;for(let i of pt.VERSIONS)if(i.symbolSizeRows===e&&i.symbolSizeColumns===n)return i;throw new z}toString(){return""+this.versionNumber}static buildVersions(){return[new pt(1,10,10,8,8,new mt(5,new lt(1,3))),new pt(2,12,12,10,10,new mt(7,new lt(1,5))),new pt(3,14,14,12,12,new mt(10,new lt(1,8))),new pt(4,16,16,14,14,new mt(12,new lt(1,12))),new pt(5,18,18,16,16,new mt(14,new lt(1,18))),new pt(6,20,20,18,18,new mt(18,new lt(1,22))),new pt(7,22,22,20,20,new mt(20,new lt(1,30))),new pt(8,24,24,22,22,new mt(24,new lt(1,36))),new pt(9,26,26,24,24,new mt(28,new lt(1,44))),new pt(10,32,32,14,14,new mt(36,new lt(1,62))),new pt(11,36,36,16,16,new mt(42,new lt(1,86))),new pt(12,40,40,18,18,new mt(48,new lt(1,114))),new pt(13,44,44,20,20,new mt(56,new lt(1,144))),new pt(14,48,48,22,22,new mt(68,new lt(1,174))),new pt(15,52,52,24,24,new mt(42,new lt(2,102))),new pt(16,64,64,14,14,new mt(56,new lt(2,140))),new pt(17,72,72,16,16,new mt(36,new lt(4,92))),new pt(18,80,80,18,18,new mt(48,new lt(4,114))),new pt(19,88,88,20,20,new mt(56,new lt(4,144))),new pt(20,96,96,22,22,new mt(68,new lt(4,174))),new pt(21,104,104,24,24,new mt(56,new lt(6,136))),new pt(22,120,120,18,18,new mt(68,new lt(6,175))),new pt(23,132,132,20,20,new mt(62,new lt(8,163))),new pt(24,144,144,22,22,new mt(62,new lt(8,156),new lt(2,155))),new pt(25,8,18,6,16,new mt(7,new lt(1,5))),new pt(26,8,32,6,14,new mt(11,new lt(1,10))),new pt(27,12,26,10,24,new mt(14,new lt(1,16))),new pt(28,12,36,10,16,new mt(18,new lt(1,22))),new pt(29,16,36,14,16,new mt(24,new lt(1,32))),new pt(30,16,48,14,22,new mt(28,new lt(1,49)))]}}pt.VERSIONS=pt.buildVersions();class Gn{constructor(e){const n=e.getHeight();if(n<8||n>144||(n&1)!==0)throw new z;this.version=Gn.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new ne(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const n=e.getHeight(),i=e.getWidth();return pt.getVersionForDimensions(n,i)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let n=0,i=4,o=0;const a=this.mappingBitMatrix.getHeight(),c=this.mappingBitMatrix.getWidth();let f=!1,m=!1,w=!1,j=!1;do if(i===a&&o===0&&!f)e[n++]=this.readCorner1(a,c)&255,i-=2,o+=2,f=!0;else if(i===a-2&&o===0&&(c&3)!==0&&!m)e[n++]=this.readCorner2(a,c)&255,i-=2,o+=2,m=!0;else if(i===a+4&&o===2&&(c&7)===0&&!w)e[n++]=this.readCorner3(a,c)&255,i-=2,o+=2,w=!0;else if(i===a-2&&o===0&&(c&7)===4&&!j)e[n++]=this.readCorner4(a,c)&255,i-=2,o+=2,j=!0;else{do i<a&&o>=0&&!this.readMappingMatrix.get(o,i)&&(e[n++]=this.readUtah(i,o,a,c)&255),i-=2,o+=2;while(i>=0&&o<c);i+=1,o+=3;do i>=0&&o<c&&!this.readMappingMatrix.get(o,i)&&(e[n++]=this.readUtah(i,o,a,c)&255),i+=2,o-=2;while(i<a&&o>=0);i+=3,o+=1}while(i<a||o<c);if(n!==this.version.getTotalCodewords())throw new z;return e}readModule(e,n,i,o){return e<0&&(e+=i,n+=4-(i+4&7)),n<0&&(n+=o,e+=4-(o+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)}readUtah(e,n,i,o){let a=0;return this.readModule(e-2,n-2,i,o)&&(a|=1),a<<=1,this.readModule(e-2,n-1,i,o)&&(a|=1),a<<=1,this.readModule(e-1,n-2,i,o)&&(a|=1),a<<=1,this.readModule(e-1,n-1,i,o)&&(a|=1),a<<=1,this.readModule(e-1,n,i,o)&&(a|=1),a<<=1,this.readModule(e,n-2,i,o)&&(a|=1),a<<=1,this.readModule(e,n-1,i,o)&&(a|=1),a<<=1,this.readModule(e,n,i,o)&&(a|=1),a}readCorner1(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,1,e,n)&&(i|=1),i<<=1,this.readModule(e-1,2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}readCorner2(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-4,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner3(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-3,e,n)&&(i|=1),i<<=1,this.readModule(1,n-2,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner4(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}extractDataRegion(e){const n=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new k("Dimension of bitMatrix must match the version size");const o=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),c=n/o|0,f=i/a|0,m=c*o,w=f*a,j=new ne(w,m);for(let _=0;_<c;++_){const L=_*o;for(let H=0;H<f;++H){const te=H*a;for(let ie=0;ie<o;++ie){const ae=_*(o+2)+1+ie,ge=L+ie;for(let Te=0;Te<a;++Te){const _e=H*(a+2)+1+Te;if(e.get(_e,ae)){const je=te+Te;j.set(je,ge)}}}}}return j}}class Ao{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n){const i=n.getECBlocks();let o=0;const a=i.getECBlocks();for(let ie of a)o+=ie.getCount();const c=new Array(o);let f=0;for(let ie of a)for(let ae=0;ae<ie.getCount();ae++){const ge=ie.getDataCodewords(),Te=i.getECCodewords()+ge;c[f++]=new Ao(ge,new Uint8Array(Te))}const w=c[0].codewords.length-i.getECCodewords(),j=w-1;let _=0;for(let ie=0;ie<j;ie++)for(let ae=0;ae<f;ae++)c[ae].codewords[ie]=e[_++];const L=n.getVersionNumber()===24,H=L?8:f;for(let ie=0;ie<H;ie++)c[ie].codewords[w-1]=e[_++];const te=c[0].codewords.length;for(let ie=w;ie<te;ie++)for(let ae=0;ae<f;ae++){const ge=L?(ae+8)%f:ae,Te=L&&ge>7?ie-1:ie;c[ge].codewords[Te]=e[_++]}if(_!==e.length)throw new k;return c}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Io{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new k(""+e);let n=0,i=this.bitOffset,o=this.byteOffset;const a=this.bytes;if(i>0){const c=8-i,f=e<c?e:c,m=c-f,w=255>>8-f<<m;n=(a[o]&w)>>m,e-=f,i+=f,i===8&&(i=0,o++)}if(e>0){for(;e>=8;)n=n<<8|a[o]&255,o++,e-=8;if(e>0){const c=8-e,f=255>>c<<c;n=n<<e|(a[o]&f)>>c,i+=e}}return this.bitOffset=i,this.byteOffset=o,n}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var nn;(function(T){T[T.PAD_ENCODE=0]="PAD_ENCODE",T[T.ASCII_ENCODE=1]="ASCII_ENCODE",T[T.C40_ENCODE=2]="C40_ENCODE",T[T.TEXT_ENCODE=3]="TEXT_ENCODE",T[T.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",T[T.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",T[T.BASE256_ENCODE=6]="BASE256_ENCODE"})(nn||(nn={}));class ar{static decode(e){const n=new Io(e),i=new le,o=new le,a=new Array;let c=nn.ASCII_ENCODE;do if(c===nn.ASCII_ENCODE)c=this.decodeAsciiSegment(n,i,o);else{switch(c){case nn.C40_ENCODE:this.decodeC40Segment(n,i);break;case nn.TEXT_ENCODE:this.decodeTextSegment(n,i);break;case nn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,i);break;case nn.EDIFACT_ENCODE:this.decodeEdifactSegment(n,i);break;case nn.BASE256_ENCODE:this.decodeBase256Segment(n,i,a);break;default:throw new z}c=nn.ASCII_ENCODE}while(c!==nn.PAD_ENCODE&&n.available()>0);return o.length()>0&&i.append(o.toString()),new De(e,i.toString(),a.length===0?null:a,null)}static decodeAsciiSegment(e,n,i){let o=!1;do{let a=e.readBits(8);if(a===0)throw new z;if(a<=128)return o&&(a+=128),n.append(String.fromCharCode(a-1)),nn.ASCII_ENCODE;if(a===129)return nn.PAD_ENCODE;if(a<=229){const c=a-130;c<10&&n.append("0"),n.append(""+c)}else switch(a){case 230:return nn.C40_ENCODE;case 231:return nn.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:o=!0;break;case 236:n.append("[)>05"),i.insert(0,"");break;case 237:n.append("[)>06"),i.insert(0,"");break;case 238:return nn.ANSIX12_ENCODE;case 239:return nn.TEXT_ENCODE;case 240:return nn.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new z;break}}while(e.available()>0);return nn.ASCII_ENCODE}static decodeC40Segment(e,n){let i=!1;const o=[];let a=0;do{if(e.available()===8)return;const c=e.readBits(8);if(c===254)return;this.parseTwoBytes(c,e.readBits(8),o);for(let f=0;f<3;f++){const m=o[f];switch(a){case 0:if(m<3)a=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const w=this.C40_BASIC_SET_CHARS[m];i?(n.append(String.fromCharCode(w.charCodeAt(0)+128)),i=!1):n.append(w)}else throw new z;break;case 1:i?(n.append(String.fromCharCode(m+128)),i=!1):n.append(String.fromCharCode(m)),a=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const w=this.C40_SHIFT2_SET_CHARS[m];i?(n.append(String.fromCharCode(w.charCodeAt(0)+128)),i=!1):n.append(w)}else switch(m){case 27:n.append("");break;case 30:i=!0;break;default:throw new z}a=0;break;case 3:i?(n.append(String.fromCharCode(m+224)),i=!1):n.append(String.fromCharCode(m+96)),a=0;break;default:throw new z}}}while(e.available()>0)}static decodeTextSegment(e,n){let i=!1,o=[],a=0;do{if(e.available()===8)return;const c=e.readBits(8);if(c===254)return;this.parseTwoBytes(c,e.readBits(8),o);for(let f=0;f<3;f++){const m=o[f];switch(a){case 0:if(m<3)a=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const w=this.TEXT_BASIC_SET_CHARS[m];i?(n.append(String.fromCharCode(w.charCodeAt(0)+128)),i=!1):n.append(w)}else throw new z;break;case 1:i?(n.append(String.fromCharCode(m+128)),i=!1):n.append(String.fromCharCode(m)),a=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const w=this.TEXT_SHIFT2_SET_CHARS[m];i?(n.append(String.fromCharCode(w.charCodeAt(0)+128)),i=!1):n.append(w)}else switch(m){case 27:n.append("");break;case 30:i=!0;break;default:throw new z}a=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const w=this.TEXT_SHIFT3_SET_CHARS[m];i?(n.append(String.fromCharCode(w.charCodeAt(0)+128)),i=!1):n.append(w),a=0}else throw new z;break;default:throw new z}}}while(e.available()>0)}static decodeAnsiX12Segment(e,n){const i=[];do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(let a=0;a<3;a++){const c=i[a];switch(c){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(c<14)n.append(String.fromCharCode(c+44));else if(c<40)n.append(String.fromCharCode(c+51));else throw new z;break}}}while(e.available()>0)}static parseTwoBytes(e,n,i){let o=(e<<8)+n-1,a=Math.floor(o/1600);i[0]=a,o-=a*1600,a=Math.floor(o/40),i[1]=a,i[2]=o-a*40}static decodeEdifactSegment(e,n){do{if(e.available()<=16)return;for(let i=0;i<4;i++){let o=e.readBits(6);if(o===31){const a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(o&32)===0&&(o|=64),n.append(String.fromCharCode(o))}}while(e.available()>0)}static decodeBase256Segment(e,n,i){let o=1+e.getByteOffset();const a=this.unrandomize255State(e.readBits(8),o++);let c;if(a===0?c=e.available()/8|0:a<250?c=a:c=250*(a-249)+this.unrandomize255State(e.readBits(8),o++),c<0)throw new z;const f=new Uint8Array(c);for(let m=0;m<c;m++){if(e.available()<8)throw new z;f[m]=this.unrandomize255State(e.readBits(8),o++)}i.push(f);try{n.append(we.decode(f,xe.ISO88591))}catch(m){throw new St("Platform does not support required encoding: "+m.message)}}static unrandomize255State(e,n){const i=149*n%255+1,o=e-i;return o>=0?o:o+256}}ar.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ar.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ar.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ar.TEXT_SHIFT2_SET_CHARS=ar.C40_SHIFT2_SET_CHARS,ar.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Os{constructor(){this.rsDecoder=new ln(We.DATA_MATRIX_FIELD_256)}decode(e){const n=new Gn(e),i=n.getVersion(),o=n.readCodewords(),a=Ao.getDataBlocks(o,i);let c=0;for(let w of a)c+=w.getNumDataCodewords();const f=new Uint8Array(c),m=a.length;for(let w=0;w<m;w++){const j=a[w],_=j.getCodewords(),L=j.getNumDataCodewords();this.correctErrors(_,L);for(let H=0;H<L;H++)f[H*m+w]=_[H]}return ar.decode(f)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new X}for(let o=0;o<n;o++)e[o]=i[o]}}class Tt{constructor(e){this.image=e,this.rectangleDetector=new Un(this.image)}detect(){const e=this.rectangleDetector.detect();let n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new G;n=this.shiftToModuleCenter(n);const i=n[0],o=n[1],a=n[2],c=n[3];let f=this.transitionsBetween(i,c)+1,m=this.transitionsBetween(a,c)+1;(f&1)===1&&(f+=1),(m&1)===1&&(m+=1),4*f<7*m&&4*m<7*f&&(f=m=Math.max(f,m));let w=Tt.sampleGrid(this.image,i,o,a,c,f,m);return new Ur(w,[i,o,a,c])}static shiftPoint(e,n,i){let o=(n.getX()-e.getX())/(i+1),a=(n.getY()-e.getY())/(i+1);return new Le(e.getX()+o,e.getY()+a)}static moveAway(e,n,i){let o=e.getX(),a=e.getY();return o<n?o-=1:o+=1,a<i?a-=1:a+=1,new Le(o,a)}detectSolid1(e){let n=e[0],i=e[1],o=e[3],a=e[2],c=this.transitionsBetween(n,i),f=this.transitionsBetween(i,o),m=this.transitionsBetween(o,a),w=this.transitionsBetween(a,n),j=c,_=[a,n,i,o];return j>f&&(j=f,_[0]=n,_[1]=i,_[2]=o,_[3]=a),j>m&&(j=m,_[0]=i,_[1]=o,_[2]=a,_[3]=n),j>w&&(_[0]=o,_[1]=a,_[2]=n,_[3]=i),_}detectSolid2(e){let n=e[0],i=e[1],o=e[2],a=e[3],c=this.transitionsBetween(n,a),f=Tt.shiftPoint(i,o,(c+1)*4),m=Tt.shiftPoint(o,i,(c+1)*4),w=this.transitionsBetween(f,n),j=this.transitionsBetween(m,a);return w<j?(e[0]=n,e[1]=i,e[2]=o,e[3]=a):(e[0]=i,e[1]=o,e[2]=a,e[3]=n),e}correctTopRight(e){let n=e[0],i=e[1],o=e[2],a=e[3],c=this.transitionsBetween(n,a),f=this.transitionsBetween(i,a),m=Tt.shiftPoint(n,i,(f+1)*4),w=Tt.shiftPoint(o,i,(c+1)*4);c=this.transitionsBetween(m,a),f=this.transitionsBetween(w,a);let j=new Le(a.getX()+(o.getX()-i.getX())/(c+1),a.getY()+(o.getY()-i.getY())/(c+1)),_=new Le(a.getX()+(n.getX()-i.getX())/(f+1),a.getY()+(n.getY()-i.getY())/(f+1));if(!this.isValid(j))return this.isValid(_)?_:null;if(!this.isValid(_))return j;let L=this.transitionsBetween(m,j)+this.transitionsBetween(w,j),H=this.transitionsBetween(m,_)+this.transitionsBetween(w,_);return L>H?j:_}shiftToModuleCenter(e){let n=e[0],i=e[1],o=e[2],a=e[3],c=this.transitionsBetween(n,a)+1,f=this.transitionsBetween(o,a)+1,m=Tt.shiftPoint(n,i,f*4),w=Tt.shiftPoint(o,i,c*4);c=this.transitionsBetween(m,a)+1,f=this.transitionsBetween(w,a)+1,(c&1)===1&&(c+=1),(f&1)===1&&(f+=1);let j=(n.getX()+i.getX()+o.getX()+a.getX())/4,_=(n.getY()+i.getY()+o.getY()+a.getY())/4;n=Tt.moveAway(n,j,_),i=Tt.moveAway(i,j,_),o=Tt.moveAway(o,j,_),a=Tt.moveAway(a,j,_);let L,H;return m=Tt.shiftPoint(n,i,f*4),m=Tt.shiftPoint(m,a,c*4),L=Tt.shiftPoint(i,n,f*4),L=Tt.shiftPoint(L,o,c*4),w=Tt.shiftPoint(o,a,f*4),w=Tt.shiftPoint(w,i,c*4),H=Tt.shiftPoint(a,o,f*4),H=Tt.shiftPoint(H,n,c*4),[m,L,w,H]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,n,i,o,a,c,f){return Vn.getInstance().sampleGrid(e,c,f,.5,.5,c-.5,.5,c-.5,f-.5,.5,f-.5,n.getX(),n.getY(),a.getX(),a.getY(),o.getX(),o.getY(),i.getX(),i.getY())}transitionsBetween(e,n){let i=Math.trunc(e.getX()),o=Math.trunc(e.getY()),a=Math.trunc(n.getX()),c=Math.trunc(n.getY()),f=Math.abs(c-o)>Math.abs(a-i);if(f){let ie=i;i=o,o=ie,ie=a,a=c,c=ie}let m=Math.abs(a-i),w=Math.abs(c-o),j=-m/2,_=o<c?1:-1,L=i<a?1:-1,H=0,te=this.image.get(f?o:i,f?i:o);for(let ie=i,ae=o;ie!==a;ie+=L){let ge=this.image.get(f?ae:ie,f?ie:ae);if(ge!==te&&(H++,te=ge),j+=w,j>0){if(ae===c)break;ae+=_,j-=m}}return H}}class lr{constructor(){this.decoder=new Os}decode(e,n=null){let i,o;if(n!=null&&n.has(Z.PURE_BARCODE)){const w=lr.extractPureBits(e.getBlackMatrix());i=this.decoder.decode(w),o=lr.NO_POINTS}else{const w=new Tt(e.getBlackMatrix()).detect();i=this.decoder.decode(w.getBits()),o=w.getPoints()}const a=i.getRawBytes(),c=new be(i.getText(),a,8*a.length,o,Ce.DATA_MATRIX,F.currentTimeMillis()),f=i.getByteSegments();f!=null&&c.putMetadata(fe.BYTE_SEGMENTS,f);const m=i.getECLevel();return m!=null&&c.putMetadata(fe.ERROR_CORRECTION_LEVEL,m),c}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n==null||i==null)throw new G;const o=this.moduleSize(n,e);let a=n[1];const c=i[1];let f=n[0];const w=(i[0]-f+1)/o,j=(c-a+1)/o;if(w<=0||j<=0)throw new G;const _=o/2;a+=_,f+=_;const L=new ne(w,j);for(let H=0;H<j;H++){const te=a+H*o;for(let ie=0;ie<w;ie++)e.get(f+ie*o,te)&&L.set(ie,H)}return L}static moduleSize(e,n){const i=n.getWidth();let o=e[0];const a=e[1];for(;o<i&&n.get(o,a);)o++;if(o===i)throw new G;const c=o-e[0];if(c===0)throw new G;return c}}lr.NO_POINTS=[];class Fl extends ve{constructor(e=500){super(new lr,e)}}var Ci;(function(T){T[T.L=0]="L",T[T.M=1]="M",T[T.Q=2]="Q",T[T.H=3]="H"})(Ci||(Ci={}));class At{constructor(e,n,i){this.value=e,this.stringValue=n,this.bits=i,At.FOR_BITS.set(i,this),At.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return At.L;case"M":return At.M;case"Q":return At.Q;case"H":return At.H;default:throw new A(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof At))return!1;const n=e;return this.value===n.value}static forBits(e){if(e<0||e>=At.FOR_BITS.size)throw new k;return At.FOR_BITS.get(e)}}At.FOR_BITS=new Map,At.FOR_VALUE=new Map,At.L=new At(Ci.L,"L",1),At.M=new At(Ci.M,"M",0),At.Q=new At(Ci.Q,"Q",3),At.H=new At(Ci.H,"H",2);class hn{constructor(e){this.errorCorrectionLevel=At.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,n){return N.bitCount(e^n)}static decodeFormatInformation(e,n){const i=hn.doDecodeFormatInformation(e,n);return i!==null?i:hn.doDecodeFormatInformation(e^hn.FORMAT_INFO_MASK_QR,n^hn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,n){let i=Number.MAX_SAFE_INTEGER,o=0;for(const a of hn.FORMAT_INFO_DECODE_LOOKUP){const c=a[0];if(c===e||c===n)return new hn(a[1]);let f=hn.numBitsDiffering(e,c);f<i&&(o=a[1],i=f),e!==n&&(f=hn.numBitsDiffering(n,c),f<i&&(o=a[1],i=f))}return i<=3?new hn(o):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof hn))return!1;const n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask}}hn.FORMAT_INFO_MASK_QR=21522,hn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class de{constructor(e,...n){this.ecCodewordsPerBlock=e,this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const n=this.ecBlocks;for(const i of n)e+=i.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class U{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ze{constructor(e,n,...i){this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=i;let o=0;const a=i[0].getECCodewordsPerBlock(),c=i[0].getECBlocks();for(const f of c)o+=f.getCount()*(f.getDataCodewords()+a);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new z;try{return this.getVersionForNumber((e-17)/4)}catch{throw new z}}static getVersionForNumber(e){if(e<1||e>40)throw new k;return Ze.VERSIONS[e-1]}static decodeVersionInformation(e){let n=Number.MAX_SAFE_INTEGER,i=0;for(let o=0;o<Ze.VERSION_DECODE_INFO.length;o++){const a=Ze.VERSION_DECODE_INFO[o];if(a===e)return Ze.getVersionForNumber(o+7);const c=hn.numBitsDiffering(e,a);c<n&&(i=o+7,n=c)}return n<=3?Ze.getVersionForNumber(i):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),n=new ne(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);const i=this.alignmentPatternCenters.length;for(let o=0;o<i;o++){const a=this.alignmentPatternCenters[o]-2;for(let c=0;c<i;c++)o===0&&(c===0||c===i-1)||o===i-1&&c===0||n.setRegion(this.alignmentPatternCenters[c]-2,a,5,5)}return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n}toString(){return""+this.versionNumber}}Ze.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ze.VERSIONS=[new Ze(1,new Int32Array(0),new de(7,new U(1,19)),new de(10,new U(1,16)),new de(13,new U(1,13)),new de(17,new U(1,9))),new Ze(2,Int32Array.from([6,18]),new de(10,new U(1,34)),new de(16,new U(1,28)),new de(22,new U(1,22)),new de(28,new U(1,16))),new Ze(3,Int32Array.from([6,22]),new de(15,new U(1,55)),new de(26,new U(1,44)),new de(18,new U(2,17)),new de(22,new U(2,13))),new Ze(4,Int32Array.from([6,26]),new de(20,new U(1,80)),new de(18,new U(2,32)),new de(26,new U(2,24)),new de(16,new U(4,9))),new Ze(5,Int32Array.from([6,30]),new de(26,new U(1,108)),new de(24,new U(2,43)),new de(18,new U(2,15),new U(2,16)),new de(22,new U(2,11),new U(2,12))),new Ze(6,Int32Array.from([6,34]),new de(18,new U(2,68)),new de(16,new U(4,27)),new de(24,new U(4,19)),new de(28,new U(4,15))),new Ze(7,Int32Array.from([6,22,38]),new de(20,new U(2,78)),new de(18,new U(4,31)),new de(18,new U(2,14),new U(4,15)),new de(26,new U(4,13),new U(1,14))),new Ze(8,Int32Array.from([6,24,42]),new de(24,new U(2,97)),new de(22,new U(2,38),new U(2,39)),new de(22,new U(4,18),new U(2,19)),new de(26,new U(4,14),new U(2,15))),new Ze(9,Int32Array.from([6,26,46]),new de(30,new U(2,116)),new de(22,new U(3,36),new U(2,37)),new de(20,new U(4,16),new U(4,17)),new de(24,new U(4,12),new U(4,13))),new Ze(10,Int32Array.from([6,28,50]),new de(18,new U(2,68),new U(2,69)),new de(26,new U(4,43),new U(1,44)),new de(24,new U(6,19),new U(2,20)),new de(28,new U(6,15),new U(2,16))),new Ze(11,Int32Array.from([6,30,54]),new de(20,new U(4,81)),new de(30,new U(1,50),new U(4,51)),new de(28,new U(4,22),new U(4,23)),new de(24,new U(3,12),new U(8,13))),new Ze(12,Int32Array.from([6,32,58]),new de(24,new U(2,92),new U(2,93)),new de(22,new U(6,36),new U(2,37)),new de(26,new U(4,20),new U(6,21)),new de(28,new U(7,14),new U(4,15))),new Ze(13,Int32Array.from([6,34,62]),new de(26,new U(4,107)),new de(22,new U(8,37),new U(1,38)),new de(24,new U(8,20),new U(4,21)),new de(22,new U(12,11),new U(4,12))),new Ze(14,Int32Array.from([6,26,46,66]),new de(30,new U(3,115),new U(1,116)),new de(24,new U(4,40),new U(5,41)),new de(20,new U(11,16),new U(5,17)),new de(24,new U(11,12),new U(5,13))),new Ze(15,Int32Array.from([6,26,48,70]),new de(22,new U(5,87),new U(1,88)),new de(24,new U(5,41),new U(5,42)),new de(30,new U(5,24),new U(7,25)),new de(24,new U(11,12),new U(7,13))),new Ze(16,Int32Array.from([6,26,50,74]),new de(24,new U(5,98),new U(1,99)),new de(28,new U(7,45),new U(3,46)),new de(24,new U(15,19),new U(2,20)),new de(30,new U(3,15),new U(13,16))),new Ze(17,Int32Array.from([6,30,54,78]),new de(28,new U(1,107),new U(5,108)),new de(28,new U(10,46),new U(1,47)),new de(28,new U(1,22),new U(15,23)),new de(28,new U(2,14),new U(17,15))),new Ze(18,Int32Array.from([6,30,56,82]),new de(30,new U(5,120),new U(1,121)),new de(26,new U(9,43),new U(4,44)),new de(28,new U(17,22),new U(1,23)),new de(28,new U(2,14),new U(19,15))),new Ze(19,Int32Array.from([6,30,58,86]),new de(28,new U(3,113),new U(4,114)),new de(26,new U(3,44),new U(11,45)),new de(26,new U(17,21),new U(4,22)),new de(26,new U(9,13),new U(16,14))),new Ze(20,Int32Array.from([6,34,62,90]),new de(28,new U(3,107),new U(5,108)),new de(26,new U(3,41),new U(13,42)),new de(30,new U(15,24),new U(5,25)),new de(28,new U(15,15),new U(10,16))),new Ze(21,Int32Array.from([6,28,50,72,94]),new de(28,new U(4,116),new U(4,117)),new de(26,new U(17,42)),new de(28,new U(17,22),new U(6,23)),new de(30,new U(19,16),new U(6,17))),new Ze(22,Int32Array.from([6,26,50,74,98]),new de(28,new U(2,111),new U(7,112)),new de(28,new U(17,46)),new de(30,new U(7,24),new U(16,25)),new de(24,new U(34,13))),new Ze(23,Int32Array.from([6,30,54,78,102]),new de(30,new U(4,121),new U(5,122)),new de(28,new U(4,47),new U(14,48)),new de(30,new U(11,24),new U(14,25)),new de(30,new U(16,15),new U(14,16))),new Ze(24,Int32Array.from([6,28,54,80,106]),new de(30,new U(6,117),new U(4,118)),new de(28,new U(6,45),new U(14,46)),new de(30,new U(11,24),new U(16,25)),new de(30,new U(30,16),new U(2,17))),new Ze(25,Int32Array.from([6,32,58,84,110]),new de(26,new U(8,106),new U(4,107)),new de(28,new U(8,47),new U(13,48)),new de(30,new U(7,24),new U(22,25)),new de(30,new U(22,15),new U(13,16))),new Ze(26,Int32Array.from([6,30,58,86,114]),new de(28,new U(10,114),new U(2,115)),new de(28,new U(19,46),new U(4,47)),new de(28,new U(28,22),new U(6,23)),new de(30,new U(33,16),new U(4,17))),new Ze(27,Int32Array.from([6,34,62,90,118]),new de(30,new U(8,122),new U(4,123)),new de(28,new U(22,45),new U(3,46)),new de(30,new U(8,23),new U(26,24)),new de(30,new U(12,15),new U(28,16))),new Ze(28,Int32Array.from([6,26,50,74,98,122]),new de(30,new U(3,117),new U(10,118)),new de(28,new U(3,45),new U(23,46)),new de(30,new U(4,24),new U(31,25)),new de(30,new U(11,15),new U(31,16))),new Ze(29,Int32Array.from([6,30,54,78,102,126]),new de(30,new U(7,116),new U(7,117)),new de(28,new U(21,45),new U(7,46)),new de(30,new U(1,23),new U(37,24)),new de(30,new U(19,15),new U(26,16))),new Ze(30,Int32Array.from([6,26,52,78,104,130]),new de(30,new U(5,115),new U(10,116)),new de(28,new U(19,47),new U(10,48)),new de(30,new U(15,24),new U(25,25)),new de(30,new U(23,15),new U(25,16))),new Ze(31,Int32Array.from([6,30,56,82,108,134]),new de(30,new U(13,115),new U(3,116)),new de(28,new U(2,46),new U(29,47)),new de(30,new U(42,24),new U(1,25)),new de(30,new U(23,15),new U(28,16))),new Ze(32,Int32Array.from([6,34,60,86,112,138]),new de(30,new U(17,115)),new de(28,new U(10,46),new U(23,47)),new de(30,new U(10,24),new U(35,25)),new de(30,new U(19,15),new U(35,16))),new Ze(33,Int32Array.from([6,30,58,86,114,142]),new de(30,new U(17,115),new U(1,116)),new de(28,new U(14,46),new U(21,47)),new de(30,new U(29,24),new U(19,25)),new de(30,new U(11,15),new U(46,16))),new Ze(34,Int32Array.from([6,34,62,90,118,146]),new de(30,new U(13,115),new U(6,116)),new de(28,new U(14,46),new U(23,47)),new de(30,new U(44,24),new U(7,25)),new de(30,new U(59,16),new U(1,17))),new Ze(35,Int32Array.from([6,30,54,78,102,126,150]),new de(30,new U(12,121),new U(7,122)),new de(28,new U(12,47),new U(26,48)),new de(30,new U(39,24),new U(14,25)),new de(30,new U(22,15),new U(41,16))),new Ze(36,Int32Array.from([6,24,50,76,102,128,154]),new de(30,new U(6,121),new U(14,122)),new de(28,new U(6,47),new U(34,48)),new de(30,new U(46,24),new U(10,25)),new de(30,new U(2,15),new U(64,16))),new Ze(37,Int32Array.from([6,28,54,80,106,132,158]),new de(30,new U(17,122),new U(4,123)),new de(28,new U(29,46),new U(14,47)),new de(30,new U(49,24),new U(10,25)),new de(30,new U(24,15),new U(46,16))),new Ze(38,Int32Array.from([6,32,58,84,110,136,162]),new de(30,new U(4,122),new U(18,123)),new de(28,new U(13,46),new U(32,47)),new de(30,new U(48,24),new U(14,25)),new de(30,new U(42,15),new U(32,16))),new Ze(39,Int32Array.from([6,26,54,82,110,138,166]),new de(30,new U(20,117),new U(4,118)),new de(28,new U(40,47),new U(7,48)),new de(30,new U(43,24),new U(22,25)),new de(30,new U(10,15),new U(67,16))),new Ze(40,Int32Array.from([6,30,58,86,114,142,170]),new de(30,new U(19,118),new U(6,119)),new de(28,new U(18,47),new U(31,48)),new de(30,new U(34,24),new U(34,25)),new de(30,new U(20,15),new U(61,16)))];var Yt;(function(T){T[T.DATA_MASK_000=0]="DATA_MASK_000",T[T.DATA_MASK_001=1]="DATA_MASK_001",T[T.DATA_MASK_010=2]="DATA_MASK_010",T[T.DATA_MASK_011=3]="DATA_MASK_011",T[T.DATA_MASK_100=4]="DATA_MASK_100",T[T.DATA_MASK_101=5]="DATA_MASK_101",T[T.DATA_MASK_110=6]="DATA_MASK_110",T[T.DATA_MASK_111=7]="DATA_MASK_111"})(Yt||(Yt={}));class ct{constructor(e,n){this.value=e,this.isMasked=n}unmaskBitMatrix(e,n){for(let i=0;i<n;i++)for(let o=0;o<n;o++)this.isMasked(i,o)&&e.flip(o,i)}}ct.values=new Map([[Yt.DATA_MASK_000,new ct(Yt.DATA_MASK_000,(T,e)=>(T+e&1)===0)],[Yt.DATA_MASK_001,new ct(Yt.DATA_MASK_001,(T,e)=>(T&1)===0)],[Yt.DATA_MASK_010,new ct(Yt.DATA_MASK_010,(T,e)=>e%3===0)],[Yt.DATA_MASK_011,new ct(Yt.DATA_MASK_011,(T,e)=>(T+e)%3===0)],[Yt.DATA_MASK_100,new ct(Yt.DATA_MASK_100,(T,e)=>(Math.floor(T/2)+Math.floor(e/3)&1)===0)],[Yt.DATA_MASK_101,new ct(Yt.DATA_MASK_101,(T,e)=>T*e%6===0)],[Yt.DATA_MASK_110,new ct(Yt.DATA_MASK_110,(T,e)=>T*e%6<3)],[Yt.DATA_MASK_111,new ct(Yt.DATA_MASK_111,(T,e)=>(T+e+T*e%3&1)===0)]]);class wa{constructor(e){const n=e.getHeight();if(n<21||(n&3)!==1)throw new z;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let a=0;a<6;a++)e=this.copyBit(a,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let a=5;a>=0;a--)e=this.copyBit(8,a,e);const n=this.bitMatrix.getHeight();let i=0;const o=n-7;for(let a=n-1;a>=o;a--)i=this.copyBit(8,a,i);for(let a=n-8;a<n;a++)i=this.copyBit(a,8,i);if(this.parsedFormatInfo=hn.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new z}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return Ze.getVersionForNumber(n);let i=0;const o=e-11;for(let c=5;c>=0;c--)for(let f=e-9;f>=o;f--)i=this.copyBit(f,c,i);let a=Ze.decodeVersionInformation(i);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;i=0;for(let c=5;c>=0;c--)for(let f=e-9;f>=o;f--)i=this.copyBit(c,f,i);if(a=Ze.decodeVersionInformation(i),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new z}copyBit(e,n,i){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?i<<1|1:i<<1}readCodewords(){const e=this.readFormatInformation(),n=this.readVersion(),i=ct.values.get(e.getDataMask()),o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o);const a=n.buildFunctionPattern();let c=!0;const f=new Uint8Array(n.getTotalCodewords());let m=0,w=0,j=0;for(let _=o-1;_>0;_-=2){_===6&&_--;for(let L=0;L<o;L++){const H=c?o-1-L:L;for(let te=0;te<2;te++)a.get(_-te,H)||(j++,w<<=1,this.bitMatrix.get(_-te,H)&&(w|=1),j===8&&(f[m++]=w,j=0,w=0))}c=!c}if(m!==n.getTotalCodewords())throw new z;return f}remask(){if(this.parsedFormatInfo===null)return;const e=ct.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let n=0,i=e.getWidth();n<i;n++)for(let o=n+1,a=e.getHeight();o<a;o++)e.get(n,o)!==e.get(o,n)&&(e.flip(o,n),e.flip(n,o))}}class Ds{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n,i){if(e.length!==n.getTotalCodewords())throw new k;const o=n.getECBlocksForLevel(i);let a=0;const c=o.getECBlocks();for(const te of c)a+=te.getCount();const f=new Array(a);let m=0;for(const te of c)for(let ie=0;ie<te.getCount();ie++){const ae=te.getDataCodewords(),ge=o.getECCodewordsPerBlock()+ae;f[m++]=new Ds(ae,new Uint8Array(ge))}const w=f[0].codewords.length;let j=f.length-1;for(;j>=0&&f[j].codewords.length!==w;)j--;j++;const _=w-o.getECCodewordsPerBlock();let L=0;for(let te=0;te<_;te++)for(let ie=0;ie<m;ie++)f[ie].codewords[te]=e[L++];for(let te=j;te<m;te++)f[te].codewords[_]=e[L++];const H=f[0].codewords.length;for(let te=_;te<H;te++)for(let ie=0;ie<m;ie++){const ae=ie<j?te:te+1;f[ie].codewords[ae]=e[L++]}return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Pn;(function(T){T[T.TERMINATOR=0]="TERMINATOR",T[T.NUMERIC=1]="NUMERIC",T[T.ALPHANUMERIC=2]="ALPHANUMERIC",T[T.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",T[T.BYTE=4]="BYTE",T[T.ECI=5]="ECI",T[T.KANJI=6]="KANJI",T[T.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",T[T.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",T[T.HANZI=9]="HANZI"})(Pn||(Pn={}));class qe{constructor(e,n,i,o){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=i,this.bits=o,qe.FOR_BITS.set(o,this),qe.FOR_VALUE.set(e,this)}static forBits(e){const n=qe.FOR_BITS.get(e);if(n===void 0)throw new k;return n}getCharacterCountBits(e){const n=e.getVersionNumber();let i;return n<=9?i=0:n<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof qe))return!1;const n=e;return this.value===n.value}toString(){return this.stringValue}}qe.FOR_BITS=new Map,qe.FOR_VALUE=new Map,qe.TERMINATOR=new qe(Pn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),qe.NUMERIC=new qe(Pn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),qe.ALPHANUMERIC=new qe(Pn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),qe.STRUCTURED_APPEND=new qe(Pn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),qe.BYTE=new qe(Pn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),qe.ECI=new qe(Pn.ECI,"ECI",Int32Array.from([0,0,0]),7),qe.KANJI=new qe(Pn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),qe.FNC1_FIRST_POSITION=new qe(Pn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),qe.FNC1_SECOND_POSITION=new qe(Pn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),qe.HANZI=new qe(Pn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ot{static decode(e,n,i,o){const a=new Io(e);let c=new le;const f=new Array;let m=-1,w=-1;try{let j=null,_=!1,L;do{if(a.available()<4)L=qe.TERMINATOR;else{const H=a.readBits(4);L=qe.forBits(H)}switch(L){case qe.TERMINATOR:break;case qe.FNC1_FIRST_POSITION:case qe.FNC1_SECOND_POSITION:_=!0;break;case qe.STRUCTURED_APPEND:if(a.available()<16)throw new z;m=a.readBits(8),w=a.readBits(8);break;case qe.ECI:const H=Ot.parseECIValue(a);if(j=he.getCharacterSetECIByValue(H),j===null)throw new z;break;case qe.HANZI:const te=a.readBits(4),ie=a.readBits(L.getCharacterCountBits(n));te===Ot.GB2312_SUBSET&&Ot.decodeHanziSegment(a,c,ie);break;default:const ae=a.readBits(L.getCharacterCountBits(n));switch(L){case qe.NUMERIC:Ot.decodeNumericSegment(a,c,ae);break;case qe.ALPHANUMERIC:Ot.decodeAlphanumericSegment(a,c,ae,_);break;case qe.BYTE:Ot.decodeByteSegment(a,c,ae,j,f,o);break;case qe.KANJI:Ot.decodeKanjiSegment(a,c,ae);break;default:throw new z}break}}while(L!==qe.TERMINATOR)}catch{throw new z}return new De(e,c.toString(),f.length===0?null:f,i===null?null:i.toString(),m,w)}static decodeHanziSegment(e,n,i){if(i*13>e.available())throw new z;const o=new Uint8Array(2*i);let a=0;for(;i>0;){const c=e.readBits(13);let f=c/96<<8&4294967295|c%96;f<959?f+=41377:f+=42657,o[a]=f>>8&255,o[a+1]=f&255,a+=2,i--}try{n.append(we.decode(o,xe.GB2312))}catch(c){throw new z(c)}}static decodeKanjiSegment(e,n,i){if(i*13>e.available())throw new z;const o=new Uint8Array(2*i);let a=0;for(;i>0;){const c=e.readBits(13);let f=c/192<<8&4294967295|c%192;f<7936?f+=33088:f+=49472,o[a]=f>>8,o[a+1]=f,a+=2,i--}try{n.append(we.decode(o,xe.SHIFT_JIS))}catch(c){throw new z(c)}}static decodeByteSegment(e,n,i,o,a,c){if(8*i>e.available())throw new z;const f=new Uint8Array(i);for(let w=0;w<i;w++)f[w]=e.readBits(8);let m;o===null?m=xe.guessEncoding(f,c):m=o.getName();try{n.append(we.decode(f,m))}catch(w){throw new z(w)}a.push(f)}static toAlphaNumericChar(e){if(e>=Ot.ALPHANUMERIC_CHARS.length)throw new z;return Ot.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,n,i,o){const a=n.length();for(;i>1;){if(e.available()<11)throw new z;const c=e.readBits(11);n.append(Ot.toAlphaNumericChar(Math.floor(c/45))),n.append(Ot.toAlphaNumericChar(c%45)),i-=2}if(i===1){if(e.available()<6)throw new z;n.append(Ot.toAlphaNumericChar(e.readBits(6)))}if(o)for(let c=a;c<n.length();c++)n.charAt(c)==="%"&&(c<n.length()-1&&n.charAt(c+1)==="%"?n.deleteCharAt(c+1):n.setCharAt(c,""))}static decodeNumericSegment(e,n,i){for(;i>=3;){if(e.available()<10)throw new z;const o=e.readBits(10);if(o>=1e3)throw new z;n.append(Ot.toAlphaNumericChar(Math.floor(o/100))),n.append(Ot.toAlphaNumericChar(Math.floor(o/10)%10)),n.append(Ot.toAlphaNumericChar(o%10)),i-=3}if(i===2){if(e.available()<7)throw new z;const o=e.readBits(7);if(o>=100)throw new z;n.append(Ot.toAlphaNumericChar(Math.floor(o/10))),n.append(Ot.toAlphaNumericChar(o%10))}else if(i===1){if(e.available()<4)throw new z;const o=e.readBits(4);if(o>=10)throw new z;n.append(Ot.toAlphaNumericChar(o))}}static parseECIValue(e){const n=e.readBits(8);if((n&128)===0)return n&127;if((n&192)===128){const i=e.readBits(8);return(n&63)<<8&4294967295|i}if((n&224)===192){const i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new z}}Ot.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ot.GB2312_SUBSET=1;class jo{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const n=e[0];e[0]=e[2],e[2]=n}}class ko{constructor(){this.rsDecoder=new ln(We.QR_CODE_FIELD_256)}decodeBooleanArray(e,n){return this.decodeBitMatrix(ne.parseFromBooleanArray(e),n)}decodeBitMatrix(e,n){const i=new wa(e);let o=null;try{return this.decodeBitMatrixParser(i,n)}catch(a){o=a}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const a=this.decodeBitMatrixParser(i,n);return a.setOther(new jo(!0)),a}catch(a){throw o!==null?o:a}}decodeBitMatrixParser(e,n){const i=e.readVersion(),o=e.readFormatInformation().getErrorCorrectionLevel(),a=e.readCodewords(),c=Ds.getDataBlocks(a,i,o);let f=0;for(const j of c)f+=j.getNumDataCodewords();const m=new Uint8Array(f);let w=0;for(const j of c){const _=j.getCodewords(),L=j.getNumDataCodewords();this.correctErrors(_,L);for(let H=0;H<L;H++)m[w++]=_[H]}return Ot.decode(m,i,o,n)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new X}for(let o=0;o<n;o++)e[o]=i[o]}}class bi extends Le{constructor(e,n,i){super(e,n),this.estimatedModuleSize=i}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const o=Math.abs(e-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const o=(this.getX()+n)/2,a=(this.getY()+e)/2,c=(this.estimatedModuleSize+i)/2;return new bi(o,a,c)}}class cr{constructor(e,n,i,o,a,c,f){this.image=e,this.startX=n,this.startY=i,this.width=o,this.height=a,this.moduleSize=c,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,n=this.height,i=this.width,o=e+i,a=this.startY+n/2,c=new Int32Array(3),f=this.image;for(let m=0;m<n;m++){const w=a+((m&1)===0?Math.floor((m+1)/2):-Math.floor((m+1)/2));c[0]=0,c[1]=0,c[2]=0;let j=e;for(;j<o&&!f.get(j,w);)j++;let _=0;for(;j<o;){if(f.get(j,w))if(_===1)c[1]++;else if(_===2){if(this.foundPatternCross(c)){const L=this.handlePossibleCenter(c,w,j);if(L!==null)return L}c[0]=c[2],c[1]=1,c[2]=0,_=1}else c[++_]++;else _===1&&_++,c[_]++;j++}if(this.foundPatternCross(c)){const L=this.handlePossibleCenter(c,w,o);if(L!==null)return L}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new G}static centerFromEnd(e,n){return n-e[2]-e[1]/2}foundPatternCross(e){const n=this.moduleSize,i=n/2;for(let o=0;o<3;o++)if(Math.abs(n-e[o])>=i)return!1;return!0}crossCheckVertical(e,n,i,o){const a=this.image,c=a.getHeight(),f=this.crossCheckStateCount;f[0]=0,f[1]=0,f[2]=0;let m=e;for(;m>=0&&a.get(n,m)&&f[1]<=i;)f[1]++,m--;if(m<0||f[1]>i)return NaN;for(;m>=0&&!a.get(n,m)&&f[0]<=i;)f[0]++,m--;if(f[0]>i)return NaN;for(m=e+1;m<c&&a.get(n,m)&&f[1]<=i;)f[1]++,m++;if(m===c||f[1]>i)return NaN;for(;m<c&&!a.get(n,m)&&f[2]<=i;)f[2]++,m++;if(f[2]>i)return NaN;const w=f[0]+f[1]+f[2];return 5*Math.abs(w-o)>=2*o?NaN:this.foundPatternCross(f)?cr.centerFromEnd(f,m):NaN}handlePossibleCenter(e,n,i){const o=e[0]+e[1]+e[2],a=cr.centerFromEnd(e,i),c=this.crossCheckVertical(n,a,2*e[1],o);if(!isNaN(c)){const f=(e[0]+e[1]+e[2])/3;for(const w of this.possibleCenters)if(w.aboutEquals(f,c,a))return w.combineEstimate(c,a,f);const m=new bi(a,c,f);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class yr extends Le{constructor(e,n,i,o){super(e,n),this.estimatedModuleSize=i,this.count=o,o===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const o=Math.abs(e-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const o=this.count+1,a=(this.count*this.getX()+n)/o,c=(this.count*this.getY()+e)/o,f=(this.count*this.estimatedModuleSize+i)/o;return new yr(a,c,f,o)}}class Gr{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Wt{constructor(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const n=e!=null&&e.get(Z.TRY_HARDER)!==void 0,i=e!=null&&e.get(Z.PURE_BARCODE)!==void 0,o=this.image,a=o.getHeight(),c=o.getWidth();let f=Math.floor(3*a/(4*Wt.MAX_MODULES));(f<Wt.MIN_SKIP||n)&&(f=Wt.MIN_SKIP);let m=!1;const w=new Int32Array(5);for(let _=f-1;_<a&&!m;_+=f){w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0;let L=0;for(let H=0;H<c;H++)if(o.get(H,_))(L&1)===1&&L++,w[L]++;else if((L&1)===0)if(L===4)if(Wt.foundPatternCross(w)){if(this.handlePossibleCenter(w,_,H,i)===!0)if(f=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const ie=this.findRowSkip();ie>w[2]&&(_+=ie-w[2]-f,H=c-1)}else{w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,L=3;continue}L=0,w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0}else w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,L=3;else w[++L]++;else w[L]++;Wt.foundPatternCross(w)&&this.handlePossibleCenter(w,_,c,i)===!0&&(f=w[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const j=this.selectBestPatterns();return Le.orderBestPatterns(j),new Gr(j)}static centerFromEnd(e,n){return n-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let n=0;for(let a=0;a<5;a++){const c=e[a];if(c===0)return!1;n+=c}if(n<7)return!1;const i=n/7,o=i/2;return Math.abs(i-e[0])<o&&Math.abs(i-e[1])<o&&Math.abs(3*i-e[2])<3*o&&Math.abs(i-e[3])<o&&Math.abs(i-e[4])<o}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,n,i,o){const a=this.getCrossCheckStateCount();let c=0;const f=this.image;for(;e>=c&&n>=c&&f.get(n-c,e-c);)a[2]++,c++;if(e<c||n<c)return!1;for(;e>=c&&n>=c&&!f.get(n-c,e-c)&&a[1]<=i;)a[1]++,c++;if(e<c||n<c||a[1]>i)return!1;for(;e>=c&&n>=c&&f.get(n-c,e-c)&&a[0]<=i;)a[0]++,c++;if(a[0]>i)return!1;const m=f.getHeight(),w=f.getWidth();for(c=1;e+c<m&&n+c<w&&f.get(n+c,e+c);)a[2]++,c++;if(e+c>=m||n+c>=w)return!1;for(;e+c<m&&n+c<w&&!f.get(n+c,e+c)&&a[3]<i;)a[3]++,c++;if(e+c>=m||n+c>=w||a[3]>=i)return!1;for(;e+c<m&&n+c<w&&f.get(n+c,e+c)&&a[4]<i;)a[4]++,c++;if(a[4]>=i)return!1;const j=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(j-o)<2*o&&Wt.foundPatternCross(a)}crossCheckVertical(e,n,i,o){const a=this.image,c=a.getHeight(),f=this.getCrossCheckStateCount();let m=e;for(;m>=0&&a.get(n,m);)f[2]++,m--;if(m<0)return NaN;for(;m>=0&&!a.get(n,m)&&f[1]<=i;)f[1]++,m--;if(m<0||f[1]>i)return NaN;for(;m>=0&&a.get(n,m)&&f[0]<=i;)f[0]++,m--;if(f[0]>i)return NaN;for(m=e+1;m<c&&a.get(n,m);)f[2]++,m++;if(m===c)return NaN;for(;m<c&&!a.get(n,m)&&f[3]<i;)f[3]++,m++;if(m===c||f[3]>=i)return NaN;for(;m<c&&a.get(n,m)&&f[4]<i;)f[4]++,m++;if(f[4]>=i)return NaN;const w=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(w-o)>=2*o?NaN:Wt.foundPatternCross(f)?Wt.centerFromEnd(f,m):NaN}crossCheckHorizontal(e,n,i,o){const a=this.image,c=a.getWidth(),f=this.getCrossCheckStateCount();let m=e;for(;m>=0&&a.get(m,n);)f[2]++,m--;if(m<0)return NaN;for(;m>=0&&!a.get(m,n)&&f[1]<=i;)f[1]++,m--;if(m<0||f[1]>i)return NaN;for(;m>=0&&a.get(m,n)&&f[0]<=i;)f[0]++,m--;if(f[0]>i)return NaN;for(m=e+1;m<c&&a.get(m,n);)f[2]++,m++;if(m===c)return NaN;for(;m<c&&!a.get(m,n)&&f[3]<i;)f[3]++,m++;if(m===c||f[3]>=i)return NaN;for(;m<c&&a.get(m,n)&&f[4]<i;)f[4]++,m++;if(f[4]>=i)return NaN;const w=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(w-o)>=o?NaN:Wt.foundPatternCross(f)?Wt.centerFromEnd(f,m):NaN}handlePossibleCenter(e,n,i,o){const a=e[0]+e[1]+e[2]+e[3]+e[4];let c=Wt.centerFromEnd(e,i),f=this.crossCheckVertical(n,Math.floor(c),e[2],a);if(!isNaN(f)&&(c=this.crossCheckHorizontal(Math.floor(c),Math.floor(f),e[2],a),!isNaN(c)&&(!o||this.crossCheckDiagonal(Math.floor(f),Math.floor(c),e[2],a)))){const m=a/7;let w=!1;const j=this.possibleCenters;for(let _=0,L=j.length;_<L;_++){const H=j[_];if(H.aboutEquals(m,f,c)){j[_]=H.combineEstimate(f,c,m),w=!0;break}}if(!w){const _=new yr(c,f,m);j.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(const i of this.possibleCenters)if(i.getCount()>=Wt.CENTER_QUORUM)if(n==null)n=i;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-i.getX())-Math.abs(n.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,n=0;const i=this.possibleCenters.length;for(const c of this.possibleCenters)c.getCount()>=Wt.CENTER_QUORUM&&(e++,n+=c.getEstimatedModuleSize());if(e<3)return!1;const o=n/i;let a=0;for(const c of this.possibleCenters)a+=Math.abs(c.getEstimatedModuleSize()-o);return a<=.05*n}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new G;const n=this.possibleCenters;let i;if(e>3){let o=0,a=0;for(const m of this.possibleCenters){const w=m.getEstimatedModuleSize();o+=w,a+=w*w}i=o/e;let c=Math.sqrt(a/e-i*i);n.sort((m,w)=>{const j=Math.abs(w.getEstimatedModuleSize()-i),_=Math.abs(m.getEstimatedModuleSize()-i);return j<_?-1:j>_?1:0});const f=Math.max(.2*i,c);for(let m=0;m<n.length&&n.length>3;m++){const w=n[m];Math.abs(w.getEstimatedModuleSize()-i)>f&&(n.splice(m,1),m--)}}if(n.length>3){let o=0;for(const a of n)o+=a.getEstimatedModuleSize();i=o/n.length,n.sort((a,c)=>{if(c.getCount()===a.getCount()){const f=Math.abs(c.getEstimatedModuleSize()-i),m=Math.abs(a.getEstimatedModuleSize()-i);return f<m?1:f>m?-1:0}else return c.getCount()-a.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}Wt.CENTER_QUORUM=2,Wt.MIN_SKIP=3,Wt.MAX_MODULES=57;class Rr{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(Z.NEED_RESULT_POINT_CALLBACK);const i=new Wt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(i)}processFinderPatternInfo(e){const n=e.getTopLeft(),i=e.getTopRight(),o=e.getBottomLeft(),a=this.calculateModuleSize(n,i,o);if(a<1)throw new G("No pattern found in proccess finder.");const c=Rr.computeDimension(n,i,o,a),f=Ze.getProvisionalVersionForDimension(c),m=f.getDimensionForVersion()-7;let w=null;if(f.getAlignmentPatternCenters().length>0){const H=i.getX()-n.getX()+o.getX(),te=i.getY()-n.getY()+o.getY(),ie=1-3/m,ae=Math.floor(n.getX()+ie*(H-n.getX())),ge=Math.floor(n.getY()+ie*(te-n.getY()));for(let Te=4;Te<=16;Te<<=1)try{w=this.findAlignmentInRegion(a,ae,ge,Te);break}catch(_e){if(!(_e instanceof G))throw _e}}const j=Rr.createTransform(n,i,o,w,c),_=Rr.sampleGrid(this.image,j,c);let L;return w===null?L=[o,n,i]:L=[o,n,i,w],new Ur(_,L)}static createTransform(e,n,i,o,a){const c=a-3.5;let f,m,w,j;return o!==null?(f=o.getX(),m=o.getY(),w=c-3,j=w):(f=n.getX()-e.getX()+i.getX(),m=n.getY()-e.getY()+i.getY(),w=c,j=c),An.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,w,j,3.5,c,e.getX(),e.getY(),n.getX(),n.getY(),f,m,i.getX(),i.getY())}static sampleGrid(e,n,i){return Vn.getInstance().sampleGridWithTransform(e,i,i,n)}static computeDimension(e,n,i,o){const a=ot.round(Le.distance(e,n)/o),c=ot.round(Le.distance(e,i)/o);let f=Math.floor((a+c)/2)+7;switch(f&3){case 0:f++;break;case 2:f--;break;case 3:throw new G("Dimensions could be not found.")}return f}calculateModuleSize(e,n,i){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,i))/2}calculateModuleSizeOneWay(e,n){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(i)?o/7:isNaN(o)?i/7:(i+o)/14}sizeOfBlackWhiteBlackRunBothWays(e,n,i,o){let a=this.sizeOfBlackWhiteBlackRun(e,n,i,o),c=1,f=e-(i-e);f<0?(c=e/(e-f),f=0):f>=this.image.getWidth()&&(c=(this.image.getWidth()-1-e)/(f-e),f=this.image.getWidth()-1);let m=Math.floor(n-(o-n)*c);return c=1,m<0?(c=n/(n-m),m=0):m>=this.image.getHeight()&&(c=(this.image.getHeight()-1-n)/(m-n),m=this.image.getHeight()-1),f=Math.floor(e+(f-e)*c),a+=this.sizeOfBlackWhiteBlackRun(e,n,f,m),a-1}sizeOfBlackWhiteBlackRun(e,n,i,o){const a=Math.abs(o-n)>Math.abs(i-e);if(a){let H=e;e=n,n=H,H=i,i=o,o=H}const c=Math.abs(i-e),f=Math.abs(o-n);let m=-c/2;const w=e<i?1:-1,j=n<o?1:-1;let _=0;const L=i+w;for(let H=e,te=n;H!==L;H+=w){const ie=a?te:H,ae=a?H:te;if(_===1===this.image.get(ie,ae)){if(_===2)return ot.distance(H,te,e,n);_++}if(m+=f,m>0){if(te===o)break;te+=j,m-=c}}return _===2?ot.distance(i+w,o,e,n):NaN}findAlignmentInRegion(e,n,i,o){const a=Math.floor(o*e),c=Math.max(0,n-a),f=Math.min(this.image.getWidth()-1,n+a);if(f-c<e*3)throw new G("Alignment top exceeds estimated module size.");const m=Math.max(0,i-a),w=Math.min(this.image.getHeight()-1,i+a);if(w-m<e*3)throw new G("Alignment bottom exceeds estimated module size.");return new cr(this.image,c,m,f-c,w-m,e,this.resultPointCallback).find()}}class jn{constructor(){this.decoder=new ko}getDecoder(){return this.decoder}decode(e,n){let i,o;if(n!=null&&n.get(Z.PURE_BARCODE)!==void 0){const m=jn.extractPureBits(e.getBlackMatrix());i=this.decoder.decodeBitMatrix(m,n),o=jn.NO_POINTS}else{const m=new Rr(e.getBlackMatrix()).detect(n);i=this.decoder.decodeBitMatrix(m.getBits(),n),o=m.getPoints()}i.getOther()instanceof jo&&i.getOther().applyMirroredCorrection(o);const a=new be(i.getText(),i.getRawBytes(),void 0,o,Ce.QR_CODE,void 0),c=i.getByteSegments();c!==null&&a.putMetadata(fe.BYTE_SEGMENTS,c);const f=i.getECLevel();return f!==null&&a.putMetadata(fe.ERROR_CORRECTION_LEVEL,f),i.hasStructuredAppend()&&(a.putMetadata(fe.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),a.putMetadata(fe.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),a}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n===null||i===null)throw new G;const o=this.moduleSize(n,e);let a=n[1],c=i[1],f=n[0],m=i[0];if(f>=m||a>=c)throw new G;if(c-a!==m-f&&(m=f+(c-a),m>=e.getWidth()))throw new G;const w=Math.round((m-f+1)/o),j=Math.round((c-a+1)/o);if(w<=0||j<=0)throw new G;if(j!==w)throw new G;const _=Math.floor(o/2);a+=_,f+=_;const L=f+Math.floor((w-1)*o)-m;if(L>0){if(L>_)throw new G;f-=L}const H=a+Math.floor((j-1)*o)-c;if(H>0){if(H>_)throw new G;a-=H}const te=new ne(w,j);for(let ie=0;ie<j;ie++){const ae=a+Math.floor(ie*o);for(let ge=0;ge<w;ge++)e.get(f+Math.floor(ge*o),ae)&&te.set(ge,ie)}return te}static moduleSize(e,n){const i=n.getHeight(),o=n.getWidth();let a=e[0],c=e[1],f=!0,m=0;for(;a<o&&c<i;){if(f!==n.get(a,c)){if(++m===5)break;f=!f}a++,c++}if(a===o||c===i)throw new G;return(a-e[0])/7}}jn.NO_POINTS=new Array;class tt{PDF417Common(){}static getBitCountSum(e){return ot.sum(e)}static toIntArray(e){if(e==null||!e.length)return tt.EMPTY_INT_ARRAY;const n=new Int32Array(e.length);let i=0;for(const o of e)n[i++]=o;return n}static getCodeword(e){const n=R.binarySearch(tt.SYMBOL_TABLE,e&262143);return n<0?-1:(tt.CODEWORD_TABLE[n]-1)%tt.NUMBER_OF_CODEWORDS}}tt.NUMBER_OF_CODEWORDS=929,tt.MAX_CODEWORDS_IN_BARCODE=tt.NUMBER_OF_CODEWORDS-1,tt.MIN_ROWS_IN_BARCODE=3,tt.MAX_ROWS_IN_BARCODE=90,tt.MODULES_IN_CODEWORD=17,tt.MODULES_IN_STOP_PATTERN=18,tt.BARS_IN_MODULE=8,tt.EMPTY_INT_ARRAY=new Int32Array([]),tt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),tt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ca{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class rt{static detectMultiple(e,n,i){let o=e.getBlackMatrix(),a=rt.detect(i,o);return a.length||(o=o.clone(),o.rotate180(),a=rt.detect(i,o)),new Ca(o,a)}static detect(e,n){const i=new Array;let o=0,a=0,c=!1;for(;o<n.getHeight();){const f=rt.findVertices(n,o,a);if(f[0]==null&&f[3]==null){if(!c)break;c=!1,a=0;for(const m of i)m[1]!=null&&(o=Math.trunc(Math.max(o,m[1].getY()))),m[3]!=null&&(o=Math.max(o,Math.trunc(m[3].getY())));o+=rt.ROW_STEP;continue}if(c=!0,i.push(f),!e)break;f[2]!=null?(a=Math.trunc(f[2].getX()),o=Math.trunc(f[2].getY())):(a=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY()))}return i}static findVertices(e,n,i){const o=e.getHeight(),a=e.getWidth(),c=new Array(8);return rt.copyToResult(c,rt.findRowsWithPattern(e,o,a,n,i,rt.START_PATTERN),rt.INDEXES_START_PATTERN),c[4]!=null&&(i=Math.trunc(c[4].getX()),n=Math.trunc(c[4].getY())),rt.copyToResult(c,rt.findRowsWithPattern(e,o,a,n,i,rt.STOP_PATTERN),rt.INDEXES_STOP_PATTERN),c}static copyToResult(e,n,i){for(let o=0;o<i.length;o++)e[i[o]]=n[o]}static findRowsWithPattern(e,n,i,o,a,c){const f=new Array(4);let m=!1;const w=new Int32Array(c.length);for(;o<n;o+=rt.ROW_STEP){let _=rt.findGuardPattern(e,a,o,i,!1,c,w);if(_!=null){for(;o>0;){const L=rt.findGuardPattern(e,a,--o,i,!1,c,w);if(L!=null)_=L;else{o++;break}}f[0]=new Le(_[0],o),f[1]=new Le(_[1],o),m=!0;break}}let j=o+1;if(m){let _=0,L=Int32Array.from([Math.trunc(f[0].getX()),Math.trunc(f[1].getX())]);for(;j<n;j++){const H=rt.findGuardPattern(e,L[0],j,i,!1,c,w);if(H!=null&&Math.abs(L[0]-H[0])<rt.MAX_PATTERN_DRIFT&&Math.abs(L[1]-H[1])<rt.MAX_PATTERN_DRIFT)L=H,_=0;else{if(_>rt.SKIPPED_ROW_COUNT_MAX)break;_++}}j-=_+1,f[2]=new Le(L[0],j),f[3]=new Le(L[1],j)}return j-o<rt.BARCODE_MIN_HEIGHT&&R.fill(f,null),f}static findGuardPattern(e,n,i,o,a,c,f){R.fillWithin(f,0,f.length,0);let m=n,w=0;for(;e.get(m,i)&&m>0&&w++<rt.MAX_PIXEL_DRIFT;)m--;let j=m,_=0,L=c.length;for(let H=a;j<o;j++)if(e.get(j,i)!==H)f[_]++;else{if(_===L-1){if(rt.patternMatchVariance(f,c,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return new Int32Array([m,j]);m+=f[0]+f[1],F.arraycopy(f,2,f,0,_-1),f[_-1]=0,f[_]=0,_--}else _++;f[_]=1,H=!H}return _===L-1&&rt.patternMatchVariance(f,c,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE?new Int32Array([m,j-1]):null}static patternMatchVariance(e,n,i){let o=e.length,a=0,c=0;for(let w=0;w<o;w++)a+=e[w],c+=n[w];if(a<c)return 1/0;let f=a/c;i*=f;let m=0;for(let w=0;w<o;w++){let j=e[w],_=n[w]*f,L=j>_?j-_:_-j;if(L>i)return 1/0;m+=L}return m/a}}rt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),rt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),rt.MAX_AVG_VARIANCE=.42,rt.MAX_INDIVIDUAL_VARIANCE=.8,rt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),rt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),rt.MAX_PIXEL_DRIFT=3,rt.MAX_PATTERN_DRIFT=5,rt.SKIPPED_ROW_COUNT_MAX=25,rt.ROW_STEP=5,rt.BARCODE_MIN_HEIGHT=10;class fn{constructor(e,n){if(n.length===0)throw new k;this.field=e;let i=n.length;if(i>1&&n[0]===0){let o=1;for(;o<i&&n[o]===0;)o++;o===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-o),F.arraycopy(n,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let o=0;for(let a of this.coefficients)o=this.field.add(o,a);return o}let n=this.coefficients[0],i=this.coefficients.length;for(let o=1;o<i;o++)n=this.field.add(this.field.multiply(e,n),this.coefficients[o]);return n}add(e){if(!this.field.equals(e.field))throw new k("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){let c=n;n=i,i=c}let o=new Int32Array(i.length),a=i.length-n.length;F.arraycopy(i,0,o,0,a);for(let c=a;c<i.length;c++)o[c]=this.field.add(n[c-a],i[c]);return new fn(this.field,o)}subtract(e){if(!this.field.equals(e.field))throw new k("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof fn?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new k("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new fn(this.field,new Int32Array([0]));let n=this.coefficients,i=n.length,o=e.coefficients,a=o.length,c=new Int32Array(i+a-1);for(let f=0;f<i;f++){let m=n[f];for(let w=0;w<a;w++)c[f+w]=this.field.add(c[f+w],this.field.multiply(m,o[w]))}return new fn(this.field,c)}negative(){let e=this.coefficients.length,n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=this.field.subtract(0,this.coefficients[i]);return new fn(this.field,n)}multiplyScalar(e){if(e===0)return new fn(this.field,new Int32Array([0]));if(e===1)return this;let n=this.coefficients.length,i=new Int32Array(n);for(let o=0;o<n;o++)i[o]=this.field.multiply(this.coefficients[o],e);return new fn(this.field,i)}multiplyByMonomial(e,n){if(e<0)throw new k;if(n===0)return new fn(this.field,new Int32Array([0]));let i=this.coefficients.length,o=new Int32Array(i+e);for(let a=0;a<i;a++)o[a]=this.field.multiply(this.coefficients[a],n);return new fn(this.field,o)}toString(){let e=new le;for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);i!==0&&(i<0?(e.append(" - "),i=-i):e.length()>0&&e.append(" + "),(n===0||i!==1)&&e.append(i),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()}}class ba{add(e,n){return(e+n)%this.modulus}subtract(e,n){return(this.modulus+e-n)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new k;return this.logTable[e]}inverse(e){if(e===0)throw new st;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Si extends ba{constructor(e,n){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let i=1;for(let o=0;o<e;o++)this.expTable[o]=i,i=i*n%e;for(let o=0;o<e-1;o++)this.logTable[this.expTable[o]]=o;this.zero=new fn(this,new Int32Array([0])),this.one=new fn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new k;if(n===0)return this.zero;let i=new Int32Array(e+1);return i[0]=n,new fn(this,i)}}Si.PDF417_GF=new Si(tt.NUMBER_OF_CODEWORDS,3);class No{constructor(){this.field=Si.PDF417_GF}decode(e,n,i){let o=new fn(this.field,e),a=new Int32Array(n),c=!1;for(let te=n;te>0;te--){let ie=o.evaluateAt(this.field.exp(te));a[n-te]=ie,ie!==0&&(c=!0)}if(!c)return 0;let f=this.field.getOne();if(i!=null)for(const te of i){let ie=this.field.exp(e.length-1-te),ae=new fn(this.field,new Int32Array([this.field.subtract(0,ie),1]));f=f.multiply(ae)}let m=new fn(this.field,a),w=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),m,n),j=w[0],_=w[1],L=this.findErrorLocations(j),H=this.findErrorMagnitudes(_,j,L);for(let te=0;te<L.length;te++){let ie=e.length-1-this.field.log(L[te]);if(ie<0)throw X.getChecksumInstance();e[ie]=this.field.subtract(e[ie],H[te])}return L.length}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){let L=e;e=n,n=L}let o=e,a=n,c=this.field.getZero(),f=this.field.getOne();for(;a.getDegree()>=Math.round(i/2);){let L=o,H=c;if(o=a,c=f,o.isZero())throw X.getChecksumInstance();a=L;let te=this.field.getZero(),ie=o.getCoefficient(o.getDegree()),ae=this.field.inverse(ie);for(;a.getDegree()>=o.getDegree()&&!a.isZero();){let ge=a.getDegree()-o.getDegree(),Te=this.field.multiply(a.getCoefficient(a.getDegree()),ae);te=te.add(this.field.buildMonomial(ge,Te)),a=a.subtract(o.multiplyByMonomial(ge,Te))}f=te.multiply(c).subtract(H).negative()}let m=f.getCoefficient(0);if(m===0)throw X.getChecksumInstance();let w=this.field.inverse(m),j=f.multiply(w),_=a.multiply(w);return[j,_]}findErrorLocations(e){let n=e.getDegree(),i=new Int32Array(n),o=0;for(let a=1;a<this.field.getSize()&&o<n;a++)e.evaluateAt(a)===0&&(i[o]=this.field.inverse(a),o++);if(o!==n)throw X.getChecksumInstance();return i}findErrorMagnitudes(e,n,i){let o=n.getDegree(),a=new Int32Array(o);for(let w=1;w<=o;w++)a[o-w]=this.field.multiply(w,n.getCoefficient(w));let c=new fn(this.field,a),f=i.length,m=new Int32Array(f);for(let w=0;w<f;w++){let j=this.field.inverse(i[w]),_=this.field.subtract(0,e.evaluateAt(j)),L=this.field.inverse(c.evaluateAt(j));m[w]=this.field.multiply(_,L)}return m}}class Qr{constructor(e,n,i,o,a){e instanceof Qr?this.constructor_2(e):this.constructor_1(e,n,i,o,a)}constructor_1(e,n,i,o,a){const c=n==null||i==null,f=o==null||a==null;if(c&&f)throw new G;c?(n=new Le(0,o.getY()),i=new Le(0,a.getY())):f&&(o=new Le(e.getWidth()-1,n.getY()),a=new Le(e.getWidth()-1,i.getY())),this.image=e,this.topLeft=n,this.bottomLeft=i,this.topRight=o,this.bottomRight=a,this.minX=Math.trunc(Math.min(n.getX(),i.getX())),this.maxX=Math.trunc(Math.max(o.getX(),a.getX())),this.minY=Math.trunc(Math.min(n.getY(),o.getY())),this.maxY=Math.trunc(Math.max(i.getY(),a.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,n){return e==null?n:n==null?e:new Qr(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)}addMissingRows(e,n,i){let o=this.topLeft,a=this.bottomLeft,c=this.topRight,f=this.bottomRight;if(e>0){let m=i?this.topLeft:this.topRight,w=Math.trunc(m.getY()-e);w<0&&(w=0);let j=new Le(m.getX(),w);i?o=j:c=j}if(n>0){let m=i?this.bottomLeft:this.bottomRight,w=Math.trunc(m.getY()+n);w>=this.image.getHeight()&&(w=this.image.getHeight()-1);let j=new Le(m.getX(),w);i?a=j:f=j}return new Qr(this.image,o,a,c,f)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class rs{constructor(e,n,i,o){this.columnCount=e,this.errorCorrectionLevel=o,this.rowCountUpperPart=n,this.rowCountLowerPart=i,this.rowCount=n+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Or{constructor(){this.buffer=""}static form(e,n){let i=-1;function o(c,f,m,w,j,_){if(c==="%%")return"%";if(n[++i]===void 0)return;c=w?parseInt(w.substr(1)):void 0;let L=j?parseInt(j.substr(1)):void 0,H;switch(_){case"s":H=n[i];break;case"c":H=n[i][0];break;case"f":H=parseFloat(n[i]).toFixed(c);break;case"p":H=parseFloat(n[i]).toPrecision(c);break;case"e":H=parseFloat(n[i]).toExponential(c);break;case"x":H=parseInt(n[i]).toString(L||16);break;case"d":H=parseFloat(parseInt(n[i],L||10).toPrecision(c)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(L);let te=parseInt(m),ie=m&&m[0]+""=="0"?"0":" ";for(;H.length<te;)H=f!==void 0?H+ie:ie+H;return H}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,o)}format(e,...n){this.buffer+=Or.form(e,n)}toString(){return this.buffer}}class vr{constructor(e){this.boundingBox=new Qr(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let n=this.getCodeword(e);if(n!=null)return n;for(let i=1;i<vr.MAX_NEARBY_DISTANCE;i++){let o=this.imageRowToCodewordIndex(e)-i;if(o>=0&&(n=this.codewords[o],n!=null)||(o=this.imageRowToCodewordIndex(e)+i,o<this.codewords.length&&(n=this.codewords[o],n!=null)))return n}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Or;let n=0;for(const i of this.codewords){if(i==null){e.format("%3d:    |   %n",n++);continue}e.format("%3d: %3d|%3d%n",n++,i.getRowNumber(),i.getValue())}return e.toString()}}vr.MAX_NEARBY_DISTANCE=5;class Hr{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)}getValue(){let e=-1,n=new Array;for(const[i,o]of this.values.entries()){const a={getKey:()=>i,getValue:()=>o};a.getValue()>e?(e=a.getValue(),n=[],n.push(a.getKey())):a.getValue()===e&&n.push(a.getKey())}return tt.toIntArray(n)}getConfidence(e){return this.values.get(e)}}class Sa extends vr{constructor(e,n){super(e),this._isLeft=n}setRowNumbers(){for(let e of this.getCodewords())e?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,e);let i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=this.imageRowToCodewordIndex(Math.trunc(a.getY())),m=-1,w=1,j=0;for(let _=c;_<f;_++){if(n[_]==null)continue;let L=n[_],H=L.getRowNumber()-m;if(H===0)j++;else if(H===1)w=Math.max(w,j),j=1,m=L.getRowNumber();else if(H<0||L.getRowNumber()>=e.getRowCount()||H>_)n[_]=null;else{let te;w>2?te=(w-2)*H:te=H;let ie=te>=_;for(let ae=1;ae<=te&&!ie;ae++)ie=n[_-ae]!=null;ie?n[_]=null:(m=L.getRowNumber(),j=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let n=new Int32Array(e.getRowCount());for(let i of this.getCodewords())if(i!=null){let o=i.getRowNumber();if(o>=n.length)continue;n[o]++}return n}adjustIncompleteIndicatorColumnRowNumbers(e){let n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),o=this._isLeft?n.getBottomLeft():n.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=this.getCodewords(),m=-1;for(let w=a;w<c;w++){if(f[w]==null)continue;let j=f[w];j.setRowNumberAsRowIndicatorColumn();let _=j.getRowNumber()-m;_===0||(_===1?m=j.getRowNumber():j.getRowNumber()>=e.getRowCount()?f[w]=null:m=j.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),n=new Hr,i=new Hr,o=new Hr,a=new Hr;for(let f of e){if(f==null)continue;f.setRowNumberAsRowIndicatorColumn();let m=f.getValue()%30,w=f.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:i.setValue(m*3+1);break;case 1:a.setValue(m/3),o.setValue(m%3);break;case 2:n.setValue(m+1);break}}if(n.getValue().length===0||i.getValue().length===0||o.getValue().length===0||a.getValue().length===0||n.getValue()[0]<1||i.getValue()[0]+o.getValue()[0]<tt.MIN_ROWS_IN_BARCODE||i.getValue()[0]+o.getValue()[0]>tt.MAX_ROWS_IN_BARCODE)return null;let c=new rs(n.getValue()[0],i.getValue()[0],o.getValue()[0],a.getValue()[0]);return this.removeIncorrectCodewords(e,c),c}removeIncorrectCodewords(e,n){for(let i=0;i<e.length;i++){let o=e[i];if(e[i]==null)continue;let a=o.getValue()%30,c=o.getRowNumber();if(c>n.getRowCount()){e[i]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:a*3+1!==n.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(a/3)!==n.getErrorCorrectionLevel()||a%3!==n.getRowCountLowerPart())&&(e[i]=null);break;case 2:a+1!==n.getColumnCount()&&(e[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class is{constructor(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=tt.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let n=1;n<this.barcodeColumnCount+1;n++){let i=this.detectionResultColumns[n].getCodewords();for(let o=0;o<i.length;o++)i[o]!=null&&(i[o].hasValidRowNumber()||this.adjustRowNumbers(n,o,i))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<e.length;i++)if(e[i]!=null&&n[i]!=null&&e[i].getRowNumber()===n[i].getRowNumber())for(let o=1;o<=this.barcodeColumnCount;o++){let a=this.detectionResultColumns[o].getCodewords()[i];a!=null&&(a.setRowNumber(e[i].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[o].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let o=n[i].getRowNumber(),a=0;for(let c=this.barcodeColumnCount+1;c>0&&a<this.ADJUST_ROW_NUMBER_SKIP;c--){let f=this.detectionResultColumns[c].getCodewords()[i];f!=null&&(a=is.adjustRowNumberIfValid(o,a,f),f.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,n=this.detectionResultColumns[0].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let o=n[i].getRowNumber(),a=0;for(let c=1;c<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;c++){let f=this.detectionResultColumns[c].getCodewords()[i];f!=null&&(a=is.adjustRowNumberIfValid(o,a,f),f.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,n,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(e)?(i.setRowNumber(e),n=0):++n),n}adjustRowNumbers(e,n,i){if(!this.detectionResultColumns[e-1])return;let o=i[n],a=this.detectionResultColumns[e-1].getCodewords(),c=a;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());let f=new Array(14);f[2]=a[n],f[3]=c[n],n>0&&(f[0]=i[n-1],f[4]=a[n-1],f[5]=c[n-1]),n>1&&(f[8]=i[n-2],f[10]=a[n-2],f[11]=c[n-2]),n<i.length-1&&(f[1]=i[n+1],f[6]=a[n+1],f[7]=c[n+1]),n<i.length-2&&(f[9]=i[n+2],f[12]=a[n+2],f[13]=c[n+2]);for(let m of f)if(is.adjustRowNumber(o,m))return}static adjustRowNumber(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,n){this.detectionResultColumns[e]=n}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let n=new Or;for(let i=0;i<e.getCodewords().length;i++){n.format("CW %3d:",i);for(let o=0;o<this.barcodeColumnCount+2;o++){if(this.detectionResultColumns[o]==null){n.format("    |   ");continue}let a=this.detectionResultColumns[o].getCodewords()[i];if(a==null){n.format("    |   ");continue}n.format(" %3d|%3d",a.getRowNumber(),a.getValue())}n.format("%n")}return n.toString()}}class Jr{constructor(e,n,i,o){this.rowNumber=Jr.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(i),this.value=Math.trunc(o)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Jr.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Jr.BARCODE_ROW_UNKNOWN=-1;class pn{static initialize(){for(let e=0;e<tt.SYMBOL_TABLE.length;e++){let n=tt.SYMBOL_TABLE[e],i=n&1;for(let o=0;o<tt.BARS_IN_MODULE;o++){let a=0;for(;(n&1)===i;)a+=1,n>>=1;i=n&1,pn.RATIOS_TABLE[e]||(pn.RATIOS_TABLE[e]=new Array(tt.BARS_IN_MODULE)),pn.RATIOS_TABLE[e][tt.BARS_IN_MODULE-o-1]=Math.fround(a/tt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let n=pn.getDecodedCodewordValue(pn.sampleBitCounts(e));return n!==-1?n:pn.getClosestDecodedValue(e)}static sampleBitCounts(e){let n=ot.sum(e),i=new Int32Array(tt.BARS_IN_MODULE),o=0,a=0;for(let c=0;c<tt.MODULES_IN_CODEWORD;c++){let f=n/(2*tt.MODULES_IN_CODEWORD)+c*n/tt.MODULES_IN_CODEWORD;a+e[o]<=f&&(a+=e[o],o++),i[o]++}return i}static getDecodedCodewordValue(e){let n=pn.getBitValue(e);return tt.getCodeword(n)===-1?-1:n}static getBitValue(e){let n=0;for(let i=0;i<e.length;i++)for(let o=0;o<e[i];o++)n=n<<1|(i%2===0?1:0);return Math.trunc(n)}static getClosestDecodedValue(e){let n=ot.sum(e),i=new Array(tt.BARS_IN_MODULE);if(n>1)for(let c=0;c<i.length;c++)i[c]=Math.fround(e[c]/n);let o=Jt.MAX_VALUE,a=-1;this.bSymbolTableReady||pn.initialize();for(let c=0;c<pn.RATIOS_TABLE.length;c++){let f=0,m=pn.RATIOS_TABLE[c];for(let w=0;w<tt.BARS_IN_MODULE;w++){let j=Math.fround(m[w]-i[w]);if(f+=Math.fround(j*j),f>=o)break}f<o&&(o=f,a=tt.SYMBOL_TABLE[c])}return a}}pn.bSymbolTableReady=!1,pn.RATIOS_TABLE=new Array(tt.SYMBOL_TABLE.length).map(T=>new Array(tt.BARS_IN_MODULE));class Ps{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class To{static parseLong(e,n=void 0){return parseInt(e,n)}}class Dr extends v{}Dr.kind="NullPointerException";class _o{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,n,i){if(e==null)throw new Dr;if(n<0||n>e.length||i<0||n+i>e.length||n+i<0)throw new V;if(i===0)return;for(let o=0;o<i;o++)this.write(e[n+o])}flush(){}close(){}}class Ms extends v{}class Ea extends _o{constructor(e=32){if(super(),this.count=0,e<0)throw new k("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let i=this.buf.length<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new Ms;i=N.MAX_VALUE}this.buf=R.copyOfUint8Array(this.buf,i)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,n,i){if(n<0||n>e.length||i<0||n+i-e.length>0)throw new V;this.ensureCapacity(this.count+i),F.arraycopy(e,n,this.buf,this.count,i),this.count+=i}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return R.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var yt;(function(T){T[T.ALPHA=0]="ALPHA",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.PUNCT=3]="PUNCT",T[T.ALPHA_SHIFT=4]="ALPHA_SHIFT",T[T.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(yt||(yt={}));function ss(){if(typeof window<"u")return window.BigInt||null;if(typeof Cl<"u")return Cl.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let os;function Zt(T){if(typeof os>"u"&&(os=ss()),os===null)throw new Error("BigInt is not supported!");return os(T)}function Ei(){let T=[];T[0]=Zt(1);let e=Zt(900);T[1]=e;for(let n=2;n<16;n++)T[n]=T[n-1]*e;return T}class me{static decode(e,n){let i=new le(""),o=he.ISO8859_1;i.enableDecoding(o);let a=1,c=e[a++],f=new Ps;for(;a<e[0];){switch(c){case me.TEXT_COMPACTION_MODE_LATCH:a=me.textCompaction(e,a,i);break;case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:a=me.byteCompaction(c,e,o,a,i);break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[a++]);break;case me.NUMERIC_COMPACTION_MODE_LATCH:a=me.numericCompaction(e,a,i);break;case me.ECI_CHARSET:he.getCharacterSetECIByValue(e[a++]);break;case me.ECI_GENERAL_PURPOSE:a+=2;break;case me.ECI_USER_DEFINED:a++;break;case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=me.decodeMacroBlock(e,a,f);break;case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:throw new z;default:a--,a=me.textCompaction(e,a,i);break}if(a<e.length)c=e[a++];else throw z.getFormatInstance()}if(i.length()===0)throw z.getFormatInstance();let m=new De(null,i.toString(),null,n);return m.setOther(f),m}static decodeMacroBlock(e,n,i){if(n+me.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw z.getFormatInstance();let o=new Int32Array(me.NUMBER_OF_SEQUENCE_CODEWORDS);for(let f=0;f<me.NUMBER_OF_SEQUENCE_CODEWORDS;f++,n++)o[f]=e[n];i.setSegmentIndex(N.parseInt(me.decodeBase900toBase10(o,me.NUMBER_OF_SEQUENCE_CODEWORDS)));let a=new le;n=me.textCompaction(e,n,a),i.setFileId(a.toString());let c=-1;for(e[n]===me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=n+1);n<e[0];)switch(e[n]){case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case me.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let f=new le;n=me.textCompaction(e,n+1,f),i.setFileName(f.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new le;n=me.textCompaction(e,n+1,m),i.setSender(m.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let w=new le;n=me.textCompaction(e,n+1,w),i.setAddressee(w.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let j=new le;n=me.numericCompaction(e,n+1,j),i.setSegmentCount(N.parseInt(j.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let _=new le;n=me.numericCompaction(e,n+1,_),i.setTimestamp(To.parseLong(_.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let L=new le;n=me.numericCompaction(e,n+1,L),i.setChecksum(N.parseInt(L.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let H=new le;n=me.numericCompaction(e,n+1,H),i.setFileSize(To.parseLong(H.toString()));break;default:throw z.getFormatInstance()}break;case me.MACRO_PDF417_TERMINATOR:n++,i.setLastSegment(!0);break;default:throw z.getFormatInstance()}if(c!==-1){let f=n-c;i.isLastSegment()&&f--,i.setOptionalData(R.copyOfRange(e,c,c+f))}return n}static textCompaction(e,n,i){let o=new Int32Array((e[0]-n)*2),a=new Int32Array((e[0]-n)*2),c=0,f=!1;for(;n<e[0]&&!f;){let m=e[n++];if(m<me.TEXT_COMPACTION_MODE_LATCH)o[c]=m/30,o[c+1]=m%30,c+=2;else switch(m){case me.TEXT_COMPACTION_MODE_LATCH:o[c++]=me.TEXT_COMPACTION_MODE_LATCH;break;case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:n--,f=!0;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[c]=me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=e[n++],a[c]=m,c++;break}}return me.decodeTextCompaction(o,a,c,i),n}static decodeTextCompaction(e,n,i,o){let a=yt.ALPHA,c=yt.ALPHA,f=0;for(;f<i;){let m=e[f],w="";switch(a){case yt.ALPHA:if(m<26)w=String.fromCharCode(65+m);else switch(m){case 26:w=" ";break;case me.LL:a=yt.LOWER;break;case me.ML:a=yt.MIXED;break;case me.PS:c=a,a=yt.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[f]);break;case me.TEXT_COMPACTION_MODE_LATCH:a=yt.ALPHA;break}break;case yt.LOWER:if(m<26)w=String.fromCharCode(97+m);else switch(m){case 26:w=" ";break;case me.AS:c=a,a=yt.ALPHA_SHIFT;break;case me.ML:a=yt.MIXED;break;case me.PS:c=a,a=yt.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[f]);break;case me.TEXT_COMPACTION_MODE_LATCH:a=yt.ALPHA;break}break;case yt.MIXED:if(m<me.PL)w=me.MIXED_CHARS[m];else switch(m){case me.PL:a=yt.PUNCT;break;case 26:w=" ";break;case me.LL:a=yt.LOWER;break;case me.AL:a=yt.ALPHA;break;case me.PS:c=a,a=yt.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[f]);break;case me.TEXT_COMPACTION_MODE_LATCH:a=yt.ALPHA;break}break;case yt.PUNCT:if(m<me.PAL)w=me.PUNCT_CHARS[m];else switch(m){case me.PAL:a=yt.ALPHA;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[f]);break;case me.TEXT_COMPACTION_MODE_LATCH:a=yt.ALPHA;break}break;case yt.ALPHA_SHIFT:if(a=c,m<26)w=String.fromCharCode(65+m);else switch(m){case 26:w=" ";break;case me.TEXT_COMPACTION_MODE_LATCH:a=yt.ALPHA;break}break;case yt.PUNCT_SHIFT:if(a=c,m<me.PAL)w=me.PUNCT_CHARS[m];else switch(m){case me.PAL:a=yt.ALPHA;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[f]);break;case me.TEXT_COMPACTION_MODE_LATCH:a=yt.ALPHA;break}break}w!==""&&o.append(w),f++}}static byteCompaction(e,n,i,o,a){let c=new Ea,f=0,m=0,w=!1;switch(e){case me.BYTE_COMPACTION_MODE_LATCH:let j=new Int32Array(6),_=n[o++];for(;o<n[0]&&!w;)switch(j[f++]=_,m=900*m+_,_=n[o++],_){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:o--,w=!0;break;default:if(f%5===0&&f>0){for(let L=0;L<6;++L)c.write(Number(Zt(m)>>Zt(8*(5-L))));m=0,f=0}break}o===n[0]&&_<me.TEXT_COMPACTION_MODE_LATCH&&(j[f++]=_);for(let L=0;L<f;L++)c.write(j[L]);break;case me.BYTE_COMPACTION_MODE_LATCH_6:for(;o<n[0]&&!w;){let L=n[o++];if(L<me.TEXT_COMPACTION_MODE_LATCH)f++,m=900*m+L;else switch(L){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:o--,w=!0;break}if(f%5===0&&f>0){for(let H=0;H<6;++H)c.write(Number(Zt(m)>>Zt(8*(5-H))));m=0,f=0}}break}return a.append(we.decode(c.toByteArray(),i)),o}static numericCompaction(e,n,i){let o=0,a=!1,c=new Int32Array(me.MAX_NUMERIC_CODEWORDS);for(;n<e[0]&&!a;){let f=e[n++];if(n===e[0]&&(a=!0),f<me.TEXT_COMPACTION_MODE_LATCH)c[o]=f,o++;else switch(f){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:n--,a=!0;break}(o%me.MAX_NUMERIC_CODEWORDS===0||f===me.NUMERIC_COMPACTION_MODE_LATCH||a)&&o>0&&(i.append(me.decodeBase900toBase10(c,o)),o=0)}return n}static decodeBase900toBase10(e,n){let i=Zt(0);for(let a=0;a<n;a++)i+=me.EXP900[n-a-1]*Zt(e[a]);let o=i.toString();if(o.charAt(0)!=="1")throw new z;return o.substring(1)}}me.TEXT_COMPACTION_MODE_LATCH=900,me.BYTE_COMPACTION_MODE_LATCH=901,me.NUMERIC_COMPACTION_MODE_LATCH=902,me.BYTE_COMPACTION_MODE_LATCH_6=924,me.ECI_USER_DEFINED=925,me.ECI_GENERAL_PURPOSE=926,me.ECI_CHARSET=927,me.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,me.MACRO_PDF417_TERMINATOR=922,me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,me.MAX_NUMERIC_CODEWORDS=15,me.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,me.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,me.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,me.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,me.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,me.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,me.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,me.PL=25,me.LL=27,me.AS=27,me.ML=28,me.AL=28,me.PS=29,me.PAL=29,me.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,me.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",me.EXP900=ss()?Ei():[],me.NUMBER_OF_SEQUENCE_CODEWORDS=2;class at{constructor(){}static decode(e,n,i,o,a,c,f){let m=new Qr(e,n,i,o,a),w=null,j=null,_;for(let te=!0;;te=!1){if(n!=null&&(w=at.getRowIndicatorColumn(e,m,n,!0,c,f)),o!=null&&(j=at.getRowIndicatorColumn(e,m,o,!1,c,f)),_=at.merge(w,j),_==null)throw G.getNotFoundInstance();let ie=_.getBoundingBox();if(te&&ie!=null&&(ie.getMinY()<m.getMinY()||ie.getMaxY()>m.getMaxY()))m=ie;else break}_.setBoundingBox(m);let L=_.getBarcodeColumnCount()+1;_.setDetectionResultColumn(0,w),_.setDetectionResultColumn(L,j);let H=w!=null;for(let te=1;te<=L;te++){let ie=H?te:L-te;if(_.getDetectionResultColumn(ie)!==void 0)continue;let ae;ie===0||ie===L?ae=new Sa(m,ie===0):ae=new vr(m),_.setDetectionResultColumn(ie,ae);let ge=-1,Te=ge;for(let _e=m.getMinY();_e<=m.getMaxY();_e++){if(ge=at.getStartColumn(_,ie,_e,H),ge<0||ge>m.getMaxX()){if(Te===-1)continue;ge=Te}let je=at.detectCodeword(e,m.getMinX(),m.getMaxX(),H,ge,_e,c,f);je!=null&&(ae.setCodeword(_e,je),Te=ge,c=Math.min(c,je.getWidth()),f=Math.max(f,je.getWidth()))}}return at.createDecoderResult(_)}static merge(e,n){if(e==null&&n==null)return null;let i=at.getBarcodeMetadata(e,n);if(i==null)return null;let o=Qr.merge(at.adjustBoundingBox(e),at.adjustBoundingBox(n));return new is(i,o)}static adjustBoundingBox(e){if(e==null)return null;let n=e.getRowHeights();if(n==null)return null;let i=at.getMax(n),o=0;for(let f of n)if(o+=i-f,f>0)break;let a=e.getCodewords();for(let f=0;o>0&&a[f]==null;f++)o--;let c=0;for(let f=n.length-1;f>=0&&(c+=i-n[f],!(n[f]>0));f--);for(let f=a.length-1;c>0&&a[f]==null;f--)c--;return e.getBoundingBox().addMissingRows(o,c,e.isLeft())}static getMax(e){let n=-1;for(let i of e)n=Math.max(n,i);return n}static getBarcodeMetadata(e,n){let i;if(e==null||(i=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();let o;return n==null||(o=n.getBarcodeMetadata())==null?i:i.getColumnCount()!==o.getColumnCount()&&i.getErrorCorrectionLevel()!==o.getErrorCorrectionLevel()&&i.getRowCount()!==o.getRowCount()?null:i}static getRowIndicatorColumn(e,n,i,o,a,c){let f=new Sa(n,o);for(let m=0;m<2;m++){let w=m===0?1:-1,j=Math.trunc(Math.trunc(i.getX()));for(let _=Math.trunc(Math.trunc(i.getY()));_<=n.getMaxY()&&_>=n.getMinY();_+=w){let L=at.detectCodeword(e,0,e.getWidth(),o,j,_,a,c);L!=null&&(f.setCodeword(_,L),o?j=L.getStartX():j=L.getEndX())}}return f}static adjustCodewordCount(e,n){let i=n[0][1],o=i.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-at.getNumberOfECCodeWords(e.getBarcodeECLevel());if(o.length===0){if(a<1||a>tt.MAX_CODEWORDS_IN_BARCODE)throw G.getNotFoundInstance();i.setValue(a)}else o[0]!==a&&i.setValue(a)}static createDecoderResult(e){let n=at.createBarcodeMatrix(e);at.adjustCodewordCount(e,n);let i=new Array,o=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],c=new Array;for(let m=0;m<e.getBarcodeRowCount();m++)for(let w=0;w<e.getBarcodeColumnCount();w++){let j=n[m][w+1].getValue(),_=m*e.getBarcodeColumnCount()+w;j.length===0?i.push(_):j.length===1?o[_]=j[0]:(c.push(_),a.push(j))}let f=new Array(a.length);for(let m=0;m<f.length;m++)f[m]=a[m];return at.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),o,tt.toIntArray(i),tt.toIntArray(c),f)}static createDecoderResultFromAmbiguousValues(e,n,i,o,a){let c=new Int32Array(o.length),f=100;for(;f-- >0;){for(let m=0;m<c.length;m++)n[o[m]]=a[m][c[m]];try{return at.decodeCodewords(n,e,i)}catch(m){if(!(m instanceof X))throw m}if(c.length===0)throw X.getChecksumInstance();for(let m=0;m<c.length;m++)if(c[m]<a[m].length-1){c[m]++;break}else if(c[m]=0,m===c.length-1)throw X.getChecksumInstance()}throw X.getChecksumInstance()}static createBarcodeMatrix(e){let n=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let o=0;o<n.length;o++)for(let a=0;a<n[o].length;a++)n[o][a]=new Hr;let i=0;for(let o of e.getDetectionResultColumns()){if(o!=null){for(let a of o.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=0){if(c>=n.length)continue;n[c][i].setValue(a.getValue())}}}i++}return n}static isValidBarcodeColumn(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1}static getStartColumn(e,n,i,o){let a=o?1:-1,c=null;if(at.isValidBarcodeColumn(e,n-a)&&(c=e.getDetectionResultColumn(n-a).getCodeword(i)),c!=null)return o?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(n).getCodewordNearby(i),c!=null)return o?c.getStartX():c.getEndX();if(at.isValidBarcodeColumn(e,n-a)&&(c=e.getDetectionResultColumn(n-a).getCodewordNearby(i)),c!=null)return o?c.getEndX():c.getStartX();let f=0;for(;at.isValidBarcodeColumn(e,n-a);){n-=a;for(let m of e.getDetectionResultColumn(n).getCodewords())if(m!=null)return(o?m.getEndX():m.getStartX())+a*f*(m.getEndX()-m.getStartX());f++}return o?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,n,i,o,a,c,f,m){a=at.adjustCodewordStartColumn(e,n,i,o,a,c);let w=at.getModuleBitCount(e,n,i,o,a,c);if(w==null)return null;let j,_=ot.sum(w);if(o)j=a+_;else{for(let te=0;te<w.length/2;te++){let ie=w[te];w[te]=w[w.length-1-te],w[w.length-1-te]=ie}j=a,a=j-_}if(!at.checkCodewordSkew(_,f,m))return null;let L=pn.getDecodedValue(w),H=tt.getCodeword(L);return H===-1?null:new Jr(a,j,at.getCodewordBucketNumber(L),H)}static getModuleBitCount(e,n,i,o,a,c){let f=a,m=new Int32Array(8),w=0,j=o?1:-1,_=o;for(;(o?f<i:f>=n)&&w<m.length;)e.get(f,c)===_?(m[w]++,f+=j):(w++,_=!_);return w===m.length||f===(o?i:n)&&w===m.length-1?m:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,n,i,o,a,c){let f=a,m=o?-1:1;for(let w=0;w<2;w++){for(;(o?f>=n:f<i)&&o===e.get(f,c);){if(Math.abs(a-f)>at.CODEWORD_SKEW_SIZE)return a;f+=m}m=-m,o=!o}return f}static checkCodewordSkew(e,n,i){return n-at.CODEWORD_SKEW_SIZE<=e&&e<=i+at.CODEWORD_SKEW_SIZE}static decodeCodewords(e,n,i){if(e.length===0)throw z.getFormatInstance();let o=1<<n+1,a=at.correctErrors(e,i,o);at.verifyCodewordCount(e,o);let c=me.decode(e,""+n);return c.setErrorsCorrected(a),c.setErasures(i.length),c}static correctErrors(e,n,i){if(n!=null&&n.length>i/2+at.MAX_ERRORS||i<0||i>at.MAX_EC_CODEWORDS)throw X.getChecksumInstance();return at.errorCorrection.decode(e,i,n)}static verifyCodewordCount(e,n){if(e.length<4)throw z.getFormatInstance();let i=e[0];if(i>e.length)throw z.getFormatInstance();if(i===0)if(n<e.length)e[0]=e.length-n;else throw z.getFormatInstance()}static getBitCountForCodeword(e){let n=new Int32Array(8),i=0,o=n.length-1;for(;!((e&1)!==i&&(i=e&1,o--,o<0));)n[o]++,e>>=1;return n}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return at.getCodewordBucketNumber(at.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let n=new Or;for(let i=0;i<e.length;i++){n.format("Row %2d: ",i);for(let o=0;o<e[i].length;o++){let a=e[i][o];a.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}n.format("%n")}return n.toString()}}at.CODEWORD_SKEW_SIZE=2,at.MAX_ERRORS=3,at.MAX_EC_CODEWORDS=512,at.errorCorrection=new No;class gn{decode(e,n=null){let i=gn.decode(e,n,!1);if(i==null||i.length===0||i[0]==null)throw G.getNotFoundInstance();return i[0]}decodeMultiple(e,n=null){try{return gn.decode(e,n,!0)}catch(i){throw i instanceof z||i instanceof X?G.getNotFoundInstance():i}}static decode(e,n,i){const o=new Array,a=rt.detectMultiple(e,n,i);for(const c of a.getPoints()){const f=at.decode(a.getBits(),c[4],c[5],c[6],c[7],gn.getMinCodewordWidth(c),gn.getMaxCodewordWidth(c)),m=new be(f.getText(),f.getRawBytes(),void 0,c,Ce.PDF_417);m.putMetadata(fe.ERROR_CORRECTION_LEVEL,f.getECLevel());const w=f.getOther();w!=null&&m.putMetadata(fe.PDF417_EXTRA_METADATA,w),o.push(m)}return o.map(c=>c)}static getMaxWidth(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMinWidth(e,n){return e==null||n==null?N.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(gn.getMaxWidth(e[0],e[4]),gn.getMaxWidth(e[6],e[2])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN),Math.max(gn.getMaxWidth(e[1],e[5]),gn.getMaxWidth(e[7],e[3])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(gn.getMinWidth(e[0],e[4]),gn.getMinWidth(e[6],e[2])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN),Math.min(gn.getMinWidth(e[1],e[5]),gn.getMinWidth(e[7],e[3])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ai extends v{}Ai.kind="ReaderException";class Bs{constructor(e,n){this.verbose=e===!0,n&&this.setHints(n)}decode(e,n){return n&&this.setHints(n),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!g(e)&&e.get(Z.TRY_HARDER)===!0,i=g(e)?null:e.get(Z.POSSIBLE_FORMATS),o=new Array;if(!g(i)){const a=i.some(c=>c===Ce.UPC_A||c===Ce.UPC_E||c===Ce.EAN_13||c===Ce.EAN_8||c===Ce.CODABAR||c===Ce.CODE_39||c===Ce.CODE_93||c===Ce.CODE_128||c===Ce.ITF||c===Ce.RSS_14||c===Ce.RSS_EXPANDED);a&&!n&&o.push(new wi(e,this.verbose)),i.includes(Ce.QR_CODE)&&o.push(new jn),i.includes(Ce.DATA_MATRIX)&&o.push(new lr),i.includes(Ce.AZTEC)&&o.push(new Zn),i.includes(Ce.PDF_417)&&o.push(new gn),a&&n&&o.push(new wi(e,this.verbose))}o.length===0&&(n||o.push(new wi(e,this.verbose)),o.push(new jn),o.push(new lr),o.push(new Zn),o.push(new gn),n&&o.push(new wi(e,this.verbose))),this.readers=o}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Ai("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(i){if(i instanceof Ai)continue}throw new G("No MultiFormat Readers were able to detect the code.")}}class as extends ve{constructor(e=null,n=500){const i=new Bs;i.setHints(e),super(i,n)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class Ls extends ve{constructor(e=500){super(new gn,e)}}class Aa extends ve{constructor(e=500){super(new jn,e)}}var Ro;(function(T){T[T.ERROR_CORRECTION=0]="ERROR_CORRECTION",T[T.CHARACTER_SET=1]="CHARACTER_SET",T[T.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",T[T.MIN_SIZE=3]="MIN_SIZE",T[T.MAX_SIZE=4]="MAX_SIZE",T[T.MARGIN=5]="MARGIN",T[T.PDF417_COMPACT=6]="PDF417_COMPACT",T[T.PDF417_COMPACTION=7]="PDF417_COMPACTION",T[T.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",T[T.AZTEC_LAYERS=9]="AZTEC_LAYERS",T[T.QR_VERSION=10]="QR_VERSION"})(Ro||(Ro={}));var rn=Ro;class Oo{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new He(e,Int32Array.from([1])))}buildGenerator(e){const n=this.cachedGenerators;if(e>=n.length){let i=n[n.length-1];const o=this.field;for(let a=n.length;a<=e;a++){const c=i.multiply(new He(o,Int32Array.from([1,o.exp(a-1+o.getGeneratorBase())])));n.push(c),i=c}}return n[e]}encode(e,n){if(n===0)throw new k("No error correction bytes");const i=e.length-n;if(i<=0)throw new k("No data bytes provided");const o=this.buildGenerator(n),a=new Int32Array(i);F.arraycopy(e,0,a,0,i);let c=new He(this.field,a);c=c.multiplyByMonomial(n,1);const m=c.divide(o)[1].getCoefficients(),w=n-m.length;for(let j=0;j<w;j++)e[i+j]=0;F.arraycopy(m,0,e,i+w,m.length)}}class Dt{constructor(){}static applyMaskPenaltyRule1(e){return Dt.applyMaskPenaltyRule1Internal(e,!0)+Dt.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let n=0;const i=e.getArray(),o=e.getWidth(),a=e.getHeight();for(let c=0;c<a-1;c++){const f=i[c];for(let m=0;m<o-1;m++){const w=f[m];w===f[m+1]&&w===i[c+1][m]&&w===i[c+1][m+1]&&n++}}return Dt.N2*n}static applyMaskPenaltyRule3(e){let n=0;const i=e.getArray(),o=e.getWidth(),a=e.getHeight();for(let c=0;c<a;c++)for(let f=0;f<o;f++){const m=i[c];f+6<o&&m[f]===1&&m[f+1]===0&&m[f+2]===1&&m[f+3]===1&&m[f+4]===1&&m[f+5]===0&&m[f+6]===1&&(Dt.isWhiteHorizontal(m,f-4,f)||Dt.isWhiteHorizontal(m,f+7,f+11))&&n++,c+6<a&&i[c][f]===1&&i[c+1][f]===0&&i[c+2][f]===1&&i[c+3][f]===1&&i[c+4][f]===1&&i[c+5][f]===0&&i[c+6][f]===1&&(Dt.isWhiteVertical(i,f,c-4,c)||Dt.isWhiteVertical(i,f,c+7,c+11))&&n++}return n*Dt.N3}static isWhiteHorizontal(e,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(let o=n;o<i;o++)if(e[o]===1)return!1;return!0}static isWhiteVertical(e,n,i,o){i=Math.max(i,0),o=Math.min(o,e.length);for(let a=i;a<o;a++)if(e[a][n]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let n=0;const i=e.getArray(),o=e.getWidth(),a=e.getHeight();for(let m=0;m<a;m++){const w=i[m];for(let j=0;j<o;j++)w[j]===1&&n++}const c=e.getHeight()*e.getWidth();return Math.floor(Math.abs(n*2-c)*10/c)*Dt.N4}static getDataMaskBit(e,n,i){let o,a;switch(e){case 0:o=i+n&1;break;case 1:o=i&1;break;case 2:o=n%3;break;case 3:o=(i+n)%3;break;case 4:o=Math.floor(i/2)+Math.floor(n/3)&1;break;case 5:a=i*n,o=(a&1)+a%3;break;case 6:a=i*n,o=(a&1)+a%3&1;break;case 7:a=i*n,o=a%3+(i+n&1)&1;break;default:throw new k("Invalid mask pattern: "+e)}return o===0}static applyMaskPenaltyRule1Internal(e,n){let i=0;const o=n?e.getHeight():e.getWidth(),a=n?e.getWidth():e.getHeight(),c=e.getArray();for(let f=0;f<o;f++){let m=0,w=-1;for(let j=0;j<a;j++){const _=n?c[f][j]:c[j][f];_===w?m++:(m>=5&&(i+=Dt.N1+(m-5)),m=1,w=_)}m>=5&&(i+=Dt.N1+(m-5))}return i}}Dt.N1=3,Dt.N2=3,Dt.N3=40,Dt.N4=10;class zs{constructor(e,n){this.width=e,this.height=n;const i=new Array(n);for(let o=0;o!==n;o++)i[o]=new Uint8Array(e);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(e,n){return this.bytes[n][e]}getArray(){return this.bytes}setNumber(e,n,i){this.bytes[n][e]=i}setBoolean(e,n,i){this.bytes[n][e]=i?1:0}clear(e){for(const n of this.bytes)R.fill(n,e)}equals(e){if(!(e instanceof zs))return!1;const n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(let i=0,o=this.height;i<o;++i){const a=this.bytes[i],c=n.bytes[i];for(let f=0,m=this.width;f<m;++f)if(a[f]!==c[f])return!1}return!0}toString(){const e=new le;for(let n=0,i=this.height;n<i;++n){const o=this.bytes[n];for(let a=0,c=this.width;a<c;++a)switch(o[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class ei{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new le;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<ei.NUM_MASK_PATTERNS}}ei.NUM_MASK_PATTERNS=8;class It extends v{}It.kind="WriterException";class $e{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,n,i,o,a){$e.clearMatrix(a),$e.embedBasicPatterns(i,a),$e.embedTypeInfo(n,o,a),$e.maybeEmbedVersionInfo(i,a),$e.embedDataBits(e,o,a)}static embedBasicPatterns(e,n){$e.embedPositionDetectionPatternsAndSeparators(n),$e.embedDarkDotAtLeftBottomCorner(n),$e.maybeEmbedPositionAdjustmentPatterns(e,n),$e.embedTimingPatterns(n)}static embedTypeInfo(e,n,i){const o=new M;$e.makeTypeInfoBits(e,n,o);for(let a=0,c=o.getSize();a<c;++a){const f=o.get(o.getSize()-1-a),m=$e.TYPE_INFO_COORDINATES[a],w=m[0],j=m[1];if(i.setBoolean(w,j,f),a<8){const _=i.getWidth()-a-1;i.setBoolean(_,8,f)}else{const L=i.getHeight()-7+(a-8);i.setBoolean(8,L,f)}}}static maybeEmbedVersionInfo(e,n){if(e.getVersionNumber()<7)return;const i=new M;$e.makeVersionInfoBits(e,i);let o=17;for(let a=0;a<6;++a)for(let c=0;c<3;++c){const f=i.get(o);o--,n.setBoolean(a,n.getHeight()-11+c,f),n.setBoolean(n.getHeight()-11+c,a,f)}}static embedDataBits(e,n,i){let o=0,a=-1,c=i.getWidth()-1,f=i.getHeight()-1;for(;c>0;){for(c===6&&(c-=1);f>=0&&f<i.getHeight();){for(let m=0;m<2;++m){const w=c-m;if(!$e.isEmpty(i.get(w,f)))continue;let j;o<e.getSize()?(j=e.get(o),++o):j=!1,n!==255&&Dt.getDataMaskBit(n,w,f)&&(j=!j),i.setBoolean(w,f,j)}f+=a}a=-a,f+=a,c-=2}if(o!==e.getSize())throw new It("Not all bits consumed: "+o+"/"+e.getSize())}static findMSBSet(e){return 32-N.numberOfLeadingZeros(e)}static calculateBCHCode(e,n){if(n===0)throw new k("0 polynomial");const i=$e.findMSBSet(n);for(e<<=i-1;$e.findMSBSet(e)>=i;)e^=n<<$e.findMSBSet(e)-i;return e}static makeTypeInfoBits(e,n,i){if(!ei.isValidMaskPattern(n))throw new It("Invalid mask pattern");const o=e.getBits()<<3|n;i.appendBits(o,5);const a=$e.calculateBCHCode(o,$e.TYPE_INFO_POLY);i.appendBits(a,10);const c=new M;if(c.appendBits($e.TYPE_INFO_MASK_PATTERN,15),i.xor(c),i.getSize()!==15)throw new It("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(e,n){n.appendBits(e.getVersionNumber(),6);const i=$e.calculateBCHCode(e.getVersionNumber(),$e.VERSION_INFO_POLY);if(n.appendBits(i,12),n.getSize()!==18)throw new It("should not happen but we got: "+n.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let n=8;n<e.getWidth()-8;++n){const i=(n+1)%2;$e.isEmpty(e.get(n,6))&&e.setNumber(n,6,i),$e.isEmpty(e.get(6,n))&&e.setNumber(6,n,i)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new It;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,n,i){for(let o=0;o<8;++o){if(!$e.isEmpty(i.get(e+o,n)))throw new It;i.setNumber(e+o,n,0)}}static embedVerticalSeparationPattern(e,n,i){for(let o=0;o<7;++o){if(!$e.isEmpty(i.get(e,n+o)))throw new It;i.setNumber(e,n+o,0)}}static embedPositionAdjustmentPattern(e,n,i){for(let o=0;o<5;++o){const a=$e.POSITION_ADJUSTMENT_PATTERN[o];for(let c=0;c<5;++c)i.setNumber(e+c,n+o,a[c])}}static embedPositionDetectionPattern(e,n,i){for(let o=0;o<7;++o){const a=$e.POSITION_DETECTION_PATTERN[o];for(let c=0;c<7;++c)i.setNumber(e+c,n+o,a[c])}}static embedPositionDetectionPatternsAndSeparators(e){const n=$e.POSITION_DETECTION_PATTERN[0].length;$e.embedPositionDetectionPattern(0,0,e),$e.embedPositionDetectionPattern(e.getWidth()-n,0,e),$e.embedPositionDetectionPattern(0,e.getWidth()-n,e);const i=8;$e.embedHorizontalSeparationPattern(0,i-1,e),$e.embedHorizontalSeparationPattern(e.getWidth()-i,i-1,e),$e.embedHorizontalSeparationPattern(0,e.getWidth()-i,e);const o=7;$e.embedVerticalSeparationPattern(o,0,e),$e.embedVerticalSeparationPattern(e.getHeight()-o-1,0,e),$e.embedVerticalSeparationPattern(o,e.getHeight()-o,e)}static maybeEmbedPositionAdjustmentPatterns(e,n){if(e.getVersionNumber()<2)return;const i=e.getVersionNumber()-1,o=$e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let a=0,c=o.length;a!==c;a++){const f=o[a];if(f>=0)for(let m=0;m!==c;m++){const w=o[m];w>=0&&$e.isEmpty(n.get(w,f))&&$e.embedPositionAdjustmentPattern(w-2,f-2,n)}}}}$e.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),$e.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),$e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),$e.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),$e.VERSION_INFO_POLY=7973,$e.TYPE_INFO_POLY=1335,$e.TYPE_INFO_MASK_PATTERN=21522;class Wl{constructor(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class jt{constructor(){}static calculateMaskPenalty(e){return Dt.applyMaskPenaltyRule1(e)+Dt.applyMaskPenaltyRule2(e)+Dt.applyMaskPenaltyRule3(e)+Dt.applyMaskPenaltyRule4(e)}static encode(e,n,i=null){let o=jt.DEFAULT_BYTE_MODE_ENCODING;const a=i!==null&&i.get(rn.CHARACTER_SET)!==void 0;a&&(o=i.get(rn.CHARACTER_SET).toString());const c=this.chooseMode(e,o),f=new M;if(c===qe.BYTE&&(a||jt.DEFAULT_BYTE_MODE_ENCODING!==o)){const _e=he.getCharacterSetECIByName(o);_e!==void 0&&this.appendECI(_e,f)}this.appendModeInfo(c,f);const m=new M;this.appendBytes(e,c,m,o);let w;if(i!==null&&i.get(rn.QR_VERSION)!==void 0){const _e=Number.parseInt(i.get(rn.QR_VERSION).toString(),10);w=Ze.getVersionForNumber(_e);const je=this.calculateBitsNeeded(c,f,m,w);if(!this.willFit(je,w,n))throw new It("Data too big for requested version")}else w=this.recommendVersion(n,c,f,m);const j=new M;j.appendBitArray(f);const _=c===qe.BYTE?m.getSizeInBytes():e.length;this.appendLengthInfo(_,w,c,j),j.appendBitArray(m);const L=w.getECBlocksForLevel(n),H=w.getTotalCodewords()-L.getTotalECCodewords();this.terminateBits(H,j);const te=this.interleaveWithECBytes(j,w.getTotalCodewords(),H,L.getNumBlocks()),ie=new ei;ie.setECLevel(n),ie.setMode(c),ie.setVersion(w);const ae=w.getDimensionForVersion(),ge=new zs(ae,ae),Te=this.chooseMaskPattern(te,n,w,ge);return ie.setMaskPattern(Te),$e.buildMatrix(te,n,w,Te,ge),ie.setMatrix(ge),ie}static recommendVersion(e,n,i,o){const a=this.calculateBitsNeeded(n,i,o,Ze.getVersionForNumber(1)),c=this.chooseVersion(a,e),f=this.calculateBitsNeeded(n,i,o,c);return this.chooseVersion(f,e)}static calculateBitsNeeded(e,n,i,o){return n.getSize()+e.getCharacterCountBits(o)+i.getSize()}static getAlphanumericCode(e){return e<jt.ALPHANUMERIC_TABLE.length?jt.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,n=null){if(he.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return qe.KANJI;let i=!1,o=!1;for(let a=0,c=e.length;a<c;++a){const f=e.charAt(a);if(jt.isDigit(f))i=!0;else if(this.getAlphanumericCode(f.charCodeAt(0))!==-1)o=!0;else return qe.BYTE}return o?qe.ALPHANUMERIC:i?qe.NUMERIC:qe.BYTE}static isOnlyDoubleByteKanji(e){let n;try{n=we.encode(e,he.SJIS)}catch{return!1}const i=n.length;if(i%2!==0)return!1;for(let o=0;o<i;o+=2){const a=n[o]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0}static chooseMaskPattern(e,n,i,o){let a=Number.MAX_SAFE_INTEGER,c=-1;for(let f=0;f<ei.NUM_MASK_PATTERNS;f++){$e.buildMatrix(e,n,i,f,o);let m=this.calculateMaskPenalty(o);m<a&&(a=m,c=f)}return c}static chooseVersion(e,n){for(let i=1;i<=40;i++){const o=Ze.getVersionForNumber(i);if(jt.willFit(e,o,n))return o}throw new It("Data too big")}static willFit(e,n,i){const o=n.getTotalCodewords(),c=n.getECBlocksForLevel(i).getTotalECCodewords(),f=o-c,m=(e+7)/8;return f>=m}static terminateBits(e,n){const i=e*8;if(n.getSize()>i)throw new It("data bits cannot fit in the QR Code"+n.getSize()+" > "+i);for(let c=0;c<4&&n.getSize()<i;++c)n.appendBit(!1);const o=n.getSize()&7;if(o>0)for(let c=o;c<8;c++)n.appendBit(!1);const a=e-n.getSizeInBytes();for(let c=0;c<a;++c)n.appendBits((c&1)===0?236:17,8);if(n.getSize()!==i)throw new It("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,n,i,o,a,c){if(o>=i)throw new It("Block ID too large");const f=e%i,m=i-f,w=Math.floor(e/i),j=w+1,_=Math.floor(n/i),L=_+1,H=w-_,te=j-L;if(H!==te)throw new It("EC bytes mismatch");if(i!==m+f)throw new It("RS blocks mismatch");if(e!==(_+H)*m+(L+te)*f)throw new It("Total bytes mismatch");o<m?(a[0]=_,c[0]=H):(a[0]=L,c[0]=te)}static interleaveWithECBytes(e,n,i,o){if(e.getSizeInBytes()!==i)throw new It("Number of bits and data bytes does not match");let a=0,c=0,f=0;const m=new Array;for(let j=0;j<o;++j){const _=new Int32Array(1),L=new Int32Array(1);jt.getNumDataBytesAndNumECBytesForBlockID(n,i,o,j,_,L);const H=_[0],te=new Uint8Array(H);e.toBytes(8*a,te,0,H);const ie=jt.generateECBytes(te,L[0]);m.push(new Wl(te,ie)),c=Math.max(c,H),f=Math.max(f,ie.length),a+=_[0]}if(i!==a)throw new It("Data bytes does not match offset");const w=new M;for(let j=0;j<c;++j)for(const _ of m){const L=_.getDataBytes();j<L.length&&w.appendBits(L[j],8)}for(let j=0;j<f;++j)for(const _ of m){const L=_.getErrorCorrectionBytes();j<L.length&&w.appendBits(L[j],8)}if(n!==w.getSizeInBytes())throw new It("Interleaving error: "+n+" and "+w.getSizeInBytes()+" differ.");return w}static generateECBytes(e,n){const i=e.length,o=new Int32Array(i+n);for(let c=0;c<i;c++)o[c]=e[c]&255;new Oo(We.QR_CODE_FIELD_256).encode(o,n);const a=new Uint8Array(n);for(let c=0;c<n;c++)a[c]=o[i+c];return a}static appendModeInfo(e,n){n.appendBits(e.getBits(),4)}static appendLengthInfo(e,n,i,o){const a=i.getCharacterCountBits(n);if(e>=1<<a)throw new It(e+" is bigger than "+((1<<a)-1));o.appendBits(e,a)}static appendBytes(e,n,i,o){switch(n){case qe.NUMERIC:jt.appendNumericBytes(e,i);break;case qe.ALPHANUMERIC:jt.appendAlphanumericBytes(e,i);break;case qe.BYTE:jt.append8BitBytes(e,i,o);break;case qe.KANJI:jt.appendKanjiBytes(e,i);break;default:throw new It("Invalid mode: "+n)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const n=jt.getDigit(e);return n>=0&&n<=9}static appendNumericBytes(e,n){const i=e.length;let o=0;for(;o<i;){const a=jt.getDigit(e.charAt(o));if(o+2<i){const c=jt.getDigit(e.charAt(o+1)),f=jt.getDigit(e.charAt(o+2));n.appendBits(a*100+c*10+f,10),o+=3}else if(o+1<i){const c=jt.getDigit(e.charAt(o+1));n.appendBits(a*10+c,7),o+=2}else n.appendBits(a,4),o++}}static appendAlphanumericBytes(e,n){const i=e.length;let o=0;for(;o<i;){const a=jt.getAlphanumericCode(e.charCodeAt(o));if(a===-1)throw new It;if(o+1<i){const c=jt.getAlphanumericCode(e.charCodeAt(o+1));if(c===-1)throw new It;n.appendBits(a*45+c,11),o+=2}else n.appendBits(a,6),o++}}static append8BitBytes(e,n,i){let o;try{o=we.encode(e,i)}catch(a){throw new It(a)}for(let a=0,c=o.length;a!==c;a++){const f=o[a];n.appendBits(f,8)}}static appendKanjiBytes(e,n){let i;try{i=we.encode(e,he.SJIS)}catch(a){throw new It(a)}const o=i.length;for(let a=0;a<o;a+=2){const c=i[a]&255,f=i[a+1]&255,m=c<<8&4294967295|f;let w=-1;if(m>=33088&&m<=40956?w=m-33088:m>=57408&&m<=60351&&(w=m-49472),w===-1)throw new It("Invalid byte sequence");const j=(w>>8)*192+(w&255);n.appendBits(j,13)}}static appendECI(e,n){n.appendBits(qe.ECI.getBits(),4),n.appendBits(e.getValue(),8)}}jt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),jt.DEFAULT_BYTE_MODE_ENCODING=he.UTF8.getName();class ti{write(e,n,i,o=null){if(e.length===0)throw new k("Found empty contents");if(n<0||i<0)throw new k("Requested dimensions are too small: "+n+"x"+i);let a=At.L,c=ti.QUIET_ZONE_SIZE;o!==null&&(o.get(rn.ERROR_CORRECTION)!==void 0&&(a=At.fromString(o.get(rn.ERROR_CORRECTION).toString())),o.get(rn.MARGIN)!==void 0&&(c=Number.parseInt(o.get(rn.MARGIN).toString(),10)));const f=jt.encode(e,a,o);return this.renderResult(f,n,i,c)}writeToDom(e,n,i,o,a=null){typeof e=="string"&&(e=document.querySelector(e));const c=this.write(n,i,o,a);e&&e.appendChild(c)}renderResult(e,n,i,o){const a=e.getMatrix();if(a===null)throw new St;const c=a.getWidth(),f=a.getHeight(),m=c+o*2,w=f+o*2,j=Math.max(n,m),_=Math.max(i,w),L=Math.min(Math.floor(j/m),Math.floor(_/w)),H=Math.floor((j-c*L)/2),te=Math.floor((_-f*L)/2),ie=this.createSVGElement(j,_);for(let ae=0,ge=te;ae<f;ae++,ge+=L)for(let Te=0,_e=H;Te<c;Te++,_e+=L)if(a.get(Te,ae)===1){const je=this.createSvgRectElement(_e,ge,L,L);ie.appendChild(je)}return ie}createSVGElement(e,n){const i=document.createElementNS(ti.SVG_NS,"svg");return i.setAttributeNS(null,"height",e.toString()),i.setAttributeNS(null,"width",n.toString()),i}createSvgRectElement(e,n,i,o){const a=document.createElementNS(ti.SVG_NS,"rect");return a.setAttributeNS(null,"x",e.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"height",i.toString()),a.setAttributeNS(null,"width",o.toString()),a.setAttributeNS(null,"fill","#000000"),a}}ti.QUIET_ZONE_SIZE=4,ti.SVG_NS="http://www.w3.org/2000/svg";class Ii{encode(e,n,i,o,a){if(e.length===0)throw new k("Found empty contents");if(n!==Ce.QR_CODE)throw new k("Can only encode QR_CODE, but got "+n);if(i<0||o<0)throw new k(`Requested dimensions are too small: ${i}x${o}`);let c=At.L,f=Ii.QUIET_ZONE_SIZE;a!==null&&(a.get(rn.ERROR_CORRECTION)!==void 0&&(c=At.fromString(a.get(rn.ERROR_CORRECTION).toString())),a.get(rn.MARGIN)!==void 0&&(f=Number.parseInt(a.get(rn.MARGIN).toString(),10)));const m=jt.encode(e,c,a);return Ii.renderResult(m,i,o,f)}static renderResult(e,n,i,o){const a=e.getMatrix();if(a===null)throw new St;const c=a.getWidth(),f=a.getHeight(),m=c+o*2,w=f+o*2,j=Math.max(n,m),_=Math.max(i,w),L=Math.min(Math.floor(j/m),Math.floor(_/w)),H=Math.floor((j-c*L)/2),te=Math.floor((_-f*L)/2),ie=new ne(j,_);for(let ae=0,ge=te;ae<f;ae++,ge+=L)for(let Te=0,_e=H;Te<c;Te++,_e+=L)a.get(Te,ae)===1&&ie.setRegion(_e,ge,L,L);return ie}}Ii.QUIET_ZONE_SIZE=4;class Ul{encode(e,n,i,o,a){let c;if(n===Ce.QR_CODE)c=new Ii;else throw new k("No encoder available for format "+n);return c.encode(e,n,i,o,a)}}class wr extends ce{constructor(e,n,i,o,a,c,f,m){if(super(c,f),this.yuvData=e,this.dataWidth=n,this.dataHeight=i,this.left=o,this.top=a,o+c>n||a+f>i)throw new k("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(c,f)}getRow(e,n){if(e<0||e>=this.getHeight())throw new k("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const o=(e+this.top)*this.dataWidth+this.left;return F.arraycopy(this.yuvData,o,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.yuvData;const i=e*n,o=new Uint8ClampedArray(i);let a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return F.arraycopy(this.yuvData,a,o,0,i),o;for(let c=0;c<n;c++){const f=c*e;F.arraycopy(this.yuvData,a,o,f,e),a+=this.dataWidth}return o}isCropSupported(){return!0}crop(e,n,i,o){return new wr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,i,o,!1)}renderThumbnail(){const e=this.getWidth()/wr.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/wr.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*n),o=this.yuvData;let a=this.top*this.dataWidth+this.left;for(let c=0;c<n;c++){const f=c*e;for(let m=0;m<e;m++){const w=o[a+m*wr.THUMBNAIL_SCALE_FACTOR]&255;i[f+m]=4278190080|w*65793}a+=this.dataWidth*wr.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/wr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/wr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,n){const i=this.yuvData;for(let o=0,a=this.top*this.dataWidth+this.left;o<n;o++,a+=this.dataWidth){const c=a+e/2;for(let f=a,m=a+e-1;f<c;f++,m--){const w=i[f];i[f]=i[m],i[m]=w}}}invert(){return new Se(this)}}wr.THUMBNAIL_SCALE_FACTOR=2;class ls extends ce{constructor(e,n,i,o,a,c,f){if(super(n,i),this.dataWidth=o,this.dataHeight=a,this.left=c,this.top=f,e.BYTES_PER_ELEMENT===4){const m=n*i,w=new Uint8ClampedArray(m);for(let j=0;j<m;j++){const _=e[j],L=_>>16&255,H=_>>7&510,te=_&255;w[j]=(L+H+te)/4&255}this.luminances=w}else this.luminances=e;if(o===void 0&&(this.dataWidth=n),a===void 0&&(this.dataHeight=i),c===void 0&&(this.left=0),f===void 0&&(this.top=0),this.left+n>this.dataWidth||this.top+i>this.dataHeight)throw new k("Crop rectangle does not fit within image data.")}getRow(e,n){if(e<0||e>=this.getHeight())throw new k("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const o=(e+this.top)*this.dataWidth+this.left;return F.arraycopy(this.luminances,o,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.luminances;const i=e*n,o=new Uint8ClampedArray(i);let a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return F.arraycopy(this.luminances,a,o,0,i),o;for(let c=0;c<n;c++){const f=c*e;F.arraycopy(this.luminances,a,o,f,e),a+=this.dataWidth}return o}isCropSupported(){return!0}crop(e,n,i,o){return new ls(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+e,this.top+n)}invert(){return new Se(this)}}class Ia extends he{static forName(e){return this.getCharacterSetECIByName(e)}}class Do{}Do.ISO_8859_1=he.ISO8859_1;class ja{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Po{static singletonList(e){return[e]}static min(e,n){return e.sort(n)[0]}}class Vl{constructor(e){this.previous=e}getPrevious(){return this.previous}}class ji extends Vl{constructor(e,n,i){super(e),this.value=n,this.bitCount=i}appendTo(e,n){e.appendBits(this.value,this.bitCount)}add(e,n){return new ji(this,e,n)}addBinaryShift(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ji(this,e,n)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+N.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Mo extends ji{constructor(e,n,i){super(e,0,0),this.binaryShiftStart=n,this.binaryShiftByteCount=i}appendTo(e,n){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(n[this.binaryShiftStart+i],8)}addBinaryShift(e,n){return new Mo(this,e,n)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Gl(T,e,n){return new Mo(T,e,n)}function cs(T,e,n){return new ji(T,e,n)}const Hl=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Xr=0,ki=1,vn=2,ka=3,dr=4,Na=new ji(null,0,0),Fs=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Ta(T){for(let e of T)R.fill(e,-1);return T[Xr][dr]=0,T[ki][dr]=0,T[ki][Xr]=28,T[ka][dr]=0,T[vn][dr]=0,T[vn][Xr]=15,T}const Bo=Ta(R.createInt32Array(6,6));class kn{constructor(e,n,i,o){this.token=e,this.mode=n,this.binaryShiftByteCount=i,this.bitCount=o}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,n){let i=this.bitCount,o=this.token;if(e!==this.mode){let c=Fs[this.mode][e];o=cs(o,c&65535,c>>16),i+=c>>16}let a=e===vn?4:5;return o=cs(o,n,a),new kn(o,e,0,i+a)}shiftAndAppend(e,n){let i=this.token,o=this.mode===vn?4:5;return i=cs(i,Bo[this.mode][e],o),i=cs(i,n,5),new kn(i,this.mode,0,this.bitCount+o+5)}addBinaryShiftChar(e){let n=this.token,i=this.mode,o=this.bitCount;if(this.mode===dr||this.mode===vn){let f=Fs[i][Xr];n=cs(n,f&65535,f>>16),o+=f>>16,i=Xr}let a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new kn(n,i,this.binaryShiftByteCount+1,o+a);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(e+1)),c}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let n=this.token;return n=Gl(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new kn(n,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let n=this.bitCount+(Fs[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=kn.calculateBinaryShiftCost(e)-kn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount}toBitArray(e){let n=[];for(let o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())n.unshift(o);let i=new M;for(const o of n)o.appendTo(i,e);return i}toString(){return xe.format("%s bits=%d bytes=%d",Hl[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}kn.INITIAL_STATE=new kn(Na,Xr,0,0);function Xl(T){const e=xe.getCharCode(" "),n=xe.getCharCode("."),i=xe.getCharCode(",");T[Xr][e]=1;const o=xe.getCharCode("Z"),a=xe.getCharCode("A");for(let L=a;L<=o;L++)T[Xr][L]=L-a+2;T[ki][e]=1;const c=xe.getCharCode("z"),f=xe.getCharCode("a");for(let L=f;L<=c;L++)T[ki][L]=L-f+2;T[vn][e]=1;const m=xe.getCharCode("9"),w=xe.getCharCode("0");for(let L=w;L<=m;L++)T[vn][L]=L-w+2;T[vn][i]=12,T[vn][n]=13;const j=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let L=0;L<j.length;L++)T[ka][xe.getCharCode(j[L])]=L;const _=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let L=0;L<_.length;L++)xe.getCharCode(_[L])>0&&(T[dr][xe.getCharCode(_[L])]=L);return T}const Lo=Xl(R.createInt32Array(5,256));class ds{constructor(e){this.text=e}encode(){const e=xe.getCharCode(" "),n=xe.getCharCode(`
`);let i=Po.singletonList(kn.INITIAL_STATE);for(let a=0;a<this.text.length;a++){let c,f=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case xe.getCharCode("\r"):c=f===n?2:0;break;case xe.getCharCode("."):c=f===e?3:0;break;case xe.getCharCode(","):c=f===e?4:0;break;case xe.getCharCode(":"):c=f===e?5:0;break;default:c=0}c>0?(i=ds.updateStateListForPair(i,a,c),a++):i=this.updateStateListForChar(i,a)}return Po.min(i,(a,c)=>a.getBitCount()-c.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,n){const i=[];for(let o of e)this.updateStateForChar(o,n,i);return ds.simplifyStates(i)}updateStateForChar(e,n,i){let o=this.text[n]&255,a=Lo[e.getMode()][o]>0,c=null;for(let f=0;f<=dr;f++){let m=Lo[f][o];if(m>0){if(c==null&&(c=e.endBinaryShift(n)),!a||f===e.getMode()||f===vn){const w=c.latchAndAppend(f,m);i.push(w)}if(!a&&Bo[e.getMode()][f]>=0){const w=c.shiftAndAppend(f,m);i.push(w)}}}if(e.getBinaryShiftByteCount()>0||Lo[e.getMode()][o]===0){let f=e.addBinaryShiftChar(n);i.push(f)}}static updateStateListForPair(e,n,i){const o=[];for(let a of e)this.updateStateForPair(a,n,i,o);return this.simplifyStates(o)}static updateStateForPair(e,n,i,o){let a=e.endBinaryShift(n);if(o.push(a.latchAndAppend(dr,i)),e.getMode()!==dr&&o.push(a.shiftAndAppend(dr,i)),i===3||i===4){let c=a.latchAndAppend(vn,16-i).latchAndAppend(vn,1);o.push(c)}if(e.getBinaryShiftByteCount()>0){let c=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);o.push(c)}}static simplifyStates(e){let n=[];for(const i of e){let o=!0;for(const a of n){if(a.isBetterThanOrEqualTo(i)){o=!1;break}i.isBetterThanOrEqualTo(a)&&(n=n.filter(c=>c!==a))}o&&n.push(i)}return n}}class gt{constructor(){}static encodeBytes(e){return gt.encode(e,gt.DEFAULT_EC_PERCENT,gt.DEFAULT_AZTEC_LAYERS)}static encode(e,n,i){let o=new ds(e).encode(),a=N.truncDivision(o.getSize()*n,100)+11,c=o.getSize()+a,f,m,w,j,_;if(i!==gt.DEFAULT_AZTEC_LAYERS){if(f=i<0,m=Math.abs(i),m>(f?gt.MAX_NB_BITS_COMPACT:gt.MAX_NB_BITS))throw new k(xe.format("Illegal value %s for layers",i));w=gt.totalBitsInLayer(m,f),j=gt.WORD_SIZE[m];let je=w-w%j;if(_=gt.stuffBits(o,j),_.getSize()+a>je)throw new k("Data to large for user specified layer");if(f&&_.getSize()>j*64)throw new k("Data to large for user specified layer")}else{j=0,_=null;for(let je=0;;je++){if(je>gt.MAX_NB_BITS)throw new k("Data too large for an Aztec code");if(f=je<=3,m=f?je+1:je,w=gt.totalBitsInLayer(m,f),c>w)continue;(_==null||j!==gt.WORD_SIZE[m])&&(j=gt.WORD_SIZE[m],_=gt.stuffBits(o,j));let ut=w-w%j;if(!(f&&_.getSize()>j*64)&&_.getSize()+a<=ut)break}}let L=gt.generateCheckWords(_,w,j),H=_.getSize()/j,te=gt.generateModeMessage(f,m,H),ie=(f?11:14)+m*4,ae=new Int32Array(ie),ge;if(f){ge=ie;for(let je=0;je<ae.length;je++)ae[je]=je}else{ge=ie+1+2*N.truncDivision(N.truncDivision(ie,2)-1,15);let je=N.truncDivision(ie,2),ut=N.truncDivision(ge,2);for(let it=0;it<je;it++){let Mn=it+N.truncDivision(it,15);ae[je-it-1]=ut-Mn-1,ae[je+it]=ut+Mn+1}}let Te=new ne(ge);for(let je=0,ut=0;je<m;je++){let it=(m-je)*4+(f?9:12);for(let Mn=0;Mn<it;Mn++){let ur=Mn*2;for(let sn=0;sn<2;sn++)L.get(ut+ur+sn)&&Te.set(ae[je*2+sn],ae[je*2+Mn]),L.get(ut+it*2+ur+sn)&&Te.set(ae[je*2+Mn],ae[ie-1-je*2-sn]),L.get(ut+it*4+ur+sn)&&Te.set(ae[ie-1-je*2-sn],ae[ie-1-je*2-Mn]),L.get(ut+it*6+ur+sn)&&Te.set(ae[ie-1-je*2-Mn],ae[je*2+sn])}ut+=it*8}if(gt.drawModeMessage(Te,f,ge,te),f)gt.drawBullsEye(Te,N.truncDivision(ge,2),5);else{gt.drawBullsEye(Te,N.truncDivision(ge,2),7);for(let je=0,ut=0;je<N.truncDivision(ie,2)-1;je+=15,ut+=16)for(let it=N.truncDivision(ge,2)&1;it<ge;it+=2)Te.set(N.truncDivision(ge,2)-ut,it),Te.set(N.truncDivision(ge,2)+ut,it),Te.set(it,N.truncDivision(ge,2)-ut),Te.set(it,N.truncDivision(ge,2)+ut)}let _e=new ja;return _e.setCompact(f),_e.setSize(ge),_e.setLayers(m),_e.setCodeWords(H),_e.setMatrix(Te),_e}static drawBullsEye(e,n,i){for(let o=0;o<i;o+=2)for(let a=n-o;a<=n+o;a++)e.set(a,n-o),e.set(a,n+o),e.set(n-o,a),e.set(n+o,a);e.set(n-i,n-i),e.set(n-i+1,n-i),e.set(n-i,n-i+1),e.set(n+i,n-i),e.set(n+i,n-i+1),e.set(n+i,n+i-1)}static generateModeMessage(e,n,i){let o=new M;return e?(o.appendBits(n-1,2),o.appendBits(i-1,6),o=gt.generateCheckWords(o,28,4)):(o.appendBits(n-1,5),o.appendBits(i-1,11),o=gt.generateCheckWords(o,40,4)),o}static drawModeMessage(e,n,i,o){let a=N.truncDivision(i,2);if(n)for(let c=0;c<7;c++){let f=a-3+c;o.get(c)&&e.set(f,a-5),o.get(c+7)&&e.set(a+5,f),o.get(20-c)&&e.set(f,a+5),o.get(27-c)&&e.set(a-5,f)}else for(let c=0;c<10;c++){let f=a-5+c+N.truncDivision(c,5);o.get(c)&&e.set(f,a-7),o.get(c+10)&&e.set(a+7,f),o.get(29-c)&&e.set(f,a+7),o.get(39-c)&&e.set(a-7,f)}}static generateCheckWords(e,n,i){let o=e.getSize()/i,a=new Oo(gt.getGF(i)),c=N.truncDivision(n,i),f=gt.bitsToWords(e,i,c);a.encode(f,c-o);let m=n%i,w=new M;w.appendBits(0,m);for(const j of Array.from(f))w.appendBits(j,i);return w}static bitsToWords(e,n,i){let o=new Int32Array(i),a,c;for(a=0,c=e.getSize()/n;a<c;a++){let f=0;for(let m=0;m<n;m++)f|=e.get(a*n+m)?1<<n-m-1:0;o[a]=f}return o}static getGF(e){switch(e){case 4:return We.AZTEC_PARAM;case 6:return We.AZTEC_DATA_6;case 8:return We.AZTEC_DATA_8;case 10:return We.AZTEC_DATA_10;case 12:return We.AZTEC_DATA_12;default:throw new k("Unsupported word size "+e)}}static stuffBits(e,n){let i=new M,o=e.getSize(),a=(1<<n)-2;for(let c=0;c<o;c+=n){let f=0;for(let m=0;m<n;m++)(c+m>=o||e.get(c+m))&&(f|=1<<n-1-m);(f&a)===a?(i.appendBits(f&a,n),c--):(f&a)===0?(i.appendBits(f|1,n),c--):i.appendBits(f,n)}return i}static totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}gt.DEFAULT_EC_PERCENT=33,gt.DEFAULT_AZTEC_LAYERS=0,gt.MAX_NB_BITS=32,gt.MAX_NB_BITS_COMPACT=4,gt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class us{encode(e,n,i,o){return this.encodeWithHints(e,n,i,o,null)}encodeWithHints(e,n,i,o,a){let c=Do.ISO_8859_1,f=gt.DEFAULT_EC_PERCENT,m=gt.DEFAULT_AZTEC_LAYERS;return a!=null&&(a.has(rn.CHARACTER_SET)&&(c=Ia.forName(a.get(rn.CHARACTER_SET).toString())),a.has(rn.ERROR_CORRECTION)&&(f=N.parseInt(a.get(rn.ERROR_CORRECTION).toString())),a.has(rn.AZTEC_LAYERS)&&(m=N.parseInt(a.get(rn.AZTEC_LAYERS).toString()))),us.encodeLayers(e,n,i,o,c,f,m)}static encodeLayers(e,n,i,o,a,c,f){if(n!==Ce.AZTEC)throw new k("Can only encode AZTEC, but got "+n);let m=gt.encode(xe.getBytes(e,a),c,f);return us.renderResult(m,i,o)}static renderResult(e,n,i){let o=e.getMatrix();if(o==null)throw new St;let a=o.getWidth(),c=o.getHeight(),f=Math.max(n,a),m=Math.max(i,c),w=Math.min(f/a,m/c),j=(f-a*w)/2,_=(m-c*w)/2,L=new ne(f,m);for(let H=0,te=_;H<c;H++,te+=w)for(let ie=0,ae=j;ie<a;ie++,ae+=w)o.get(ie,H)&&L.setRegion(ae,te,w,w);return L}}l.AbstractExpandedDecoder=So,l.ArgumentException=A,l.ArithmeticException=st,l.AztecCode=ja,l.AztecCodeReader=Zn,l.AztecCodeWriter=us,l.AztecDecoder=dt,l.AztecDetector=_r,l.AztecDetectorResult=Qi,l.AztecEncoder=gt,l.AztecHighLevelEncoder=ds,l.AztecPoint=en,l.BarcodeFormat=Ce,l.Binarizer=q,l.BinaryBitmap=O,l.BitArray=M,l.BitMatrix=ne,l.BitSource=Io,l.BrowserAztecCodeReader=yo,l.BrowserBarcodeReader=va,l.BrowserCodeReader=ve,l.BrowserDatamatrixCodeReader=Fl,l.BrowserMultiFormatReader=as,l.BrowserPDF417Reader=Ls,l.BrowserQRCodeReader=Aa,l.BrowserQRCodeSvgWriter=ti,l.CharacterSetECI=he,l.ChecksumException=X,l.Code128Reader=Pe,l.Code39Reader=tn,l.DataMatrixDecodedBitStreamParser=ar,l.DataMatrixReader=lr,l.DecodeHintType=Z,l.DecoderResult=De,l.DefaultGridSampler=yi,l.DetectorResult=Ur,l.EAN13Reader=qn,l.EncodeHintType=rn,l.Exception=v,l.FormatException=z,l.GenericGF=We,l.GenericGFPoly=He,l.GlobalHistogramBinarizer=J,l.GridSampler=xi,l.GridSamplerInstance=Vn,l.HTMLCanvasElementLuminanceSource=K,l.HybridBinarizer=oe,l.ITFReader=Ct,l.IllegalArgumentException=k,l.IllegalStateException=St,l.InvertedLuminanceSource=Se,l.LuminanceSource=ce,l.MathUtils=ot,l.MultiFormatOneDReader=wi,l.MultiFormatReader=Bs,l.MultiFormatWriter=Ul,l.NotFoundException=G,l.OneDReader=Mt,l.PDF417DecodedBitStreamParser=me,l.PDF417DecoderErrorCorrection=No,l.PDF417Reader=gn,l.PDF417ResultMetadata=Ps,l.PerspectiveTransform=An,l.PlanarYUVLuminanceSource=wr,l.QRCodeByteMatrix=zs,l.QRCodeDataMask=ct,l.QRCodeDecodedBitStreamParser=Ot,l.QRCodeDecoderErrorCorrectionLevel=At,l.QRCodeDecoderFormatInformation=hn,l.QRCodeEncoder=jt,l.QRCodeEncoderQRCode=ei,l.QRCodeMaskUtil=Dt,l.QRCodeMatrixUtil=$e,l.QRCodeMode=qe,l.QRCodeReader=jn,l.QRCodeVersion=Ze,l.QRCodeWriter=Ii,l.RGBLuminanceSource=ls,l.RSS14Reader=Nt,l.RSSExpandedReader=Ee,l.ReaderException=Ai,l.ReedSolomonDecoder=ln,l.ReedSolomonEncoder=Oo,l.ReedSolomonException=Qe,l.Result=be,l.ResultMetadataType=fe,l.ResultPoint=Le,l.StringUtils=xe,l.UnsupportedOperationException=Ae,l.VideoInputDevice=B,l.WhiteRectangleDetector=Un,l.WriterException=It,l.ZXingArrays=R,l.ZXingCharset=Ia,l.ZXingInteger=N,l.ZXingStandardCharsets=Do,l.ZXingStringBuilder=le,l.ZXingStringEncoding=we,l.ZXingSystem=F,l.createAbstractExpandedDecoder=xa,Object.defineProperty(l,"__esModule",{value:!0})}))})(la,la.exports)),la.exports}var zt=bm();const Sm=Bl(zt),Em=V0({__proto__:null,default:Sm},[zt]);var A0=(function(){function u(h,l,g){if(this.formatMap=new Map([[Fe.QR_CODE,zt.BarcodeFormat.QR_CODE],[Fe.AZTEC,zt.BarcodeFormat.AZTEC],[Fe.CODABAR,zt.BarcodeFormat.CODABAR],[Fe.CODE_39,zt.BarcodeFormat.CODE_39],[Fe.CODE_93,zt.BarcodeFormat.CODE_93],[Fe.CODE_128,zt.BarcodeFormat.CODE_128],[Fe.DATA_MATRIX,zt.BarcodeFormat.DATA_MATRIX],[Fe.MAXICODE,zt.BarcodeFormat.MAXICODE],[Fe.ITF,zt.BarcodeFormat.ITF],[Fe.EAN_13,zt.BarcodeFormat.EAN_13],[Fe.EAN_8,zt.BarcodeFormat.EAN_8],[Fe.PDF_417,zt.BarcodeFormat.PDF_417],[Fe.RSS_14,zt.BarcodeFormat.RSS_14],[Fe.RSS_EXPANDED,zt.BarcodeFormat.RSS_EXPANDED],[Fe.UPC_A,zt.BarcodeFormat.UPC_A],[Fe.UPC_E,zt.BarcodeFormat.UPC_E],[Fe.UPC_EAN_EXTENSION,zt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Em)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=l,this.logger=g;var y=this.createZXingFormats(h),x=new Map;x.set(zt.DecodeHintType.POSSIBLE_FORMATS,y),x.set(zt.DecodeHintType.TRY_HARDER,!1),this.hints=x}return u.prototype.decodeAsync=function(h){var l=this;return new Promise(function(g,y){try{g(l.decode(h))}catch(x){y(x)}})},u.prototype.decode=function(h){var l=new zt.MultiFormatReader(this.verbose,this.hints),g=new zt.HTMLCanvasElementLuminanceSource(h),y=new zt.BinaryBitmap(new zt.HybridBinarizer(g)),x=l.decode(y);return{text:x.text,format:kf.create(this.toHtml5QrcodeSupportedFormats(x.format)),debugData:this.createDebugData()}},u.prototype.createReverseFormatMap=function(){var h=new Map;return this.formatMap.forEach(function(l,g,y){h.set(l,g)}),h},u.prototype.toHtml5QrcodeSupportedFormats=function(h){if(!this.reverseFormatMap.has(h))throw"reverseFormatMap doesn't have ".concat(h);return this.reverseFormatMap.get(h)},u.prototype.createZXingFormats=function(h){for(var l=[],g=0,y=h;g<y.length;g++){var x=y[g];this.formatMap.has(x)?l.push(this.formatMap.get(x)):this.logger.logError("".concat(x," is not supported by")+"ZXingHtml5QrcodeShim")}return l},u.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},u})(),Am=function(u,h,l,g){function y(x){return x instanceof l?x:new l(function(b){b(x)})}return new(l||(l=Promise))(function(x,b){function I(A){try{v(g.next(A))}catch(k){b(k)}}function S(A){try{v(g.throw(A))}catch(k){b(k)}}function v(A){A.done?x(A.value):y(A.value).then(I,S)}v((g=g.apply(u,h||[])).next())})},Im=function(u,h){var l={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},g,y,x,b;return b={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function I(v){return function(A){return S([v,A])}}function S(v){if(g)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(g=1,y&&(x=v[0]&2?y.return:v[0]?y.throw||((x=y.return)&&x.call(y),0):y.next)&&!(x=x.call(y,v[1])).done)return x;switch(y=0,x&&(v=[v[0]&2,x.value]),v[0]){case 0:case 1:x=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,y=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(x=l.trys,!(x=x.length>0&&x[x.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!x||v[1]>x[0]&&v[1]<x[3])){l.label=v[1];break}if(v[0]===6&&l.label<x[1]){l.label=x[1],x=v;break}if(x&&l.label<x[2]){l.label=x[2],l.ops.push(v);break}x[2]&&l.ops.pop(),l.trys.pop();continue}v=h.call(u,l)}catch(A){v=[6,A],y=0}finally{g=x=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},I0=(function(){function u(h,l,g){if(this.formatMap=new Map([[Fe.QR_CODE,"qr_code"],[Fe.AZTEC,"aztec"],[Fe.CODABAR,"codabar"],[Fe.CODE_39,"code_39"],[Fe.CODE_93,"code_93"],[Fe.CODE_128,"code_128"],[Fe.DATA_MATRIX,"data_matrix"],[Fe.ITF,"itf"],[Fe.EAN_13,"ean_13"],[Fe.EAN_8,"ean_8"],[Fe.PDF_417,"pdf417"],[Fe.UPC_A,"upc_a"],[Fe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!u.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=l,this.logger=g;var y=this.createBarcodeDetectorFormats(h);if(this.detector=new BarcodeDetector(y),!this.detector)throw"BarcodeDetector detector not supported"}return u.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var h=new BarcodeDetector({formats:["qr_code"]});return typeof h<"u"},u.prototype.decodeAsync=function(h){return Am(this,void 0,void 0,function(){var l,g;return Im(this,function(y){switch(y.label){case 0:return[4,this.detector.detect(h)];case 1:if(l=y.sent(),!l||l.length===0)throw"No barcode or QR code detected.";return g=this.selectLargestBarcode(l),[2,{text:g.rawValue,format:kf.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}]}})})},u.prototype.selectLargestBarcode=function(h){for(var l=null,g=0,y=0,x=h;y<x.length;y++){var b=x[y],I=b.boundingBox.width*b.boundingBox.height;I>g&&(g=I,l=b)}if(!l)throw"No largest barcode found";return l},u.prototype.createBarcodeDetectorFormats=function(h){for(var l=[],g=0,y=h;g<y.length;g++){var x=y[g];this.formatMap.has(x)?l.push(this.formatMap.get(x)):this.logger.warn("".concat(x," is not supported by")+"BarcodeDetectorDelegate")}return{formats:l}},u.prototype.toHtml5QrcodeSupportedFormats=function(h){if(!this.reverseFormatMap.has(h))throw"reverseFormatMap doesn't have ".concat(h);return this.reverseFormatMap.get(h)},u.prototype.createReverseFormatMap=function(){var h=new Map;return this.formatMap.forEach(function(l,g,y){h.set(l,g)}),h},u.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},u})(),j0=function(u,h,l,g){function y(x){return x instanceof l?x:new l(function(b){b(x)})}return new(l||(l=Promise))(function(x,b){function I(A){try{v(g.next(A))}catch(k){b(k)}}function S(A){try{v(g.throw(A))}catch(k){b(k)}}function v(A){A.done?x(A.value):y(A.value).then(I,S)}v((g=g.apply(u,h||[])).next())})},k0=function(u,h){var l={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},g,y,x,b;return b={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function I(v){return function(A){return S([v,A])}}function S(v){if(g)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(g=1,y&&(x=v[0]&2?y.return:v[0]?y.throw||((x=y.return)&&x.call(y),0):y.next)&&!(x=x.call(y,v[1])).done)return x;switch(y=0,x&&(v=[v[0]&2,x.value]),v[0]){case 0:case 1:x=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,y=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(x=l.trys,!(x=x.length>0&&x[x.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!x||v[1]>x[0]&&v[1]<x[3])){l.label=v[1];break}if(v[0]===6&&l.label<x[1]){l.label=x[1],x=v;break}if(x&&l.label<x[2]){l.label=x[2],l.ops.push(v);break}x[2]&&l.ops.pop(),l.trys.pop();continue}v=h.call(u,l)}catch(A){v=[6,A],y=0}finally{g=x=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},jm=(function(){function u(h,l,g,y){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=g,l&&I0.isSupported()?(this.primaryDecoder=new I0(h,g,y),this.secondaryDecoder=new A0(h,g,y)):this.primaryDecoder=new A0(h,g,y)}return u.prototype.decodeAsync=function(h){return j0(this,void 0,void 0,function(){var l;return k0(this,function(g){switch(g.label){case 0:l=performance.now(),g.label=1;case 1:return g.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(h)];case 2:return[2,g.sent()];case 3:return this.possiblyLogPerformance(l),[7];case 4:return[2]}})})},u.prototype.decodeRobustlyAsync=function(h){return j0(this,void 0,void 0,function(){var l,g;return k0(this,function(y){switch(y.label){case 0:l=performance.now(),y.label=1;case 1:return y.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(h)];case 2:return[2,y.sent()];case 3:if(g=y.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(h)];throw g;case 4:return this.possiblyLogPerformance(l),[7];case 5:return[2]}})})},u.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},u.prototype.possiblyLogPerformance=function(h){if(this.verbose){var l=performance.now()-h;this.executionResults.push(l),this.executions++,this.possiblyFlushPerformanceReport()}},u.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var h=0,l=0,g=this.executionResults;l<g.length;l++){var y=g[l];h+=y}var x=h/this.executionResults.length;console.log("".concat(x," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},u})(),Gd=(function(){var u=function(h,l){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(g[x]=y[x])},u(h,l)};return function(h,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");u(h,l);function g(){this.constructor=h}h.prototype=l===null?Object.create(l):(g.prototype=l.prototype,new g)}})(),Pl=function(u,h,l,g){function y(x){return x instanceof l?x:new l(function(b){b(x)})}return new(l||(l=Promise))(function(x,b){function I(A){try{v(g.next(A))}catch(k){b(k)}}function S(A){try{v(g.throw(A))}catch(k){b(k)}}function v(A){A.done?x(A.value):y(A.value).then(I,S)}v((g=g.apply(u,h||[])).next())})},Ml=function(u,h){var l={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},g,y,x,b;return b={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function I(v){return function(A){return S([v,A])}}function S(v){if(g)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(g=1,y&&(x=v[0]&2?y.return:v[0]?y.throw||((x=y.return)&&x.call(y),0):y.next)&&!(x=x.call(y,v[1])).done)return x;switch(y=0,x&&(v=[v[0]&2,x.value]),v[0]){case 0:case 1:x=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,y=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(x=l.trys,!(x=x.length>0&&x[x.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!x||v[1]>x[0]&&v[1]<x[3])){l.label=v[1];break}if(v[0]===6&&l.label<x[1]){l.label=x[1],x=v;break}if(x&&l.label<x[2]){l.label=x[2],l.ops.push(v);break}x[2]&&l.ops.pop(),l.trys.pop();continue}v=h.call(u,l)}catch(A){v=[6,A],y=0}finally{g=x=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Tf=(function(){function u(h,l){this.name=h,this.track=l}return u.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},u.prototype.apply=function(h){var l={};l[this.name]=h;var g={advanced:[l]};return this.track.applyConstraints(g)},u.prototype.value=function(){var h=this.track.getSettings();if(this.name in h){var l=h[this.name];return l}return null},u})(),km=(function(u){Gd(h,u);function h(l,g){return u.call(this,l,g)||this}return h.prototype.min=function(){return this.getCapabilities().min},h.prototype.max=function(){return this.getCapabilities().max},h.prototype.step=function(){return this.getCapabilities().step},h.prototype.apply=function(l){var g={};g[this.name]=l;var y={advanced:[g]};return this.track.applyConstraints(y)},h.prototype.getCapabilities=function(){this.failIfNotSupported();var l=this.track.getCapabilities(),g=l[this.name];return{min:g.min,max:g.max,step:g.step}},h.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},h})(Tf),Nm=(function(u){Gd(h,u);function h(l){return u.call(this,"zoom",l)||this}return h})(km),Tm=(function(u){Gd(h,u);function h(l){return u.call(this,"torch",l)||this}return h})(Tf),_m=(function(){function u(h){this.track=h}return u.prototype.zoomFeature=function(){return new Nm(this.track)},u.prototype.torchFeature=function(){return new Tm(this.track)},u})(),Rm=(function(){function u(h,l,g){this.isClosed=!1,this.parentElement=h,this.mediaStream=l,this.callbacks=g,this.surface=this.createVideoElement(this.parentElement.clientWidth),h.append(this.surface)}return u.prototype.createVideoElement=function(h){var l=document.createElement("video");return l.style.width="".concat(h,"px"),l.style.display="block",l.muted=!0,l.setAttribute("muted","true"),l.playsInline=!0,l},u.prototype.setupSurface=function(){var h=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var l=function(){var g=h.surface.clientWidth,y=h.surface.clientHeight;h.callbacks.onRenderSurfaceReady(g,y),h.surface.removeEventListener("playing",l)};this.surface.addEventListener("playing",l),this.surface.srcObject=this.mediaStream,this.surface.play()},u.create=function(h,l,g,y){return Pl(this,void 0,void 0,function(){var x,b;return Ml(this,function(I){switch(I.label){case 0:return x=new u(h,l,y),g.aspectRatio?(b={aspectRatio:g.aspectRatio},[4,x.getFirstTrackOrFail().applyConstraints(b)]):[3,2];case 1:I.sent(),I.label=2;case 2:return x.setupSurface(),[2,x]}})})},u.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},u.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},u.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},u.prototype.resume=function(h){this.failIfClosed();var l=this,g=function(){setTimeout(h,200),l.surface.removeEventListener("playing",g)};this.surface.addEventListener("playing",g),this.surface.play()},u.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},u.prototype.getSurface=function(){return this.failIfClosed(),this.surface},u.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},u.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},u.prototype.applyVideoConstraints=function(h){return Pl(this,void 0,void 0,function(){return Ml(this,function(l){if("aspectRatio"in h)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(h)]})})},u.prototype.close=function(){if(this.isClosed)return Promise.resolve();var h=this;return new Promise(function(l,g){var y=h.mediaStream.getVideoTracks(),x=y.length,b=0;h.mediaStream.getVideoTracks().forEach(function(I){h.mediaStream.removeTrack(I),I.stop(),++b,b>=x&&(h.isClosed=!0,h.parentElement.removeChild(h.surface),l())})})},u.prototype.getCapabilities=function(){return new _m(this.getFirstTrackOrFail())},u})(),Om=(function(){function u(h){this.mediaStream=h}return u.prototype.render=function(h,l,g){return Pl(this,void 0,void 0,function(){return Ml(this,function(y){return[2,Rm.create(h,this.mediaStream,l,g)]})})},u.create=function(h){return Pl(this,void 0,void 0,function(){var l,g;return Ml(this,function(y){switch(y.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return l={audio:!1,video:h},[4,navigator.mediaDevices.getUserMedia(l)];case 1:return g=y.sent(),[2,new u(g)]}})})},u})(),N0=function(u,h,l,g){function y(x){return x instanceof l?x:new l(function(b){b(x)})}return new(l||(l=Promise))(function(x,b){function I(A){try{v(g.next(A))}catch(k){b(k)}}function S(A){try{v(g.throw(A))}catch(k){b(k)}}function v(A){A.done?x(A.value):y(A.value).then(I,S)}v((g=g.apply(u,h||[])).next())})},T0=function(u,h){var l={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},g,y,x,b;return b={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function I(v){return function(A){return S([v,A])}}function S(v){if(g)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(g=1,y&&(x=v[0]&2?y.return:v[0]?y.throw||((x=y.return)&&x.call(y),0):y.next)&&!(x=x.call(y,v[1])).done)return x;switch(y=0,x&&(v=[v[0]&2,x.value]),v[0]){case 0:case 1:x=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,y=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(x=l.trys,!(x=x.length>0&&x[x.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!x||v[1]>x[0]&&v[1]<x[3])){l.label=v[1];break}if(v[0]===6&&l.label<x[1]){l.label=x[1],x=v;break}if(x&&l.label<x[2]){l.label=x[2],l.ops.push(v);break}x[2]&&l.ops.pop(),l.trys.pop();continue}v=h.call(u,l)}catch(A){v=[6,A],y=0}finally{g=x=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Dm=(function(){function u(){}return u.failIfNotSupported=function(){return N0(this,void 0,void 0,function(){return T0(this,function(h){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new u]})})},u.prototype.create=function(h){return N0(this,void 0,void 0,function(){return T0(this,function(l){return[2,Om.create(h)]})})},u})(),Pm=function(u,h,l,g){function y(x){return x instanceof l?x:new l(function(b){b(x)})}return new(l||(l=Promise))(function(x,b){function I(A){try{v(g.next(A))}catch(k){b(k)}}function S(A){try{v(g.throw(A))}catch(k){b(k)}}function v(A){A.done?x(A.value):y(A.value).then(I,S)}v((g=g.apply(u,h||[])).next())})},Mm=function(u,h){var l={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},g,y,x,b;return b={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function I(v){return function(A){return S([v,A])}}function S(v){if(g)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(g=1,y&&(x=v[0]&2?y.return:v[0]?y.throw||((x=y.return)&&x.call(y),0):y.next)&&!(x=x.call(y,v[1])).done)return x;switch(y=0,x&&(v=[v[0]&2,x.value]),v[0]){case 0:case 1:x=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,y=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(x=l.trys,!(x=x.length>0&&x[x.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!x||v[1]>x[0]&&v[1]<x[3])){l.label=v[1];break}if(v[0]===6&&l.label<x[1]){l.label=x[1],x=v;break}if(x&&l.label<x[2]){l.label=x[2],l.ops.push(v);break}x[2]&&l.ops.pop(),l.trys.pop();continue}v=h.call(u,l)}catch(A){v=[6,A],y=0}finally{g=x=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Bm=(function(){function u(){}return u.retrieve=function(){if(navigator.mediaDevices)return u.getCamerasFromMediaDevices();var h=MediaStreamTrack;return MediaStreamTrack&&h.getSources?u.getCamerasFromMediaStreamTrack():u.rejectWithError()},u.rejectWithError=function(){var h=ao.unableToQuerySupportedDevices();return u.isHttpsOrLocalhost()||(h=ao.insecureContextCameraQueryError()),Promise.reject(h)},u.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var h=location.host.split(":")[0];return h==="127.0.0.1"||h==="localhost"},u.getCamerasFromMediaDevices=function(){return Pm(this,void 0,void 0,function(){var h,l,g,y,x,b,I;return Mm(this,function(S){switch(S.label){case 0:return h=function(v){for(var A=v.getVideoTracks(),k=0,O=A;k<O.length;k++){var X=O[k];X.enabled=!1,X.stop(),v.removeTrack(X)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return l=S.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(g=S.sent(),y=[],x=0,b=g;x<b.length;x++)I=b[x],I.kind==="videoinput"&&y.push({id:I.deviceId,label:I.label});return h(l),[2,y]}})})},u.getCamerasFromMediaStreamTrack=function(){return new Promise(function(h,l){var g=function(x){for(var b=[],I=0,S=x;I<S.length;I++){var v=S[I];v.kind==="video"&&b.push({id:v.id,label:v.label})}h(b)},y=MediaStreamTrack;y.getSources(g)})},u})(),Kt;(function(u){u[u.UNKNOWN=0]="UNKNOWN",u[u.NOT_STARTED=1]="NOT_STARTED",u[u.SCANNING=2]="SCANNING",u[u.PAUSED=3]="PAUSED"})(Kt||(Kt={}));var Lm=(function(){function u(){this.state=Kt.NOT_STARTED,this.onGoingTransactionNewState=Kt.UNKNOWN}return u.prototype.directTransition=function(h){this.failIfTransitionOngoing(),this.validateTransition(h),this.state=h},u.prototype.startTransition=function(h){return this.failIfTransitionOngoing(),this.validateTransition(h),this.onGoingTransactionNewState=h,this},u.prototype.execute=function(){if(this.onGoingTransactionNewState===Kt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var h=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Kt.UNKNOWN,this.directTransition(h)},u.prototype.cancel=function(){if(this.onGoingTransactionNewState===Kt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Kt.UNKNOWN},u.prototype.getState=function(){return this.state},u.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Kt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},u.prototype.validateTransition=function(h){switch(this.state){case Kt.UNKNOWN:throw"Transition from unknown is not allowed";case Kt.NOT_STARTED:this.failIfNewStateIs(h,[Kt.PAUSED]);break;case Kt.SCANNING:break;case Kt.PAUSED:break}},u.prototype.failIfNewStateIs=function(h,l){for(var g=0,y=l;g<y.length;g++){var x=y[g];if(h===x)throw"Cannot transition from ".concat(this.state," to ").concat(h)}},u})(),zm=(function(){function u(h){this.stateManager=h}return u.prototype.startTransition=function(h){return this.stateManager.startTransition(h)},u.prototype.directTransition=function(h){this.stateManager.directTransition(h)},u.prototype.getState=function(){return this.stateManager.getState()},u.prototype.canScanFile=function(){return this.stateManager.getState()===Kt.NOT_STARTED},u.prototype.isScanning=function(){return this.stateManager.getState()!==Kt.NOT_STARTED},u.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Kt.SCANNING},u.prototype.isPaused=function(){return this.stateManager.getState()===Kt.PAUSED},u})(),Fm=(function(){function u(){}return u.create=function(){return new zm(new Lm)},u})(),Wm=(function(){var u=function(h,l){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(g[x]=y[x])},u(h,l)};return function(h,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");u(h,l);function g(){this.constructor=h}h.prototype=l===null?Object.create(l):(g.prototype=l.prototype,new g)}})(),gr=(function(u){Wm(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.DEFAULT_WIDTH=300,h.DEFAULT_WIDTH_OFFSET=2,h.FILE_SCAN_MIN_HEIGHT=300,h.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,h.MIN_QR_BOX_SIZE=50,h.SHADED_LEFT=1,h.SHADED_RIGHT=2,h.SHADED_TOP=3,h.SHADED_BOTTOM=4,h.SHADED_REGION_ELEMENT_ID="qr-shaded-region",h.VERBOSE=!1,h.BORDER_SHADER_DEFAULT_COLOR="#ffffff",h.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",h})(ym),Um=(function(){function u(h,l){this.logger=l,this.fps=gr.SCAN_DEFAULT_FPS,h?(h.fps&&(this.fps=h.fps),this.disableFlip=h.disableFlip===!0,this.qrbox=h.qrbox,this.aspectRatio=h.aspectRatio,this.videoConstraints=h.videoConstraints):this.disableFlip=gr.DEFAULT_DISABLE_FLIP}return u.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Nf.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},u.prototype.isShadedBoxEnabled=function(){return!fi(this.qrbox)},u.create=function(h,l){return new u(h,l)},u})(),_0=(function(){function u(h,l){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(h))throw"HTML Element with id=".concat(h," not found");this.elementId=h,this.verbose=!1;var g;typeof l=="boolean"?this.verbose=l===!0:l&&(g=l,this.verbose=g.verbose===!0,g.experimentalFeatures),this.logger=new wm(this.verbose),this.qrcode=new jm(this.getSupportedFormats(l),this.getUseBarCodeDetectorIfSupported(g),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Fm.create()}return u.prototype.start=function(h,l,g,y){var x=this;if(!h)throw"cameraIdOrConfig is required";if(!g||typeof g!="function")throw"qrCodeSuccessCallback is required and should be a function.";var b;y?b=y:b=this.verbose?this.logger.log:function(){};var I=Um.create(l,this.logger);this.clearElement();var S=!1;I.videoConstraints&&(I.isMediaStreamConstraintsValid()?S=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var v=S,A=document.getElementById(this.elementId);A.clientWidth?A.clientWidth:gr.DEFAULT_WIDTH,A.style.position="relative",this.shouldScan=!0,this.element=A;var k=this,O=this.stateManagerProxy.startTransition(Kt.SCANNING);return new Promise(function(X,q){var F=v?I.videoConstraints:k.createVideoConstraints(h);if(!F){O.cancel(),q("videoConstraints should be defined");return}var V={};(!v||I.aspectRatio)&&(V.aspectRatio=I.aspectRatio);var Y={onRenderSurfaceReady:function(R,N){k.setupUi(R,N,I),k.isScanning=!0,k.foreverScan(I,g,b)}};Dm.failIfNotSupported().then(function(R){R.create(F).then(function(N){return N.render(x.element,V,Y).then(function(M){k.renderedCamera=M,O.execute(),X(null)}).catch(function(M){O.cancel(),q(M)})}).catch(function(N){O.cancel(),q(ao.errorGettingUserMedia(N))})}).catch(function(R){O.cancel(),q(ao.cameraStreamingNotSupported())})})},u.prototype.pause=function(h){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Kt.PAUSED),this.showPausedState(),(fi(h)||h!==!0)&&(h=!1),h&&this.renderedCamera&&this.renderedCamera.pause()},u.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var h=this,l=function(){h.stateManagerProxy.directTransition(Kt.SCANNING),h.hidePausedState()};if(!this.renderedCamera.isPaused()){l();return}this.renderedCamera.resume(function(){l()})},u.prototype.getState=function(){return this.stateManagerProxy.getState()},u.prototype.stop=function(){var h=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var l=this.stateManagerProxy.startTransition(Kt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var g=function(){if(h.element){var x=document.getElementById(gr.SHADED_REGION_ELEMENT_ID);x&&h.element.removeChild(x)}},y=this;return this.renderedCamera.close().then(function(){return y.renderedCamera=null,y.element&&(y.element.removeChild(y.canvasElement),y.canvasElement=null),g(),y.qrRegion&&(y.qrRegion=null),y.context&&(y.context=null),l.execute(),y.hidePausedState(),y.isScanning=!1,Promise.resolve()})},u.prototype.scanFile=function(h,l){return this.scanFileV2(h,l).then(function(g){return g.decodedText})},u.prototype.scanFileV2=function(h,l){var g=this;if(!h||!(h instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(fi(l)&&(l=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(y,x){g.possiblyCloseLastScanImageFile(),g.clearElement(),g.lastScanImageFile=URL.createObjectURL(h);var b=new Image;b.onload=function(){var I=b.width,S=b.height,v=document.getElementById(g.elementId),A=v.clientWidth?v.clientWidth:gr.DEFAULT_WIDTH,k=Math.max(v.clientHeight?v.clientHeight:S,gr.FILE_SCAN_MIN_HEIGHT),O=g.computeCanvasDrawConfig(I,S,A,k);if(l){var X=g.createCanvasElement(A,k,"qr-canvas-visible");X.style.display="inline-block",v.appendChild(X);var q=X.getContext("2d");if(!q)throw"Unable to get 2d context from canvas";q.canvas.width=A,q.canvas.height=k,q.drawImage(b,0,0,I,S,O.x,O.y,O.width,O.height)}var F=gr.FILE_SCAN_HIDDEN_CANVAS_PADDING,V=Math.max(b.width,O.width),Y=Math.max(b.height,O.height),R=V+2*F,N=Y+2*F,M=g.createCanvasElement(R,N);v.appendChild(M);var D=M.getContext("2d");if(!D)throw"Unable to get 2d context from canvas";D.canvas.width=R,D.canvas.height=N,D.drawImage(b,0,0,I,S,F,F,V,Y);try{g.qrcode.decodeRobustlyAsync(M).then(function(Z){y(S0.createFromQrcodeResult(Z))}).catch(x)}catch(Z){x("QR code parse error, error = ".concat(Z))}},b.onerror=x,b.onabort=x,b.onstalled=x,b.onsuspend=x,b.src=URL.createObjectURL(h)})},u.prototype.clear=function(){this.clearElement()},u.getCameras=function(){return Bm.retrieve()},u.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},u.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},u.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},u.prototype.applyVideoConstraints=function(h){if(h){if(!Nf.isMediaStreamConstraintsValid(h,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(h)},u.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},u.prototype.getSupportedFormats=function(h){var l=[Fe.QR_CODE,Fe.AZTEC,Fe.CODABAR,Fe.CODE_39,Fe.CODE_93,Fe.CODE_128,Fe.DATA_MATRIX,Fe.MAXICODE,Fe.ITF,Fe.EAN_13,Fe.EAN_8,Fe.PDF_417,Fe.RSS_14,Fe.RSS_EXPANDED,Fe.UPC_A,Fe.UPC_E,Fe.UPC_EAN_EXTENSION];if(!h||typeof h=="boolean"||!h.formatsToSupport)return l;if(!Array.isArray(h.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(h.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var g=[],y=0,x=h.formatsToSupport;y<x.length;y++){var b=x[y];xm(b)?g.push(b):this.logger.warn("Invalid format: ".concat(b," passed in config, ignoring."))}if(g.length===0)throw"None of formatsToSupport match supported values.";return g},u.prototype.getUseBarCodeDetectorIfSupported=function(h){if(fi(h))return!0;if(!fi(h.useBarCodeDetectorIfSupported))return h.useBarCodeDetectorIfSupported!==!1;if(fi(h.experimentalFeatures))return!0;var l=h.experimentalFeatures;return fi(l.useBarCodeDetectorIfSupported)?!0:l.useBarCodeDetectorIfSupported!==!1},u.prototype.validateQrboxSize=function(h,l,g){var y=this,x=g.qrbox;this.validateQrboxConfig(x);var b=this.toQrdimensions(h,l,x),I=function(v){if(v<gr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(gr.MIN_QR_BOX_SIZE,"px.")},S=function(v){return v>h&&(y.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),v=h),v};I(b.width),I(b.height),b.width=S(b.width)},u.prototype.validateQrboxConfig=function(h){if(typeof h!="number"&&typeof h!="function"&&(h.width===void 0||h.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},u.prototype.toQrdimensions=function(h,l,g){if(typeof g=="number")return{width:g,height:g};if(typeof g=="function")try{return g(h,l)}catch(y){throw new Error("qrbox config was passed as a function but it failed with unknown error"+y)}return g},u.prototype.setupUi=function(h,l,g){g.isShadedBoxEnabled()&&this.validateQrboxSize(h,l,g);var y=fi(g.qrbox)?{width:h,height:l}:g.qrbox;this.validateQrboxConfig(y);var x=this.toQrdimensions(h,l,y);x.height>l&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var b=g.isShadedBoxEnabled()&&x.height<=l,I={x:0,y:0,width:h,height:l},S=b?this.getShadedRegionBounds(h,l,x):I,v=this.createCanvasElement(S.width,S.height),A={willReadFrequently:!0},k=v.getContext("2d",A);k.canvas.width=S.width,k.canvas.height=S.height,this.element.append(v),b&&this.possiblyInsertShadingElement(this.element,h,l,x),this.createScannerPausedUiElement(this.element),this.qrRegion=S,this.context=k,this.canvasElement=v},u.prototype.createScannerPausedUiElement=function(h){var l=document.createElement("div");l.innerText=ao.scannerPaused(),l.style.display="none",l.style.position="absolute",l.style.top="0px",l.style.zIndex="1",l.style.background="rgba(9, 9, 9, 0.46)",l.style.color="#FFECEC",l.style.textAlign="center",l.style.width="100%",h.appendChild(l),this.scannerPausedUiElement=l},u.prototype.scanContext=function(h,l){var g=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(y){return h(y.text,S0.createFromQrcodeResult(y)),g.possiblyUpdateShaders(!0),!0}).catch(function(y){g.possiblyUpdateShaders(!1);var x=ao.codeParseError(y);return l(x,vm.createFrom(x)),!1})},u.prototype.foreverScan=function(h,l,g){var y=this;if(this.shouldScan&&this.renderedCamera){var x=this.renderedCamera.getSurface(),b=x.videoWidth/x.clientWidth,I=x.videoHeight/x.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var S=this.qrRegion.width*b,v=this.qrRegion.height*I,A=this.qrRegion.x*b,k=this.qrRegion.y*I;this.context.drawImage(x,A,k,S,v,0,0,this.qrRegion.width,this.qrRegion.height);var O=function(){y.foreverScanTimeout=setTimeout(function(){y.foreverScan(h,l,g)},y.getTimeoutFps(h.fps))};this.scanContext(l,g).then(function(X){!X&&h.disableFlip!==!0?(y.context.translate(y.context.canvas.width,0),y.context.scale(-1,1),y.scanContext(l,g).finally(function(){O()})):O()}).catch(function(X){y.logger.logError("Error happend while scanning context",X),O()})}},u.prototype.createVideoConstraints=function(h){if(typeof h=="string")return{deviceId:{exact:h}};if(typeof h=="object"){var l="facingMode",g="deviceId",y={user:!0,environment:!0},x="exact",b=function(q){if(q in y)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(q,"'")},I=Object.keys(h);if(I.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(I.length," keys");var S=Object.keys(h)[0];if(S!==l&&S!==g)throw"Only '".concat(l,"' and '").concat(g,"' ")+" are supported for 'cameraIdOrConfig'";if(S===l){var v=h.facingMode;if(typeof v=="string"){if(b(v))return{facingMode:v}}else if(typeof v=="object")if(x in v){if(b(v["".concat(x)]))return{facingMode:{exact:v["".concat(x)]}}}else throw"'facingMode' should be string or object with"+" ".concat(x," as key.");else{var A=typeof v;throw"Invalid type of 'facingMode' = ".concat(A)}}else{var k=h.deviceId;if(typeof k=="string")return{deviceId:k};if(typeof k=="object"){if(x in k)return{deviceId:{exact:k["".concat(x)]}};throw"'deviceId' should be string or object with"+" ".concat(x," as key.")}else{var O=typeof k;throw"Invalid type of 'deviceId' = ".concat(O)}}}var X=typeof h;throw"Invalid type of 'cameraIdOrConfig' = ".concat(X)},u.prototype.computeCanvasDrawConfig=function(h,l,g,y){if(h<=g&&l<=y){var x=(g-h)/2,b=(y-l)/2;return{x,y:b,width:h,height:l}}else{var I=h,S=l;return h>g&&(l=g/h*l,h=g),l>y&&(h=y/l*h,l=y),this.logger.log("Image downsampled from "+"".concat(I,"X").concat(S)+" to ".concat(h,"X").concat(l,".")),this.computeCanvasDrawConfig(h,l,g,y)}},u.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var h=document.getElementById(this.elementId);h&&(h.innerHTML="")},u.prototype.possiblyUpdateShaders=function(h){this.qrMatch!==h&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(l){l.style.backgroundColor=h?gr.BORDER_SHADER_MATCH_COLOR:gr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=h)},u.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},u.prototype.createCanvasElement=function(h,l,g){var y=h,x=l,b=document.createElement("canvas");return b.style.width="".concat(y,"px"),b.style.height="".concat(x,"px"),b.style.display="none",b.id=fi(g)?"qr-canvas":g,b},u.prototype.getShadedRegionBounds=function(h,l,g){if(g.width>h||g.height>l)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(h-g.width)/2,y:(l-g.height)/2,width:g.width,height:g.height}},u.prototype.possiblyInsertShadingElement=function(h,l,g,y){if(!(l-y.width<1||g-y.height<1)){var x=document.createElement("div");x.style.position="absolute";var b=(l-y.width)/2,I=(g-y.height)/2;if(x.style.borderLeft="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),x.style.borderRight="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),x.style.borderTop="".concat(I,"px solid rgba(0, 0, 0, 0.48)"),x.style.borderBottom="".concat(I,"px solid rgba(0, 0, 0, 0.48)"),x.style.boxSizing="border-box",x.style.top="0px",x.style.bottom="0px",x.style.left="0px",x.style.right="0px",x.id="".concat(gr.SHADED_REGION_ELEMENT_ID),l-y.width<11||g-y.height<11)this.hasBorderShaders=!1;else{var S=5,v=40;this.insertShaderBorders(x,v,S,-S,null,0,!0),this.insertShaderBorders(x,v,S,-S,null,0,!1),this.insertShaderBorders(x,v,S,null,-S,0,!0),this.insertShaderBorders(x,v,S,null,-S,0,!1),this.insertShaderBorders(x,S,v+S,-S,null,-S,!0),this.insertShaderBorders(x,S,v+S,null,-S,-S,!0),this.insertShaderBorders(x,S,v+S,-S,null,-S,!1),this.insertShaderBorders(x,S,v+S,null,-S,-S,!1),this.hasBorderShaders=!0}h.append(x)}},u.prototype.insertShaderBorders=function(h,l,g,y,x,b,I){var S=document.createElement("div");S.style.position="absolute",S.style.backgroundColor=gr.BORDER_SHADER_DEFAULT_COLOR,S.style.width="".concat(l,"px"),S.style.height="".concat(g,"px"),y!==null&&(S.style.top="".concat(y,"px")),x!==null&&(S.style.bottom="".concat(x,"px")),I?S.style.left="".concat(b,"px"):S.style.right="".concat(b,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(S),h.appendChild(S)},u.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},u.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},u.prototype.getTimeoutFps=function(h){return 1e3/h},u})(),R0;(function(u){u[u.STATUS_DEFAULT=0]="STATUS_DEFAULT",u[u.STATUS_SUCCESS=1]="STATUS_SUCCESS",u[u.STATUS_WARNING=2]="STATUS_WARNING",u[u.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(R0||(R0={}));const Vm=({onScan:u,onError:h,onClose:l})=>{const[g,y]=W.useState(""),[x,b]=W.useState(null),[I,S]=W.useState(!1),v=W.useRef(null),A=W.useRef(!1),k=W.useRef(u),O=Wn();W.useEffect(()=>{k.current=u},[u]),W.useEffect(()=>{const q="reader",V=setTimeout(async()=>{try{const Y=await _0.getCameras();if(!Y||Y.length===0){y("No camera found on this device.");return}v.current||(v.current=new _0(q));const R={fps:30,qrbox:function(N,M){const D=Math.min(N,M),Z=Math.floor(D*.7);return{width:Z,height:Z}},aspectRatio:1,formatsToSupport:[Fe.QR_CODE],disableFlip:!1,experimentalFeatures:{useBarCodeDetectorIfSupported:!0},videoConstraints:{facingMode:"environment",focusMode:"continuous",advanced:[{zoom:1}]}};A.current||(await v.current.start({facingMode:"environment",advanced:[{focusMode:"continuous",zoom:1}]},R,N=>{try{const M=JSON.parse(N);k.current(M)}catch(M){console.warn("Non-JSON QR Code",M)}},N=>{}),A.current=!0,b(!0))}catch(Y){console.error("Camera start failed",Y),b(!1),Y.name==="NotAllowedError"?y("Camera permission denied. Please allow camera access in your browser settings."):location.protocol!=="https:"&&location.hostname!=="localhost"?y("Camera access requires a secure HTTPS connection."):y(`Camera error: ${Y.message||Y}`)}},100);return()=>{clearTimeout(V),v.current&&A.current&&v.current.stop().then(()=>{v.current.clear(),A.current=!1}).catch(Y=>console.error("Failed to stop scanner",Y))}},[]);const X=async()=>{if(v.current&&A.current)try{const q=v.current.getRunningTrackCapabilities();q&&q.torch&&(await v.current.applyVideoConstraints({advanced:[{torch:!I}]}),S(!I))}catch(q){console.warn("Torch not supported",q)}};return r.jsxs("div",{style:{position:"fixed",inset:0,zIndex:50,backgroundColor:"black",paddingTop:"env(safe-area-inset-top)"},children:[r.jsx("div",{id:"reader",style:{width:"100%",height:"100%",position:"absolute",inset:0}}),r.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,zIndex:50,background:"linear-gradient(to bottom, rgba(0,0,0,0.8), rgba(0,0,0,0.4), transparent)"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px"},children:[r.jsx("button",{onClick:()=>{l?l():O(-1)},style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.3)",backdropFilter:"blur(4px)",border:"1px solid rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",cursor:"pointer"},children:r.jsx(mi,{size:20})}),r.jsxs("div",{style:{flex:1,margin:"0 16px"},children:[r.jsx("h1",{style:{color:"white",fontSize:"18px",fontWeight:600,margin:0},children:"Scan Guest Pass"}),r.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"12px",marginTop:"2px"},children:"Quick & Secure Check-in"})]}),r.jsx("button",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.3)",backdropFilter:"blur(4px)",border:"1px solid rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",cursor:"pointer"},children:r.jsx(dg,{size:20})})]})}),x&&!g&&r.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:20},children:[r.jsx("div",{style:{position:"absolute",inset:0,background:"radial-gradient(circle at center, transparent 40%, rgba(0,0,0,0.7) 80%)"}}),r.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",marginTop:"200px",padding:"16px 24px",background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(12px)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.15)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",maxWidth:"280px",textAlign:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"8px"},children:[r.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#10b981",boxShadow:"0 0 12px rgba(16, 185, 129, 0.8)",animation:"pulse 2s infinite"}}),r.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#ffffff",letterSpacing:"0.5px"},children:"READY TO SCAN"})]}),r.jsx("p",{style:{fontSize:"13px",color:"rgba(255, 255, 255, 0.8)",margin:0,lineHeight:"1.5",fontWeight:500},children:"Point camera at guest QR code to check them in"})]})]}),x&&!g&&r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,zIndex:40,paddingBottom:"env(safe-area-inset-bottom)"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"32px",paddingBottom:"48px"},children:[r.jsxs("button",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",color:"rgba(255,255,255,0.8)",cursor:"pointer",background:"none",border:"none"},children:[r.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"50%",background:"rgba(255,255,255,0.1)",backdropFilter:"blur(4px)",border:"1px solid rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:r.jsx(hf,{size:24})}),r.jsx("span",{style:{fontSize:"12px",fontWeight:500},children:"Upload QR"})]}),r.jsxs("button",{onClick:X,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",color:"rgba(255,255,255,0.8)",cursor:"pointer",background:"none",border:"none"},children:[r.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"50%",backdropFilter:"blur(4px)",border:`1px solid ${I?"rgba(234,179,8,0.5)":"rgba(255,255,255,0.2)"}`,display:"flex",alignItems:"center",justifyContent:"center",background:I?"rgba(234,179,8,0.3)":"rgba(255,255,255,0.1)",color:I?"#fde047":"white",transition:"all 0.3s"},children:r.jsx(cg,{size:24})}),r.jsx("span",{style:{fontSize:"12px",fontWeight:500},children:"Torch"})]})]})}),!x&&!g&&r.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",zIndex:30},children:r.jsxs("div",{style:{color:"white",display:"flex",flexDirection:"column",alignItems:"center"},children:[r.jsx(lf,{size:64,style:{marginBottom:"16px",animation:"pulse 2s ease-in-out infinite"}}),r.jsx("p",{style:{fontSize:"18px",fontWeight:500},children:"Starting Camera..."})]})}),g&&r.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",zIndex:30,padding:"16px"},children:r.jsxs("div",{style:{textAlign:"center",padding:"32px",maxWidth:"28rem",background:"rgba(15,23,42,0.95)",backdropFilter:"blur(8px)",borderRadius:"16px",border:"1px solid rgba(239,68,68,0.5)",color:"#f87171"},children:[r.jsx(mo,{size:48,style:{margin:"0 auto 16px"}}),r.jsx("p",{style:{fontSize:"16px",fontWeight:500,marginBottom:"16px"},children:g}),x===!1&&r.jsx("p",{style:{fontSize:"12px",color:"#94a3b8",marginTop:"16px"},children:"If you are on iOS, make sure you are using Safari. Chrome on iOS may have permission issues."})]})})]})},Gm=()=>{const u=Wn(),{user:h}=Wr(),{events:l,markGuestAttended:g}=Tr(),[y,x]=W.useState(null),[b,I]=W.useState(1),[S,v]=W.useState("");if(!(l&&l.length>0&&!h?.isGuest))return r.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(to bottom, #0a0b1e, #101127, #0a0b1e)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:r.jsxs("div",{style:{maxWidth:"400px",textAlign:"center",background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"24px",padding:"3rem 2rem"},children:[r.jsx("div",{style:{display:"inline-flex",padding:"20px",borderRadius:"50%",background:"rgba(239, 68, 68, 0.1)",marginBottom:"1.5rem"},children:r.jsx(ha,{size:48,color:"#ef4444"})}),r.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:"white",marginBottom:"1rem"},children:"Unauthorized Access"}),r.jsx("p",{style:{fontSize:"16px",color:"rgba(255, 255, 255, 0.7)",marginBottom:"2rem",lineHeight:"1.6"},children:"Only event organizers can access the QR code scanner. Please create an event to use this feature."}),r.jsx("button",{onClick:()=>u("/"),className:"btn btn-primary",style:{width:"100%",padding:"0.875rem"},children:"Go to Events"})]})});const k=()=>{x(null),I(1)},O=q=>{if(y)return;if(!q.eventId||!q.guestId){x({status:"invalid",message:"Invalid QR Code structure"});return}const F=l.find(Y=>Y.id===q.eventId);if(!F){x({status:"invalid",message:"Event not found. You can only check in guests for your own events."});return}if(F.user_id!==h?.id){x({status:"invalid",message:"Unauthorized. You can only check in guests for your own events."});return}const V=F.guests?.find(Y=>Y.id===q.guestId);if(!V){x({status:"invalid",message:"Guest not found in guest list"});return}x({status:"valid",data:{event:F,guest:V},message:"Guest Verified"})},X=()=>{if(y?.status!=="valid")return;const{event:q,guest:F}=y.data;g(q.id,F.id,b),x({...y,status:"checked-in"})};return r.jsxs(r.Fragment,{children:[!y&&r.jsx(Vm,{onScan:O,onClose:k}),y&&r.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(to bottom, #0a0b1e, #101127, #0a0b1e)",display:"flex",flexDirection:"column"},children:[r.jsxs("div",{style:{padding:"32px 24px",position:"relative",overflow:"hidden"},children:[r.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(135deg, rgba(99,102,241,0.1), rgba(168,85,247,0.05))",opacity:.5}}),r.jsxs("div",{style:{position:"relative",zIndex:10,textAlign:"center"},children:[r.jsx("div",{style:{display:"inline-flex",padding:"16px",borderRadius:"24px",background:"linear-gradient(135deg, rgba(99,102,241,0.2), rgba(168,85,247,0.2))",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 8px 32px rgba(99,102,241,0.2)",marginBottom:"12px"},children:r.jsx(mf,{size:40,color:"#a5b4fc",strokeWidth:2.5})}),r.jsx("h1",{style:{fontSize:"40px",fontWeight:900,background:"linear-gradient(to right, #ffffff, #c7d2fe, #ffffff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",margin:"12px 0",letterSpacing:"-0.5px"},children:"Gatekeeper"}),r.jsx("p",{style:{fontSize:"12px",fontWeight:600,color:"rgba(196,181,253,0.6)",textTransform:"uppercase",letterSpacing:"2px",margin:0},children:"Guest Check-In"})]})]}),r.jsxs("div",{style:{flex:1,padding:"0 16px 24px"},children:[y.status==="valid"&&r.jsx("div",{style:{maxWidth:"448px",margin:"0 auto"},children:r.jsxs("div",{style:{position:"relative",overflow:"hidden",borderRadius:"24px",background:"linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05))",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 20px 40px rgba(99,102,241,0.1)",padding:"32px"},children:[r.jsx("div",{style:{position:"absolute",top:"-80px",right:"-80px",width:"160px",height:"160px",background:"rgba(99,102,241,0.2)",borderRadius:"50%",filter:"blur(60px)"}}),r.jsx("div",{style:{position:"absolute",bottom:"-80px",left:"-80px",width:"160px",height:"160px",background:"rgba(168,85,247,0.2)",borderRadius:"50%",filter:"blur(60px)"}}),r.jsxs("div",{style:{position:"relative",zIndex:10},children:[r.jsxs("div",{style:{position:"relative",width:"fit-content",margin:"0 auto 32px"},children:[r.jsxs("div",{style:{width:"128px",height:"128px",background:"linear-gradient(135deg, #6366f1, #a855f7, #ec4899)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 20px 40px rgba(99,102,241,0.3)",border:"4px solid rgba(255,255,255,0.1)",position:"relative",overflow:"hidden"},children:[r.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)",animation:"shimmer 2s infinite"}}),r.jsx(Vt,{size:56,color:"#ffffff",strokeWidth:2,style:{position:"relative",zIndex:10}})]}),y.data.guest.attended&&r.jsxs("div",{style:{position:"absolute",bottom:"-8px",left:"50%",transform:"translateX(-50%)",whiteSpace:"nowrap",background:"linear-gradient(to right, #fbbf24, #f97316)",color:"#000",padding:"6px 16px",borderRadius:"20px",fontSize:"11px",fontWeight:900,boxShadow:"0 8px 16px rgba(251,191,36,0.4)",border:"2px solid rgba(255,255,255,0.5)",animation:"bounce 1s infinite"},children:[" CHECKED IN ",y.data.guest.attendedCount||1,""]})]}),r.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[r.jsx("h2",{style:{fontSize:"36px",fontWeight:900,color:"#ffffff",margin:"0 0 16px 0",textShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:y.data.guest.name}),r.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderRadius:"20px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",backdropFilter:"blur(10px)"},children:[r.jsx("span",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#a5b4fc",animation:"pulse 2s infinite",boxShadow:"0 0 10px rgba(165,180,252,0.5)"}}),r.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:"rgba(255,255,255,0.9)"},children:y.data.event.title})]}),y.data.guest.attended&&r.jsxs("div",{style:{marginTop:"16px",padding:"16px",background:"linear-gradient(135deg, rgba(251,191,36,0.1), rgba(249,115,22,0.1))",border:"1px solid rgba(251,191,36,0.3)",borderRadius:"16px",backdropFilter:"blur(10px)"},children:[r.jsx("p",{style:{color:"#fcd34d",fontWeight:700,fontSize:"14px",margin:"0 0 4px 0",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:" Already Checked In"}),r.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"12px",margin:0},children:"Add more guests to their party below"})]})]}),r.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",backdropFilter:"blur(10px)",padding:"24px",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.1)",marginBottom:"24px"},children:[r.jsx("label",{style:{fontSize:"11px",fontWeight:900,color:"rgba(255,255,255,0.5)",textTransform:"uppercase",letterSpacing:"2px",display:"block",textAlign:"center",marginBottom:"16px"},children:y.data.guest.attended?"+ Additional Guests":"Party Size"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"24px"},children:[r.jsx("button",{onClick:()=>I(Math.max(1,b-1)),style:{width:"56px",height:"56px",borderRadius:"16px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"rgba(255,255,255,0.7)",fontSize:"24px",fontWeight:900,cursor:"pointer",boxShadow:"0 4px 8px rgba(0,0,0,0.2)",transition:"all 0.2s"},onMouseDown:q=>q.currentTarget.style.transform="scale(0.95)",onMouseUp:q=>q.currentTarget.style.transform="scale(1)",children:""}),r.jsx("span",{style:{fontSize:"48px",fontWeight:900,width:"64px",textAlign:"center",background:"linear-gradient(135deg, #ffffff, #c7d2fe)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:b}),r.jsx("button",{onClick:()=>I(b+1),style:{width:"56px",height:"56px",borderRadius:"16px",background:"linear-gradient(135deg, #6366f1, #a855f7)",border:"none",color:"#ffffff",fontSize:"24px",fontWeight:900,cursor:"pointer",boxShadow:"0 8px 16px rgba(99,102,241,0.5)",transition:"all 0.2s"},onMouseDown:q=>q.currentTarget.style.transform="scale(0.95)",onMouseUp:q=>q.currentTarget.style.transform="scale(1)",children:"+"})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[r.jsx("button",{onClick:k,style:{height:"56px",borderRadius:"16px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",color:"#ffffff",fontWeight:700,cursor:"pointer",transition:"all 0.2s"},children:"Cancel"}),r.jsxs("button",{onClick:X,style:{height:"56px",borderRadius:"16px",background:"linear-gradient(to right, #10b981, #14b8a6)",border:"none",color:"#ffffff",fontWeight:900,cursor:"pointer",boxShadow:"0 8px 16px rgba(16,185,129,0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s"},children:[y.data.guest.attended?"Add Guests":"Check In",r.jsx(of,{size:20,strokeWidth:3})]})]})]})]})}),y.status==="invalid"&&r.jsx("div",{style:{maxWidth:"448px",margin:"0 auto"},children:r.jsxs("div",{style:{position:"relative",overflow:"hidden",borderRadius:"24px",background:"linear-gradient(135deg, rgba(239,68,68,0.1), rgba(239,68,68,0.05))",backdropFilter:"blur(20px)",border:"1px solid rgba(239,68,68,0.3)",boxShadow:"0 20px 40px rgba(239,68,68,0.1)",padding:"32px",textAlign:"center"},children:[r.jsx("div",{style:{position:"absolute",top:"-80px",right:"-80px",width:"160px",height:"160px",background:"rgba(239,68,68,0.2)",borderRadius:"50%",filter:"blur(60px)"}}),r.jsxs("div",{style:{position:"relative",zIndex:10},children:[r.jsx("div",{style:{width:"112px",height:"112px",background:"linear-gradient(135deg, rgba(239,68,68,0.2), rgba(239,68,68,0.1))",color:"#f87171",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",animation:"pulse 2s infinite",border:"4px solid rgba(239,68,68,0.2)",boxShadow:"0 20px 40px rgba(239,68,68,0.2)"},children:r.jsx(Ud,{size:64,strokeWidth:2.5})}),r.jsx("h2",{style:{fontSize:"36px",fontWeight:900,color:"#ffffff",margin:"0 0 12px 0",textShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:"Invalid Ticket"}),r.jsx("p",{style:{color:"#fca5a5",fontWeight:600,background:"rgba(0,0,0,0.2)",padding:"12px 20px",borderRadius:"16px",display:"inline-block",border:"1px solid rgba(239,68,68,0.2)",margin:"0 0 24px 0"},children:y.message}),r.jsx("button",{onClick:k,style:{width:"100%",height:"56px",borderRadius:"16px",background:"rgba(255,255,255,0.05)",border:"2px solid rgba(239,68,68,0.5)",color:"#fca5a5",fontWeight:900,cursor:"pointer",transition:"all 0.2s"},children:"Scan Next Ticket"})]})]})}),y.status==="checked-in"&&r.jsx("div",{style:{maxWidth:"448px",margin:"0 auto"},children:r.jsxs("div",{style:{position:"relative",overflow:"hidden",borderRadius:"24px",background:"linear-gradient(135deg, rgba(16,185,129,0.1), rgba(16,185,129,0.05))",backdropFilter:"blur(20px)",border:"1px solid rgba(16,185,129,0.3)",boxShadow:"0 20px 40px rgba(16,185,129,0.2)",padding:"32px",textAlign:"center"},children:[r.jsx("div",{style:{position:"absolute",top:"-80px",right:"-80px",width:"160px",height:"160px",background:"rgba(16,185,129,0.2)",borderRadius:"50%",filter:"blur(60px)"}}),r.jsxs("div",{style:{position:"relative",zIndex:10},children:[r.jsx("div",{style:{width:"112px",height:"112px",background:"linear-gradient(135deg, #10b981, #14b8a6)",color:"#ffffff",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",boxShadow:"0 20px 40px rgba(16,185,129,0.5)",animation:"bounce 1s infinite"},children:r.jsx(js,{size:64,strokeWidth:2.5})}),r.jsx("h2",{style:{fontSize:"36px",fontWeight:900,background:"linear-gradient(to right, #ffffff, #d1fae5)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",margin:"0 0 12px 0",textShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:"Access Granted"}),r.jsxs("p",{style:{color:"#6ee7b7",fontSize:"20px",fontWeight:700,margin:"0 0 12px 0"},children:["Welcome, ",y.data.guest.name,"!"]}),r.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",fontSize:"14px",color:"rgba(255,255,255,0.6)",background:"rgba(0,0,0,0.2)",padding:"8px 16px",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.1)",margin:"0 0 24px 0"},children:["Total Party: ",r.jsx("span",{style:{color:"#ffffff",fontWeight:900,fontSize:"18px"},children:b})]}),r.jsxs("button",{onClick:k,style:{width:"100%",height:"64px",borderRadius:"16px",background:"linear-gradient(to right, #6366f1, #a855f7)",border:"none",color:"#ffffff",fontSize:"18px",fontWeight:900,cursor:"pointer",boxShadow:"0 8px 16px rgba(99,102,241,0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",margin:"0 auto",transition:"all 0.2s"},children:[r.jsx(gg,{size:24,strokeWidth:2.5})," Scan Next Guest"]})]})]})})]})]})]})},Hm=()=>{const{eventId:u,guestId:h}=go(),{getEvent:l,rsvpGuest:g,loading:y}=Tr(),[x,b]=W.useState("loading"),[I,S]=W.useState(null),[v,A]=W.useState(null);W.useEffect(()=>{if(y){b("loading");return}const O=l(u);if(!O){b("error");return}const X=O.guests?.find(q=>q.id===h);if(!X){b("error");return}A(O),S(X),X.rsvp!==void 0&&X.rsvp!==null?b("already-rsvpd"):b("ready")},[u,h,l,y]);const k=async O=>{try{await g(u,h,O),b("success")}catch(X){console.error("RSVP error:",X),b("error")}};if(x==="loading")return r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"var(--bg-secondary)"},children:r.jsx("p",{style:{color:"var(--text-secondary)"},children:"Loading..."})});if(x==="error")return r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"var(--bg-secondary)",padding:"2rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"32rem",textAlign:"center",padding:"3rem 2rem"},children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"1rem"},children:"Invitation Not Found"}),r.jsx("p",{style:{color:"var(--text-secondary)"},children:"This invitation link is invalid or has expired."})]})});if(x==="success")return r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"2rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"32rem",textAlign:"center",padding:"3rem 2rem"},children:[r.jsx("div",{style:{width:"4rem",height:"4rem",backgroundColor:"#d1fae5",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:r.jsx(js,{size:32,style:{color:"var(--success)"}})}),r.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"1rem"},children:"You're All Set!"}),r.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"1.125rem",marginBottom:"0.5rem"},children:["Thanks for confirming, ",r.jsx("strong",{children:I?.name}),"!"]}),r.jsxs("p",{style:{color:"var(--text-secondary)"},children:["We can't wait to see you at ",r.jsx("strong",{children:v?.title})]}),r.jsx("div",{style:{marginTop:"2rem",padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)"},children:r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:"You'll receive your QR code ticket soon. Show it at the door to check in!"})})]})});if(x==="already-rsvpd"){const O=I.rsvp===!0?"attending":"not attending",X=I.rsvp===!0?"var(--success)":"var(--error)";return r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"var(--bg-secondary)",padding:"2rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"32rem",padding:"3rem 2rem"},children:[r.jsx("div",{style:{width:"4rem",height:"4rem",backgroundColor:I.rsvp?"#d1fae5":"#fee2e2",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:r.jsx(js,{size:32,style:{color:X}})}),r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"1rem",textAlign:"center"},children:"RSVP Received"}),r.jsxs("p",{style:{color:"var(--text-secondary)",textAlign:"center",marginBottom:"1.5rem"},children:["You've confirmed you're ",r.jsx("strong",{style:{color:X},children:O})," for ",r.jsx("strong",{children:v?.title})]}),r.jsx("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"1.5rem",marginBottom:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[v?.date&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",color:"var(--text-secondary)"},children:[r.jsx(Nr,{size:18}),r.jsx("span",{children:new Date(v.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),v?.location&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",color:"var(--text-secondary)"},children:[r.jsx(qi,{size:18}),r.jsx("span",{children:v.location})]})]})}),r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"1rem"},children:"Need to change your response?"}),r.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[r.jsx("button",{onClick:()=>k(!1),className:"btn btn-secondary",style:{flex:1,padding:"0.875rem",backgroundColor:I.rsvp===!1?"var(--error)":"",color:I.rsvp===!1?"white":""},children:"Can't Make It"}),r.jsx("button",{onClick:()=>k(!0),className:"btn btn-primary",style:{flex:1,padding:"0.875rem",backgroundColor:I.rsvp===!0?"var(--success)":""},children:"Yes, I'll Be There!"})]})]})]})})}return r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"2rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"32rem",padding:"3rem 2rem"},children:[r.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[r.jsx("h1",{style:{fontSize:"2.25rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"1rem"},children:"You're Invited!"}),r.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",backgroundColor:"#e0e7ff",borderRadius:"9999px",marginBottom:"1.5rem"},children:r.jsx("span",{style:{color:"var(--primary)",fontWeight:600,fontSize:"0.875rem"},children:I?.name})})]}),r.jsxs("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"1.5rem",marginBottom:"2rem"},children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"1rem"},children:v?.title}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[v?.date&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",color:"var(--text-secondary)"},children:[r.jsx(Nr,{size:18}),r.jsx("span",{children:new Date(v.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),v?.location&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",color:"var(--text-secondary)"},children:[r.jsx(qi,{size:18}),r.jsx("span",{children:v.location})]})]})]}),r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx("p",{style:{fontSize:"1.125rem",color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Will you be attending?"}),r.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[r.jsx("button",{onClick:()=>k(!1),className:"btn btn-secondary",style:{flex:1,padding:"0.875rem"},children:"Can't Make It"}),r.jsx("button",{onClick:()=>k(!0),className:"btn btn-primary",style:{flex:1,padding:"0.875rem"},children:"Yes, I'll Be There!"})]})]})]})})},Xm=()=>{const{id:u}=go(),h=Wn(),{fetchPublicEvent:l}=Tr(),[g,y]=W.useState(null),[x,b]=W.useState(!0),[I,S]=W.useState(null);W.useEffect(()=>{v()},[u]);const v=async()=>{try{const A=await l(u);y(A)}catch{S("Event not found")}finally{b(!1)}};return x?r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%)"},children:r.jsx(Nl,{size:48,style:{color:"white",animation:"spin 1s linear infinite"}})}):I&&!g?r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"2rem",textAlign:"center"},children:[r.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:700,marginBottom:"1rem"},children:"Oops!"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:I}),r.jsxs("button",{onClick:()=>h("/"),className:"btn btn-primary",children:[r.jsx(mi,{size:16})," Go Home"]})]}):r.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%)",padding:"2rem 1rem"},children:[r.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[r.jsxs("div",{style:{textAlign:"center",color:"white",marginBottom:"3rem"},children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),r.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:700,marginBottom:"0.5rem"},children:"You're Invited!"}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:600,opacity:.95},children:g.title})]}),r.jsx("div",{className:"card",style:{padding:"2rem",marginBottom:"2rem"},children:r.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[g.date&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"var(--radius-lg)",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Nr,{size:24,style:{color:"var(--primary)"}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Date"}),r.jsx("div",{style:{fontSize:"1.125rem",fontWeight:600},children:new Date(g.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),g.time&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"var(--radius-lg)",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Nd,{size:24,style:{color:"var(--primary)"}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Time"}),r.jsx("div",{style:{fontSize:"1.125rem",fontWeight:600},children:g.time})]})]}),g.venue?.name&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"var(--radius-lg)",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(qi,{size:24,style:{color:"var(--primary)"}})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Venue"}),r.jsx("div",{style:{fontSize:"1.125rem",fontWeight:600},children:g.venue.name}),g.venue.address&&r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:g.venue.address})]})]}),g.description&&r.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",borderLeft:"4px solid var(--primary)"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.5rem"},children:"About the Event"}),r.jsx("div",{style:{lineHeight:"1.6",color:"var(--text-primary)"},children:g.description})]})]})}),r.jsx("div",{style:{textAlign:"center",color:"white",fontSize:"0.875rem",opacity:.9,marginBottom:"1rem"},children:"We look forward to seeing you there! "}),r.jsxs("div",{style:{textAlign:"center",color:"white",opacity:.7,fontSize:"0.75rem"},children:["Powered by Host",r.jsx("i",{children:"Eze"})," "]})]}),r.jsx("style",{children:`
                @keyframes spin {
                    to { transform: rotate(360deg); }
                }
            `})]})};var lo;(function(u){u.Prompt="PROMPT",u.Camera="CAMERA",u.Photos="PHOTOS"})(lo||(lo={}));var ca;(function(u){u.Rear="REAR",u.Front="FRONT"})(ca||(ca={}));var O0;(function(u){u.Uri="uri",u.Base64="base64",u.DataUrl="dataUrl"})(O0||(O0={}));class Ym extends pa{async getPhoto(h){return new Promise(async(l,g)=>{if(h.webUseInput||h.source===lo.Photos)this.fileInputExperience(h,l,g);else if(h.source===lo.Prompt){let y=document.querySelector("pwa-action-sheet");y||(y=document.createElement("pwa-action-sheet"),document.body.appendChild(y)),y.header=h.promptLabelHeader||"Photo",y.cancelable=!1,y.options=[{title:h.promptLabelPhoto||"From Photos"},{title:h.promptLabelPicture||"Take Picture"}],y.addEventListener("onSelection",async x=>{x.detail===0?this.fileInputExperience(h,l,g):this.cameraExperience(h,l,g)})}else this.cameraExperience(h,l,g)})}async pickImages(h){return new Promise(async(l,g)=>{this.multipleFileInputExperience(l,g)})}async cameraExperience(h,l,g){if(customElements.get("pwa-camera-modal")){const y=document.createElement("pwa-camera-modal");y.facingMode=h.direction===ca.Front?"user":"environment",document.body.appendChild(y);try{await y.componentOnReady(),y.addEventListener("onPhoto",async x=>{const b=x.detail;b===null?g(new As("User cancelled photos app")):b instanceof Error?g(b):l(await this._getCameraPhoto(b,h)),y.dismiss(),document.body.removeChild(y)}),y.present()}catch{this.fileInputExperience(h,l,g)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(h,l,g)}fileInputExperience(h,l,g){let y=document.querySelector("#_capacitor-camera-input");const x=()=>{var b;(b=y.parentNode)===null||b===void 0||b.removeChild(y)};y||(y=document.createElement("input"),y.id="_capacitor-camera-input",y.type="file",y.hidden=!0,document.body.appendChild(y),y.addEventListener("change",b=>{const I=y.files[0];let S="jpeg";if(I.type==="image/png"?S="png":I.type==="image/gif"&&(S="gif"),h.resultType==="dataUrl"||h.resultType==="base64"){const v=new FileReader;v.addEventListener("load",()=>{if(h.resultType==="dataUrl")l({dataUrl:v.result,format:S});else if(h.resultType==="base64"){const A=v.result.split(",")[1];l({base64String:A,format:S})}x()}),v.readAsDataURL(I)}else l({webPath:URL.createObjectURL(I),format:S}),x()}),y.addEventListener("cancel",b=>{g(new As("User cancelled photos app")),x()})),y.accept="image/*",y.capture=!0,h.source===lo.Photos||h.source===lo.Prompt?y.removeAttribute("capture"):h.direction===ca.Front?y.capture="user":h.direction===ca.Rear&&(y.capture="environment"),y.click()}multipleFileInputExperience(h,l){let g=document.querySelector("#_capacitor-camera-input-multiple");const y=()=>{var x;(x=g.parentNode)===null||x===void 0||x.removeChild(g)};g||(g=document.createElement("input"),g.id="_capacitor-camera-input-multiple",g.type="file",g.hidden=!0,g.multiple=!0,document.body.appendChild(g),g.addEventListener("change",x=>{const b=[];for(let I=0;I<g.files.length;I++){const S=g.files[I];let v="jpeg";S.type==="image/png"?v="png":S.type==="image/gif"&&(v="gif"),b.push({webPath:URL.createObjectURL(S),format:v})}h({photos:b}),y()}),g.addEventListener("cancel",x=>{l(new As("User cancelled photos app")),y()})),g.accept="image/*",g.click()}_getCameraPhoto(h,l){return new Promise((g,y)=>{const x=new FileReader,b=h.type.split("/")[1];l.resultType==="uri"?g({webPath:URL.createObjectURL(h),format:b,saved:!1}):(x.readAsDataURL(h),x.onloadend=()=>{const I=x.result;l.resultType==="dataUrl"?g({dataUrl:I,format:b,saved:!1}):g({base64String:I.split(",")[1],format:b,saved:!1})},x.onerror=I=>{y(I)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const _f=$i("Camera",{web:()=>new Ym}),Gi="https://gatherly-backend-3vmv.onrender.com",Zm=()=>{const{eventId:u}=go(),h=Wn(),[l,g]=W.useState([]),[y,x]=W.useState([]),[b,I]=W.useState(null),[S,v]=W.useState(!0),[A,k]=W.useState(!1),[O,X]=W.useState(""),[q,F]=W.useState(null),[V,Y]=W.useState(!1),[R,N]=W.useState(null),[M,D]=W.useState(null);W.useEffect(()=>{Z()},[u]);const Z=async()=>{try{const we=localStorage.getItem("token"),xe=await fetch(`${Gi}/wall/${u}/details`,{headers:{Authorization:`Bearer ${we}`}});if(xe.ok){const K=await xe.json();N(K)}const le=await fetch(`${Gi}/wall/${u}/join`,{method:"POST",headers:{Authorization:`Bearer ${we}`}});if(!le.ok){const K=await le.text();throw console.error("Join failed:",le.status,K.substring(0,200)),new Error(`Failed to join event wall: ${le.status}`)}const ne=await fetch(`${Gi}/wall/${u}/posts`,{headers:{Authorization:`Bearer ${we}`}});if(!ne.ok){const K=await ne.text();throw console.error("Posts fetch failed:",ne.status,K.substring(0,200)),new Error(`Failed to load posts: ${ne.status}`)}const G=await ne.json();g(G.posts||[]);const J=await fetch(`${Gi}/wall/${u}/participants`,{headers:{Authorization:`Bearer ${we}`}});if(!J.ok){const K=await J.text();throw console.error("Participants fetch failed:",J.status,K.substring(0,200)),new Error(`Failed to load participants: ${J.status}`)}const ce=(await J.json()).participants||[];x(ce);const Se=ce.find(K=>K.is_current_user);Se&&I(Se.id),v(!1)}catch(we){console.error("Error loading event wall:",we),v(!1)}};W.useEffect(()=>{const we=localStorage.getItem("token");if(we)try{const xe=JSON.parse(atob(we.split(".")[1]));D(xe.id)}catch(xe){console.error("Error parsing token:",xe)}},[]);const z=async()=>{try{const we=await _f.getPhoto({quality:70,resultType:"base64",source:"photos",saveToGallery:!1}),xe=`data:image/${we.format};base64,${we.base64String}`;F(xe)}catch(we){console.error("Error picking image:",we)}},Q=async()=>{if(!(!O.trim()&&!q)&&!V)try{Y(!0);const we=localStorage.getItem("token");if(!b){alert("Unable to post - no participant found. Please refresh the page."),console.error("No current participant ID found");return}const xe=await fetch(`${Gi}/wall/${u}/posts`,{method:"POST",headers:{Authorization:`Bearer ${we}`,"Content-Type":"application/json"},body:JSON.stringify({participantId:b,type:q?"photo":"message",content:O||"",photoUrl:q||null})});console.log("Post creation response status:",xe.status);const le=await xe.json();console.log("Post creation response data:",le),xe.ok?(bf({particleCount:80,spread:60,origin:{y:.7},colors:["#6366f1","#a855f7","#ec4899"]}),X(""),F(null),k(!1),await Z()):alert(`Failed to create post: ${le.error||"Unknown error"}`)}catch(we){console.error("Error creating post:",we),alert("Failed to create post. Check console for details.")}finally{Y(!1)}},he=async we=>{try{const xe=localStorage.getItem("token");if(!b){console.error("No current participant ID found");return}const ne=l.find(G=>G.id===we)?.user_has_liked;g(l.map(G=>G.id===we?{...G,user_has_liked:!ne,like_count:(G.like_count||0)+(ne?-1:1)}:G)),ne?await fetch(`${Gi}/wall/${u}/posts/${we}/like/${b}`,{method:"DELETE",headers:{Authorization:`Bearer ${xe}`}}):await fetch(`${Gi}/wall/${u}/posts/${we}/like`,{method:"POST",headers:{Authorization:`Bearer ${xe}`,"Content-Type":"application/json"},body:JSON.stringify({participantId:b})}),await Z()}catch(xe){console.error("Error toggling like:",xe),await Z()}},Ae=async we=>{if(window.confirm("Are you sure you want to delete this post? This action cannot be undone."))try{const xe=localStorage.getItem("token"),le=await fetch(`${Gi}/wall/${u}/posts/${we}`,{method:"DELETE",headers:{Authorization:`Bearer ${xe}`}});if(le.ok)g(l.filter(ne=>ne.id!==we));else{const ne=await le.json();alert(ne.error||"Failed to delete post")}}catch(xe){console.error("Error deleting post:",xe),alert("Failed to delete post")}};return S?r.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(to bottom, #0a0b1e, #101127)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("div",{style:{color:"#a5b4fc",fontSize:"18px",fontWeight:600},children:"Loading event wall..."})}):r.jsxs("div",{style:{minHeight:"100vh",background:"#fff"},children:[r.jsx("div",{style:{background:"#fff",padding:"20px 16px",borderBottom:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},children:[r.jsx("button",{onClick:()=>h(-1),style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#a5b4fc"},children:r.jsx(mi,{size:20})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("h1",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",margin:0},children:R?.title||"Event Wall"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"4px"},children:[r.jsx(Vt,{size:14,color:"#6b7280"}),r.jsxs("span",{style:{color:"#6b7280",fontSize:"12px",fontWeight:"500"},children:[y.length," participants"]})]})]}),r.jsxs("button",{onClick:()=>k(!0),style:{padding:"10px 16px",borderRadius:"8px",background:"#6366f1",border:"none",color:"#ffffff",fontWeight:"600",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[r.jsx(Ft,{size:16,strokeWidth:3})," Post"]})]})}),A&&r.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.8)",zIndex:1e3,display:"flex",alignItems:"flex-end",justifyContent:"center"},children:r.jsxs("div",{style:{width:"100%",maxWidth:"600px",background:"#fff",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",padding:"24px",paddingBottom:"calc(24px + 60px + env(safe-area-inset-bottom))",boxShadow:"0 -4px 20px rgba(0,0,0,0.1)",maxHeight:"80vh",overflowY:"auto"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[r.jsx("h3",{style:{color:"#1f2937",fontSize:"18px",fontWeight:"600",margin:0},children:"New Post"}),r.jsx("button",{onClick:()=>k(!1),style:{background:"#f3f4f6",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px 16px",color:"#6b7280",cursor:"pointer",fontWeight:"500"},children:"Cancel"})]}),r.jsxs("button",{onClick:z,style:{width:"100%",padding:"12px",borderRadius:"8px",background:"#f3f4f6",border:"1px solid #e5e7eb",color:"#6b7280",fontWeight:"500",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"12px"},children:[r.jsx(hf,{size:18})," Add Photo"]}),q&&r.jsxs("div",{style:{position:"relative",marginBottom:"12px"},children:[r.jsx("img",{src:q,style:{width:"100%",maxHeight:"200px",objectFit:"cover",borderRadius:"8px"},alt:"Selected"}),r.jsx("button",{onClick:()=>F(null),style:{position:"absolute",top:"8px",right:"8px",background:"rgba(0,0,0,0.6)",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff"},children:r.jsx(kt,{size:18})})]}),r.jsx("textarea",{value:O,onChange:we=>X(we.target.value),placeholder:"What's on your mind?",style:{width:"100%",minHeight:"120px",padding:"16px",borderRadius:"8px",background:"#fff",border:"1px solid #e5e7eb",color:"#1f2937",fontSize:"15px",resize:"vertical",marginBottom:"16px",fontFamily:"inherit"}}),r.jsxs("button",{onClick:Q,disabled:!O.trim()||V,style:{width:"100%",padding:"12px",borderRadius:"8px",background:O.trim()&&!V?"#6366f1":"#f3f4f6",border:"none",color:O.trim()&&!V?"#ffffff":"#9ca3af",fontWeight:"600",fontSize:"15px",cursor:O.trim()&&!V?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",opacity:V?.6:1},children:[r.jsx(xf,{size:18,strokeWidth:2.5}),V?"Posting...":"Post to Wall"]})]})}),r.jsx("div",{style:{padding:"16px",paddingBottom:"max(80px, env(safe-area-inset-bottom))"},children:l.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[r.jsx(_d,{size:48,color:"#6366f1",style:{marginBottom:"16px"}}),r.jsx("h3",{style:{color:"#1f2937",fontSize:"18px",fontWeight:"600",margin:"0 0 8px 0"},children:"No posts yet"}),r.jsx("p",{style:{color:"#6b7280",fontSize:"14px",margin:0},children:"Be the first to share something!"})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:l.map(we=>r.jsxs("div",{style:{background:"#fff",borderRadius:"12px",padding:"20px",marginBottom:"12px",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0,0,0,0.05)",position:"relative",overflow:"hidden"},children:[we.is_pinned&&r.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",background:"linear-gradient(135deg, #fbbf24, #f59e0b)",color:"#000",padding:"4px 12px",borderRadius:"12px",fontSize:"10px",fontWeight:900,textTransform:"uppercase",letterSpacing:"0.5px"},children:" Pinned"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[we.author_profile_picture?r.jsx("img",{src:we.author_profile_picture,alt:we.author_name,style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover",border:"2px solid #e5e7eb"}}):r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #6366f1, #a855f7)",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff",fontWeight:900,fontSize:"16px"},children:we.author_name?.charAt(0)||"?"}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{color:"#1f2937",fontWeight:"600",fontSize:"15px"},children:we.author_name}),r.jsx("div",{style:{color:"#6b7280",fontSize:"12px"},children:new Date(we.created_at).toLocaleDateString()})]}),(M===R?.user_id||M===we.author_user_id)&&r.jsx("button",{onClick:()=>Ae(we.id),style:{padding:"8px",borderRadius:"8px",background:"transparent",border:"1px solid #e5e7eb",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:xe=>{xe.currentTarget.style.background="#fee2e2",xe.currentTarget.style.borderColor="#ef4444"},onMouseLeave:xe=>{xe.currentTarget.style.background="transparent",xe.currentTarget.style.borderColor="#e5e7eb"},title:"Delete post",children:r.jsx(Qt,{size:16})})]}),r.jsx("p",{style:{color:"#1f2937",fontSize:"15px",lineHeight:"1.6",margin:"0 0 16px 0",whiteSpace:"pre-wrap"},children:we.content}),we.photo_url&&r.jsx("img",{src:we.photo_url,style:{width:"100%",maxHeight:"400px",objectFit:"cover",borderRadius:"8px",marginTop:"12px",cursor:"pointer"},onClick:()=>window.open(we.photo_url,"_blank"),alt:"Post image"}),r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"24px",paddingTop:"12px",borderTop:"1px solid #e5e7eb"},children:r.jsxs("button",{onClick:()=>he(we.id),style:{display:"flex",alignItems:"center",gap:"6px",background:"none",border:"none",color:we.user_has_liked?"#f87171":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:600,transition:"color 0.2s"},children:[r.jsx(kl,{size:18,fill:we.user_has_liked?"#f87171":"none"})," ",we.like_count||0]})})]},we.id))})})]})};var Dd=function(u,h){return Dd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,g){l.__proto__=g}||function(l,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(l[y]=g[y])},Dd(u,h)};function qm(u,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");Dd(u,h);function l(){this.constructor=u}u.prototype=h===null?Object.create(h):(l.prototype=h.prototype,new l)}var En=function(){return En=Object.assign||function(h){for(var l,g=1,y=arguments.length;g<y;g++){l=arguments[g];for(var x in l)Object.prototype.hasOwnProperty.call(l,x)&&(h[x]=l[x])}return h},En.apply(this,arguments)};var xd,D0;function Km(){if(D0)return xd;D0=1;var u=!1,h,l,g,y,x,b,I,S,v,A,k,O,X,q,F;function V(){if(!u){u=!0;var R=navigator.userAgent,N=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(R),M=/(Mac OS X)|(Windows)|(Linux)/.exec(R);if(O=/\b(iPhone|iP[ao]d)/.exec(R),X=/\b(iP[ao]d)/.exec(R),A=/Android/i.exec(R),q=/FBAN\/\w+;/i.exec(R),F=/Mobile/i.exec(R),k=!!/Win64/.exec(R),N){h=N[1]?parseFloat(N[1]):N[5]?parseFloat(N[5]):NaN,h&&document&&document.documentMode&&(h=document.documentMode);var D=/(?:Trident\/(\d+.\d+))/.exec(R);b=D?parseFloat(D[1])+4:h,l=N[2]?parseFloat(N[2]):NaN,g=N[3]?parseFloat(N[3]):NaN,y=N[4]?parseFloat(N[4]):NaN,y?(N=/(?:Chrome\/(\d+\.\d+))/.exec(R),x=N&&N[1]?parseFloat(N[1]):NaN):x=NaN}else h=l=g=x=y=NaN;if(M){if(M[1]){var Z=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(R);I=Z?parseFloat(Z[1].replace("_",".")):!0}else I=!1;S=!!M[2],v=!!M[3]}else I=S=v=!1}}var Y={ie:function(){return V()||h},ieCompatibilityMode:function(){return V()||b>h},ie64:function(){return Y.ie()&&k},firefox:function(){return V()||l},opera:function(){return V()||g},webkit:function(){return V()||y},safari:function(){return Y.webkit()},chrome:function(){return V()||x},windows:function(){return V()||S},osx:function(){return V()||I},linux:function(){return V()||v},iphone:function(){return V()||O},mobile:function(){return V()||O||X||A||F},nativeApp:function(){return V()||q},android:function(){return V()||A},ipad:function(){return V()||X}};return xd=Y,xd}var yd,P0;function $m(){if(P0)return yd;P0=1;var u=!!(typeof window<"u"&&window.document&&window.document.createElement),h={canUseDOM:u,canUseWorkers:typeof Worker<"u",canUseEventListeners:u&&!!(window.addEventListener||window.attachEvent),canUseViewport:u&&!!window.screen,isInWorker:!u};return yd=h,yd}var vd,M0;function Qm(){if(M0)return vd;M0=1;var u=$m(),h;u.canUseDOM&&(h=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function l(g,y){if(!u.canUseDOM||y&&!("addEventListener"in document))return!1;var x="on"+g,b=x in document;if(!b){var I=document.createElement("div");I.setAttribute(x,"return;"),b=typeof I[x]=="function"}return!b&&h&&g==="wheel"&&(b=document.implementation.hasFeature("Events.wheel","3.0")),b}return vd=l,vd}var wd,B0;function Jm(){if(B0)return wd;B0=1;var u=Km(),h=Qm(),l=10,g=40,y=800;function x(b){var I=0,S=0,v=0,A=0;return"detail"in b&&(S=b.detail),"wheelDelta"in b&&(S=-b.wheelDelta/120),"wheelDeltaY"in b&&(S=-b.wheelDeltaY/120),"wheelDeltaX"in b&&(I=-b.wheelDeltaX/120),"axis"in b&&b.axis===b.HORIZONTAL_AXIS&&(I=S,S=0),v=I*l,A=S*l,"deltaY"in b&&(A=b.deltaY),"deltaX"in b&&(v=b.deltaX),(v||A)&&b.deltaMode&&(b.deltaMode==1?(v*=g,A*=g):(v*=y,A*=y)),v&&!I&&(I=v<1?-1:1),A&&!S&&(S=A<1?-1:1),{spinX:I,spinY:S,pixelX:v,pixelY:A}}return x.getEventType=function(){return u.firefox()?"DOMMouseScroll":h("wheel")?"wheel":"mousewheel"},wd=x,wd}var Cd,L0;function ex(){return L0||(L0=1,Cd=Jm()),Cd}var tx=ex();const nx=Bl(tx);function rx(u,h,l,g,y,x){x===void 0&&(x=0);var b=ho(u,h,x),I=b.width,S=b.height,v=Math.min(I,l),A=Math.min(S,g);return v>A*y?{width:A*y,height:A}:{width:v,height:v/y}}function ix(u){return u.width>u.height?u.width/u.naturalWidth:u.height/u.naturalHeight}function oa(u,h,l,g,y){y===void 0&&(y=0);var x=ho(h.width,h.height,y),b=x.width,I=x.height;return{x:z0(u.x,b,l.width,g),y:z0(u.y,I,l.height,g)}}function z0(u,h,l,g){var y=h*g/2-l/2;return zl(u,-y,y)}function F0(u,h){return Math.sqrt(Math.pow(u.y-h.y,2)+Math.pow(u.x-h.x,2))}function W0(u,h){return Math.atan2(h.y-u.y,h.x-u.x)*180/Math.PI}function sx(u,h,l,g,y,x,b){x===void 0&&(x=0),b===void 0&&(b=!0);var I=b?ox:ax,S=ho(h.width,h.height,x),v=ho(h.naturalWidth,h.naturalHeight,x),A={x:I(100,((S.width-l.width/y)/2-u.x/y)/S.width*100),y:I(100,((S.height-l.height/y)/2-u.y/y)/S.height*100),width:I(100,l.width/S.width*100/y),height:I(100,l.height/S.height*100/y)},k=Math.round(I(v.width,A.width*v.width/100)),O=Math.round(I(v.height,A.height*v.height/100)),X=v.width>=v.height*g,q=X?{width:Math.round(O*g),height:O}:{width:k,height:Math.round(k/g)},F=En(En({},q),{x:Math.round(I(v.width-q.width,A.x*v.width/100)),y:Math.round(I(v.height-q.height,A.y*v.height/100))});return{croppedAreaPercentages:A,croppedAreaPixels:F}}function ox(u,h){return Math.min(u,Math.max(0,h))}function ax(u,h){return h}function lx(u,h,l,g,y,x){var b=ho(h.width,h.height,l),I=zl(g.width/b.width*(100/u.width),y,x),S={x:I*b.width/2-g.width/2-b.width*I*(u.x/100),y:I*b.height/2-g.height/2-b.height*I*(u.y/100)};return{crop:S,zoom:I}}function cx(u,h,l){var g=ix(h);return l.height>l.width?l.height/(u.height*g):l.width/(u.width*g)}function dx(u,h,l,g,y,x){l===void 0&&(l=0);var b=ho(h.naturalWidth,h.naturalHeight,l),I=zl(cx(u,h,g),y,x),S=g.height>g.width?g.height/u.height:g.width/u.width,v={x:((b.width-u.width)/2-u.x)*S,y:((b.height-u.height)/2-u.y)*S};return{crop:v,zoom:I}}function U0(u,h){return{x:(h.x+u.x)/2,y:(h.y+u.y)/2}}function ux(u){return u*Math.PI/180}function ho(u,h,l){var g=ux(l);return{width:Math.abs(Math.cos(g)*u)+Math.abs(Math.sin(g)*h),height:Math.abs(Math.sin(g)*u)+Math.abs(Math.cos(g)*h)}}function zl(u,h,l){return Math.min(Math.max(u,h),l)}function Al(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];return u.filter(function(l){return typeof l=="string"&&l.length>0}).join(" ").trim()}var hx=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,fx=1,px=3,gx=1,mx=(function(u){qm(h,u);function h(){var l=u!==null&&u.apply(this,arguments)||this;return l.cropperRef=W.createRef(),l.imageRef=W.createRef(),l.videoRef=W.createRef(),l.containerPosition={x:0,y:0},l.containerRef=null,l.styleRef=null,l.containerRect=null,l.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},l.dragStartPosition={x:0,y:0},l.dragStartCrop={x:0,y:0},l.gestureZoomStart=0,l.gestureRotationStart=0,l.isTouching=!1,l.lastPinchDistance=0,l.lastPinchRotation=0,l.rafDragTimeout=null,l.rafPinchTimeout=null,l.wheelTimer=null,l.currentDoc=typeof document<"u"?document:null,l.currentWindow=typeof window<"u"?window:null,l.resizeObserver=null,l.previousCropSize=null,l.isInitialized=!1,l.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},l.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!l.containerRef)){var g=!0;l.resizeObserver=new window.ResizeObserver(function(y){if(g){g=!1;return}l.computeSizes()}),l.resizeObserver.observe(l.containerRef)}},l.preventZoomSafari=function(g){return g.preventDefault()},l.cleanEvents=function(){l.currentDoc&&(l.currentDoc.removeEventListener("mousemove",l.onMouseMove),l.currentDoc.removeEventListener("mouseup",l.onDragStopped),l.currentDoc.removeEventListener("touchmove",l.onTouchMove),l.currentDoc.removeEventListener("touchend",l.onDragStopped),l.currentDoc.removeEventListener("gesturechange",l.onGestureChange),l.currentDoc.removeEventListener("gestureend",l.onGestureEnd),l.currentDoc.removeEventListener("scroll",l.onScroll))},l.clearScrollEvent=function(){l.containerRef&&l.containerRef.removeEventListener("wheel",l.onWheel),l.wheelTimer&&clearTimeout(l.wheelTimer)},l.onMediaLoad=function(){var g=l.computeSizes();g&&(l.previousCropSize=g,l.emitCropData(),l.setInitialCrop(g),l.isInitialized=!0),l.props.onMediaLoaded&&l.props.onMediaLoaded(l.mediaSize)},l.setInitialCrop=function(g){if(l.props.initialCroppedAreaPercentages){var y=lx(l.props.initialCroppedAreaPercentages,l.mediaSize,l.props.rotation,g,l.props.minZoom,l.props.maxZoom),x=y.crop,b=y.zoom;l.props.onCropChange(x),l.props.onZoomChange&&l.props.onZoomChange(b)}else if(l.props.initialCroppedAreaPixels){var I=dx(l.props.initialCroppedAreaPixels,l.mediaSize,l.props.rotation,g,l.props.minZoom,l.props.maxZoom),x=I.crop,b=I.zoom;l.props.onCropChange(x),l.props.onZoomChange&&l.props.onZoomChange(b)}},l.computeSizes=function(){var g,y,x,b,I,S,v=l.imageRef.current||l.videoRef.current;if(v&&l.containerRef){l.containerRect=l.containerRef.getBoundingClientRect(),l.saveContainerPosition();var A=l.containerRect.width/l.containerRect.height,k=((g=l.imageRef.current)===null||g===void 0?void 0:g.naturalWidth)||((y=l.videoRef.current)===null||y===void 0?void 0:y.videoWidth)||0,O=((x=l.imageRef.current)===null||x===void 0?void 0:x.naturalHeight)||((b=l.videoRef.current)===null||b===void 0?void 0:b.videoHeight)||0,X=v.offsetWidth<k||v.offsetHeight<O,q=k/O,F=void 0;if(X)switch(l.state.mediaObjectFit){default:case"contain":F=A>q?{width:l.containerRect.height*q,height:l.containerRect.height}:{width:l.containerRect.width,height:l.containerRect.width/q};break;case"horizontal-cover":F={width:l.containerRect.width,height:l.containerRect.width/q};break;case"vertical-cover":F={width:l.containerRect.height*q,height:l.containerRect.height};break}else F={width:v.offsetWidth,height:v.offsetHeight};l.mediaSize=En(En({},F),{naturalWidth:k,naturalHeight:O}),l.props.setMediaSize&&l.props.setMediaSize(l.mediaSize);var V=l.props.cropSize?l.props.cropSize:rx(l.mediaSize.width,l.mediaSize.height,l.containerRect.width,l.containerRect.height,l.props.aspect,l.props.rotation);return(((I=l.state.cropSize)===null||I===void 0?void 0:I.height)!==V.height||((S=l.state.cropSize)===null||S===void 0?void 0:S.width)!==V.width)&&l.props.onCropSizeChange&&l.props.onCropSizeChange(V),l.setState({cropSize:V},l.recomputeCropPosition),l.props.setCropSize&&l.props.setCropSize(V),V}},l.saveContainerPosition=function(){if(l.containerRef){var g=l.containerRef.getBoundingClientRect();l.containerPosition={x:g.left,y:g.top}}},l.onMouseDown=function(g){l.currentDoc&&(g.preventDefault(),l.currentDoc.addEventListener("mousemove",l.onMouseMove),l.currentDoc.addEventListener("mouseup",l.onDragStopped),l.saveContainerPosition(),l.onDragStart(h.getMousePoint(g)))},l.onMouseMove=function(g){return l.onDrag(h.getMousePoint(g))},l.onScroll=function(g){l.currentDoc&&(g.preventDefault(),l.saveContainerPosition())},l.onTouchStart=function(g){l.currentDoc&&(l.isTouching=!0,!(l.props.onTouchRequest&&!l.props.onTouchRequest(g))&&(l.currentDoc.addEventListener("touchmove",l.onTouchMove,{passive:!1}),l.currentDoc.addEventListener("touchend",l.onDragStopped),l.saveContainerPosition(),g.touches.length===2?l.onPinchStart(g):g.touches.length===1&&l.onDragStart(h.getTouchPoint(g.touches[0]))))},l.onTouchMove=function(g){g.preventDefault(),g.touches.length===2?l.onPinchMove(g):g.touches.length===1&&l.onDrag(h.getTouchPoint(g.touches[0]))},l.onGestureStart=function(g){l.currentDoc&&(g.preventDefault(),l.currentDoc.addEventListener("gesturechange",l.onGestureChange),l.currentDoc.addEventListener("gestureend",l.onGestureEnd),l.gestureZoomStart=l.props.zoom,l.gestureRotationStart=l.props.rotation)},l.onGestureChange=function(g){if(g.preventDefault(),!l.isTouching){var y=h.getMousePoint(g),x=l.gestureZoomStart-1+g.scale;if(l.setNewZoom(x,y,{shouldUpdatePosition:!0}),l.props.onRotationChange){var b=l.gestureRotationStart+g.rotation;l.props.onRotationChange(b)}}},l.onGestureEnd=function(g){l.cleanEvents()},l.onDragStart=function(g){var y,x,b=g.x,I=g.y;l.dragStartPosition={x:b,y:I},l.dragStartCrop=En({},l.props.crop),(x=(y=l.props).onInteractionStart)===null||x===void 0||x.call(y)},l.onDrag=function(g){var y=g.x,x=g.y;l.currentWindow&&(l.rafDragTimeout&&l.currentWindow.cancelAnimationFrame(l.rafDragTimeout),l.rafDragTimeout=l.currentWindow.requestAnimationFrame(function(){if(l.state.cropSize&&!(y===void 0||x===void 0)){var b=y-l.dragStartPosition.x,I=x-l.dragStartPosition.y,S={x:l.dragStartCrop.x+b,y:l.dragStartCrop.y+I},v=l.props.restrictPosition?oa(S,l.mediaSize,l.state.cropSize,l.props.zoom,l.props.rotation):S;l.props.onCropChange(v)}}))},l.onDragStopped=function(){var g,y;l.isTouching=!1,l.cleanEvents(),l.emitCropData(),(y=(g=l.props).onInteractionEnd)===null||y===void 0||y.call(g)},l.onWheel=function(g){if(l.currentWindow&&!(l.props.onWheelRequest&&!l.props.onWheelRequest(g))){g.preventDefault();var y=h.getMousePoint(g),x=nx(g).pixelY,b=l.props.zoom-x*l.props.zoomSpeed/200;l.setNewZoom(b,y,{shouldUpdatePosition:!0}),l.state.hasWheelJustStarted||l.setState({hasWheelJustStarted:!0},function(){var I,S;return(S=(I=l.props).onInteractionStart)===null||S===void 0?void 0:S.call(I)}),l.wheelTimer&&clearTimeout(l.wheelTimer),l.wheelTimer=l.currentWindow.setTimeout(function(){return l.setState({hasWheelJustStarted:!1},function(){var I,S;return(S=(I=l.props).onInteractionEnd)===null||S===void 0?void 0:S.call(I)})},250)}},l.getPointOnContainer=function(g,y){var x=g.x,b=g.y;if(!l.containerRect)throw new Error("The Cropper is not mounted");return{x:l.containerRect.width/2-(x-y.x),y:l.containerRect.height/2-(b-y.y)}},l.getPointOnMedia=function(g){var y=g.x,x=g.y,b=l.props,I=b.crop,S=b.zoom;return{x:(y+I.x)/S,y:(x+I.y)/S}},l.setNewZoom=function(g,y,x){var b=x===void 0?{}:x,I=b.shouldUpdatePosition,S=I===void 0?!0:I;if(!(!l.state.cropSize||!l.props.onZoomChange)){var v=zl(g,l.props.minZoom,l.props.maxZoom);if(S){var A=l.getPointOnContainer(y,l.containerPosition),k=l.getPointOnMedia(A),O={x:k.x*v-A.x,y:k.y*v-A.y},X=l.props.restrictPosition?oa(O,l.mediaSize,l.state.cropSize,v,l.props.rotation):O;l.props.onCropChange(X)}l.props.onZoomChange(v)}},l.getCropData=function(){if(!l.state.cropSize)return null;var g=l.props.restrictPosition?oa(l.props.crop,l.mediaSize,l.state.cropSize,l.props.zoom,l.props.rotation):l.props.crop;return sx(g,l.mediaSize,l.state.cropSize,l.getAspect(),l.props.zoom,l.props.rotation,l.props.restrictPosition)},l.emitCropData=function(){var g=l.getCropData();if(g){var y=g.croppedAreaPercentages,x=g.croppedAreaPixels;l.props.onCropComplete&&l.props.onCropComplete(y,x),l.props.onCropAreaChange&&l.props.onCropAreaChange(y,x)}},l.emitCropAreaChange=function(){var g=l.getCropData();if(g){var y=g.croppedAreaPercentages,x=g.croppedAreaPixels;l.props.onCropAreaChange&&l.props.onCropAreaChange(y,x)}},l.recomputeCropPosition=function(){var g,y;if(l.state.cropSize){var x=l.props.crop;if(l.isInitialized&&(!((g=l.previousCropSize)===null||g===void 0)&&g.width)&&(!((y=l.previousCropSize)===null||y===void 0)&&y.height)){var b=Math.abs(l.previousCropSize.width-l.state.cropSize.width)>1e-6||Math.abs(l.previousCropSize.height-l.state.cropSize.height)>1e-6;if(b){var I=l.state.cropSize.width/l.previousCropSize.width,S=l.state.cropSize.height/l.previousCropSize.height;x={x:l.props.crop.x*I,y:l.props.crop.y*S}}}var v=l.props.restrictPosition?oa(x,l.mediaSize,l.state.cropSize,l.props.zoom,l.props.rotation):x;l.previousCropSize=l.state.cropSize,l.props.onCropChange(v),l.emitCropData()}},l.onKeyDown=function(g){var y,x,b=l.props,I=b.crop,S=b.onCropChange,v=b.keyboardStep,A=b.zoom,k=b.rotation,O=v;if(l.state.cropSize){g.shiftKey&&(O*=.2);var X=En({},I);switch(g.key){case"ArrowUp":X.y-=O,g.preventDefault();break;case"ArrowDown":X.y+=O,g.preventDefault();break;case"ArrowLeft":X.x-=O,g.preventDefault();break;case"ArrowRight":X.x+=O,g.preventDefault();break;default:return}l.props.restrictPosition&&(X=oa(X,l.mediaSize,l.state.cropSize,A,k)),g.repeat||(x=(y=l.props).onInteractionStart)===null||x===void 0||x.call(y),S(X)}},l.onKeyUp=function(g){var y,x;switch(g.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":g.preventDefault();break;default:return}l.emitCropData(),(x=(y=l.props).onInteractionEnd)===null||x===void 0||x.call(y)},l}return h.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=hx,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},h.prototype.componentWillUnmount=function(){var l,g;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(l=this.resizeObserver)===null||l===void 0||l.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((g=this.styleRef.parentNode)===null||g===void 0||g.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},h.prototype.componentDidUpdate=function(l){var g,y,x,b,I,S,v,A,k;l.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):l.aspect!==this.props.aspect?this.computeSizes():l.objectFit!==this.props.objectFit?this.computeSizes():l.zoom!==this.props.zoom?this.recomputeCropPosition():((g=l.cropSize)===null||g===void 0?void 0:g.height)!==((y=this.props.cropSize)===null||y===void 0?void 0:y.height)||((x=l.cropSize)===null||x===void 0?void 0:x.width)!==((b=this.props.cropSize)===null||b===void 0?void 0:b.width)?this.computeSizes():(((I=l.crop)===null||I===void 0?void 0:I.x)!==((S=this.props.crop)===null||S===void 0?void 0:S.x)||((v=l.crop)===null||v===void 0?void 0:v.y)!==((A=this.props.crop)===null||A===void 0?void 0:A.y))&&this.emitCropAreaChange(),l.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),l.video!==this.props.video&&((k=this.videoRef.current)===null||k===void 0||k.load());var O=this.getObjectFit();O!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:O},this.computeSizes)},h.prototype.getAspect=function(){var l=this.props,g=l.cropSize,y=l.aspect;return g?g.width/g.height:y},h.prototype.getObjectFit=function(){var l,g,y,x;if(this.props.objectFit==="cover"){var b=this.imageRef.current||this.videoRef.current;if(b&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var I=this.containerRect.width/this.containerRect.height,S=((l=this.imageRef.current)===null||l===void 0?void 0:l.naturalWidth)||((g=this.videoRef.current)===null||g===void 0?void 0:g.videoWidth)||0,v=((y=this.imageRef.current)===null||y===void 0?void 0:y.naturalHeight)||((x=this.videoRef.current)===null||x===void 0?void 0:x.videoHeight)||0,A=S/v;return A<I?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},h.prototype.onPinchStart=function(l){var g=h.getTouchPoint(l.touches[0]),y=h.getTouchPoint(l.touches[1]);this.lastPinchDistance=F0(g,y),this.lastPinchRotation=W0(g,y),this.onDragStart(U0(g,y))},h.prototype.onPinchMove=function(l){var g=this;if(!(!this.currentDoc||!this.currentWindow)){var y=h.getTouchPoint(l.touches[0]),x=h.getTouchPoint(l.touches[1]),b=U0(y,x);this.onDrag(b),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var I=F0(y,x),S=g.props.zoom*(I/g.lastPinchDistance);g.setNewZoom(S,b,{shouldUpdatePosition:!1}),g.lastPinchDistance=I;var v=W0(y,x),A=g.props.rotation+(v-g.lastPinchRotation);g.props.onRotationChange&&g.props.onRotationChange(A),g.lastPinchRotation=v})}},h.prototype.render=function(){var l=this,g,y=this.props,x=y.image,b=y.video,I=y.mediaProps,S=y.cropperProps,v=y.transform,A=y.crop,k=A.x,O=A.y,X=y.rotation,q=y.zoom,F=y.cropShape,V=y.showGrid,Y=y.roundCropAreaPixels,R=y.style,N=R.containerStyle,M=R.cropAreaStyle,D=R.mediaStyle,Z=y.classes,z=Z.containerClassName,Q=Z.cropAreaClassName,he=Z.mediaClassName,Ae=(g=this.state.mediaObjectFit)!==null&&g!==void 0?g:this.getObjectFit();return W.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(xe){return l.containerRef=xe},"data-testid":"container",style:N,className:Al("reactEasyCrop_Container",z)},x?W.createElement("img",En({alt:"",className:Al("reactEasyCrop_Image",Ae==="contain"&&"reactEasyCrop_Contain",Ae==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Ae==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",he)},I,{src:x,ref:this.imageRef,style:En(En({},D),{transform:v||"translate(".concat(k,"px, ").concat(O,"px) rotate(").concat(X,"deg) scale(").concat(q,")")}),onLoad:this.onMediaLoad})):b&&W.createElement("video",En({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Al("reactEasyCrop_Video",Ae==="contain"&&"reactEasyCrop_Contain",Ae==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Ae==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",he)},I,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:En(En({},D),{transform:v||"translate(".concat(k,"px, ").concat(O,"px) rotate(").concat(X,"deg) scale(").concat(q,")")}),controls:!1}),(Array.isArray(b)?b:[{src:b}]).map(function(we){return W.createElement("source",En({key:we.src},we))})),this.state.cropSize&&W.createElement("div",En({ref:this.cropperRef,style:En(En({},M),{width:Y?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:Y?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Al("reactEasyCrop_CropArea",F==="round"&&"reactEasyCrop_CropAreaRound",V&&"reactEasyCrop_CropAreaGrid",Q)},S)))},h.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:px,minZoom:fx,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:gx},h.getMousePoint=function(l){return{x:Number(l.clientX),y:Number(l.clientY)}},h.getTouchPoint=function(l){return{x:Number(l.clientX),y:Number(l.clientY)}},h})(W.Component);const xx=u=>new Promise((h,l)=>{const g=new Image;g.addEventListener("load",()=>h(g)),g.addEventListener("error",y=>l(y)),g.setAttribute("crossOrigin","anonymous"),g.src=u});async function yx(u,h){const l=await xx(u),g=document.createElement("canvas"),y=g.getContext("2d");return g.width=h.width,g.height=h.height,y.drawImage(l,h.x,h.y,h.width,h.height,0,0,h.width,h.height),new Promise(x=>{g.toBlob(b=>{const I=new FileReader;I.readAsDataURL(b),I.onloadend=()=>{x(I.result)}},"image/jpeg",.9)})}const Il="https://gatherly-backend-3vmv.onrender.com",vx=()=>{const u=Wn(),{theme:h,toggleTheme:l}=rg(),{refreshUser:g}=Wr(),[y,x]=W.useState(!0),[b,I]=W.useState(!1),[S,v]=W.useState({name:"",email:"",phone:"",bio:"",profilePictureUrl:null}),[A,k]=W.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[O,X]=W.useState({current:!1,new:!1,confirm:!1}),[q,F]=W.useState("+91"),[V,Y]=W.useState(""),[R,N]=W.useState(""),[M,D]=W.useState(""),[Z,z]=W.useState(null),[Q,he]=W.useState({x:0,y:0}),[Ae,we]=W.useState(1),[xe,le]=W.useState(null),[ne,G]=W.useState(!1);W.useEffect(()=>{J()},[]);const J=async()=>{try{const ee=localStorage.getItem("token");console.log("Loading profile with token:",ee?"present":"missing");const ve=await fetch(`${Il}/api/users/profile`,{headers:{Authorization:`Bearer ${ee}`}});if(console.log("Profile response status:",ve.status),ve.ok){const be=await ve.json();if(console.log("Profile data received:",be),v({name:be.name||"",email:be.email||"",phone:be.phone||"",bio:be.bio||"",profilePictureUrl:be.profilePictureUrl||null}),be.phone)if(be.phone.startsWith("+")){const Oe=be.phone.match(/^(\+\d{1,3})(\d+)$/);Oe?(F(Oe[1]),Y(Oe[2])):Y(be.phone.replace(/\D/g,"").slice(-10))}else Y(be.phone.replace(/\D/g,"").slice(-10))}else{const be=await ve.text();console.error("Profile load failed:",ve.status,be),N("Failed to load profile")}x(!1)}catch(ee){console.error("Error loading profile:",ee),N("Failed to load profile"),x(!1)}},oe=async()=>{try{const ee=await _f.getPhoto({quality:90,resultType:"base64",source:"photos",saveToGallery:!1}),ve=`data:image/${ee.format};base64,${ee.base64String}`;z(ve),G(!0)}catch(ee){console.error("Error picking image:",ee)}},ce=W.useCallback((ee,ve)=>{le(ve)},[]),Se=async()=>{try{const ee=await yx(Z,xe);v({...S,profilePictureUrl:ee}),G(!1),z(null)}catch(ee){console.error("Error cropping image:",ee)}},K=async()=>{try{I(!0),N(""),D("");const ee=localStorage.getItem("token"),ve=await fetch(`${Il}/api/users/profile`,{method:"PATCH",headers:{Authorization:`Bearer ${ee}`,"Content-Type":"application/json"},body:JSON.stringify({name:S.name,phone:V?`${q}${V}`:"",bio:S.bio,profilePictureUrl:S.profilePictureUrl})}),be=await ve.json();ve.ok?(D("Profile updated successfully!"),setTimeout(()=>D(""),3e3),g&&await g()):N(be.error||"Failed to update profile")}catch(ee){console.error("Error saving profile:",ee),N("Failed to save profile")}finally{I(!1)}},B=async ee=>{if(ee.preventDefault(),console.log("=== Change Password Attempt ==="),console.log("Passwords match:",A.newPassword===A.confirmPassword),A.newPassword!==A.confirmPassword){N("New passwords do not match");return}try{I(!0),N(""),D("");const ve=localStorage.getItem("token");console.log("Token present:",ve?"yes":"no"),console.log("Calling API:",`${Il}/users/change-password`);const be=await fetch(`${Il}/users/change-password`,{method:"POST",headers:{Authorization:`Bearer ${ve}`,"Content-Type":"application/json"},body:JSON.stringify({currentPassword:A.currentPassword,newPassword:A.newPassword})});console.log("Response status:",be.status);const Oe=await be.json();if(console.log("Response data:",Oe),be.ok)D("Password changed successfully!"),k({currentPassword:"",newPassword:"",confirmPassword:""}),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>D(""),5e3);else{const Ce=Oe.error||"Failed to change password";console.error("Password change failed:",Ce),N(Ce),setTimeout(()=>N(""),5e3)}}catch(ve){console.error("Error changing password:",ve),N("Network error: Failed to change password"),setTimeout(()=>N(""),5e3)}finally{I(!1)}};return y?r.jsx("div",{style:{minHeight:"100vh",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("div",{style:{color:"#6366f1",fontSize:"18px",fontWeight:600},children:"Loading profile..."})}):r.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-secondary)",paddingTop:"max(20px, env(safe-area-inset-top))",paddingBottom:"max(20px, env(safe-area-inset-bottom))"},children:[r.jsxs("div",{style:{background:"var(--bg-primary)",padding:"16px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"16px",marginBottom:"20px"},children:[r.jsx("button",{onClick:()=>u(-1),style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--bg-tertiary)",border:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(mi,{size:20})}),r.jsx("h1",{style:{fontSize:"20px",fontWeight:"600",color:"var(--text-primary)",margin:0},children:"My Profile"})]}),r.jsxs("div",{style:{padding:"0 16px",maxWidth:"600px",margin:"0 auto"},children:[M&&r.jsxs("div",{style:{position:"fixed",top:"max(70px, calc(env(safe-area-inset-top) + 70px))",left:"50%",transform:"translateX(-50%)",width:"calc(100% - 32px)",maxWidth:"568px",background:"linear-gradient(135deg, #10b981, #059669)",border:"2px solid #047857",borderRadius:"12px",padding:"16px 20px",color:"#fff",fontSize:"15px",fontWeight:"600",boxShadow:"0 10px 25px rgba(16, 185, 129, 0.3)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",animation:"slideDown 0.3s ease"},children:[" ",M]}),R&&r.jsxs("div",{style:{position:"fixed",top:"max(70px, calc(env(safe-area-inset-top) + 70px))",left:"50%",transform:"translateX(-50%)",width:"calc(100% - 32px)",maxWidth:"568px",background:"linear-gradient(135deg, #ef4444, #dc2626)",border:"2px solid #b91c1c",borderRadius:"12px",padding:"16px 20px",color:"#fff",fontSize:"15px",fontWeight:"600",boxShadow:"0 10px 25px rgba(239, 68, 68, 0.3)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",animation:"slideDown 0.3s ease"},children:[" ",R]}),r.jsx("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",padding:"24px",marginBottom:"20px",border:"1px solid var(--border)"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[r.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",background:S.profilePictureUrl?`url(${S.profilePictureUrl})`:"linear-gradient(135deg, #6366f1, #a855f7)",backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"48px",fontWeight:"900",border:"4px solid #f3f4f6"},children:!S.profilePictureUrl&&(S.name?.charAt(0).toUpperCase()||"U")}),r.jsxs("button",{onClick:oe,style:{padding:"10px 20px",borderRadius:"8px",background:"#6366f1",border:"none",color:"#fff",fontWeight:"600",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(lf,{size:18}),"Change Photo"]})]})}),r.jsxs("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",padding:"24px",marginBottom:"20px",border:"1px solid var(--border)"},children:[r.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",color:"var(--text-primary)",marginTop:0,marginBottom:"20px"},children:"Personal Information"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[r.jsxs("div",{children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--text-secondary)",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:[r.jsx(Wd,{size:16}),"Name"]}),r.jsx("input",{type:"text",value:S.name,onChange:ee=>v({...S,name:ee.target.value}),className:"input"})]}),r.jsxs("div",{children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--text-secondary)",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:[r.jsx(ks,{size:16}),"Email"]}),r.jsx("input",{type:"email",value:S.email,disabled:!0,className:"input"})]}),r.jsxs("div",{children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--text-secondary)",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:[r.jsx(uo,{size:16}),"Phone"]}),r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsxs("select",{value:q,onChange:ee=>F(ee.target.value),className:"input",style:{width:"120px"},children:[r.jsx("option",{value:"+91",children:" +91"}),r.jsx("option",{value:"+1",children:" +1"}),r.jsx("option",{value:"+44",children:" +44"}),r.jsx("option",{value:"+61",children:" +61"}),r.jsx("option",{value:"+971",children:" +971"})]}),r.jsx("input",{type:"tel",value:V,onChange:ee=>Y(ee.target.value.replace(/\D/g,"")),placeholder:"9876543210",maxLength:10,className:"input",style:{flex:1}})]})]}),r.jsxs("div",{children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--text-secondary)",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:[r.jsx(lg,{size:16}),"Bio"]}),r.jsx("textarea",{value:S.bio,onChange:ee=>v({...S,bio:ee.target.value}),placeholder:"Tell us about yourself...",maxLength:500,className:"input",style:{minHeight:"100px",resize:"vertical"}}),r.jsxs("div",{style:{textAlign:"right",fontSize:"12px",color:"var(--text-tertiary)",marginTop:"4px"},children:[S.bio?.length||0,"/500"]})]})]}),r.jsxs("button",{onClick:K,disabled:b,style:{width:"100%",marginTop:"20px",padding:"12px",borderRadius:"8px",background:b?"#9ca3af":"#6366f1",border:"none",color:"#fff",fontWeight:"600",fontSize:"15px",cursor:b?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[r.jsx(gf,{size:18}),b?"Saving...":"Save Changes"]})]}),r.jsxs("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",padding:"24px",marginBottom:"20px",border:"1px solid var(--border)"},children:[r.jsxs("h2",{style:{fontSize:"18px",fontWeight:"600",color:"var(--text-primary)",marginTop:0,marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(ha,{size:20}),"Change Password"]}),r.jsxs("form",{onSubmit:B,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{color:"var(--text-secondary)",fontSize:"14px",fontWeight:"500",marginBottom:"8px",display:"block"},children:"Current Password"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("input",{type:O.current?"text":"password",value:A.currentPassword,onChange:ee=>k({...A,currentPassword:ee.target.value}),className:"input",style:{paddingRight:"40px"}}),r.jsx("button",{type:"button",onClick:()=>X({...O,current:!O.current}),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)",padding:0},children:O.current?r.jsx(pd,{size:18}):r.jsx(gd,{size:18})})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{color:"var(--text-secondary)",fontSize:"14px",fontWeight:"500",marginBottom:"8px",display:"block"},children:"New Password"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("input",{type:O.new?"text":"password",value:A.newPassword,onChange:ee=>k({...A,newPassword:ee.target.value}),className:"input",style:{paddingRight:"40px"}}),r.jsx("button",{type:"button",onClick:()=>X({...O,new:!O.new}),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)",padding:0},children:O.new?r.jsx(pd,{size:18}):r.jsx(gd,{size:18})})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{color:"var(--text-secondary)",fontSize:"14px",fontWeight:"500",marginBottom:"8px",display:"block"},children:"Confirm New Password"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("input",{type:O.confirm?"text":"password",value:A.confirmPassword,onChange:ee=>k({...A,confirmPassword:ee.target.value}),className:"input",style:{paddingRight:"40px"}}),r.jsx("button",{type:"button",onClick:()=>X({...O,confirm:!O.confirm}),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)",padding:0},children:O.confirm?r.jsx(pd,{size:18}):r.jsx(gd,{size:18})})]})]}),r.jsx("button",{type:"submit",disabled:b||!A.currentPassword||!A.newPassword||!A.confirmPassword,style:{width:"100%",marginTop:"4px",padding:"12px",borderRadius:"8px",background:b||!A.currentPassword||!A.newPassword||!A.confirmPassword?"#9ca3af":"#6366f1",border:"none",color:"#fff",fontWeight:"600",fontSize:"15px",cursor:b||!A.currentPassword||!A.newPassword||!A.confirmPassword?"not-allowed":"pointer"},children:b?"Changing...":"Change Password"})]})]}),r.jsxs("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",padding:"24px",marginBottom:"80px",border:"1px solid var(--border)"},children:[r.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",color:"var(--text-primary)",marginTop:0,marginBottom:"20px"},children:"Appearance"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--primary)"},children:h==="dark"?r.jsx(fg,{size:20}):r.jsx(yg,{size:20})}),r.jsxs("div",{children:[r.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px",color:"var(--text-primary)"},children:"Dark Theme"}),r.jsx("p",{style:{fontSize:"14px",color:"var(--text-secondary)",margin:0},children:h==="dark"?"Enabled":"Disabled"})]})]}),r.jsxs("label",{className:"theme-toggle",children:[r.jsx("input",{type:"checkbox",checked:h==="dark",onChange:l}),r.jsx("span",{className:"slider"})]})]})]})]}),ne&&r.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",flexDirection:"column"},children:[r.jsxs("div",{style:{padding:"16px",paddingTop:"calc(16px + env(safe-area-inset-top))",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#000",zIndex:10},children:[r.jsx("button",{onClick:()=>{G(!1),z(null)},style:{background:"none",border:"none",color:"white",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(kt,{size:28})}),r.jsx("h3",{style:{color:"white",margin:0,fontSize:"18px",fontWeight:600},children:"Crop Photo"}),r.jsx("button",{onClick:Se,style:{background:"#10b981",border:"none",borderRadius:"50%",width:"44px",height:"44px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.4)"},children:r.jsx($t,{size:28,strokeWidth:3})})]}),r.jsxs("div",{style:{position:"relative",flex:1,backgroundColor:"#000"},children:[r.jsx(mx,{image:Z,crop:Q,zoom:Ae,aspect:1,cropShape:"round",showGrid:!1,onCropChange:he,onZoomChange:we,onCropComplete:ce}),r.jsxs("div",{style:{position:"absolute",bottom:"calc(80px + env(safe-area-inset-bottom))",left:"20px",right:"20px",padding:"16px",backgroundColor:"rgba(0, 0, 0, 0.8)",borderRadius:"12px",backdropFilter:"blur(10px)"},children:[r.jsxs("label",{style:{color:"white",fontSize:"14px",marginBottom:"8px",display:"block",fontWeight:500},children:["Zoom: ",Ae.toFixed(1),"x"]}),r.jsx("input",{type:"range",min:1,max:3,step:.1,value:Ae,onChange:ee=>we(Number(ee.target.value)),style:{width:"100%",height:"6px",accentColor:"#10b981"}})]})]})]})]})},wx=()=>{const[u]=W.useState(localStorage.getItem("token")),[h,l]=W.useState([]),[g,y]=W.useState(!0),[x,b]=W.useState("all"),I=Wn(),S=async()=>{y(!0);const F=await Xi.getNotifications(u,{limit:100,unreadOnly:x==="unread"});l(F.notifications||[]),y(!1)};W.useEffect(()=>{u&&S()},[u,x]);const v=async F=>{F.read||(await Xi.markAsRead(F.id,u),S());const V=typeof F.data=="string"?JSON.parse(F.data):F.data;V.eventId&&(F.type==="event_wall_post"?I(`/event/${V.eventId}/wall`):F.type==="guest_added"&&I(`/event/${V.eventId}`))},A=async(F,V)=>{F.stopPropagation(),window.confirm("Delete this notification?")&&(await Xi.deleteNotification(V,u),S())},k=async()=>{await Xi.markAllAsRead(u),S()},O=F=>{const V=new Date(F),Y=new Date,R=Math.floor((Y-V)/1e3);return R<60?"Just now":R<3600?`${Math.floor(R/60)} minutes ago`:R<86400?`${Math.floor(R/3600)} hours ago`:R<604800?`${Math.floor(R/86400)} days ago`:V.toLocaleDateString("en-US",{month:"short",day:"numeric",year:V.getFullYear()!==Y.getFullYear()?"numeric":void 0})},X=F=>{switch(F){case"guest_added":return"";case"event_wall_post":return"";default:return""}},q=h.filter(F=>!F.read).length;return r.jsxs("div",{className:"notification-list-page",children:[r.jsxs("div",{className:"notification-list-header",children:[r.jsx("button",{onClick:()=>I(-1),className:"back-btn",children:r.jsx(mi,{size:24})}),r.jsx("h1",{children:"Notifications"}),r.jsx("div",{className:"notification-list-actions",children:q>0&&r.jsxs("button",{onClick:k,className:"mark-read-btn",children:[r.jsx($t,{size:18}),"Mark all read"]})})]}),r.jsxs("div",{className:"notification-filter",children:[r.jsxs("button",{className:x==="all"?"active":"",onClick:()=>b("all"),children:["All (",h.length,")"]}),r.jsxs("button",{className:x==="unread"?"active":"",onClick:()=>b("unread"),children:["Unread (",q,")"]})]}),r.jsx("div",{className:"notification-list-content",children:g?r.jsxs("div",{className:"notification-list-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Loading notifications..."})]}):h.length===0?r.jsxs("div",{className:"notification-list-empty",children:[r.jsx(co,{size:64,opacity:.2}),r.jsx("h3",{children:"No notifications"}),r.jsx("p",{children:x==="unread"?"You're all caught up!":"You haven't received any notifications yet."})]}):r.jsx("div",{className:"notification-items",children:h.map(F=>r.jsxs("div",{className:`notification-list-item ${F.read?"":"unread"}`,onClick:()=>v(F),children:[r.jsx("div",{className:"notification-list-icon",children:X(F.type)}),r.jsxs("div",{className:"notification-list-content-inner",children:[r.jsx("div",{className:"notification-list-title",children:F.title}),r.jsx("div",{className:"notification-list-body",children:F.body}),r.jsx("div",{className:"notification-list-time",children:O(F.created_at)})]}),r.jsxs("div",{className:"notification-list-actions-inner",children:[!F.read&&r.jsx("div",{className:"notification-list-unread-dot"}),r.jsx("button",{onClick:V=>A(V,F.id),className:"delete-notification-btn","aria-label":"Delete notification",children:r.jsx(Qt,{size:18})})]})]},F.id))})})]})},bd="https://gatherly-backend-3vmv.onrender.com",Cx=({group:u,onClose:h})=>{const{contacts:l}=Tr(),[g,y]=W.useState([]),[x,b]=W.useState(new Set),[I,S]=W.useState(""),[v,A]=W.useState(!0);W.useEffect(()=>{k()},[u.id]);const k=async()=>{try{const F=localStorage.getItem("token"),V=await fetch(`${bd}/contact-groups/${u.id}/members`,{headers:{Authorization:`Bearer ${F}`}});if(V.ok){const Y=await V.json();y(Y);const R=new Set(Y.map(N=>N.id));b(R)}}catch(F){console.error("Failed to fetch members:",F)}finally{A(!1)}},O=F=>{const V=new Set(x);V.has(F)?V.delete(F):V.add(F),b(V)},X=async()=>{try{const F=localStorage.getItem("token"),V=new Set(g.map(N=>N.id)),Y=Array.from(x).filter(N=>!V.has(N)),R=Array.from(V).filter(N=>!x.has(N));Y.length>0&&await fetch(`${bd}/contact-groups/${u.id}/members`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${F}`},body:JSON.stringify({contactIds:Y})});for(const N of R)await fetch(`${bd}/contact-groups/${u.id}/members/${N}`,{method:"DELETE",headers:{Authorization:`Bearer ${F}`}});h()}catch(F){console.error("Failed to update members:",F),alert("Failed to update group members")}},q=l.filter(F=>F.name.toLowerCase().includes(I.toLowerCase())||F.phone&&F.phone.includes(I)||F.email&&F.email.toLowerCase().includes(I.toLowerCase()));return r.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:h,children:r.jsxs("div",{className:"card",style:{maxWidth:"600px",width:"100%",maxHeight:"80vh",display:"flex",flexDirection:"column"},onClick:F=>F.stopPropagation(),children:[r.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border-color)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)"},children:"Manage Members"}),r.jsx("button",{onClick:h,style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(kt,{size:24})})]}),r.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",borderRadius:"8px",background:u.color,color:"white",fontSize:"0.875rem",fontWeight:500},children:u.name})]}),r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border-color)"},children:r.jsxs("div",{style:{position:"relative"},children:[r.jsx(xo,{size:18,style:{position:"absolute",left:"0.875rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)"}}),r.jsx("input",{type:"text",className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"Search contacts...",value:I,onChange:F=>S(F.target.value)})]})}),r.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem 1.5rem"},children:v?r.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:"Loading..."}):q.length===0?r.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:"No contacts found"}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:q.map(F=>{const V=x.has(F.id);return r.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"0.75rem",borderRadius:"8px",cursor:"pointer",background:V?"var(--primary-light)":"var(--bg-secondary)",border:V?"2px solid var(--primary)":"2px solid transparent",transition:"all 0.2s"},children:[r.jsx("input",{type:"checkbox",checked:V,onChange:()=>O(F.id),style:{marginRight:"0.75rem",cursor:"pointer"}}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontWeight:500,color:"var(--text-primary)",marginBottom:"0.25rem"},children:F.name}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:F.phone||F.email||"No contact info"})]}),V&&r.jsx(bg,{size:18,style:{color:"var(--primary)",marginLeft:"0.5rem"}})]},F.id)})})}),r.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid var(--border-color)",display:"flex",gap:"0.75rem"},children:[r.jsx("button",{onClick:h,className:"btn btn-secondary",style:{flex:1,justifyContent:"center"},children:"Cancel"}),r.jsxs("button",{onClick:X,className:"btn btn-primary",style:{flex:1,justifyContent:"center"},children:[r.jsx(wf,{size:18})," Save (",x.size," members)"]})]})]})})},jl="https://gatherly-backend-3vmv.onrender.com",bx=()=>{const[u,h]=W.useState([]),[l,g]=W.useState(!1),[y,x]=W.useState(null),[b,I]=W.useState(null),[S,v]=W.useState({name:"",description:"",color:"#6B7280"}),[A,k]=W.useState(!0),[O,X]=W.useState(null),q=[{label:"Gray",value:"#6B7280"},{label:"Red",value:"#EF4444"},{label:"Orange",value:"#F97316"},{label:"Yellow",value:"#EAB308"},{label:"Green",value:"#10B981"},{label:"Blue",value:"#3B82F6"},{label:"Purple",value:"#A855F7"},{label:"Pink",value:"#EC4899"}];W.useEffect(()=>{F()},[]);const F=async()=>{try{const M=localStorage.getItem("token"),D=await fetch(`${jl}/contact-groups`,{headers:{Authorization:`Bearer ${M}`}});if(D.ok){const Z=await D.json();h(Z)}}catch(M){console.error("Failed to fetch groups:",M)}finally{k(!1)}},V=async M=>{M.preventDefault();try{const D=localStorage.getItem("token"),Z=y?`${jl}/contact-groups/${y.id}`:`${jl}/contact-groups`;console.log("Creating group with URL:",Z),console.log("Request data:",S);const z=await fetch(Z,{method:y?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`},body:JSON.stringify(S)});if(console.log("Response status:",z.status),console.log("Response headers:",z.headers.get("content-type")),!z.ok){const he=z.headers.get("content-type");if(he&&he.includes("application/json")){const Ae=await z.json();throw new Error(Ae.error||"Failed to save group")}else{const Ae=await z.text();throw console.error("Non-JSON error response:",Ae),new Error(`Server error: ${z.status} ${z.statusText}`)}}const Q=await z.json();console.log("Group created:",Q),await F(),N()}catch(D){console.error("Full error:",D),alert(D.message)}},Y=async M=>{try{const D=localStorage.getItem("token");if(!(await fetch(`${jl}/contact-groups/${M}`,{method:"DELETE",headers:{Authorization:`Bearer ${D}`}})).ok)throw new Error("Failed to delete group");await F(),I(null)}catch{alert("Failed to delete group")}},R=M=>{x(M),v({name:M.name,description:M.description||"",color:M.color||"#6B7280"}),g(!0)},N=()=>{g(!1),x(null),v({name:"",description:"",color:"#6B7280"})};return A?r.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:"Loading groups..."}):r.jsxs("div",{children:[r.jsx("div",{style:{marginBottom:"1.5rem"},children:r.jsxs("button",{onClick:()=>g(!0),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Ft,{size:18})," Create Group"]})}),u.length===0?r.jsxs("div",{className:"card",style:{padding:"3rem 2rem",textAlign:"center",backgroundColor:"var(--bg-secondary)"},children:[r.jsx(Vt,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1rem"},children:"No groups created yet."}),r.jsxs("button",{onClick:()=>g(!0),className:"btn btn-primary",children:[r.jsx(Ft,{size:18})," Create Your First Group"]})]}):r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1rem"},children:u.map(M=>r.jsxs("div",{className:"card",style:{padding:"1.5rem",borderLeft:`4px solid ${M.color}`,cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:D=>D.currentTarget.style.transform="translateY(-2px)",onMouseLeave:D=>D.currentTarget.style.transform="translateY(0)",onClick:()=>X(M),children:[r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"0.5rem"},children:M.name}),M.description&&r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:M.description}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"var(--text-tertiary)"},children:[r.jsx(Vt,{size:14}),r.jsxs("span",{children:[M.member_count||0," member",M.member_count!==1?"s":""]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},onClick:D=>D.stopPropagation(),children:[r.jsx("button",{onClick:()=>R(M),className:"btn btn-secondary",style:{padding:"0.5rem",flex:1,justifyContent:"center"},title:"Edit group",children:r.jsx(pi,{size:14})}),r.jsx("button",{onClick:()=>I(M),className:"btn btn-secondary",style:{padding:"0.5rem",flex:1,justifyContent:"center",background:"#ef4444",color:"white",border:"none"},title:"Delete group",children:r.jsx(Qt,{size:14})})]})]},M.id))}),l&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:N,children:r.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"100%",padding:"2rem"},onClick:M=>M.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)"},children:y?"Edit Group":"Create Group"}),r.jsx("button",{onClick:N,style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(kt,{size:24})})]}),r.jsxs("form",{onSubmit:V,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Group Name *"}),r.jsx("input",{type:"text",className:"form-input",value:S.name,onChange:M=>v({...S,name:M.target.value}),placeholder:"Family, Friends, Coworkers...",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Description"}),r.jsx("textarea",{className:"form-input",value:S.description,onChange:M=>v({...S,description:M.target.value}),placeholder:"Optional description...",rows:2})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.75rem",fontWeight:500},children:"Color"}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem"},children:q.map(M=>r.jsx("button",{type:"button",onClick:()=>v({...S,color:M.value}),style:{padding:"0.75rem",border:S.color===M.value?"2px solid var(--primary)":"2px solid transparent",borderRadius:"8px",background:M.value,color:"white",cursor:"pointer",fontSize:"0.75rem",fontWeight:500,transition:"all 0.2s"},children:M.label},M.value))})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginTop:"0.5rem"},children:[r.jsx("button",{type:"button",onClick:N,className:"btn btn-secondary",style:{justifyContent:"center"},children:"Cancel"}),r.jsxs("button",{type:"submit",className:"btn btn-primary",style:{justifyContent:"center"},children:[y?"Update":"Create"," Group"]})]})]})]})}),b&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:()=>I(null),children:r.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"2rem"},onClick:M=>M.stopPropagation(),children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"1rem"},children:"Delete Group?"}),r.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:["Are you sure you want to delete ",r.jsx("strong",{children:b.name}),"? Contacts will remain in your library."]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsx("button",{onClick:()=>I(null),className:"btn btn-secondary",style:{justifyContent:"center"},children:"Cancel"}),r.jsxs("button",{onClick:()=>Y(b.id),className:"btn btn-primary",style:{justifyContent:"center",background:"#ef4444",border:"none"},children:[r.jsx(Qt,{size:16})," Delete"]})]})]})}),O&&r.jsx(Cx,{group:O,onClose:()=>{X(null),F()}})]})},Sx=()=>{const{contacts:u,addContact:h,updateContact:l,deleteContact:g}=Tr(),[y,x]=W.useState("contacts"),[b,I]=W.useState(""),[S,v]=W.useState(!1),[A,k]=W.useState(null),[O,X]=W.useState(null),[q,F]=W.useState({name:"",phone:"",email:"",notes:""}),[V,Y]=W.useState(!1),R=u.filter(Q=>Q.name.toLowerCase().includes(b.toLowerCase())||Q.phone&&Q.phone.includes(b)||Q.email&&Q.email.toLowerCase().includes(b.toLowerCase())),N=async Q=>{Q.preventDefault();try{A?await l(A.id,q):await h(q),v(!1),k(null),F({name:"",phone:"",email:"",notes:""})}catch(he){alert(he.message||"Failed to save contact")}},M=Q=>{k(Q),F({name:Q.name,phone:Q.phone||"",email:Q.email||"",notes:Q.notes||""}),v(!0)},D=async Q=>{try{await g(Q),X(null)}catch{alert("Failed to delete contact")}},Z=()=>{v(!1),k(null),F({name:"",phone:"",email:"",notes:""})},z=async Q=>{try{let he=0,Ae=0;for(const we of Q)try{await h({name:we.name,phone:we.phone||"",email:"",notes:""}),he++}catch{Ae++}he>0?alert(`Imported ${he} contact${he!==1?"s":""}${Ae>0?`, skipped ${Ae} duplicate${Ae!==1?"s":""}`:""}`):Ae>0&&alert(`All ${Ae} contact${Ae!==1?"s were":" was"} already in your library`)}catch(he){console.error("Import error:",he),alert("Failed to import contacts")}};return r.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"var(--bg-primary)",paddingBottom:"calc(60px + env(safe-area-inset-bottom))"},children:[r.jsxs("div",{className:"container",style:{padding:"2rem 1rem 1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.875rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"0.5rem"},children:"My Contacts"}),r.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"0.9375rem"},children:[u.length," saved contact",u.length!==1?"s":""]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[r.jsxs("button",{onClick:()=>Y(!0),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(fa,{size:18})," Import"]}),r.jsxs("button",{onClick:()=>v(!0),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Ft,{size:18})," Add Contact"]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",borderBottom:"2px solid var(--border-color)"},children:[r.jsxs("button",{onClick:()=>x("contacts"),style:{padding:"0.75rem 1.5rem",background:"none",border:"none",borderBottom:y==="contacts"?"2px solid var(--primary)":"2px solid transparent",color:y==="contacts"?"var(--primary)":"var(--text-secondary)",fontWeight:y==="contacts"?600:400,cursor:"pointer",marginBottom:"-2px",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s"},children:[r.jsx(Vt,{size:18}),"All Contacts"]}),r.jsxs("button",{onClick:()=>x("groups"),style:{padding:"0.75rem 1.5rem",background:"none",border:"none",borderBottom:y==="groups"?"2px solid var(--primary)":"2px solid transparent",color:y==="groups"?"var(--primary)":"var(--text-secondary)",fontWeight:y==="groups"?600:400,cursor:"pointer",marginBottom:"-2px",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s"},children:[r.jsx(Td,{size:18}),"Groups"]})]}),y==="contacts"&&r.jsxs("div",{style:{position:"relative",marginBottom:"1.5rem"},children:[r.jsx(xo,{size:18,style:{position:"absolute",left:"0.875rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)"}}),r.jsx("input",{type:"text",className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"Search contacts...",value:b,onChange:Q=>I(Q.target.value)})]}),y==="contacts"?R.length===0?r.jsxs("div",{className:"card",style:{padding:"3rem 2rem",textAlign:"center",backgroundColor:"var(--bg-secondary)"},children:[r.jsx(Vt,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1rem"},children:b?"No contacts found matching your search.":"No contacts saved yet."}),!b&&r.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"center",flexWrap:"wrap"},children:[r.jsxs("button",{onClick:()=>Y(!0),className:"btn btn-secondary",children:[r.jsx(fa,{size:18})," Import from Phone"]}),r.jsxs("button",{onClick:()=>v(!0),className:"btn btn-primary",children:[r.jsx(Ft,{size:18})," Add Your First Contact"]})]})]}):r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:R.map(Q=>r.jsx("div",{className:"card",style:{padding:"1.25rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"0.5rem"},children:Q.name}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.375rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:[Q.phone&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(uo,{size:14}),r.jsx("a",{href:`tel:${Q.phone}`,style:{color:"var(--primary)",textDecoration:"none"},children:Q.phone})]}),Q.email&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(ks,{size:14}),r.jsx("a",{href:`mailto:${Q.email}`,style:{color:"var(--primary)",textDecoration:"none"},children:Q.email})]}),Q.events_count>0&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.25rem"},children:[r.jsx(Nr,{size:14}),r.jsxs("span",{children:["Used in ",Q.events_count," event",Q.events_count!==1?"s":""]})]})]}),Q.notes&&r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginTop:"0.75rem",fontStyle:"italic"},children:Q.notes})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0},children:[r.jsx("button",{onClick:()=>M(Q),className:"btn btn-secondary",style:{padding:"0.5rem",minWidth:"auto"},title:"Edit contact",children:r.jsx(pi,{size:16})}),r.jsx("button",{onClick:()=>X(Q),className:"btn btn-secondary",style:{padding:"0.5rem",minWidth:"auto",background:"#ef4444",color:"white",border:"none"},title:"Delete contact",children:r.jsx(Qt,{size:16})})]})]})},Q.id))}):r.jsx(bx,{})]}),S&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:Z,children:r.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"100%",padding:"2rem"},onClick:Q=>Q.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)"},children:A?"Edit Contact":"Add Contact"}),r.jsx("button",{onClick:Z,style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(kt,{size:24})})]}),r.jsxs("form",{onSubmit:N,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Name *"}),r.jsx("input",{type:"text",className:"form-input",value:q.name,onChange:Q=>F({...q,name:Q.target.value}),placeholder:"John Doe",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Phone"}),r.jsx("input",{type:"tel",className:"form-input",value:q.phone,onChange:Q=>F({...q,phone:Q.target.value}),placeholder:"+919876543210"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Email"}),r.jsx("input",{type:"email",className:"form-input",value:q.email,onChange:Q=>F({...q,email:Q.target.value}),placeholder:"john@example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Notes"}),r.jsx("textarea",{className:"form-input",value:q.notes,onChange:Q=>F({...q,notes:Q.target.value}),placeholder:"Optional notes...",rows:3})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginTop:"0.5rem"},children:[r.jsx("button",{type:"button",onClick:Z,className:"btn btn-secondary",style:{justifyContent:"center"},children:"Cancel"}),r.jsxs("button",{type:"submit",className:"btn btn-primary",style:{justifyContent:"center"},children:[A?"Update":"Add"," Contact"]})]})]})]})}),O&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:()=>X(null),children:r.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"2rem"},onClick:Q=>Q.stopPropagation(),children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"1rem"},children:"Delete Contact?"}),r.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:["Are you sure you want to delete ",r.jsx("strong",{children:O.name}),"? This action cannot be undone."]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsx("button",{onClick:()=>X(null),className:"btn btn-secondary",style:{justifyContent:"center"},children:"Cancel"}),r.jsxs("button",{onClick:()=>D(O.id),className:"btn btn-primary",style:{justifyContent:"center",background:"#ef4444",border:"none"},children:[r.jsx(Qt,{size:16})," Delete"]})]})]})}),V&&r.jsx(jf,{onImport:z,onClose:()=>Y(!1)})]})},Ex=()=>{const{user:u}=Wr(),h=Wn(),[l,g]=W.useState(null),[y,x]=W.useState([]),[b,I]=W.useState(!0),[S,v]=W.useState(""),[A,k]=W.useState(1),[O,X]=W.useState(null),[q,F]=W.useState(null);W.useEffect(()=>{u?.is_admin||h("/")},[u,h]),W.useEffect(()=>{V()},[]),W.useEffect(()=>{Y()},[A,S]);const V=async()=>{try{const N=localStorage.getItem("token"),M=await fetch("https://gatherly-backend-3vmv.onrender.com/admin/stats",{headers:{Authorization:`Bearer ${N}`}});if(M.ok){const D=await M.json();g(D)}}catch(N){console.error("Failed to fetch stats:",N)}},Y=async()=>{try{I(!0);const N=localStorage.getItem("token");console.log(" Admin Dashboard: Fetching users...",{page:A,searchTerm:S});const M=`https://gatherly-backend-3vmv.onrender.com/admin/users?page=${A}&limit=20&search=${S}`;console.log(" Admin Dashboard: URL:",M);const D=await fetch(M,{headers:{Authorization:`Bearer ${N}`}});if(console.log(" Admin Dashboard: Response status:",D.status),D.ok){const Z=await D.json();console.log(" Admin Dashboard: Received data:",Z),x(Z.users),X(Z.pagination)}else{const Z=await D.text();console.error(" Admin Dashboard: Error response:",Z)}}catch(N){console.error(" Admin Dashboard: Failed to fetch users:",N)}finally{I(!1)}},R=async N=>{try{const M=localStorage.getItem("token"),D=await fetch(`https://gatherly-backend-3vmv.onrender.com/admin/users/${N}`,{method:"DELETE",headers:{Authorization:`Bearer ${M}`}});if(D.ok)F(null),Y(),V();else{const Z=await D.json();alert(Z.error||"Failed to delete user")}}catch(M){console.error("Failed to delete user:",M),alert("Failed to delete user")}};return u?.is_admin?r.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-secondary)",padding:"2rem 0"},children:[r.jsxs("div",{className:"container",style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem"},children:[r.jsx("button",{onClick:()=>h("/"),style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--bg-primary)",border:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(mi,{size:20})}),r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[r.jsx(xg,{size:24,color:"var(--primary)"}),r.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--text-primary)",margin:0},children:"Admin Dashboard"})]}),r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",margin:0},children:"Manage users and view platform statistics"})]})]}),l&&r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsx("div",{className:"card",style:{padding:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #6366f1, #a855f7)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Vt,{size:24,color:"white"})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",fontWeight:600},children:"TOTAL USERS"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--text-primary)"},children:l.users.total}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:["+",l.users.last7Days," this week"]})]})]})}),r.jsx("div",{className:"card",style:{padding:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #10b981, #14b8a6)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Nr,{size:24,color:"white"})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",fontWeight:600},children:"TOTAL EVENTS"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--text-primary)"},children:l.events.total}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:[l.events.active," active"]})]})]})}),r.jsx("div",{className:"card",style:{padding:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #f59e0b, #ef4444)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Cg,{size:24,color:"white"})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",fontWeight:600},children:"TOTAL GUESTS"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--text-primary)"},children:l.guests.total}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"All events"})]})]})})]}),r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"1rem"},children:"User Management"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(xo,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),r.jsx("input",{type:"text",value:S,onChange:N=>{v(N.target.value),k(1)},className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"Search by name, email, or phone..."})]})]}),b?r.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:"Loading users..."}):y.length===0?r.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:"No users found"}):r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{overflowX:"auto"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{borderBottom:"2px solid var(--border)"},children:[r.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.75rem",fontWeight:600,color:"var(--text-secondary)"},children:"NAME"}),r.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.75rem",fontWeight:600,color:"var(--text-secondary)"},children:"EMAIL"}),r.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.75rem",fontWeight:600,color:"var(--text-secondary)"},children:"PHONE"}),r.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.75rem",fontWeight:600,color:"var(--text-secondary)"},children:"JOINED"}),r.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.75rem",fontWeight:600,color:"var(--text-secondary)"},children:"STATUS"}),r.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.75rem",fontWeight:600,color:"var(--text-secondary)"},children:"ACTIONS"})]})}),r.jsx("tbody",{children:y.map(N=>r.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[r.jsxs("td",{style:{padding:"1rem 0.75rem"},children:[r.jsx("div",{style:{fontWeight:600,color:"var(--text-primary)"},children:N.name}),N.is_admin&&r.jsx("span",{style:{fontSize:"0.75rem",color:"var(--primary)",fontWeight:600},children:"ADMIN"})]}),r.jsx("td",{style:{padding:"1rem 0.75rem",color:"var(--text-secondary)",fontSize:"0.875rem"},children:N.email||"-"}),r.jsx("td",{style:{padding:"1rem 0.75rem",color:"var(--text-secondary)",fontSize:"0.875rem"},children:N.phone||"-"}),r.jsx("td",{style:{padding:"1rem 0.75rem",color:"var(--text-secondary)",fontSize:"0.875rem"},children:new Date(N.created_at).toLocaleDateString()}),r.jsx("td",{style:{padding:"1rem 0.75rem"},children:N.email_verified?r.jsx("span",{style:{fontSize:"0.75rem",color:"#10b981",fontWeight:600},children:"VERIFIED"}):r.jsx("span",{style:{fontSize:"0.75rem",color:"#f59e0b",fontWeight:600},children:"PENDING"})}),r.jsx("td",{style:{padding:"1rem 0.75rem",textAlign:"right"},children:N.id!==u.id&&!N.is_admin&&r.jsx("button",{onClick:()=>F(N),"aria-label":`Delete ${N.name}`,style:{padding:"0.5rem",background:"transparent",border:"1px solid #ef4444",borderRadius:"8px",color:"#ef4444",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:r.jsx(Qt,{size:16})})})]},N.id))})]})}),O&&O.pages>1&&r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginTop:"1.5rem"},children:[r.jsx("button",{onClick:()=>k(N=>Math.max(1,N-1)),disabled:A===1,className:"btn",style:{padding:"0.5rem 1rem"},children:"Previous"}),r.jsxs("span",{style:{padding:"0.5rem 1rem",color:"var(--text-secondary)"},children:["Page ",A," of ",O.pages]}),r.jsx("button",{onClick:()=>k(N=>Math.min(O.pages,N+1)),disabled:A===O.pages,className:"btn",style:{padding:"0.5rem 1rem"},children:"Next"})]})]})]})]}),q&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"2rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[r.jsx(mo,{size:24,color:"#ef4444"}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)",margin:0},children:"Delete User"})]}),r.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:["Are you sure you want to delete ",r.jsx("strong",{children:q.name}),"? This will permanently delete their account, events, and all associated data. This action cannot be undone."]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsx("button",{onClick:()=>F(null),className:"btn",style:{flex:1,padding:"0.75rem"},children:"Cancel"}),r.jsx("button",{onClick:()=>R(q.id),style:{flex:1,padding:"0.75rem",background:"#ef4444",color:"white",border:"none",borderRadius:"8px",fontWeight:600,cursor:"pointer"},children:"Delete"})]})]})})]}):null};function Ax(){const u=Wn(),h=Ts();return W.useEffect(()=>{const l=i0.addListener("backButton",({canGoBack:g})=>{h.pathname==="/"||h.pathname==="/manager"?i0.exitApp():u(g?-1:"/")});return()=>{l.remove()}},[u,h]),null}function Ix(){return W.useEffect(()=>{Xi.initialize()},[]),r.jsx(ng,{children:r.jsx(qp,{children:r.jsx(tg,{children:r.jsxs(_p,{children:[r.jsx(Ax,{}),r.jsxs(Ep,{children:[r.jsx(Yn,{path:"/login",element:r.jsx(Ag,{})}),r.jsx(Yn,{path:"/signup",element:r.jsx(jg,{})}),r.jsx(Yn,{path:"/rsvp/:eventId/:guestId",element:r.jsx(Hm,{})}),r.jsx(Yn,{path:"/invite/:id",element:r.jsx(Xm,{})}),r.jsx(Yn,{path:"/",element:r.jsx(hi,{children:r.jsx(ui,{children:r.jsx(kg,{})})})}),r.jsx(Yn,{path:"/manager",element:r.jsx(ef,{to:"/",replace:!0})}),r.jsx(Yn,{path:"/event/:id",element:r.jsx(hi,{children:r.jsx(ui,{children:r.jsx(gm,{})})})}),r.jsx(Yn,{path:"/guest/event/:id",element:r.jsx(hi,{children:r.jsx(ui,{children:r.jsx(mm,{})})})}),r.jsx(Yn,{path:"/event/:eventId/wall",element:r.jsx(hi,{children:r.jsx(ui,{children:r.jsx(Zm,{})})})}),r.jsx(Yn,{path:"/scanner",element:r.jsx(hi,{children:r.jsx(ui,{children:r.jsx(Gm,{})})})}),r.jsx(Yn,{path:"/profile",element:r.jsx(hi,{children:r.jsx(ui,{children:r.jsx(vx,{})})})}),r.jsx(Yn,{path:"/notifications",element:r.jsx(hi,{children:r.jsx(ui,{children:r.jsx(wx,{})})})}),r.jsx(Yn,{path:"/contacts",element:r.jsx(hi,{children:r.jsx(ui,{children:r.jsx(Sx,{})})})}),r.jsx(Yn,{path:"/admin",element:r.jsx(hi,{children:r.jsx(ui,{children:r.jsx(Ex,{})})})})]})]})})})})}R1.createRoot(document.getElementById("root")).render(r.jsx(ir.StrictMode,{children:r.jsx(Ix,{})}));export{o0 as A,s0 as B,pa as W,jr as _,tf as b,$i as r};
