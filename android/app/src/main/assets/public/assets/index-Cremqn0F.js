function U0(u,h){for(var a=0;a<h.length;a++){const g=h[a];if(typeof g!="string"&&!Array.isArray(g)){for(const y in g)if(y!=="default"&&!(y in u)){const x=Object.getOwnPropertyDescriptor(g,y);x&&Object.defineProperty(u,y,x.get?x:{enumerable:!0,get:()=>g[y]})}}}return Object.freeze(Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}))}(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))g(y);new MutationObserver(y=>{for(const x of y)if(x.type==="childList")for(const C of x.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&g(C)}).observe(document,{childList:!0,subtree:!0});function a(y){const x={};return y.integrity&&(x.integrity=y.integrity),y.referrerPolicy&&(x.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?x.credentials="include":y.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function g(y){if(y.ep)return;y.ep=!0;const x=a(y);fetch(y.href,x)}})();var Cl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ll(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var ad={exports:{}},sa={},ld={exports:{}},ft={};var Mh;function S1(){if(Mh)return ft;Mh=1;var u=Symbol.for("react.element"),h=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),k=Symbol.iterator;function _(B){return B===null||typeof B!="object"?null:(B=k&&B[k]||B["@@iterator"],typeof B=="function"?B:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,W={};function z(B,oe,Ee){this.props=B,this.context=oe,this.refs=W,this.updater=Ee||V}z.prototype.isReactComponent={},z.prototype.setState=function(B,oe){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,oe,"setState")},z.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function H(){}H.prototype=z.prototype;function T(B,oe,Ee){this.props=B,this.context=oe,this.refs=W,this.updater=Ee||V}var N=T.prototype=new H;N.constructor=T,X(N,z.prototype),N.isPureReactComponent=!0;var P=Array.isArray,D=Object.prototype.hasOwnProperty,q={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function Q(B,oe,Ee){var le,ke={},ve=null,Oe=null;if(oe!=null)for(le in oe.ref!==void 0&&(Oe=oe.ref),oe.key!==void 0&&(ve=""+oe.key),oe)D.call(oe,le)&&!F.hasOwnProperty(le)&&(ke[le]=oe[le]);var fe=arguments.length-2;if(fe===1)ke.children=Ee;else if(1<fe){for(var De=Array(fe),$e=0;$e<fe;$e++)De[$e]=arguments[$e+2];ke.children=De}if(B&&B.defaultProps)for(le in fe=B.defaultProps,fe)ke[le]===void 0&&(ke[le]=fe[le]);return{$$typeof:u,type:B,key:ve,ref:Oe,props:ke,_owner:q.current}}function pe(B,oe){return{$$typeof:u,type:B.type,key:oe,ref:B.ref,props:B.props,_owner:B._owner}}function Me(B){return typeof B=="object"&&B!==null&&B.$$typeof===u}function be(B){var oe={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(Ee){return oe[Ee]})}var we=/\/+/g;function de(B,oe){return typeof B=="object"&&B!==null&&B.key!=null?be(""+B.key):oe.toString(36)}function te(B,oe,Ee,le,ke){var ve=typeof B;(ve==="undefined"||ve==="boolean")&&(B=null);var Oe=!1;if(B===null)Oe=!0;else switch(ve){case"string":case"number":Oe=!0;break;case"object":switch(B.$$typeof){case u:case h:Oe=!0}}if(Oe)return Oe=B,ke=ke(Oe),B=le===""?"."+de(Oe,0):le,P(ke)?(Ee="",B!=null&&(Ee=B.replace(we,"$&/")+"/"),te(ke,oe,Ee,"",function($e){return $e})):ke!=null&&(Me(ke)&&(ke=pe(ke,Ee+(!ke.key||Oe&&Oe.key===ke.key?"":(""+ke.key).replace(we,"$&/")+"/")+B)),oe.push(ke)),1;if(Oe=0,le=le===""?".":le+":",P(B))for(var fe=0;fe<B.length;fe++){ve=B[fe];var De=le+de(ve,fe);Oe+=te(ve,oe,Ee,De,ke)}else if(De=_(B),typeof De=="function")for(B=De.call(B),fe=0;!(ve=B.next()).done;)ve=ve.value,De=le+de(ve,fe++),Oe+=te(ve,oe,Ee,De,ke);else if(ve==="object")throw oe=String(B),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.");return Oe}function Y(B,oe,Ee){if(B==null)return B;var le=[],ke=0;return te(B,le,"","",function(ve){return oe.call(Ee,ve,ke++)}),le}function J(B){if(B._status===-1){var oe=B._result;oe=oe(),oe.then(function(Ee){(B._status===0||B._status===-1)&&(B._status=1,B._result=Ee)},function(Ee){(B._status===0||B._status===-1)&&(B._status=2,B._result=Ee)}),B._status===-1&&(B._status=0,B._result=oe)}if(B._status===1)return B._result.default;throw B._result}var se={current:null},ce={transition:null},Ce={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:ce,ReactCurrentOwner:q};function $(){throw Error("act(...) is not supported in production builds of React.")}return ft.Children={map:Y,forEach:function(B,oe,Ee){Y(B,function(){oe.apply(this,arguments)},Ee)},count:function(B){var oe=0;return Y(B,function(){oe++}),oe},toArray:function(B){return Y(B,function(oe){return oe})||[]},only:function(B){if(!Me(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},ft.Component=z,ft.Fragment=a,ft.Profiler=y,ft.PureComponent=T,ft.StrictMode=g,ft.Suspense=S,ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ce,ft.act=$,ft.cloneElement=function(B,oe,Ee){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var le=X({},B.props),ke=B.key,ve=B.ref,Oe=B._owner;if(oe!=null){if(oe.ref!==void 0&&(ve=oe.ref,Oe=q.current),oe.key!==void 0&&(ke=""+oe.key),B.type&&B.type.defaultProps)var fe=B.type.defaultProps;for(De in oe)D.call(oe,De)&&!F.hasOwnProperty(De)&&(le[De]=oe[De]===void 0&&fe!==void 0?fe[De]:oe[De])}var De=arguments.length-2;if(De===1)le.children=Ee;else if(1<De){fe=Array(De);for(var $e=0;$e<De;$e++)fe[$e]=arguments[$e+2];le.children=fe}return{$$typeof:u,type:B.type,key:ke,ref:ve,props:le,_owner:Oe}},ft.createContext=function(B){return B={$$typeof:C,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:x,_context:B},B.Consumer=B},ft.createElement=Q,ft.createFactory=function(B){var oe=Q.bind(null,B);return oe.type=B,oe},ft.createRef=function(){return{current:null}},ft.forwardRef=function(B){return{$$typeof:I,render:B}},ft.isValidElement=Me,ft.lazy=function(B){return{$$typeof:A,_payload:{_status:-1,_result:B},_init:J}},ft.memo=function(B,oe){return{$$typeof:v,type:B,compare:oe===void 0?null:oe}},ft.startTransition=function(B){var oe=ce.transition;ce.transition={};try{B()}finally{ce.transition=oe}},ft.unstable_act=$,ft.useCallback=function(B,oe){return se.current.useCallback(B,oe)},ft.useContext=function(B){return se.current.useContext(B)},ft.useDebugValue=function(){},ft.useDeferredValue=function(B){return se.current.useDeferredValue(B)},ft.useEffect=function(B,oe){return se.current.useEffect(B,oe)},ft.useId=function(){return se.current.useId()},ft.useImperativeHandle=function(B,oe,Ee){return se.current.useImperativeHandle(B,oe,Ee)},ft.useInsertionEffect=function(B,oe){return se.current.useInsertionEffect(B,oe)},ft.useLayoutEffect=function(B,oe){return se.current.useLayoutEffect(B,oe)},ft.useMemo=function(B,oe){return se.current.useMemo(B,oe)},ft.useReducer=function(B,oe,Ee){return se.current.useReducer(B,oe,Ee)},ft.useRef=function(B){return se.current.useRef(B)},ft.useState=function(B){return se.current.useState(B)},ft.useSyncExternalStore=function(B,oe,Ee){return se.current.useSyncExternalStore(B,oe,Ee)},ft.useTransition=function(){return se.current.useTransition()},ft.version="18.3.1",ft}var Bh;function Pd(){return Bh||(Bh=1,ld.exports=S1()),ld.exports}var Lh;function E1(){if(Lh)return sa;Lh=1;var u=Pd(),h=Symbol.for("react.element"),a=Symbol.for("react.fragment"),g=Object.prototype.hasOwnProperty,y=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function C(I,S,v){var A,k={},_=null,V=null;v!==void 0&&(_=""+v),S.key!==void 0&&(_=""+S.key),S.ref!==void 0&&(V=S.ref);for(A in S)g.call(S,A)&&!x.hasOwnProperty(A)&&(k[A]=S[A]);if(I&&I.defaultProps)for(A in S=I.defaultProps,S)k[A]===void 0&&(k[A]=S[A]);return{$$typeof:h,type:I,key:_,ref:V,props:k,_owner:y.current}}return sa.Fragment=a,sa.jsx=C,sa.jsxs=C,sa}var zh;function A1(){return zh||(zh=1,ad.exports=E1()),ad.exports}var r=A1(),U=Pd();const sr=Ll(U),I1=U0({__proto__:null,default:sr},[U]);var Sl={},cd={exports:{}},ir={},dd={exports:{}},ud={};var Fh;function j1(){return Fh||(Fh=1,(function(u){function h(ce,Ce){var $=ce.length;ce.push(Ce);e:for(;0<$;){var B=$-1>>>1,oe=ce[B];if(0<y(oe,Ce))ce[B]=Ce,ce[$]=oe,$=B;else break e}}function a(ce){return ce.length===0?null:ce[0]}function g(ce){if(ce.length===0)return null;var Ce=ce[0],$=ce.pop();if($!==Ce){ce[0]=$;e:for(var B=0,oe=ce.length,Ee=oe>>>1;B<Ee;){var le=2*(B+1)-1,ke=ce[le],ve=le+1,Oe=ce[ve];if(0>y(ke,$))ve<oe&&0>y(Oe,ke)?(ce[B]=Oe,ce[ve]=$,B=ve):(ce[B]=ke,ce[le]=$,B=le);else if(ve<oe&&0>y(Oe,$))ce[B]=Oe,ce[ve]=$,B=ve;else break e}}return Ce}function y(ce,Ce){var $=ce.sortIndex-Ce.sortIndex;return $!==0?$:ce.id-Ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;u.unstable_now=function(){return x.now()}}else{var C=Date,I=C.now();u.unstable_now=function(){return C.now()-I}}var S=[],v=[],A=1,k=null,_=3,V=!1,X=!1,W=!1,z=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(ce){for(var Ce=a(v);Ce!==null;){if(Ce.callback===null)g(v);else if(Ce.startTime<=ce)g(v),Ce.sortIndex=Ce.expirationTime,h(S,Ce);else break;Ce=a(v)}}function P(ce){if(W=!1,N(ce),!X)if(a(S)!==null)X=!0,J(D);else{var Ce=a(v);Ce!==null&&se(P,Ce.startTime-ce)}}function D(ce,Ce){X=!1,W&&(W=!1,H(Q),Q=-1),V=!0;var $=_;try{for(N(Ce),k=a(S);k!==null&&(!(k.expirationTime>Ce)||ce&&!be());){var B=k.callback;if(typeof B=="function"){k.callback=null,_=k.priorityLevel;var oe=B(k.expirationTime<=Ce);Ce=u.unstable_now(),typeof oe=="function"?k.callback=oe:k===a(S)&&g(S),N(Ce)}else g(S);k=a(S)}if(k!==null)var Ee=!0;else{var le=a(v);le!==null&&se(P,le.startTime-Ce),Ee=!1}return Ee}finally{k=null,_=$,V=!1}}var q=!1,F=null,Q=-1,pe=5,Me=-1;function be(){return!(u.unstable_now()-Me<pe)}function we(){if(F!==null){var ce=u.unstable_now();Me=ce;var Ce=!0;try{Ce=F(!0,ce)}finally{Ce?de():(q=!1,F=null)}}else q=!1}var de;if(typeof T=="function")de=function(){T(we)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,Y=te.port2;te.port1.onmessage=we,de=function(){Y.postMessage(null)}}else de=function(){z(we,0)};function J(ce){F=ce,q||(q=!0,de())}function se(ce,Ce){Q=z(function(){ce(u.unstable_now())},Ce)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(ce){ce.callback=null},u.unstable_continueExecution=function(){X||V||(X=!0,J(D))},u.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pe=0<ce?Math.floor(1e3/ce):5},u.unstable_getCurrentPriorityLevel=function(){return _},u.unstable_getFirstCallbackNode=function(){return a(S)},u.unstable_next=function(ce){switch(_){case 1:case 2:case 3:var Ce=3;break;default:Ce=_}var $=_;_=Ce;try{return ce()}finally{_=$}},u.unstable_pauseExecution=function(){},u.unstable_requestPaint=function(){},u.unstable_runWithPriority=function(ce,Ce){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var $=_;_=ce;try{return Ce()}finally{_=$}},u.unstable_scheduleCallback=function(ce,Ce,$){var B=u.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?B+$:B):$=B,ce){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=$+oe,ce={id:A++,callback:Ce,priorityLevel:ce,startTime:$,expirationTime:oe,sortIndex:-1},$>B?(ce.sortIndex=$,h(v,ce),a(S)===null&&ce===a(v)&&(W?(H(Q),Q=-1):W=!0,se(P,$-B))):(ce.sortIndex=oe,h(S,ce),X||V||(X=!0,J(D))),ce},u.unstable_shouldYield=be,u.unstable_wrapCallback=function(ce){var Ce=_;return function(){var $=_;_=Ce;try{return ce.apply(this,arguments)}finally{_=$}}}})(ud)),ud}var Wh;function k1(){return Wh||(Wh=1,dd.exports=j1()),dd.exports}var Uh;function N1(){if(Uh)return ir;Uh=1;var u=Pd(),h=k1();function a(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,d=1;d<arguments.length;d++)s+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g=new Set,y={};function x(t,s){C(t,s),C(t+"Capture",s)}function C(t,s){for(y[t]=s,t=0;t<s.length;t++)g.add(s[t])}var I=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A={},k={};function _(t){return S.call(k,t)?!0:S.call(A,t)?!1:v.test(t)?k[t]=!0:(A[t]=!0,!1)}function V(t,s,d,p){if(d!==null&&d.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return p?!1:d!==null?!d.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function X(t,s,d,p){if(s===null||typeof s>"u"||V(t,s,d,p))return!0;if(p)return!1;if(d!==null)switch(d.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function W(t,s,d,p,b,E,M){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=p,this.attributeNamespace=b,this.mustUseProperty=d,this.propertyName=t,this.type=s,this.sanitizeURL=E,this.removeEmptyString=M}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){z[t]=new W(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];z[s]=new W(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){z[t]=new W(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){z[t]=new W(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){z[t]=new W(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){z[t]=new W(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){z[t]=new W(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){z[t]=new W(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){z[t]=new W(t,5,!1,t.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function T(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(H,T);z[s]=new W(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(H,T);z[s]=new W(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(H,T);z[s]=new W(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){z[t]=new W(t,1,!1,t.toLowerCase(),null,!1,!1)}),z.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){z[t]=new W(t,1,!1,t.toLowerCase(),null,!0,!0)});function N(t,s,d,p){var b=z.hasOwnProperty(s)?z[s]:null;(b!==null?b.type!==0:p||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(X(s,d,b,p)&&(d=null),p||b===null?_(s)&&(d===null?t.removeAttribute(s):t.setAttribute(s,""+d)):b.mustUseProperty?t[b.propertyName]=d===null?b.type===3?!1:"":d:(s=b.attributeName,p=b.attributeNamespace,d===null?t.removeAttribute(s):(b=b.type,d=b===3||b===4&&d===!0?"":""+d,p?t.setAttributeNS(p,s,d):t.setAttribute(s,d))))}var P=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),q=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),pe=Symbol.for("react.profiler"),Me=Symbol.for("react.provider"),be=Symbol.for("react.context"),we=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),ce=Symbol.iterator;function Ce(t){return t===null||typeof t!="object"?null:(t=ce&&t[ce]||t["@@iterator"],typeof t=="function"?t:null)}var $=Object.assign,B;function oe(t){if(B===void 0)try{throw Error()}catch(d){var s=d.stack.trim().match(/\n( *(at )?)/);B=s&&s[1]||""}return`
`+B+t}var Ee=!1;function le(t,s){if(!t||Ee)return"";Ee=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(ye){var p=ye}Reflect.construct(t,[],s)}else{try{s.call()}catch(ye){p=ye}t.call(s.prototype)}else{try{throw Error()}catch(ye){p=ye}t()}}catch(ye){if(ye&&p&&typeof ye.stack=="string"){for(var b=ye.stack.split(`
`),E=p.stack.split(`
`),M=b.length-1,K=E.length-1;1<=M&&0<=K&&b[M]!==E[K];)K--;for(;1<=M&&0<=K;M--,K--)if(b[M]!==E[K]){if(M!==1||K!==1)do if(M--,K--,0>K||b[M]!==E[K]){var ne=`
`+b[M].replace(" at new "," at ");return t.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",t.displayName)),ne}while(1<=M&&0<=K);break}}}finally{Ee=!1,Error.prepareStackTrace=d}return(t=t?t.displayName||t.name:"")?oe(t):""}function ke(t){switch(t.tag){case 5:return oe(t.type);case 16:return oe("Lazy");case 13:return oe("Suspense");case 19:return oe("SuspenseList");case 0:case 2:case 15:return t=le(t.type,!1),t;case 11:return t=le(t.type.render,!1),t;case 1:return t=le(t.type,!0),t;default:return""}}function ve(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case F:return"Fragment";case q:return"Portal";case pe:return"Profiler";case Q:return"StrictMode";case de:return"Suspense";case te:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case be:return(t.displayName||"Context")+".Consumer";case Me:return(t._context.displayName||"Context")+".Provider";case we:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Y:return s=t.displayName||null,s!==null?s:ve(t.type)||"Memo";case J:s=t._payload,t=t._init;try{return ve(t(s))}catch{}}return null}function Oe(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(s);case 8:return s===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function fe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function De(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function $e(t){var s=De(t)?"checked":"value",d=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),p=""+t[s];if(!t.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var b=d.get,E=d.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return b.call(this)},set:function(M){p=""+M,E.call(this,M)}}),Object.defineProperty(t,s,{enumerable:d.enumerable}),{getValue:function(){return p},setValue:function(M){p=""+M},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Ge(t){t._valueTracker||(t._valueTracker=$e(t))}function st(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var d=s.getValue(),p="";return t&&(p=De(t)?t.checked?"true":"false":t.value),t=p,t!==d?(s.setValue(t),!0):!1}function We(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qe(t,s){var d=s.checked;return $({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??t._wrapperState.initialChecked})}function St(t,s){var d=s.defaultValue==null?"":s.defaultValue,p=s.checked!=null?s.checked:s.defaultChecked;d=fe(s.value!=null?s.value:d),t._wrapperState={initialChecked:p,initialValue:d,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ln(t,s){s=s.checked,s!=null&&N(t,"checked",s,!1)}function xt(t,s){ln(t,s);var d=fe(s.value),p=s.type;if(d!=null)p==="number"?(d===0&&t.value===""||t.value!=d)&&(t.value=""+d):t.value!==""+d&&(t.value=""+d);else if(p==="submit"||p==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?ot(t,s.type,d):s.hasOwnProperty("defaultValue")&&ot(t,s.type,fe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function dt(t,s,d){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var p=s.type;if(!(p!=="submit"&&p!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,d||s===t.value||(t.value=s),t.defaultValue=s}d=t.name,d!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,d!==""&&(t.name=d)}function ot(t,s,d){(s!=="number"||We(t.ownerDocument)!==t)&&(d==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+d&&(t.defaultValue=""+d))}var Jt=Array.isArray;function Le(t,s,d,p){if(t=t.options,s){s={};for(var b=0;b<d.length;b++)s["$"+d[b]]=!0;for(d=0;d<t.length;d++)b=s.hasOwnProperty("$"+t[d].value),t[d].selected!==b&&(t[d].selected=b),b&&p&&(t[d].defaultSelected=!0)}else{for(d=""+fe(d),s=null,b=0;b<t.length;b++){if(t[b].value===d){t[b].selected=!0,p&&(t[b].defaultSelected=!0);return}s!==null||t[b].disabled||(s=t[b])}s!==null&&(s.selected=!0)}}function Ur(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(a(91));return $({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qi(t,s){var d=s.value;if(d==null){if(d=s.children,s=s.defaultValue,d!=null){if(s!=null)throw Error(a(92));if(Jt(d)){if(1<d.length)throw Error(a(93));d=d[0]}s=d}s==null&&(s=""),d=s}t._wrapperState={initialValue:fe(d)}}function Un(t,s){var d=fe(s.value),p=fe(s.defaultValue);d!=null&&(d=""+d,d!==t.value&&(t.value=d),s.defaultValue==null&&t.defaultValue!==d&&(t.defaultValue=d)),p!=null&&(t.defaultValue=""+p)}function yi(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function An(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vi(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?An(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vn,en=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,d,p,b){MSApp.execUnsafeLocalFunction(function(){return t(s,d,p,b)})}:t})(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Vn=Vn||document.createElement("div"),Vn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Vn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function _r(t,s){if(s){var d=t.firstChild;if(d&&d===t.lastChild&&d.nodeType===3){d.nodeValue=s;return}}t.textContent=s}var qn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yo=["Webkit","ms","Moz","O"];Object.keys(qn).forEach(function(t){yo.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),qn[s]=qn[t]})});function Bt(t,s,d){return s==null||typeof s=="boolean"||s===""?"":d||typeof s!="number"||s===0||qn.hasOwnProperty(t)&&qn[t]?(""+s).trim():s+"px"}function Pe(t,s){t=t.style;for(var d in s)if(s.hasOwnProperty(d)){var p=d.indexOf("--")===0,b=Bt(d,s[d],p);d==="float"&&(d="cssFloat"),p?t.setProperty(d,b):t[d]=b}}var tn=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bt(t,s){if(s){if(tn[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(a(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(a(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(a(61))}if(s.style!=null&&typeof s.style!="object")throw Error(a(62))}}function _t(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qr=null;function Ji(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _s=null,ht=null,$n=null;function vo(t){if(t=Ho(t)){if(typeof _s!="function")throw Error(a(280));var s=t.stateNode;s&&(s=Ba(s),_s(t.stateNode,t.type,s))}}function wo(t){ht?$n?$n.push(t):$n=[t]:ht=t}function Kn(){if(ht){var t=ht,s=$n;if($n=ht=null,vo(t),s)for(t=0;t<s.length;t++)vo(s[t])}}function Rs(t,s){return t(s)}function un(){}var Vr=!1;function es(t,s,d){if(Vr)return t(s,d);Vr=!0;try{return Rs(t,s,d)}finally{Vr=!1,(ht!==null||$n!==null)&&(un(),Kn())}}function On(t,s){var d=t.stateNode;if(d===null)return null;var p=Ba(d);if(p===null)return null;d=p[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(t=t.type,p=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!p;break e;default:t=!1}if(t)return null;if(d&&typeof d!="function")throw Error(a(231,s,typeof d));return d}var bo=!1;if(I)try{var or={};Object.defineProperty(or,"passive",{get:function(){bo=!0}}),window.addEventListener("test",or,or),window.removeEventListener("test",or,or)}catch{bo=!1}function Co(t,s,d,p,b,E,M,K,ne){var ye=Array.prototype.slice.call(arguments,3);try{s.apply(d,ye)}catch(je){this.onError(je)}}var cn=!1,xr=null,In=!1,Be=null,wi={onError:function(t){cn=!0,xr=t}};function So(t,s,d,p,b,E,M,K,ne){cn=!1,xr=null,Co.apply(wi,arguments)}function Dn(t,s,d,p,b,E,M,K,ne){if(So.apply(this,arguments),cn){if(cn){var ye=xr;cn=!1,xr=null}else throw Error(a(198));In||(In=!0,Be=ye)}}function Qn(t){var s=t,d=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(d=s.return),t=s.return;while(t)}return s.tag===3?d:null}function ts(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function ns(t){if(Qn(t)!==t)throw Error(a(188))}function yr(t){var s=t.alternate;if(!s){if(s=Qn(t),s===null)throw Error(a(188));return s!==t?null:t}for(var d=t,p=s;;){var b=d.return;if(b===null)break;var E=b.alternate;if(E===null){if(p=b.return,p!==null){d=p;continue}break}if(b.child===E.child){for(E=b.child;E;){if(E===d)return ns(b),t;if(E===p)return ns(b),s;E=E.sibling}throw Error(a(188))}if(d.return!==p.return)d=b,p=E;else{for(var M=!1,K=b.child;K;){if(K===d){M=!0,d=b,p=E;break}if(K===p){M=!0,p=b,d=E;break}K=K.sibling}if(!M){for(K=E.child;K;){if(K===d){M=!0,d=E,p=b;break}if(K===p){M=!0,p=E,d=b;break}K=K.sibling}if(!M)throw Error(a(189))}}if(d.alternate!==p)throw Error(a(190))}if(d.tag!==3)throw Error(a(188));return d.stateNode.current===d?t:s}function ma(t){return t=yr(t),t!==null?xa(t):null}function xa(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=xa(t);if(s!==null)return s;t=t.sibling}return null}var ar=h.unstable_scheduleCallback,yn=h.unstable_cancelCallback,Rt=h.unstable_shouldYield,ya=h.unstable_requestPaint,Et=h.unstable_now,Eo=h.unstable_getCurrentPriorityLevel,Se=h.unstable_ImmediatePriority,va=h.unstable_UserBlockingPriority,Nt=h.unstable_NormalPriority,bi=h.unstable_LowPriority,wa=h.unstable_IdlePriority,mt=null,lt=null;function pt(t){if(lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot(mt,t,void 0,(t.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:nn,Ao=Math.log,Io=Math.LN2;function nn(t){return t>>>=0,t===0?32:31-(Ao(t)/Io|0)|0}var lr=64,Os=4194304;function Tt(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function cr(t,s){var d=t.pendingLanes;if(d===0)return 0;var p=0,b=t.suspendedLanes,E=t.pingedLanes,M=d&268435455;if(M!==0){var K=M&~b;K!==0?p=Tt(K):(E&=M,E!==0&&(p=Tt(E)))}else M=d&~b,M!==0?p=Tt(M):E!==0&&(p=Tt(E));if(p===0)return 0;if(s!==0&&s!==p&&(s&b)===0&&(b=p&-p,E=s&-s,b>=E||b===16&&(E&4194240)!==0))return s;if((p&4)!==0&&(p|=d&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=p;0<s;)d=31-Hn(s),b=1<<d,p|=t[d],s&=~b;return p}function Wl(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ci(t,s){for(var d=t.suspendedLanes,p=t.pingedLanes,b=t.expirationTimes,E=t.pendingLanes;0<E;){var M=31-Hn(E),K=1<<M,ne=b[M];ne===-1?((K&d)===0||(K&p)!==0)&&(b[M]=Wl(K,s)):ne<=s&&(t.expiredLanes|=K),E&=~K}}function At(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hn(){var t=lr;return lr<<=1,(lr&4194240)===0&&(lr=64),t}function ue(t){for(var s=[],d=0;31>d;d++)s.push(t);return s}function G(t,s,d){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Hn(s),t[s]=d}function Ze(t,s){var d=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var p=t.eventTimes;for(t=t.expirationTimes;0<d;){var b=31-Hn(d),E=1<<b;s[b]=0,p[b]=-1,t[b]=-1,d&=~E}}function Zt(t,s){var d=t.entangledLanes|=s;for(t=t.entanglements;d;){var p=31-Hn(d),b=1<<p;b&s|t[p]&s&&(t[p]|=s),d&=~b}}var ct=0;function ba(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Ds,Pn,qe,Ot,jo,ko=!1,Si=[],dr=null,vr=null,Hr=null,Ut=new Map,Rr=new Map,jn=[],tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ca(t,s){switch(t){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":Ut.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rr.delete(s.pointerId)}}function rt(t,s,d,p,b,E){return t===null||t.nativeEvent!==E?(t={blockedOn:s,domEventName:d,eventSystemFlags:p,nativeEvent:E,targetContainers:[b]},s!==null&&(s=Ho(s),s!==null&&Pn(s)),t):(t.eventSystemFlags|=p,s=t.targetContainers,b!==null&&s.indexOf(b)===-1&&s.push(b),t)}function fn(t,s,d,p,b){switch(s){case"focusin":return dr=rt(dr,t,s,d,p,b),!0;case"dragenter":return vr=rt(vr,t,s,d,p,b),!0;case"mouseover":return Hr=rt(Hr,t,s,d,p,b),!0;case"pointerover":var E=b.pointerId;return Ut.set(E,rt(Ut.get(E)||null,t,s,d,p,b)),!0;case"gotpointercapture":return E=b.pointerId,Rr.set(E,rt(Rr.get(E)||null,t,s,d,p,b)),!0}return!1}function Sa(t){var s=hs(t.target);if(s!==null){var d=Qn(s);if(d!==null){if(s=d.tag,s===13){if(s=ts(d),s!==null){t.blockedOn=s,jo(t.priority,function(){qe(d)});return}}else if(s===3&&d.stateNode.current.memoizedState.isDehydrated){t.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ei(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var d=Ps(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(d===null){d=t.nativeEvent;var p=new d.constructor(d.type,d);Qr=p,d.target.dispatchEvent(p),Qr=null}else return s=Ho(d),s!==null&&Pn(s),t.blockedOn=d,!1;s.shift()}return!0}function No(t,s,d){Ei(t)&&d.delete(s)}function Jr(){ko=!1,dr!==null&&Ei(dr)&&(dr=null),vr!==null&&Ei(vr)&&(vr=null),Hr!==null&&Ei(Hr)&&(Hr=null),Ut.forEach(No),Rr.forEach(No)}function rs(t,s){t.blockedOn===s&&(t.blockedOn=null,ko||(ko=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,Jr)))}function Or(t){function s(b){return rs(b,t)}if(0<Si.length){rs(Si[0],t);for(var d=1;d<Si.length;d++){var p=Si[d];p.blockedOn===t&&(p.blockedOn=null)}}for(dr!==null&&rs(dr,t),vr!==null&&rs(vr,t),Hr!==null&&rs(Hr,t),Ut.forEach(s),Rr.forEach(s),d=0;d<jn.length;d++)p=jn[d],p.blockedOn===t&&(p.blockedOn=null);for(;0<jn.length&&(d=jn[0],d.blockedOn===null);)Sa(d),d.blockedOn===null&&jn.shift()}var wr=P.ReactCurrentBatchConfig,Gr=!0;function Ea(t,s,d,p){var b=ct,E=wr.transition;wr.transition=null;try{ct=1,ei(t,s,d,p)}finally{ct=b,wr.transition=E}}function is(t,s,d,p){var b=ct,E=wr.transition;wr.transition=null;try{ct=4,ei(t,s,d,p)}finally{ct=b,wr.transition=E}}function ei(t,s,d,p){if(Gr){var b=Ps(t,s,d,p);if(b===null)Kl(t,s,p,pn,d),Ca(t,p);else if(fn(b,t,s,d,p))p.stopPropagation();else if(Ca(t,p),s&4&&-1<tt.indexOf(t)){for(;b!==null;){var E=Ho(b);if(E!==null&&Ds(E),E=Ps(t,s,d,p),E===null&&Kl(t,s,p,pn,d),E===b)break;b=E}b!==null&&p.stopPropagation()}else Kl(t,s,p,null,d)}}var pn=null;function Ps(t,s,d,p){if(pn=null,t=Ji(p),t=hs(t),t!==null)if(s=Qn(t),s===null)t=null;else if(d=s.tag,d===13){if(t=ts(s),t!==null)return t;t=null}else if(d===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return pn=t,null}function To(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Eo()){case Se:return 1;case va:return 4;case Nt:case bi:return 16;case wa:return 536870912;default:return 16}default:return 16}}var Dr=null,_o=null,Ms=null;function Aa(){if(Ms)return Ms;var t,s=_o,d=s.length,p,b="value"in Dr?Dr.value:Dr.textContent,E=b.length;for(t=0;t<d&&s[t]===b[t];t++);var M=d-t;for(p=1;p<=M&&s[d-p]===b[E-p];p++);return Ms=b.slice(t,1<p?1-p:void 0)}function yt(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ss(){return!0}function os(){return!1}function qt(t){function s(d,p,b,E,M){this._reactName=d,this._targetInst=b,this.type=p,this.nativeEvent=E,this.target=M,this.currentTarget=null;for(var K in t)t.hasOwnProperty(K)&&(d=t[K],this[K]=d?d(E):E[K]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?ss:os,this.isPropagationStopped=os,this}return $(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),s}var Ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xe=qt(Ai),at=$({},Ai,{view:0,detail:0}),gn=qt(at),Ii,Bs,as,Ls=$({},at,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ls,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==as&&(as&&t.type==="mousemove"?(Ii=t.screenX-as.screenX,Bs=t.screenY-as.screenY):Bs=Ii=0,as=t),Ii)},movementY:function(t){return"movementY"in t?t.movementY:Bs}}),Ia=qt(Ls),Ro=$({},Ls,{dataTransfer:0}),rn=qt(Ro),Oo=$({},at,{relatedTarget:0}),Dt=qt(Oo),zs=$({},Ai,{animationName:0,elapsedTime:0,pseudoElement:0}),ti=qt(zs),jt=$({},Ai,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ke=qt(jt),Ul=$({},Ai,{data:0}),kt=qt(Ul),ni={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ji={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function br(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Vl[t])?!!s[t]:!1}function ls(){return br}var ja=$({},at,{key:function(t){if(t.key){var s=ni[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=yt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ji[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ls,charCode:function(t){return t.type==="keypress"?yt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Do=qt(ja),ka=$({},Ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Po=qt(ka),Hl=$({},at,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ls}),ki=qt(Hl),Mo=$({},Ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gl=qt(Mo),cs=$({},Ls,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Xl=qt(cs),Xr=[9,13,27,32],Ni=I&&"CompositionEvent"in window,vn=null;I&&"documentMode"in document&&(vn=document.documentMode);var Na=I&&"TextEvent"in window&&!vn,ur=I&&(!Ni||vn&&8<vn&&11>=vn),Ta=" ",Fs=!1;function _a(t,s){switch(t){case"keyup":return Xr.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var kn=!1;function Yl(t,s){switch(t){case"compositionend":return Bo(s);case"keypress":return s.which!==32?null:(Fs=!0,Ta);case"textInput":return t=s.data,t===Ta&&Fs?null:t;default:return null}}function Lo(t,s){if(kn)return t==="compositionend"||!Ni&&_a(t,s)?(t=Aa(),Ms=_o=Dr=null,kn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ur&&s.locale!=="ko"?null:s.data;default:return null}}var ds={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gt(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!ds[t.type]:s==="textarea"}function us(t,s,d,p){wo(p),s=Da(s,"onChange"),0<s.length&&(d=new xe("onChange","change",null,d,p),t.push({event:d,listeners:s}))}var R=null,e=null;function n(t){Qd(t,0)}function i(t){var s=Vs(t);if(st(s))return t}function o(t,s){if(t==="change")return s}var l=!1;if(I){var c;if(I){var f="oninput"in document;if(!f){var m=document.createElement("div");m.setAttribute("oninput","return;"),f=typeof m.oninput=="function"}c=f}else c=!1;l=c&&(!document.documentMode||9<document.documentMode)}function w(){R&&(R.detachEvent("onpropertychange",j),e=R=null)}function j(t){if(t.propertyName==="value"&&i(e)){var s=[];us(s,e,t,Ji(t)),es(n,s)}}function O(t,s,d){t==="focusin"?(w(),R=s,e=d,R.attachEvent("onpropertychange",j)):t==="focusout"&&w()}function L(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return i(e)}function Z(t,s){if(t==="click")return i(s)}function ee(t,s){if(t==="input"||t==="change")return i(s)}function re(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var ae=typeof Object.is=="function"?Object.is:re;function me(t,s){if(ae(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var d=Object.keys(t),p=Object.keys(s);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var b=d[p];if(!S.call(s,b)||!ae(t[b],s[b]))return!1}return!0}function Te(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _e(t,s){var d=Te(t);t=0;for(var p;d;){if(d.nodeType===3){if(p=t+d.textContent.length,t<=s&&p>=s)return{node:d,offset:s-t};t=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Te(d)}}function Ie(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Ie(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function ut(){for(var t=window,s=We();s instanceof t.HTMLIFrameElement;){try{var d=typeof s.contentWindow.location.href=="string"}catch{d=!1}if(d)t=s.contentWindow;else break;s=We(t.document)}return s}function it(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function Mn(t){var s=ut(),d=t.focusedElem,p=t.selectionRange;if(s!==d&&d&&d.ownerDocument&&Ie(d.ownerDocument.documentElement,d)){if(p!==null&&it(d)){if(s=p.start,t=p.end,t===void 0&&(t=s),"selectionStart"in d)d.selectionStart=s,d.selectionEnd=Math.min(t,d.value.length);else if(t=(s=d.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var b=d.textContent.length,E=Math.min(p.start,b);p=p.end===void 0?E:Math.min(p.end,b),!t.extend&&E>p&&(b=p,p=E,E=b),b=_e(d,E);var M=_e(d,p);b&&M&&(t.rangeCount!==1||t.anchorNode!==b.node||t.anchorOffset!==b.offset||t.focusNode!==M.node||t.focusOffset!==M.offset)&&(s=s.createRange(),s.setStart(b.node,b.offset),t.removeAllRanges(),E>p?(t.addRange(s),t.extend(M.node,M.offset)):(s.setEnd(M.node,M.offset),t.addRange(s)))}}for(s=[],t=d;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<s.length;d++)t=s[d],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hr=I&&"documentMode"in document&&11>=document.documentMode,sn=null,Ct=null,Ht=null,Nn=!1;function ri(t,s,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Nn||sn==null||sn!==We(p)||(p=sn,"selectionStart"in p&&it(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Ht&&me(Ht,p)||(Ht=p,p=Da(Ct,"onSelect"),0<p.length&&(s=new xe("onSelect","select",null,s,d),t.push({event:s,listeners:p}),s.target=sn)))}function Pr(t,s){var d={};return d[t.toLowerCase()]=s.toLowerCase(),d["Webkit"+t]="webkit"+s,d["Moz"+t]="moz"+s,d}var Ti={animationend:Pr("Animation","AnimationEnd"),animationiteration:Pr("Animation","AnimationIteration"),animationstart:Pr("Animation","AnimationStart"),transitionend:Pr("Transition","TransitionEnd")},zo={},Hd={};I&&(Hd=document.createElement("div").style,"AnimationEvent"in window||(delete Ti.animationend.animation,delete Ti.animationiteration.animation,delete Ti.animationstart.animation),"TransitionEvent"in window||delete Ti.transitionend.transition);function Ra(t){if(zo[t])return zo[t];if(!Ti[t])return t;var s=Ti[t],d;for(d in s)if(s.hasOwnProperty(d)&&d in Hd)return zo[t]=s[d];return t}var Gd=Ra("animationend"),Xd=Ra("animationiteration"),Yd=Ra("animationstart"),Zd=Ra("transitionend"),qd=new Map,$d="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _i(t,s){qd.set(t,s),x(s,[t])}for(var Zl=0;Zl<$d.length;Zl++){var ql=$d[Zl],Rf=ql.toLowerCase(),Of=ql[0].toUpperCase()+ql.slice(1);_i(Rf,"on"+Of)}_i(Gd,"onAnimationEnd"),_i(Xd,"onAnimationIteration"),_i(Yd,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(Zd,"onTransitionEnd"),C("onMouseEnter",["mouseout","mouseover"]),C("onMouseLeave",["mouseout","mouseover"]),C("onPointerEnter",["pointerout","pointerover"]),C("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Df=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fo));function Kd(t,s,d){var p=t.type||"unknown-event";t.currentTarget=d,Dn(p,s,void 0,t),t.currentTarget=null}function Qd(t,s){s=(s&4)!==0;for(var d=0;d<t.length;d++){var p=t[d],b=p.event;p=p.listeners;e:{var E=void 0;if(s)for(var M=p.length-1;0<=M;M--){var K=p[M],ne=K.instance,ye=K.currentTarget;if(K=K.listener,ne!==E&&b.isPropagationStopped())break e;Kd(b,K,ye),E=ne}else for(M=0;M<p.length;M++){if(K=p[M],ne=K.instance,ye=K.currentTarget,K=K.listener,ne!==E&&b.isPropagationStopped())break e;Kd(b,K,ye),E=ne}}}if(In)throw t=Be,In=!1,Be=null,t}function Lt(t,s){var d=s[rc];d===void 0&&(d=s[rc]=new Set);var p=t+"__bubble";d.has(p)||(Jd(s,t,2,!1),d.add(p))}function $l(t,s,d){var p=0;s&&(p|=4),Jd(d,t,p,s)}var Oa="_reactListening"+Math.random().toString(36).slice(2);function Wo(t){if(!t[Oa]){t[Oa]=!0,g.forEach(function(d){d!=="selectionchange"&&(Df.has(d)||$l(d,!1,t),$l(d,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Oa]||(s[Oa]=!0,$l("selectionchange",!1,s))}}function Jd(t,s,d,p){switch(To(s)){case 1:var b=Ea;break;case 4:b=is;break;default:b=ei}d=b.bind(null,s,d,t),b=void 0,!bo||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(b=!0),p?b!==void 0?t.addEventListener(s,d,{capture:!0,passive:b}):t.addEventListener(s,d,!0):b!==void 0?t.addEventListener(s,d,{passive:b}):t.addEventListener(s,d,!1)}function Kl(t,s,d,p,b){var E=p;if((s&1)===0&&(s&2)===0&&p!==null)e:for(;;){if(p===null)return;var M=p.tag;if(M===3||M===4){var K=p.stateNode.containerInfo;if(K===b||K.nodeType===8&&K.parentNode===b)break;if(M===4)for(M=p.return;M!==null;){var ne=M.tag;if((ne===3||ne===4)&&(ne=M.stateNode.containerInfo,ne===b||ne.nodeType===8&&ne.parentNode===b))return;M=M.return}for(;K!==null;){if(M=hs(K),M===null)return;if(ne=M.tag,ne===5||ne===6){p=E=M;continue e}K=K.parentNode}}p=p.return}es(function(){var ye=E,je=Ji(d),Ne=[];e:{var Ae=qd.get(t);if(Ae!==void 0){var ze=xe,Ve=t;switch(t){case"keypress":if(yt(d)===0)break e;case"keydown":case"keyup":ze=Do;break;case"focusin":Ve="focus",ze=Dt;break;case"focusout":Ve="blur",ze=Dt;break;case"beforeblur":case"afterblur":ze=Dt;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ze=Ia;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ze=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ze=ki;break;case Gd:case Xd:case Yd:ze=ti;break;case Zd:ze=Gl;break;case"scroll":ze=gn;break;case"wheel":ze=Xl;break;case"copy":case"cut":case"paste":ze=Ke;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ze=Po}var Xe=(s&4)!==0,on=!Xe&&t==="scroll",he=Xe?Ae!==null?Ae+"Capture":null:Ae;Xe=[];for(var ie=ye,ge;ie!==null;){ge=ie;var Re=ge.stateNode;if(ge.tag===5&&Re!==null&&(ge=Re,he!==null&&(Re=On(ie,he),Re!=null&&Xe.push(Uo(ie,Re,ge)))),on)break;ie=ie.return}0<Xe.length&&(Ae=new ze(Ae,Ve,null,d,je),Ne.push({event:Ae,listeners:Xe}))}}if((s&7)===0){e:{if(Ae=t==="mouseover"||t==="pointerover",ze=t==="mouseout"||t==="pointerout",Ae&&d!==Qr&&(Ve=d.relatedTarget||d.fromElement)&&(hs(Ve)||Ve[ii]))break e;if((ze||Ae)&&(Ae=je.window===je?je:(Ae=je.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,ze?(Ve=d.relatedTarget||d.toElement,ze=ye,Ve=Ve?hs(Ve):null,Ve!==null&&(on=Qn(Ve),Ve!==on||Ve.tag!==5&&Ve.tag!==6)&&(Ve=null)):(ze=null,Ve=ye),ze!==Ve)){if(Xe=Ia,Re="onMouseLeave",he="onMouseEnter",ie="mouse",(t==="pointerout"||t==="pointerover")&&(Xe=Po,Re="onPointerLeave",he="onPointerEnter",ie="pointer"),on=ze==null?Ae:Vs(ze),ge=Ve==null?Ae:Vs(Ve),Ae=new Xe(Re,ie+"leave",ze,d,je),Ae.target=on,Ae.relatedTarget=ge,Re=null,hs(je)===ye&&(Xe=new Xe(he,ie+"enter",Ve,d,je),Xe.target=ge,Xe.relatedTarget=on,Re=Xe),on=Re,ze&&Ve)t:{for(Xe=ze,he=Ve,ie=0,ge=Xe;ge;ge=Ws(ge))ie++;for(ge=0,Re=he;Re;Re=Ws(Re))ge++;for(;0<ie-ge;)Xe=Ws(Xe),ie--;for(;0<ge-ie;)he=Ws(he),ge--;for(;ie--;){if(Xe===he||he!==null&&Xe===he.alternate)break t;Xe=Ws(Xe),he=Ws(he)}Xe=null}else Xe=null;ze!==null&&eu(Ne,Ae,ze,Xe,!1),Ve!==null&&on!==null&&eu(Ne,on,Ve,Xe,!0)}}e:{if(Ae=ye?Vs(ye):window,ze=Ae.nodeName&&Ae.nodeName.toLowerCase(),ze==="select"||ze==="input"&&Ae.type==="file")var Ye=o;else if(gt(Ae))if(l)Ye=ee;else{Ye=L;var Je=O}else(ze=Ae.nodeName)&&ze.toLowerCase()==="input"&&(Ae.type==="checkbox"||Ae.type==="radio")&&(Ye=Z);if(Ye&&(Ye=Ye(t,ye))){us(Ne,Ye,d,je);break e}Je&&Je(t,Ae,ye),t==="focusout"&&(Je=Ae._wrapperState)&&Je.controlled&&Ae.type==="number"&&ot(Ae,"number",Ae.value)}switch(Je=ye?Vs(ye):window,t){case"focusin":(gt(Je)||Je.contentEditable==="true")&&(sn=Je,Ct=ye,Ht=null);break;case"focusout":Ht=Ct=sn=null;break;case"mousedown":Nn=!0;break;case"contextmenu":case"mouseup":case"dragend":Nn=!1,ri(Ne,d,je);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":ri(Ne,d,je)}var et;if(Ni)e:{switch(t){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else kn?_a(t,d)&&(nt="onCompositionEnd"):t==="keydown"&&d.keyCode===229&&(nt="onCompositionStart");nt&&(ur&&d.locale!=="ko"&&(kn||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&kn&&(et=Aa()):(Dr=je,_o="value"in Dr?Dr.value:Dr.textContent,kn=!0)),Je=Da(ye,nt),0<Je.length&&(nt=new kt(nt,t,null,d,je),Ne.push({event:nt,listeners:Je}),et?nt.data=et:(et=Bo(d),et!==null&&(nt.data=et)))),(et=Na?Yl(t,d):Lo(t,d))&&(ye=Da(ye,"onBeforeInput"),0<ye.length&&(je=new kt("onBeforeInput","beforeinput",null,d,je),Ne.push({event:je,listeners:ye}),je.data=et))}Qd(Ne,s)})}function Uo(t,s,d){return{instance:t,listener:s,currentTarget:d}}function Da(t,s){for(var d=s+"Capture",p=[];t!==null;){var b=t,E=b.stateNode;b.tag===5&&E!==null&&(b=E,E=On(t,d),E!=null&&p.unshift(Uo(t,E,b)),E=On(t,s),E!=null&&p.push(Uo(t,E,b))),t=t.return}return p}function Ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function eu(t,s,d,p,b){for(var E=s._reactName,M=[];d!==null&&d!==p;){var K=d,ne=K.alternate,ye=K.stateNode;if(ne!==null&&ne===p)break;K.tag===5&&ye!==null&&(K=ye,b?(ne=On(d,E),ne!=null&&M.unshift(Uo(d,ne,K))):b||(ne=On(d,E),ne!=null&&M.push(Uo(d,ne,K)))),d=d.return}M.length!==0&&t.push({event:s,listeners:M})}var Pf=/\r\n?/g,Mf=/\u0000|\uFFFD/g;function tu(t){return(typeof t=="string"?t:""+t).replace(Pf,`
`).replace(Mf,"")}function Pa(t,s,d){if(s=tu(s),tu(t)!==s&&d)throw Error(a(425))}function Ma(){}var Ql=null,Jl=null;function ec(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var tc=typeof setTimeout=="function"?setTimeout:void 0,Bf=typeof clearTimeout=="function"?clearTimeout:void 0,nu=typeof Promise=="function"?Promise:void 0,Lf=typeof queueMicrotask=="function"?queueMicrotask:typeof nu<"u"?function(t){return nu.resolve(null).then(t).catch(zf)}:tc;function zf(t){setTimeout(function(){throw t})}function nc(t,s){var d=s,p=0;do{var b=d.nextSibling;if(t.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"){if(p===0){t.removeChild(b),Or(s);return}p--}else d!=="$"&&d!=="$?"&&d!=="$!"||p++;d=b}while(d);Or(s)}function Ri(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function ru(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var d=t.data;if(d==="$"||d==="$!"||d==="$?"){if(s===0)return t;s--}else d==="/$"&&s++}t=t.previousSibling}return null}var Us=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Us,Vo="__reactProps$"+Us,ii="__reactContainer$"+Us,rc="__reactEvents$"+Us,Ff="__reactListeners$"+Us,Wf="__reactHandles$"+Us;function hs(t){var s=t[Yr];if(s)return s;for(var d=t.parentNode;d;){if(s=d[ii]||d[Yr]){if(d=s.alternate,s.child!==null||d!==null&&d.child!==null)for(t=ru(t);t!==null;){if(d=t[Yr])return d;t=ru(t)}return s}t=d,d=t.parentNode}return null}function Ho(t){return t=t[Yr]||t[ii],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(a(33))}function Ba(t){return t[Vo]||null}var ic=[],Hs=-1;function Oi(t){return{current:t}}function zt(t){0>Hs||(t.current=ic[Hs],ic[Hs]=null,Hs--)}function Pt(t,s){Hs++,ic[Hs]=t.current,t.current=s}var Di={},Bn=Oi(Di),Jn=Oi(!1),fs=Di;function Gs(t,s){var d=t.type.contextTypes;if(!d)return Di;var p=t.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===s)return p.__reactInternalMemoizedMaskedChildContext;var b={},E;for(E in d)b[E]=s[E];return p&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=b),b}function er(t){return t=t.childContextTypes,t!=null}function La(){zt(Jn),zt(Bn)}function iu(t,s,d){if(Bn.current!==Di)throw Error(a(168));Pt(Bn,s),Pt(Jn,d)}function su(t,s,d){var p=t.stateNode;if(s=s.childContextTypes,typeof p.getChildContext!="function")return d;p=p.getChildContext();for(var b in p)if(!(b in s))throw Error(a(108,Oe(t)||"Unknown",b));return $({},d,p)}function za(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Di,fs=Bn.current,Pt(Bn,t),Pt(Jn,Jn.current),!0}function ou(t,s,d){var p=t.stateNode;if(!p)throw Error(a(169));d?(t=su(t,s,fs),p.__reactInternalMemoizedMergedChildContext=t,zt(Jn),zt(Bn),Pt(Bn,t)):zt(Jn),Pt(Jn,d)}var si=null,Fa=!1,sc=!1;function au(t){si===null?si=[t]:si.push(t)}function Uf(t){Fa=!0,au(t)}function Pi(){if(!sc&&si!==null){sc=!0;var t=0,s=ct;try{var d=si;for(ct=1;t<d.length;t++){var p=d[t];do p=p(!0);while(p!==null)}si=null,Fa=!1}catch(b){throw si!==null&&(si=si.slice(t+1)),ar(Se,Pi),b}finally{ct=s,sc=!1}}return null}var Xs=[],Ys=0,Wa=null,Ua=0,Cr=[],Sr=0,ps=null,oi=1,ai="";function gs(t,s){Xs[Ys++]=Ua,Xs[Ys++]=Wa,Wa=t,Ua=s}function lu(t,s,d){Cr[Sr++]=oi,Cr[Sr++]=ai,Cr[Sr++]=ps,ps=t;var p=oi;t=ai;var b=32-Hn(p)-1;p&=~(1<<b),d+=1;var E=32-Hn(s)+b;if(30<E){var M=b-b%5;E=(p&(1<<M)-1).toString(32),p>>=M,b-=M,oi=1<<32-Hn(s)+b|d<<b|p,ai=E+t}else oi=1<<E|d<<b|p,ai=t}function oc(t){t.return!==null&&(gs(t,1),lu(t,1,0))}function ac(t){for(;t===Wa;)Wa=Xs[--Ys],Xs[Ys]=null,Ua=Xs[--Ys],Xs[Ys]=null;for(;t===ps;)ps=Cr[--Sr],Cr[Sr]=null,ai=Cr[--Sr],Cr[Sr]=null,oi=Cr[--Sr],Cr[Sr]=null}var fr=null,pr=null,Vt=!1,Mr=null;function cu(t,s){var d=jr(5,null,null,0);d.elementType="DELETED",d.stateNode=s,d.return=t,s=t.deletions,s===null?(t.deletions=[d],t.flags|=16):s.push(d)}function du(t,s){switch(t.tag){case 5:var d=t.type;return s=s.nodeType!==1||d.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,fr=t,pr=Ri(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,fr=t,pr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(d=ps!==null?{id:oi,overflow:ai}:null,t.memoizedState={dehydrated:s,treeContext:d,retryLane:1073741824},d=jr(18,null,null,0),d.stateNode=s,d.return=t,t.child=d,fr=t,pr=null,!0):!1;default:return!1}}function lc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cc(t){if(Vt){var s=pr;if(s){var d=s;if(!du(t,s)){if(lc(t))throw Error(a(418));s=Ri(d.nextSibling);var p=fr;s&&du(t,s)?cu(p,d):(t.flags=t.flags&-4097|2,Vt=!1,fr=t)}}else{if(lc(t))throw Error(a(418));t.flags=t.flags&-4097|2,Vt=!1,fr=t}}}function uu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fr=t}function Va(t){if(t!==fr)return!1;if(!Vt)return uu(t),Vt=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!ec(t.type,t.memoizedProps)),s&&(s=pr)){if(lc(t))throw hu(),Error(a(418));for(;s;)cu(t,s),s=Ri(s.nextSibling)}if(uu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var d=t.data;if(d==="/$"){if(s===0){pr=Ri(t.nextSibling);break e}s--}else d!=="$"&&d!=="$!"&&d!=="$?"||s++}t=t.nextSibling}pr=null}}else pr=fr?Ri(t.stateNode.nextSibling):null;return!0}function hu(){for(var t=pr;t;)t=Ri(t.nextSibling)}function Zs(){pr=fr=null,Vt=!1}function dc(t){Mr===null?Mr=[t]:Mr.push(t)}var Vf=P.ReactCurrentBatchConfig;function Go(t,s,d){if(t=d.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(a(309));var p=d.stateNode}if(!p)throw Error(a(147,t));var b=p,E=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===E?s.ref:(s=function(M){var K=b.refs;M===null?delete K[E]:K[E]=M},s._stringRef=E,s)}if(typeof t!="string")throw Error(a(284));if(!d._owner)throw Error(a(290,t))}return t}function Ha(t,s){throw t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function fu(t){var s=t._init;return s(t._payload)}function pu(t){function s(he,ie){if(t){var ge=he.deletions;ge===null?(he.deletions=[ie],he.flags|=16):ge.push(ie)}}function d(he,ie){if(!t)return null;for(;ie!==null;)s(he,ie),ie=ie.sibling;return null}function p(he,ie){for(he=new Map;ie!==null;)ie.key!==null?he.set(ie.key,ie):he.set(ie.index,ie),ie=ie.sibling;return he}function b(he,ie){return he=Vi(he,ie),he.index=0,he.sibling=null,he}function E(he,ie,ge){return he.index=ge,t?(ge=he.alternate,ge!==null?(ge=ge.index,ge<ie?(he.flags|=2,ie):ge):(he.flags|=2,ie)):(he.flags|=1048576,ie)}function M(he){return t&&he.alternate===null&&(he.flags|=2),he}function K(he,ie,ge,Re){return ie===null||ie.tag!==6?(ie=td(ge,he.mode,Re),ie.return=he,ie):(ie=b(ie,ge),ie.return=he,ie)}function ne(he,ie,ge,Re){var Ye=ge.type;return Ye===F?je(he,ie,ge.props.children,Re,ge.key):ie!==null&&(ie.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===J&&fu(Ye)===ie.type)?(Re=b(ie,ge.props),Re.ref=Go(he,ie,ge),Re.return=he,Re):(Re=pl(ge.type,ge.key,ge.props,null,he.mode,Re),Re.ref=Go(he,ie,ge),Re.return=he,Re)}function ye(he,ie,ge,Re){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==ge.containerInfo||ie.stateNode.implementation!==ge.implementation?(ie=nd(ge,he.mode,Re),ie.return=he,ie):(ie=b(ie,ge.children||[]),ie.return=he,ie)}function je(he,ie,ge,Re,Ye){return ie===null||ie.tag!==7?(ie=Ss(ge,he.mode,Re,Ye),ie.return=he,ie):(ie=b(ie,ge),ie.return=he,ie)}function Ne(he,ie,ge){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=td(""+ie,he.mode,ge),ie.return=he,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case D:return ge=pl(ie.type,ie.key,ie.props,null,he.mode,ge),ge.ref=Go(he,null,ie),ge.return=he,ge;case q:return ie=nd(ie,he.mode,ge),ie.return=he,ie;case J:var Re=ie._init;return Ne(he,Re(ie._payload),ge)}if(Jt(ie)||Ce(ie))return ie=Ss(ie,he.mode,ge,null),ie.return=he,ie;Ha(he,ie)}return null}function Ae(he,ie,ge,Re){var Ye=ie!==null?ie.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return Ye!==null?null:K(he,ie,""+ge,Re);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case D:return ge.key===Ye?ne(he,ie,ge,Re):null;case q:return ge.key===Ye?ye(he,ie,ge,Re):null;case J:return Ye=ge._init,Ae(he,ie,Ye(ge._payload),Re)}if(Jt(ge)||Ce(ge))return Ye!==null?null:je(he,ie,ge,Re,null);Ha(he,ge)}return null}function ze(he,ie,ge,Re,Ye){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return he=he.get(ge)||null,K(ie,he,""+Re,Ye);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case D:return he=he.get(Re.key===null?ge:Re.key)||null,ne(ie,he,Re,Ye);case q:return he=he.get(Re.key===null?ge:Re.key)||null,ye(ie,he,Re,Ye);case J:var Je=Re._init;return ze(he,ie,ge,Je(Re._payload),Ye)}if(Jt(Re)||Ce(Re))return he=he.get(ge)||null,je(ie,he,Re,Ye,null);Ha(ie,Re)}return null}function Ve(he,ie,ge,Re){for(var Ye=null,Je=null,et=ie,nt=ie=0,Cn=null;et!==null&&nt<ge.length;nt++){et.index>nt?(Cn=et,et=null):Cn=et.sibling;var wt=Ae(he,et,ge[nt],Re);if(wt===null){et===null&&(et=Cn);break}t&&et&&wt.alternate===null&&s(he,et),ie=E(wt,ie,nt),Je===null?Ye=wt:Je.sibling=wt,Je=wt,et=Cn}if(nt===ge.length)return d(he,et),Vt&&gs(he,nt),Ye;if(et===null){for(;nt<ge.length;nt++)et=Ne(he,ge[nt],Re),et!==null&&(ie=E(et,ie,nt),Je===null?Ye=et:Je.sibling=et,Je=et);return Vt&&gs(he,nt),Ye}for(et=p(he,et);nt<ge.length;nt++)Cn=ze(et,he,nt,ge[nt],Re),Cn!==null&&(t&&Cn.alternate!==null&&et.delete(Cn.key===null?nt:Cn.key),ie=E(Cn,ie,nt),Je===null?Ye=Cn:Je.sibling=Cn,Je=Cn);return t&&et.forEach(function(Hi){return s(he,Hi)}),Vt&&gs(he,nt),Ye}function Xe(he,ie,ge,Re){var Ye=Ce(ge);if(typeof Ye!="function")throw Error(a(150));if(ge=Ye.call(ge),ge==null)throw Error(a(151));for(var Je=Ye=null,et=ie,nt=ie=0,Cn=null,wt=ge.next();et!==null&&!wt.done;nt++,wt=ge.next()){et.index>nt?(Cn=et,et=null):Cn=et.sibling;var Hi=Ae(he,et,wt.value,Re);if(Hi===null){et===null&&(et=Cn);break}t&&et&&Hi.alternate===null&&s(he,et),ie=E(Hi,ie,nt),Je===null?Ye=Hi:Je.sibling=Hi,Je=Hi,et=Cn}if(wt.done)return d(he,et),Vt&&gs(he,nt),Ye;if(et===null){for(;!wt.done;nt++,wt=ge.next())wt=Ne(he,wt.value,Re),wt!==null&&(ie=E(wt,ie,nt),Je===null?Ye=wt:Je.sibling=wt,Je=wt);return Vt&&gs(he,nt),Ye}for(et=p(he,et);!wt.done;nt++,wt=ge.next())wt=ze(et,he,nt,wt.value,Re),wt!==null&&(t&&wt.alternate!==null&&et.delete(wt.key===null?nt:wt.key),ie=E(wt,ie,nt),Je===null?Ye=wt:Je.sibling=wt,Je=wt);return t&&et.forEach(function(C1){return s(he,C1)}),Vt&&gs(he,nt),Ye}function on(he,ie,ge,Re){if(typeof ge=="object"&&ge!==null&&ge.type===F&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case D:e:{for(var Ye=ge.key,Je=ie;Je!==null;){if(Je.key===Ye){if(Ye=ge.type,Ye===F){if(Je.tag===7){d(he,Je.sibling),ie=b(Je,ge.props.children),ie.return=he,he=ie;break e}}else if(Je.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===J&&fu(Ye)===Je.type){d(he,Je.sibling),ie=b(Je,ge.props),ie.ref=Go(he,Je,ge),ie.return=he,he=ie;break e}d(he,Je);break}else s(he,Je);Je=Je.sibling}ge.type===F?(ie=Ss(ge.props.children,he.mode,Re,ge.key),ie.return=he,he=ie):(Re=pl(ge.type,ge.key,ge.props,null,he.mode,Re),Re.ref=Go(he,ie,ge),Re.return=he,he=Re)}return M(he);case q:e:{for(Je=ge.key;ie!==null;){if(ie.key===Je)if(ie.tag===4&&ie.stateNode.containerInfo===ge.containerInfo&&ie.stateNode.implementation===ge.implementation){d(he,ie.sibling),ie=b(ie,ge.children||[]),ie.return=he,he=ie;break e}else{d(he,ie);break}else s(he,ie);ie=ie.sibling}ie=nd(ge,he.mode,Re),ie.return=he,he=ie}return M(he);case J:return Je=ge._init,on(he,ie,Je(ge._payload),Re)}if(Jt(ge))return Ve(he,ie,ge,Re);if(Ce(ge))return Xe(he,ie,ge,Re);Ha(he,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,ie!==null&&ie.tag===6?(d(he,ie.sibling),ie=b(ie,ge),ie.return=he,he=ie):(d(he,ie),ie=td(ge,he.mode,Re),ie.return=he,he=ie),M(he)):d(he,ie)}return on}var qs=pu(!0),gu=pu(!1),Ga=Oi(null),Xa=null,$s=null,uc=null;function hc(){uc=$s=Xa=null}function fc(t){var s=Ga.current;zt(Ga),t._currentValue=s}function pc(t,s,d){for(;t!==null;){var p=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,p!==null&&(p.childLanes|=s)):p!==null&&(p.childLanes&s)!==s&&(p.childLanes|=s),t===d)break;t=t.return}}function Ks(t,s){Xa=t,uc=$s=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(tr=!0),t.firstContext=null)}function Er(t){var s=t._currentValue;if(uc!==t)if(t={context:t,memoizedValue:s,next:null},$s===null){if(Xa===null)throw Error(a(308));$s=t,Xa.dependencies={lanes:0,firstContext:t}}else $s=$s.next=t;return s}var ms=null;function gc(t){ms===null?ms=[t]:ms.push(t)}function mu(t,s,d,p){var b=s.interleaved;return b===null?(d.next=d,gc(s)):(d.next=b.next,b.next=d),s.interleaved=d,li(t,p)}function li(t,s){t.lanes|=s;var d=t.alternate;for(d!==null&&(d.lanes|=s),d=t,t=t.return;t!==null;)t.childLanes|=s,d=t.alternate,d!==null&&(d.childLanes|=s),d=t,t=t.return;return d.tag===3?d.stateNode:null}var Mi=!1;function mc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xu(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ci(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Bi(t,s,d){var p=t.updateQueue;if(p===null)return null;if(p=p.shared,(vt&2)!==0){var b=p.pending;return b===null?s.next=s:(s.next=b.next,b.next=s),p.pending=s,li(t,d)}return b=p.interleaved,b===null?(s.next=s,gc(p)):(s.next=b.next,b.next=s),p.interleaved=s,li(t,d)}function Ya(t,s,d){if(s=s.updateQueue,s!==null&&(s=s.shared,(d&4194240)!==0)){var p=s.lanes;p&=t.pendingLanes,d|=p,s.lanes=d,Zt(t,d)}}function yu(t,s){var d=t.updateQueue,p=t.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var b=null,E=null;if(d=d.firstBaseUpdate,d!==null){do{var M={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};E===null?b=E=M:E=E.next=M,d=d.next}while(d!==null);E===null?b=E=s:E=E.next=s}else b=E=s;d={baseState:p.baseState,firstBaseUpdate:b,lastBaseUpdate:E,shared:p.shared,effects:p.effects},t.updateQueue=d;return}t=d.lastBaseUpdate,t===null?d.firstBaseUpdate=s:t.next=s,d.lastBaseUpdate=s}function Za(t,s,d,p){var b=t.updateQueue;Mi=!1;var E=b.firstBaseUpdate,M=b.lastBaseUpdate,K=b.shared.pending;if(K!==null){b.shared.pending=null;var ne=K,ye=ne.next;ne.next=null,M===null?E=ye:M.next=ye,M=ne;var je=t.alternate;je!==null&&(je=je.updateQueue,K=je.lastBaseUpdate,K!==M&&(K===null?je.firstBaseUpdate=ye:K.next=ye,je.lastBaseUpdate=ne))}if(E!==null){var Ne=b.baseState;M=0,je=ye=ne=null,K=E;do{var Ae=K.lane,ze=K.eventTime;if((p&Ae)===Ae){je!==null&&(je=je.next={eventTime:ze,lane:0,tag:K.tag,payload:K.payload,callback:K.callback,next:null});e:{var Ve=t,Xe=K;switch(Ae=s,ze=d,Xe.tag){case 1:if(Ve=Xe.payload,typeof Ve=="function"){Ne=Ve.call(ze,Ne,Ae);break e}Ne=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=Xe.payload,Ae=typeof Ve=="function"?Ve.call(ze,Ne,Ae):Ve,Ae==null)break e;Ne=$({},Ne,Ae);break e;case 2:Mi=!0}}K.callback!==null&&K.lane!==0&&(t.flags|=64,Ae=b.effects,Ae===null?b.effects=[K]:Ae.push(K))}else ze={eventTime:ze,lane:Ae,tag:K.tag,payload:K.payload,callback:K.callback,next:null},je===null?(ye=je=ze,ne=Ne):je=je.next=ze,M|=Ae;if(K=K.next,K===null){if(K=b.shared.pending,K===null)break;Ae=K,K=Ae.next,Ae.next=null,b.lastBaseUpdate=Ae,b.shared.pending=null}}while(!0);if(je===null&&(ne=Ne),b.baseState=ne,b.firstBaseUpdate=ye,b.lastBaseUpdate=je,s=b.shared.interleaved,s!==null){b=s;do M|=b.lane,b=b.next;while(b!==s)}else E===null&&(b.shared.lanes=0);vs|=M,t.lanes=M,t.memoizedState=Ne}}function vu(t,s,d){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var p=t[s],b=p.callback;if(b!==null){if(p.callback=null,p=d,typeof b!="function")throw Error(a(191,b));b.call(p)}}}var Xo={},Zr=Oi(Xo),Yo=Oi(Xo),Zo=Oi(Xo);function xs(t){if(t===Xo)throw Error(a(174));return t}function xc(t,s){switch(Pt(Zo,s),Pt(Yo,t),Pt(Zr,Xo),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:vi(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=vi(s,t)}zt(Zr),Pt(Zr,s)}function Qs(){zt(Zr),zt(Yo),zt(Zo)}function wu(t){xs(Zo.current);var s=xs(Zr.current),d=vi(s,t.type);s!==d&&(Pt(Yo,t),Pt(Zr,d))}function yc(t){Yo.current===t&&(zt(Zr),zt(Yo))}var Gt=Oi(0);function qa(t){for(var s=t;s!==null;){if(s.tag===13){var d=s.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var vc=[];function wc(){for(var t=0;t<vc.length;t++)vc[t]._workInProgressVersionPrimary=null;vc.length=0}var $a=P.ReactCurrentDispatcher,bc=P.ReactCurrentBatchConfig,ys=0,Xt=null,mn=null,wn=null,Ka=!1,qo=!1,$o=0,Hf=0;function Ln(){throw Error(a(321))}function Cc(t,s){if(s===null)return!1;for(var d=0;d<s.length&&d<t.length;d++)if(!ae(t[d],s[d]))return!1;return!0}function Sc(t,s,d,p,b,E){if(ys=E,Xt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$a.current=t===null||t.memoizedState===null?Zf:qf,t=d(p,b),qo){E=0;do{if(qo=!1,$o=0,25<=E)throw Error(a(301));E+=1,wn=mn=null,s.updateQueue=null,$a.current=$f,t=d(p,b)}while(qo)}if($a.current=el,s=mn!==null&&mn.next!==null,ys=0,wn=mn=Xt=null,Ka=!1,s)throw Error(a(300));return t}function Ec(){var t=$o!==0;return $o=0,t}function qr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?Xt.memoizedState=wn=t:wn=wn.next=t,wn}function Ar(){if(mn===null){var t=Xt.alternate;t=t!==null?t.memoizedState:null}else t=mn.next;var s=wn===null?Xt.memoizedState:wn.next;if(s!==null)wn=s,mn=t;else{if(t===null)throw Error(a(310));mn=t,t={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},wn===null?Xt.memoizedState=wn=t:wn=wn.next=t}return wn}function Ko(t,s){return typeof s=="function"?s(t):s}function Ac(t){var s=Ar(),d=s.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=t;var p=mn,b=p.baseQueue,E=d.pending;if(E!==null){if(b!==null){var M=b.next;b.next=E.next,E.next=M}p.baseQueue=b=E,d.pending=null}if(b!==null){E=b.next,p=p.baseState;var K=M=null,ne=null,ye=E;do{var je=ye.lane;if((ys&je)===je)ne!==null&&(ne=ne.next={lane:0,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),p=ye.hasEagerState?ye.eagerState:t(p,ye.action);else{var Ne={lane:je,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null};ne===null?(K=ne=Ne,M=p):ne=ne.next=Ne,Xt.lanes|=je,vs|=je}ye=ye.next}while(ye!==null&&ye!==E);ne===null?M=p:ne.next=K,ae(p,s.memoizedState)||(tr=!0),s.memoizedState=p,s.baseState=M,s.baseQueue=ne,d.lastRenderedState=p}if(t=d.interleaved,t!==null){b=t;do E=b.lane,Xt.lanes|=E,vs|=E,b=b.next;while(b!==t)}else b===null&&(d.lanes=0);return[s.memoizedState,d.dispatch]}function Ic(t){var s=Ar(),d=s.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=t;var p=d.dispatch,b=d.pending,E=s.memoizedState;if(b!==null){d.pending=null;var M=b=b.next;do E=t(E,M.action),M=M.next;while(M!==b);ae(E,s.memoizedState)||(tr=!0),s.memoizedState=E,s.baseQueue===null&&(s.baseState=E),d.lastRenderedState=E}return[E,p]}function bu(){}function Cu(t,s){var d=Xt,p=Ar(),b=s(),E=!ae(p.memoizedState,b);if(E&&(p.memoizedState=b,tr=!0),p=p.queue,jc(Au.bind(null,d,p,t),[t]),p.getSnapshot!==s||E||wn!==null&&wn.memoizedState.tag&1){if(d.flags|=2048,Qo(9,Eu.bind(null,d,p,b,s),void 0,null),bn===null)throw Error(a(349));(ys&30)!==0||Su(d,s,b)}return b}function Su(t,s,d){t.flags|=16384,t={getSnapshot:s,value:d},s=Xt.updateQueue,s===null?(s={lastEffect:null,stores:null},Xt.updateQueue=s,s.stores=[t]):(d=s.stores,d===null?s.stores=[t]:d.push(t))}function Eu(t,s,d,p){s.value=d,s.getSnapshot=p,Iu(s)&&ju(t)}function Au(t,s,d){return d(function(){Iu(s)&&ju(t)})}function Iu(t){var s=t.getSnapshot;t=t.value;try{var d=s();return!ae(t,d)}catch{return!0}}function ju(t){var s=li(t,1);s!==null&&Fr(s,t,1,-1)}function ku(t){var s=qr();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:t},s.queue=t,t=t.dispatch=Yf.bind(null,Xt,t),[s.memoizedState,t]}function Qo(t,s,d,p){return t={tag:t,create:s,destroy:d,deps:p,next:null},s=Xt.updateQueue,s===null?(s={lastEffect:null,stores:null},Xt.updateQueue=s,s.lastEffect=t.next=t):(d=s.lastEffect,d===null?s.lastEffect=t.next=t:(p=d.next,d.next=t,t.next=p,s.lastEffect=t)),t}function Nu(){return Ar().memoizedState}function Qa(t,s,d,p){var b=qr();Xt.flags|=t,b.memoizedState=Qo(1|s,d,void 0,p===void 0?null:p)}function Ja(t,s,d,p){var b=Ar();p=p===void 0?null:p;var E=void 0;if(mn!==null){var M=mn.memoizedState;if(E=M.destroy,p!==null&&Cc(p,M.deps)){b.memoizedState=Qo(s,d,E,p);return}}Xt.flags|=t,b.memoizedState=Qo(1|s,d,E,p)}function Tu(t,s){return Qa(8390656,8,t,s)}function jc(t,s){return Ja(2048,8,t,s)}function _u(t,s){return Ja(4,2,t,s)}function Ru(t,s){return Ja(4,4,t,s)}function Ou(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Du(t,s,d){return d=d!=null?d.concat([t]):null,Ja(4,4,Ou.bind(null,s,t),d)}function kc(){}function Pu(t,s){var d=Ar();s=s===void 0?null:s;var p=d.memoizedState;return p!==null&&s!==null&&Cc(s,p[1])?p[0]:(d.memoizedState=[t,s],t)}function Mu(t,s){var d=Ar();s=s===void 0?null:s;var p=d.memoizedState;return p!==null&&s!==null&&Cc(s,p[1])?p[0]:(t=t(),d.memoizedState=[t,s],t)}function Bu(t,s,d){return(ys&21)===0?(t.baseState&&(t.baseState=!1,tr=!0),t.memoizedState=d):(ae(d,s)||(d=hn(),Xt.lanes|=d,vs|=d,t.baseState=!0),s)}function Gf(t,s){var d=ct;ct=d!==0&&4>d?d:4,t(!0);var p=bc.transition;bc.transition={};try{t(!1),s()}finally{ct=d,bc.transition=p}}function Lu(){return Ar().memoizedState}function Xf(t,s,d){var p=Wi(t);if(d={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null},zu(t))Fu(s,d);else if(d=mu(t,s,d,p),d!==null){var b=Xn();Fr(d,t,p,b),Wu(d,s,p)}}function Yf(t,s,d){var p=Wi(t),b={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null};if(zu(t))Fu(s,b);else{var E=t.alternate;if(t.lanes===0&&(E===null||E.lanes===0)&&(E=s.lastRenderedReducer,E!==null))try{var M=s.lastRenderedState,K=E(M,d);if(b.hasEagerState=!0,b.eagerState=K,ae(K,M)){var ne=s.interleaved;ne===null?(b.next=b,gc(s)):(b.next=ne.next,ne.next=b),s.interleaved=b;return}}catch{}d=mu(t,s,b,p),d!==null&&(b=Xn(),Fr(d,t,p,b),Wu(d,s,p))}}function zu(t){var s=t.alternate;return t===Xt||s!==null&&s===Xt}function Fu(t,s){qo=Ka=!0;var d=t.pending;d===null?s.next=s:(s.next=d.next,d.next=s),t.pending=s}function Wu(t,s,d){if((d&4194240)!==0){var p=s.lanes;p&=t.pendingLanes,d|=p,s.lanes=d,Zt(t,d)}}var el={readContext:Er,useCallback:Ln,useContext:Ln,useEffect:Ln,useImperativeHandle:Ln,useInsertionEffect:Ln,useLayoutEffect:Ln,useMemo:Ln,useReducer:Ln,useRef:Ln,useState:Ln,useDebugValue:Ln,useDeferredValue:Ln,useTransition:Ln,useMutableSource:Ln,useSyncExternalStore:Ln,useId:Ln,unstable_isNewReconciler:!1},Zf={readContext:Er,useCallback:function(t,s){return qr().memoizedState=[t,s===void 0?null:s],t},useContext:Er,useEffect:Tu,useImperativeHandle:function(t,s,d){return d=d!=null?d.concat([t]):null,Qa(4194308,4,Ou.bind(null,s,t),d)},useLayoutEffect:function(t,s){return Qa(4194308,4,t,s)},useInsertionEffect:function(t,s){return Qa(4,2,t,s)},useMemo:function(t,s){var d=qr();return s=s===void 0?null:s,t=t(),d.memoizedState=[t,s],t},useReducer:function(t,s,d){var p=qr();return s=d!==void 0?d(s):s,p.memoizedState=p.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},p.queue=t,t=t.dispatch=Xf.bind(null,Xt,t),[p.memoizedState,t]},useRef:function(t){var s=qr();return t={current:t},s.memoizedState=t},useState:ku,useDebugValue:kc,useDeferredValue:function(t){return qr().memoizedState=t},useTransition:function(){var t=ku(!1),s=t[0];return t=Gf.bind(null,t[1]),qr().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,d){var p=Xt,b=qr();if(Vt){if(d===void 0)throw Error(a(407));d=d()}else{if(d=s(),bn===null)throw Error(a(349));(ys&30)!==0||Su(p,s,d)}b.memoizedState=d;var E={value:d,getSnapshot:s};return b.queue=E,Tu(Au.bind(null,p,E,t),[t]),p.flags|=2048,Qo(9,Eu.bind(null,p,E,d,s),void 0,null),d},useId:function(){var t=qr(),s=bn.identifierPrefix;if(Vt){var d=ai,p=oi;d=(p&~(1<<32-Hn(p)-1)).toString(32)+d,s=":"+s+"R"+d,d=$o++,0<d&&(s+="H"+d.toString(32)),s+=":"}else d=Hf++,s=":"+s+"r"+d.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},qf={readContext:Er,useCallback:Pu,useContext:Er,useEffect:jc,useImperativeHandle:Du,useInsertionEffect:_u,useLayoutEffect:Ru,useMemo:Mu,useReducer:Ac,useRef:Nu,useState:function(){return Ac(Ko)},useDebugValue:kc,useDeferredValue:function(t){var s=Ar();return Bu(s,mn.memoizedState,t)},useTransition:function(){var t=Ac(Ko)[0],s=Ar().memoizedState;return[t,s]},useMutableSource:bu,useSyncExternalStore:Cu,useId:Lu,unstable_isNewReconciler:!1},$f={readContext:Er,useCallback:Pu,useContext:Er,useEffect:jc,useImperativeHandle:Du,useInsertionEffect:_u,useLayoutEffect:Ru,useMemo:Mu,useReducer:Ic,useRef:Nu,useState:function(){return Ic(Ko)},useDebugValue:kc,useDeferredValue:function(t){var s=Ar();return mn===null?s.memoizedState=t:Bu(s,mn.memoizedState,t)},useTransition:function(){var t=Ic(Ko)[0],s=Ar().memoizedState;return[t,s]},useMutableSource:bu,useSyncExternalStore:Cu,useId:Lu,unstable_isNewReconciler:!1};function Br(t,s){if(t&&t.defaultProps){s=$({},s),t=t.defaultProps;for(var d in t)s[d]===void 0&&(s[d]=t[d]);return s}return s}function Nc(t,s,d,p){s=t.memoizedState,d=d(p,s),d=d==null?s:$({},s,d),t.memoizedState=d,t.lanes===0&&(t.updateQueue.baseState=d)}var tl={isMounted:function(t){return(t=t._reactInternals)?Qn(t)===t:!1},enqueueSetState:function(t,s,d){t=t._reactInternals;var p=Xn(),b=Wi(t),E=ci(p,b);E.payload=s,d!=null&&(E.callback=d),s=Bi(t,E,b),s!==null&&(Fr(s,t,b,p),Ya(s,t,b))},enqueueReplaceState:function(t,s,d){t=t._reactInternals;var p=Xn(),b=Wi(t),E=ci(p,b);E.tag=1,E.payload=s,d!=null&&(E.callback=d),s=Bi(t,E,b),s!==null&&(Fr(s,t,b,p),Ya(s,t,b))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var d=Xn(),p=Wi(t),b=ci(d,p);b.tag=2,s!=null&&(b.callback=s),s=Bi(t,b,p),s!==null&&(Fr(s,t,p,d),Ya(s,t,p))}};function Uu(t,s,d,p,b,E,M){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(p,E,M):s.prototype&&s.prototype.isPureReactComponent?!me(d,p)||!me(b,E):!0}function Vu(t,s,d){var p=!1,b=Di,E=s.contextType;return typeof E=="object"&&E!==null?E=Er(E):(b=er(s)?fs:Bn.current,p=s.contextTypes,E=(p=p!=null)?Gs(t,b):Di),s=new s(d,E),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=tl,t.stateNode=s,s._reactInternals=t,p&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=b,t.__reactInternalMemoizedMaskedChildContext=E),s}function Hu(t,s,d,p){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(d,p),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(d,p),s.state!==t&&tl.enqueueReplaceState(s,s.state,null)}function Tc(t,s,d,p){var b=t.stateNode;b.props=d,b.state=t.memoizedState,b.refs={},mc(t);var E=s.contextType;typeof E=="object"&&E!==null?b.context=Er(E):(E=er(s)?fs:Bn.current,b.context=Gs(t,E)),b.state=t.memoizedState,E=s.getDerivedStateFromProps,typeof E=="function"&&(Nc(t,s,E,d),b.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(s=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),s!==b.state&&tl.enqueueReplaceState(b,b.state,null),Za(t,d,b,p),b.state=t.memoizedState),typeof b.componentDidMount=="function"&&(t.flags|=4194308)}function Js(t,s){try{var d="",p=s;do d+=ke(p),p=p.return;while(p);var b=d}catch(E){b=`
Error generating stack: `+E.message+`
`+E.stack}return{value:t,source:s,stack:b,digest:null}}function _c(t,s,d){return{value:t,source:null,stack:d??null,digest:s??null}}function Rc(t,s){try{console.error(s.value)}catch(d){setTimeout(function(){throw d})}}var Kf=typeof WeakMap=="function"?WeakMap:Map;function Gu(t,s,d){d=ci(-1,d),d.tag=3,d.payload={element:null};var p=s.value;return d.callback=function(){ll||(ll=!0,Yc=p),Rc(t,s)},d}function Xu(t,s,d){d=ci(-1,d),d.tag=3;var p=t.type.getDerivedStateFromError;if(typeof p=="function"){var b=s.value;d.payload=function(){return p(b)},d.callback=function(){Rc(t,s)}}var E=t.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(d.callback=function(){Rc(t,s),typeof p!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var M=s.stack;this.componentDidCatch(s.value,{componentStack:M!==null?M:""})}),d}function Yu(t,s,d){var p=t.pingCache;if(p===null){p=t.pingCache=new Kf;var b=new Set;p.set(s,b)}else b=p.get(s),b===void 0&&(b=new Set,p.set(s,b));b.has(d)||(b.add(d),t=u1.bind(null,t,s,d),s.then(t,t))}function Zu(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function qu(t,s,d,p,b){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(s=ci(-1,1),s.tag=2,Bi(d,s,1))),d.lanes|=1),t):(t.flags|=65536,t.lanes=b,t)}var Qf=P.ReactCurrentOwner,tr=!1;function Gn(t,s,d,p){s.child=t===null?gu(s,null,d,p):qs(s,t.child,d,p)}function $u(t,s,d,p,b){d=d.render;var E=s.ref;return Ks(s,b),p=Sc(t,s,d,p,E,b),d=Ec(),t!==null&&!tr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~b,di(t,s,b)):(Vt&&d&&oc(s),s.flags|=1,Gn(t,s,p,b),s.child)}function Ku(t,s,d,p,b){if(t===null){var E=d.type;return typeof E=="function"&&!ed(E)&&E.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(s.tag=15,s.type=E,Qu(t,s,E,p,b)):(t=pl(d.type,null,p,s,s.mode,b),t.ref=s.ref,t.return=s,s.child=t)}if(E=t.child,(t.lanes&b)===0){var M=E.memoizedProps;if(d=d.compare,d=d!==null?d:me,d(M,p)&&t.ref===s.ref)return di(t,s,b)}return s.flags|=1,t=Vi(E,p),t.ref=s.ref,t.return=s,s.child=t}function Qu(t,s,d,p,b){if(t!==null){var E=t.memoizedProps;if(me(E,p)&&t.ref===s.ref)if(tr=!1,s.pendingProps=p=E,(t.lanes&b)!==0)(t.flags&131072)!==0&&(tr=!0);else return s.lanes=t.lanes,di(t,s,b)}return Oc(t,s,d,p,b)}function Ju(t,s,d){var p=s.pendingProps,b=p.children,E=t!==null?t.memoizedState:null;if(p.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(to,gr),gr|=d;else{if((d&1073741824)===0)return t=E!==null?E.baseLanes|d:d,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Pt(to,gr),gr|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=E!==null?E.baseLanes:d,Pt(to,gr),gr|=p}else E!==null?(p=E.baseLanes|d,s.memoizedState=null):p=d,Pt(to,gr),gr|=p;return Gn(t,s,b,d),s.child}function eh(t,s){var d=s.ref;(t===null&&d!==null||t!==null&&t.ref!==d)&&(s.flags|=512,s.flags|=2097152)}function Oc(t,s,d,p,b){var E=er(d)?fs:Bn.current;return E=Gs(s,E),Ks(s,b),d=Sc(t,s,d,p,E,b),p=Ec(),t!==null&&!tr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~b,di(t,s,b)):(Vt&&p&&oc(s),s.flags|=1,Gn(t,s,d,b),s.child)}function th(t,s,d,p,b){if(er(d)){var E=!0;za(s)}else E=!1;if(Ks(s,b),s.stateNode===null)rl(t,s),Vu(s,d,p),Tc(s,d,p,b),p=!0;else if(t===null){var M=s.stateNode,K=s.memoizedProps;M.props=K;var ne=M.context,ye=d.contextType;typeof ye=="object"&&ye!==null?ye=Er(ye):(ye=er(d)?fs:Bn.current,ye=Gs(s,ye));var je=d.getDerivedStateFromProps,Ne=typeof je=="function"||typeof M.getSnapshotBeforeUpdate=="function";Ne||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(K!==p||ne!==ye)&&Hu(s,M,p,ye),Mi=!1;var Ae=s.memoizedState;M.state=Ae,Za(s,p,M,b),ne=s.memoizedState,K!==p||Ae!==ne||Jn.current||Mi?(typeof je=="function"&&(Nc(s,d,je,p),ne=s.memoizedState),(K=Mi||Uu(s,d,K,p,Ae,ne,ye))?(Ne||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(s.flags|=4194308)):(typeof M.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=p,s.memoizedState=ne),M.props=p,M.state=ne,M.context=ye,p=K):(typeof M.componentDidMount=="function"&&(s.flags|=4194308),p=!1)}else{M=s.stateNode,xu(t,s),K=s.memoizedProps,ye=s.type===s.elementType?K:Br(s.type,K),M.props=ye,Ne=s.pendingProps,Ae=M.context,ne=d.contextType,typeof ne=="object"&&ne!==null?ne=Er(ne):(ne=er(d)?fs:Bn.current,ne=Gs(s,ne));var ze=d.getDerivedStateFromProps;(je=typeof ze=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(K!==Ne||Ae!==ne)&&Hu(s,M,p,ne),Mi=!1,Ae=s.memoizedState,M.state=Ae,Za(s,p,M,b);var Ve=s.memoizedState;K!==Ne||Ae!==Ve||Jn.current||Mi?(typeof ze=="function"&&(Nc(s,d,ze,p),Ve=s.memoizedState),(ye=Mi||Uu(s,d,ye,p,Ae,Ve,ne)||!1)?(je||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(p,Ve,ne),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(p,Ve,ne)),typeof M.componentDidUpdate=="function"&&(s.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof M.componentDidUpdate!="function"||K===t.memoizedProps&&Ae===t.memoizedState||(s.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||K===t.memoizedProps&&Ae===t.memoizedState||(s.flags|=1024),s.memoizedProps=p,s.memoizedState=Ve),M.props=p,M.state=Ve,M.context=ne,p=ye):(typeof M.componentDidUpdate!="function"||K===t.memoizedProps&&Ae===t.memoizedState||(s.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||K===t.memoizedProps&&Ae===t.memoizedState||(s.flags|=1024),p=!1)}return Dc(t,s,d,p,E,b)}function Dc(t,s,d,p,b,E){eh(t,s);var M=(s.flags&128)!==0;if(!p&&!M)return b&&ou(s,d,!1),di(t,s,E);p=s.stateNode,Qf.current=s;var K=M&&typeof d.getDerivedStateFromError!="function"?null:p.render();return s.flags|=1,t!==null&&M?(s.child=qs(s,t.child,null,E),s.child=qs(s,null,K,E)):Gn(t,s,K,E),s.memoizedState=p.state,b&&ou(s,d,!0),s.child}function nh(t){var s=t.stateNode;s.pendingContext?iu(t,s.pendingContext,s.pendingContext!==s.context):s.context&&iu(t,s.context,!1),xc(t,s.containerInfo)}function rh(t,s,d,p,b){return Zs(),dc(b),s.flags|=256,Gn(t,s,d,p),s.child}var Pc={dehydrated:null,treeContext:null,retryLane:0};function Mc(t){return{baseLanes:t,cachePool:null,transitions:null}}function ih(t,s,d){var p=s.pendingProps,b=Gt.current,E=!1,M=(s.flags&128)!==0,K;if((K=M)||(K=t!==null&&t.memoizedState===null?!1:(b&2)!==0),K?(E=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(b|=1),Pt(Gt,b&1),t===null)return cc(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(M=p.children,t=p.fallback,E?(p=s.mode,E=s.child,M={mode:"hidden",children:M},(p&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=M):E=gl(M,p,0,null),t=Ss(t,p,d,null),E.return=s,t.return=s,E.sibling=t,s.child=E,s.child.memoizedState=Mc(d),s.memoizedState=Pc,t):Bc(s,M));if(b=t.memoizedState,b!==null&&(K=b.dehydrated,K!==null))return Jf(t,s,M,p,K,b,d);if(E){E=p.fallback,M=s.mode,b=t.child,K=b.sibling;var ne={mode:"hidden",children:p.children};return(M&1)===0&&s.child!==b?(p=s.child,p.childLanes=0,p.pendingProps=ne,s.deletions=null):(p=Vi(b,ne),p.subtreeFlags=b.subtreeFlags&14680064),K!==null?E=Vi(K,E):(E=Ss(E,M,d,null),E.flags|=2),E.return=s,p.return=s,p.sibling=E,s.child=p,p=E,E=s.child,M=t.child.memoizedState,M=M===null?Mc(d):{baseLanes:M.baseLanes|d,cachePool:null,transitions:M.transitions},E.memoizedState=M,E.childLanes=t.childLanes&~d,s.memoizedState=Pc,p}return E=t.child,t=E.sibling,p=Vi(E,{mode:"visible",children:p.children}),(s.mode&1)===0&&(p.lanes=d),p.return=s,p.sibling=null,t!==null&&(d=s.deletions,d===null?(s.deletions=[t],s.flags|=16):d.push(t)),s.child=p,s.memoizedState=null,p}function Bc(t,s){return s=gl({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function nl(t,s,d,p){return p!==null&&dc(p),qs(s,t.child,null,d),t=Bc(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Jf(t,s,d,p,b,E,M){if(d)return s.flags&256?(s.flags&=-257,p=_c(Error(a(422))),nl(t,s,M,p)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(E=p.fallback,b=s.mode,p=gl({mode:"visible",children:p.children},b,0,null),E=Ss(E,b,M,null),E.flags|=2,p.return=s,E.return=s,p.sibling=E,s.child=p,(s.mode&1)!==0&&qs(s,t.child,null,M),s.child.memoizedState=Mc(M),s.memoizedState=Pc,E);if((s.mode&1)===0)return nl(t,s,M,null);if(b.data==="$!"){if(p=b.nextSibling&&b.nextSibling.dataset,p)var K=p.dgst;return p=K,E=Error(a(419)),p=_c(E,p,void 0),nl(t,s,M,p)}if(K=(M&t.childLanes)!==0,tr||K){if(p=bn,p!==null){switch(M&-M){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(p.suspendedLanes|M))!==0?0:b,b!==0&&b!==E.retryLane&&(E.retryLane=b,li(t,b),Fr(p,t,b,-1))}return Jc(),p=_c(Error(a(421))),nl(t,s,M,p)}return b.data==="$?"?(s.flags|=128,s.child=t.child,s=h1.bind(null,t),b._reactRetry=s,null):(t=E.treeContext,pr=Ri(b.nextSibling),fr=s,Vt=!0,Mr=null,t!==null&&(Cr[Sr++]=oi,Cr[Sr++]=ai,Cr[Sr++]=ps,oi=t.id,ai=t.overflow,ps=s),s=Bc(s,p.children),s.flags|=4096,s)}function sh(t,s,d){t.lanes|=s;var p=t.alternate;p!==null&&(p.lanes|=s),pc(t.return,s,d)}function Lc(t,s,d,p,b){var E=t.memoizedState;E===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:b}:(E.isBackwards=s,E.rendering=null,E.renderingStartTime=0,E.last=p,E.tail=d,E.tailMode=b)}function oh(t,s,d){var p=s.pendingProps,b=p.revealOrder,E=p.tail;if(Gn(t,s,p.children,d),p=Gt.current,(p&2)!==0)p=p&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sh(t,d,s);else if(t.tag===19)sh(t,d,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}p&=1}if(Pt(Gt,p),(s.mode&1)===0)s.memoizedState=null;else switch(b){case"forwards":for(d=s.child,b=null;d!==null;)t=d.alternate,t!==null&&qa(t)===null&&(b=d),d=d.sibling;d=b,d===null?(b=s.child,s.child=null):(b=d.sibling,d.sibling=null),Lc(s,!1,b,d,E);break;case"backwards":for(d=null,b=s.child,s.child=null;b!==null;){if(t=b.alternate,t!==null&&qa(t)===null){s.child=b;break}t=b.sibling,b.sibling=d,d=b,b=t}Lc(s,!0,d,null,E);break;case"together":Lc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function rl(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function di(t,s,d){if(t!==null&&(s.dependencies=t.dependencies),vs|=s.lanes,(d&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,d=Vi(t,t.pendingProps),s.child=d,d.return=s;t.sibling!==null;)t=t.sibling,d=d.sibling=Vi(t,t.pendingProps),d.return=s;d.sibling=null}return s.child}function e1(t,s,d){switch(s.tag){case 3:nh(s),Zs();break;case 5:wu(s);break;case 1:er(s.type)&&za(s);break;case 4:xc(s,s.stateNode.containerInfo);break;case 10:var p=s.type._context,b=s.memoizedProps.value;Pt(Ga,p._currentValue),p._currentValue=b;break;case 13:if(p=s.memoizedState,p!==null)return p.dehydrated!==null?(Pt(Gt,Gt.current&1),s.flags|=128,null):(d&s.child.childLanes)!==0?ih(t,s,d):(Pt(Gt,Gt.current&1),t=di(t,s,d),t!==null?t.sibling:null);Pt(Gt,Gt.current&1);break;case 19:if(p=(d&s.childLanes)!==0,(t.flags&128)!==0){if(p)return oh(t,s,d);s.flags|=128}if(b=s.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Pt(Gt,Gt.current),p)break;return null;case 22:case 23:return s.lanes=0,Ju(t,s,d)}return di(t,s,d)}var ah,zc,lh,ch;ah=function(t,s){for(var d=s.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break;for(;d.sibling===null;){if(d.return===null||d.return===s)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},zc=function(){},lh=function(t,s,d,p){var b=t.memoizedProps;if(b!==p){t=s.stateNode,xs(Zr.current);var E=null;switch(d){case"input":b=Qe(t,b),p=Qe(t,p),E=[];break;case"select":b=$({},b,{value:void 0}),p=$({},p,{value:void 0}),E=[];break;case"textarea":b=Ur(t,b),p=Ur(t,p),E=[];break;default:typeof b.onClick!="function"&&typeof p.onClick=="function"&&(t.onclick=Ma)}bt(d,p);var M;d=null;for(ye in b)if(!p.hasOwnProperty(ye)&&b.hasOwnProperty(ye)&&b[ye]!=null)if(ye==="style"){var K=b[ye];for(M in K)K.hasOwnProperty(M)&&(d||(d={}),d[M]="")}else ye!=="dangerouslySetInnerHTML"&&ye!=="children"&&ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&ye!=="autoFocus"&&(y.hasOwnProperty(ye)?E||(E=[]):(E=E||[]).push(ye,null));for(ye in p){var ne=p[ye];if(K=b?.[ye],p.hasOwnProperty(ye)&&ne!==K&&(ne!=null||K!=null))if(ye==="style")if(K){for(M in K)!K.hasOwnProperty(M)||ne&&ne.hasOwnProperty(M)||(d||(d={}),d[M]="");for(M in ne)ne.hasOwnProperty(M)&&K[M]!==ne[M]&&(d||(d={}),d[M]=ne[M])}else d||(E||(E=[]),E.push(ye,d)),d=ne;else ye==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,K=K?K.__html:void 0,ne!=null&&K!==ne&&(E=E||[]).push(ye,ne)):ye==="children"?typeof ne!="string"&&typeof ne!="number"||(E=E||[]).push(ye,""+ne):ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&(y.hasOwnProperty(ye)?(ne!=null&&ye==="onScroll"&&Lt("scroll",t),E||K===ne||(E=[])):(E=E||[]).push(ye,ne))}d&&(E=E||[]).push("style",d);var ye=E;(s.updateQueue=ye)&&(s.flags|=4)}},ch=function(t,s,d,p){d!==p&&(s.flags|=4)};function Jo(t,s){if(!Vt)switch(t.tailMode){case"hidden":s=t.tail;for(var d=null;s!==null;)s.alternate!==null&&(d=s),s=s.sibling;d===null?t.tail=null:d.sibling=null;break;case"collapsed":d=t.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:p.sibling=null}}function zn(t){var s=t.alternate!==null&&t.alternate.child===t.child,d=0,p=0;if(s)for(var b=t.child;b!==null;)d|=b.lanes|b.childLanes,p|=b.subtreeFlags&14680064,p|=b.flags&14680064,b.return=t,b=b.sibling;else for(b=t.child;b!==null;)d|=b.lanes|b.childLanes,p|=b.subtreeFlags,p|=b.flags,b.return=t,b=b.sibling;return t.subtreeFlags|=p,t.childLanes=d,s}function t1(t,s,d){var p=s.pendingProps;switch(ac(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(s),null;case 1:return er(s.type)&&La(),zn(s),null;case 3:return p=s.stateNode,Qs(),zt(Jn),zt(Bn),wc(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(t===null||t.child===null)&&(Va(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Mr!==null&&($c(Mr),Mr=null))),zc(t,s),zn(s),null;case 5:yc(s);var b=xs(Zo.current);if(d=s.type,t!==null&&s.stateNode!=null)lh(t,s,d,p,b),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!p){if(s.stateNode===null)throw Error(a(166));return zn(s),null}if(t=xs(Zr.current),Va(s)){p=s.stateNode,d=s.type;var E=s.memoizedProps;switch(p[Yr]=s,p[Vo]=E,t=(s.mode&1)!==0,d){case"dialog":Lt("cancel",p),Lt("close",p);break;case"iframe":case"object":case"embed":Lt("load",p);break;case"video":case"audio":for(b=0;b<Fo.length;b++)Lt(Fo[b],p);break;case"source":Lt("error",p);break;case"img":case"image":case"link":Lt("error",p),Lt("load",p);break;case"details":Lt("toggle",p);break;case"input":St(p,E),Lt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!E.multiple},Lt("invalid",p);break;case"textarea":Qi(p,E),Lt("invalid",p)}bt(d,E),b=null;for(var M in E)if(E.hasOwnProperty(M)){var K=E[M];M==="children"?typeof K=="string"?p.textContent!==K&&(E.suppressHydrationWarning!==!0&&Pa(p.textContent,K,t),b=["children",K]):typeof K=="number"&&p.textContent!==""+K&&(E.suppressHydrationWarning!==!0&&Pa(p.textContent,K,t),b=["children",""+K]):y.hasOwnProperty(M)&&K!=null&&M==="onScroll"&&Lt("scroll",p)}switch(d){case"input":Ge(p),dt(p,E,!0);break;case"textarea":Ge(p),yi(p);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(p.onclick=Ma)}p=b,s.updateQueue=p,p!==null&&(s.flags|=4)}else{M=b.nodeType===9?b:b.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=An(d)),t==="http://www.w3.org/1999/xhtml"?d==="script"?(t=M.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof p.is=="string"?t=M.createElement(d,{is:p.is}):(t=M.createElement(d),d==="select"&&(M=t,p.multiple?M.multiple=!0:p.size&&(M.size=p.size))):t=M.createElementNS(t,d),t[Yr]=s,t[Vo]=p,ah(t,s,!1,!1),s.stateNode=t;e:{switch(M=_t(d,p),d){case"dialog":Lt("cancel",t),Lt("close",t),b=p;break;case"iframe":case"object":case"embed":Lt("load",t),b=p;break;case"video":case"audio":for(b=0;b<Fo.length;b++)Lt(Fo[b],t);b=p;break;case"source":Lt("error",t),b=p;break;case"img":case"image":case"link":Lt("error",t),Lt("load",t),b=p;break;case"details":Lt("toggle",t),b=p;break;case"input":St(t,p),b=Qe(t,p),Lt("invalid",t);break;case"option":b=p;break;case"select":t._wrapperState={wasMultiple:!!p.multiple},b=$({},p,{value:void 0}),Lt("invalid",t);break;case"textarea":Qi(t,p),b=Ur(t,p),Lt("invalid",t);break;default:b=p}bt(d,b),K=b;for(E in K)if(K.hasOwnProperty(E)){var ne=K[E];E==="style"?Pe(t,ne):E==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,ne!=null&&en(t,ne)):E==="children"?typeof ne=="string"?(d!=="textarea"||ne!=="")&&_r(t,ne):typeof ne=="number"&&_r(t,""+ne):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(y.hasOwnProperty(E)?ne!=null&&E==="onScroll"&&Lt("scroll",t):ne!=null&&N(t,E,ne,M))}switch(d){case"input":Ge(t),dt(t,p,!1);break;case"textarea":Ge(t),yi(t);break;case"option":p.value!=null&&t.setAttribute("value",""+fe(p.value));break;case"select":t.multiple=!!p.multiple,E=p.value,E!=null?Le(t,!!p.multiple,E,!1):p.defaultValue!=null&&Le(t,!!p.multiple,p.defaultValue,!0);break;default:typeof b.onClick=="function"&&(t.onclick=Ma)}switch(d){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return zn(s),null;case 6:if(t&&s.stateNode!=null)ch(t,s,t.memoizedProps,p);else{if(typeof p!="string"&&s.stateNode===null)throw Error(a(166));if(d=xs(Zo.current),xs(Zr.current),Va(s)){if(p=s.stateNode,d=s.memoizedProps,p[Yr]=s,(E=p.nodeValue!==d)&&(t=fr,t!==null))switch(t.tag){case 3:Pa(p.nodeValue,d,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pa(p.nodeValue,d,(t.mode&1)!==0)}E&&(s.flags|=4)}else p=(d.nodeType===9?d:d.ownerDocument).createTextNode(p),p[Yr]=s,s.stateNode=p}return zn(s),null;case 13:if(zt(Gt),p=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Vt&&pr!==null&&(s.mode&1)!==0&&(s.flags&128)===0)hu(),Zs(),s.flags|=98560,E=!1;else if(E=Va(s),p!==null&&p.dehydrated!==null){if(t===null){if(!E)throw Error(a(318));if(E=s.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(a(317));E[Yr]=s}else Zs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;zn(s),E=!1}else Mr!==null&&($c(Mr),Mr=null),E=!0;if(!E)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=d,s):(p=p!==null,p!==(t!==null&&t.memoizedState!==null)&&p&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(Gt.current&1)!==0?xn===0&&(xn=3):Jc())),s.updateQueue!==null&&(s.flags|=4),zn(s),null);case 4:return Qs(),zc(t,s),t===null&&Wo(s.stateNode.containerInfo),zn(s),null;case 10:return fc(s.type._context),zn(s),null;case 17:return er(s.type)&&La(),zn(s),null;case 19:if(zt(Gt),E=s.memoizedState,E===null)return zn(s),null;if(p=(s.flags&128)!==0,M=E.rendering,M===null)if(p)Jo(E,!1);else{if(xn!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(M=qa(t),M!==null){for(s.flags|=128,Jo(E,!1),p=M.updateQueue,p!==null&&(s.updateQueue=p,s.flags|=4),s.subtreeFlags=0,p=d,d=s.child;d!==null;)E=d,t=p,E.flags&=14680066,M=E.alternate,M===null?(E.childLanes=0,E.lanes=t,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=M.childLanes,E.lanes=M.lanes,E.child=M.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=M.memoizedProps,E.memoizedState=M.memoizedState,E.updateQueue=M.updateQueue,E.type=M.type,t=M.dependencies,E.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),d=d.sibling;return Pt(Gt,Gt.current&1|2),s.child}t=t.sibling}E.tail!==null&&Et()>no&&(s.flags|=128,p=!0,Jo(E,!1),s.lanes=4194304)}else{if(!p)if(t=qa(M),t!==null){if(s.flags|=128,p=!0,d=t.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),Jo(E,!0),E.tail===null&&E.tailMode==="hidden"&&!M.alternate&&!Vt)return zn(s),null}else 2*Et()-E.renderingStartTime>no&&d!==1073741824&&(s.flags|=128,p=!0,Jo(E,!1),s.lanes=4194304);E.isBackwards?(M.sibling=s.child,s.child=M):(d=E.last,d!==null?d.sibling=M:s.child=M,E.last=M)}return E.tail!==null?(s=E.tail,E.rendering=s,E.tail=s.sibling,E.renderingStartTime=Et(),s.sibling=null,d=Gt.current,Pt(Gt,p?d&1|2:d&1),s):(zn(s),null);case 22:case 23:return Qc(),p=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==p&&(s.flags|=8192),p&&(s.mode&1)!==0?(gr&1073741824)!==0&&(zn(s),s.subtreeFlags&6&&(s.flags|=8192)):zn(s),null;case 24:return null;case 25:return null}throw Error(a(156,s.tag))}function n1(t,s){switch(ac(s),s.tag){case 1:return er(s.type)&&La(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Qs(),zt(Jn),zt(Bn),wc(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return yc(s),null;case 13:if(zt(Gt),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));Zs()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return zt(Gt),null;case 4:return Qs(),null;case 10:return fc(s.type._context),null;case 22:case 23:return Qc(),null;case 24:return null;default:return null}}var il=!1,Fn=!1,r1=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function eo(t,s){var d=t.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(p){$t(t,s,p)}else d.current=null}function Fc(t,s,d){try{d()}catch(p){$t(t,s,p)}}var dh=!1;function i1(t,s){if(Ql=Gr,t=ut(),it(t)){if("selectionStart"in t)var d={start:t.selectionStart,end:t.selectionEnd};else e:{d=(d=t.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var b=p.anchorOffset,E=p.focusNode;p=p.focusOffset;try{d.nodeType,E.nodeType}catch{d=null;break e}var M=0,K=-1,ne=-1,ye=0,je=0,Ne=t,Ae=null;t:for(;;){for(var ze;Ne!==d||b!==0&&Ne.nodeType!==3||(K=M+b),Ne!==E||p!==0&&Ne.nodeType!==3||(ne=M+p),Ne.nodeType===3&&(M+=Ne.nodeValue.length),(ze=Ne.firstChild)!==null;)Ae=Ne,Ne=ze;for(;;){if(Ne===t)break t;if(Ae===d&&++ye===b&&(K=M),Ae===E&&++je===p&&(ne=M),(ze=Ne.nextSibling)!==null)break;Ne=Ae,Ae=Ne.parentNode}Ne=ze}d=K===-1||ne===-1?null:{start:K,end:ne}}else d=null}d=d||{start:0,end:0}}else d=null;for(Jl={focusedElem:t,selectionRange:d},Gr=!1,Ue=s;Ue!==null;)if(s=Ue,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ue=t;else for(;Ue!==null;){s=Ue;try{var Ve=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ve!==null){var Xe=Ve.memoizedProps,on=Ve.memoizedState,he=s.stateNode,ie=he.getSnapshotBeforeUpdate(s.elementType===s.type?Xe:Br(s.type,Xe),on);he.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:var ge=s.stateNode.containerInfo;ge.nodeType===1?ge.textContent="":ge.nodeType===9&&ge.documentElement&&ge.removeChild(ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Re){$t(s,s.return,Re)}if(t=s.sibling,t!==null){t.return=s.return,Ue=t;break}Ue=s.return}return Ve=dh,dh=!1,Ve}function ea(t,s,d){var p=s.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var b=p=p.next;do{if((b.tag&t)===t){var E=b.destroy;b.destroy=void 0,E!==void 0&&Fc(s,d,E)}b=b.next}while(b!==p)}}function sl(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var d=s=s.next;do{if((d.tag&t)===t){var p=d.create;d.destroy=p()}d=d.next}while(d!==s)}}function Wc(t){var s=t.ref;if(s!==null){var d=t.stateNode;t.tag,t=d,typeof s=="function"?s(t):s.current=t}}function uh(t){var s=t.alternate;s!==null&&(t.alternate=null,uh(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[Yr],delete s[Vo],delete s[rc],delete s[Ff],delete s[Wf])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hh(t){return t.tag===5||t.tag===3||t.tag===4}function fh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Uc(t,s,d){var p=t.tag;if(p===5||p===6)t=t.stateNode,s?d.nodeType===8?d.parentNode.insertBefore(t,s):d.insertBefore(t,s):(d.nodeType===8?(s=d.parentNode,s.insertBefore(t,d)):(s=d,s.appendChild(t)),d=d._reactRootContainer,d!=null||s.onclick!==null||(s.onclick=Ma));else if(p!==4&&(t=t.child,t!==null))for(Uc(t,s,d),t=t.sibling;t!==null;)Uc(t,s,d),t=t.sibling}function Vc(t,s,d){var p=t.tag;if(p===5||p===6)t=t.stateNode,s?d.insertBefore(t,s):d.appendChild(t);else if(p!==4&&(t=t.child,t!==null))for(Vc(t,s,d),t=t.sibling;t!==null;)Vc(t,s,d),t=t.sibling}var Tn=null,Lr=!1;function Li(t,s,d){for(d=d.child;d!==null;)ph(t,s,d),d=d.sibling}function ph(t,s,d){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount(mt,d)}catch{}switch(d.tag){case 5:Fn||eo(d,s);case 6:var p=Tn,b=Lr;Tn=null,Li(t,s,d),Tn=p,Lr=b,Tn!==null&&(Lr?(t=Tn,d=d.stateNode,t.nodeType===8?t.parentNode.removeChild(d):t.removeChild(d)):Tn.removeChild(d.stateNode));break;case 18:Tn!==null&&(Lr?(t=Tn,d=d.stateNode,t.nodeType===8?nc(t.parentNode,d):t.nodeType===1&&nc(t,d),Or(t)):nc(Tn,d.stateNode));break;case 4:p=Tn,b=Lr,Tn=d.stateNode.containerInfo,Lr=!0,Li(t,s,d),Tn=p,Lr=b;break;case 0:case 11:case 14:case 15:if(!Fn&&(p=d.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){b=p=p.next;do{var E=b,M=E.destroy;E=E.tag,M!==void 0&&((E&2)!==0||(E&4)!==0)&&Fc(d,s,M),b=b.next}while(b!==p)}Li(t,s,d);break;case 1:if(!Fn&&(eo(d,s),p=d.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=d.memoizedProps,p.state=d.memoizedState,p.componentWillUnmount()}catch(K){$t(d,s,K)}Li(t,s,d);break;case 21:Li(t,s,d);break;case 22:d.mode&1?(Fn=(p=Fn)||d.memoizedState!==null,Li(t,s,d),Fn=p):Li(t,s,d);break;default:Li(t,s,d)}}function gh(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var d=t.stateNode;d===null&&(d=t.stateNode=new r1),s.forEach(function(p){var b=f1.bind(null,t,p);d.has(p)||(d.add(p),p.then(b,b))})}}function zr(t,s){var d=s.deletions;if(d!==null)for(var p=0;p<d.length;p++){var b=d[p];try{var E=t,M=s,K=M;e:for(;K!==null;){switch(K.tag){case 5:Tn=K.stateNode,Lr=!1;break e;case 3:Tn=K.stateNode.containerInfo,Lr=!0;break e;case 4:Tn=K.stateNode.containerInfo,Lr=!0;break e}K=K.return}if(Tn===null)throw Error(a(160));ph(E,M,b),Tn=null,Lr=!1;var ne=b.alternate;ne!==null&&(ne.return=null),b.return=null}catch(ye){$t(b,s,ye)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)mh(s,t),s=s.sibling}function mh(t,s){var d=t.alternate,p=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zr(s,t),$r(t),p&4){try{ea(3,t,t.return),sl(3,t)}catch(Xe){$t(t,t.return,Xe)}try{ea(5,t,t.return)}catch(Xe){$t(t,t.return,Xe)}}break;case 1:zr(s,t),$r(t),p&512&&d!==null&&eo(d,d.return);break;case 5:if(zr(s,t),$r(t),p&512&&d!==null&&eo(d,d.return),t.flags&32){var b=t.stateNode;try{_r(b,"")}catch(Xe){$t(t,t.return,Xe)}}if(p&4&&(b=t.stateNode,b!=null)){var E=t.memoizedProps,M=d!==null?d.memoizedProps:E,K=t.type,ne=t.updateQueue;if(t.updateQueue=null,ne!==null)try{K==="input"&&E.type==="radio"&&E.name!=null&&ln(b,E),_t(K,M);var ye=_t(K,E);for(M=0;M<ne.length;M+=2){var je=ne[M],Ne=ne[M+1];je==="style"?Pe(b,Ne):je==="dangerouslySetInnerHTML"?en(b,Ne):je==="children"?_r(b,Ne):N(b,je,Ne,ye)}switch(K){case"input":xt(b,E);break;case"textarea":Un(b,E);break;case"select":var Ae=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!E.multiple;var ze=E.value;ze!=null?Le(b,!!E.multiple,ze,!1):Ae!==!!E.multiple&&(E.defaultValue!=null?Le(b,!!E.multiple,E.defaultValue,!0):Le(b,!!E.multiple,E.multiple?[]:"",!1))}b[Vo]=E}catch(Xe){$t(t,t.return,Xe)}}break;case 6:if(zr(s,t),$r(t),p&4){if(t.stateNode===null)throw Error(a(162));b=t.stateNode,E=t.memoizedProps;try{b.nodeValue=E}catch(Xe){$t(t,t.return,Xe)}}break;case 3:if(zr(s,t),$r(t),p&4&&d!==null&&d.memoizedState.isDehydrated)try{Or(s.containerInfo)}catch(Xe){$t(t,t.return,Xe)}break;case 4:zr(s,t),$r(t);break;case 13:zr(s,t),$r(t),b=t.child,b.flags&8192&&(E=b.memoizedState!==null,b.stateNode.isHidden=E,!E||b.alternate!==null&&b.alternate.memoizedState!==null||(Xc=Et())),p&4&&gh(t);break;case 22:if(je=d!==null&&d.memoizedState!==null,t.mode&1?(Fn=(ye=Fn)||je,zr(s,t),Fn=ye):zr(s,t),$r(t),p&8192){if(ye=t.memoizedState!==null,(t.stateNode.isHidden=ye)&&!je&&(t.mode&1)!==0)for(Ue=t,je=t.child;je!==null;){for(Ne=Ue=je;Ue!==null;){switch(Ae=Ue,ze=Ae.child,Ae.tag){case 0:case 11:case 14:case 15:ea(4,Ae,Ae.return);break;case 1:eo(Ae,Ae.return);var Ve=Ae.stateNode;if(typeof Ve.componentWillUnmount=="function"){p=Ae,d=Ae.return;try{s=p,Ve.props=s.memoizedProps,Ve.state=s.memoizedState,Ve.componentWillUnmount()}catch(Xe){$t(p,d,Xe)}}break;case 5:eo(Ae,Ae.return);break;case 22:if(Ae.memoizedState!==null){vh(Ne);continue}}ze!==null?(ze.return=Ae,Ue=ze):vh(Ne)}je=je.sibling}e:for(je=null,Ne=t;;){if(Ne.tag===5){if(je===null){je=Ne;try{b=Ne.stateNode,ye?(E=b.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(K=Ne.stateNode,ne=Ne.memoizedProps.style,M=ne!=null&&ne.hasOwnProperty("display")?ne.display:null,K.style.display=Bt("display",M))}catch(Xe){$t(t,t.return,Xe)}}}else if(Ne.tag===6){if(je===null)try{Ne.stateNode.nodeValue=ye?"":Ne.memoizedProps}catch(Xe){$t(t,t.return,Xe)}}else if((Ne.tag!==22&&Ne.tag!==23||Ne.memoizedState===null||Ne===t)&&Ne.child!==null){Ne.child.return=Ne,Ne=Ne.child;continue}if(Ne===t)break e;for(;Ne.sibling===null;){if(Ne.return===null||Ne.return===t)break e;je===Ne&&(je=null),Ne=Ne.return}je===Ne&&(je=null),Ne.sibling.return=Ne.return,Ne=Ne.sibling}}break;case 19:zr(s,t),$r(t),p&4&&gh(t);break;case 21:break;default:zr(s,t),$r(t)}}function $r(t){var s=t.flags;if(s&2){try{e:{for(var d=t.return;d!==null;){if(hh(d)){var p=d;break e}d=d.return}throw Error(a(160))}switch(p.tag){case 5:var b=p.stateNode;p.flags&32&&(_r(b,""),p.flags&=-33);var E=fh(t);Vc(t,E,b);break;case 3:case 4:var M=p.stateNode.containerInfo,K=fh(t);Uc(t,K,M);break;default:throw Error(a(161))}}catch(ne){$t(t,t.return,ne)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function s1(t,s,d){Ue=t,xh(t)}function xh(t,s,d){for(var p=(t.mode&1)!==0;Ue!==null;){var b=Ue,E=b.child;if(b.tag===22&&p){var M=b.memoizedState!==null||il;if(!M){var K=b.alternate,ne=K!==null&&K.memoizedState!==null||Fn;K=il;var ye=Fn;if(il=M,(Fn=ne)&&!ye)for(Ue=b;Ue!==null;)M=Ue,ne=M.child,M.tag===22&&M.memoizedState!==null?wh(b):ne!==null?(ne.return=M,Ue=ne):wh(b);for(;E!==null;)Ue=E,xh(E),E=E.sibling;Ue=b,il=K,Fn=ye}yh(t)}else(b.subtreeFlags&8772)!==0&&E!==null?(E.return=b,Ue=E):yh(t)}}function yh(t){for(;Ue!==null;){var s=Ue;if((s.flags&8772)!==0){var d=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Fn||sl(5,s);break;case 1:var p=s.stateNode;if(s.flags&4&&!Fn)if(d===null)p.componentDidMount();else{var b=s.elementType===s.type?d.memoizedProps:Br(s.type,d.memoizedProps);p.componentDidUpdate(b,d.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var E=s.updateQueue;E!==null&&vu(s,E,p);break;case 3:var M=s.updateQueue;if(M!==null){if(d=null,s.child!==null)switch(s.child.tag){case 5:d=s.child.stateNode;break;case 1:d=s.child.stateNode}vu(s,M,d)}break;case 5:var K=s.stateNode;if(d===null&&s.flags&4){d=K;var ne=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":ne.autoFocus&&d.focus();break;case"img":ne.src&&(d.src=ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var ye=s.alternate;if(ye!==null){var je=ye.memoizedState;if(je!==null){var Ne=je.dehydrated;Ne!==null&&Or(Ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}Fn||s.flags&512&&Wc(s)}catch(Ae){$t(s,s.return,Ae)}}if(s===t){Ue=null;break}if(d=s.sibling,d!==null){d.return=s.return,Ue=d;break}Ue=s.return}}function vh(t){for(;Ue!==null;){var s=Ue;if(s===t){Ue=null;break}var d=s.sibling;if(d!==null){d.return=s.return,Ue=d;break}Ue=s.return}}function wh(t){for(;Ue!==null;){var s=Ue;try{switch(s.tag){case 0:case 11:case 15:var d=s.return;try{sl(4,s)}catch(ne){$t(s,d,ne)}break;case 1:var p=s.stateNode;if(typeof p.componentDidMount=="function"){var b=s.return;try{p.componentDidMount()}catch(ne){$t(s,b,ne)}}var E=s.return;try{Wc(s)}catch(ne){$t(s,E,ne)}break;case 5:var M=s.return;try{Wc(s)}catch(ne){$t(s,M,ne)}}}catch(ne){$t(s,s.return,ne)}if(s===t){Ue=null;break}var K=s.sibling;if(K!==null){K.return=s.return,Ue=K;break}Ue=s.return}}var o1=Math.ceil,ol=P.ReactCurrentDispatcher,Hc=P.ReactCurrentOwner,Ir=P.ReactCurrentBatchConfig,vt=0,bn=null,dn=null,_n=0,gr=0,to=Oi(0),xn=0,ta=null,vs=0,al=0,Gc=0,na=null,nr=null,Xc=0,no=1/0,ui=null,ll=!1,Yc=null,zi=null,cl=!1,Fi=null,dl=0,ra=0,Zc=null,ul=-1,hl=0;function Xn(){return(vt&6)!==0?Et():ul!==-1?ul:ul=Et()}function Wi(t){return(t.mode&1)===0?1:(vt&2)!==0&&_n!==0?_n&-_n:Vf.transition!==null?(hl===0&&(hl=hn()),hl):(t=ct,t!==0||(t=window.event,t=t===void 0?16:To(t.type)),t)}function Fr(t,s,d,p){if(50<ra)throw ra=0,Zc=null,Error(a(185));G(t,d,p),((vt&2)===0||t!==bn)&&(t===bn&&((vt&2)===0&&(al|=d),xn===4&&Ui(t,_n)),rr(t,p),d===1&&vt===0&&(s.mode&1)===0&&(no=Et()+500,Fa&&Pi()))}function rr(t,s){var d=t.callbackNode;Ci(t,s);var p=cr(t,t===bn?_n:0);if(p===0)d!==null&&yn(d),t.callbackNode=null,t.callbackPriority=0;else if(s=p&-p,t.callbackPriority!==s){if(d!=null&&yn(d),s===1)t.tag===0?Uf(Ch.bind(null,t)):au(Ch.bind(null,t)),Lf(function(){(vt&6)===0&&Pi()}),d=null;else{switch(ba(p)){case 1:d=Se;break;case 4:d=va;break;case 16:d=Nt;break;case 536870912:d=wa;break;default:d=Nt}d=Th(d,bh.bind(null,t))}t.callbackPriority=s,t.callbackNode=d}}function bh(t,s){if(ul=-1,hl=0,(vt&6)!==0)throw Error(a(327));var d=t.callbackNode;if(ro()&&t.callbackNode!==d)return null;var p=cr(t,t===bn?_n:0);if(p===0)return null;if((p&30)!==0||(p&t.expiredLanes)!==0||s)s=fl(t,p);else{s=p;var b=vt;vt|=2;var E=Eh();(bn!==t||_n!==s)&&(ui=null,no=Et()+500,bs(t,s));do try{c1();break}catch(K){Sh(t,K)}while(!0);hc(),ol.current=E,vt=b,dn!==null?s=0:(bn=null,_n=0,s=xn)}if(s!==0){if(s===2&&(b=At(t),b!==0&&(p=b,s=qc(t,b))),s===1)throw d=ta,bs(t,0),Ui(t,p),rr(t,Et()),d;if(s===6)Ui(t,p);else{if(b=t.current.alternate,(p&30)===0&&!a1(b)&&(s=fl(t,p),s===2&&(E=At(t),E!==0&&(p=E,s=qc(t,E))),s===1))throw d=ta,bs(t,0),Ui(t,p),rr(t,Et()),d;switch(t.finishedWork=b,t.finishedLanes=p,s){case 0:case 1:throw Error(a(345));case 2:Cs(t,nr,ui);break;case 3:if(Ui(t,p),(p&130023424)===p&&(s=Xc+500-Et(),10<s)){if(cr(t,0)!==0)break;if(b=t.suspendedLanes,(b&p)!==p){Xn(),t.pingedLanes|=t.suspendedLanes&b;break}t.timeoutHandle=tc(Cs.bind(null,t,nr,ui),s);break}Cs(t,nr,ui);break;case 4:if(Ui(t,p),(p&4194240)===p)break;for(s=t.eventTimes,b=-1;0<p;){var M=31-Hn(p);E=1<<M,M=s[M],M>b&&(b=M),p&=~E}if(p=b,p=Et()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*o1(p/1960))-p,10<p){t.timeoutHandle=tc(Cs.bind(null,t,nr,ui),p);break}Cs(t,nr,ui);break;case 5:Cs(t,nr,ui);break;default:throw Error(a(329))}}}return rr(t,Et()),t.callbackNode===d?bh.bind(null,t):null}function qc(t,s){var d=na;return t.current.memoizedState.isDehydrated&&(bs(t,s).flags|=256),t=fl(t,s),t!==2&&(s=nr,nr=d,s!==null&&$c(s)),t}function $c(t){nr===null?nr=t:nr.push.apply(nr,t)}function a1(t){for(var s=t;;){if(s.flags&16384){var d=s.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var p=0;p<d.length;p++){var b=d[p],E=b.getSnapshot;b=b.value;try{if(!ae(E(),b))return!1}catch{return!1}}}if(d=s.child,s.subtreeFlags&16384&&d!==null)d.return=s,s=d;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ui(t,s){for(s&=~Gc,s&=~al,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var d=31-Hn(s),p=1<<d;t[d]=-1,s&=~p}}function Ch(t){if((vt&6)!==0)throw Error(a(327));ro();var s=cr(t,0);if((s&1)===0)return rr(t,Et()),null;var d=fl(t,s);if(t.tag!==0&&d===2){var p=At(t);p!==0&&(s=p,d=qc(t,p))}if(d===1)throw d=ta,bs(t,0),Ui(t,s),rr(t,Et()),d;if(d===6)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Cs(t,nr,ui),rr(t,Et()),null}function Kc(t,s){var d=vt;vt|=1;try{return t(s)}finally{vt=d,vt===0&&(no=Et()+500,Fa&&Pi())}}function ws(t){Fi!==null&&Fi.tag===0&&(vt&6)===0&&ro();var s=vt;vt|=1;var d=Ir.transition,p=ct;try{if(Ir.transition=null,ct=1,t)return t()}finally{ct=p,Ir.transition=d,vt=s,(vt&6)===0&&Pi()}}function Qc(){gr=to.current,zt(to)}function bs(t,s){t.finishedWork=null,t.finishedLanes=0;var d=t.timeoutHandle;if(d!==-1&&(t.timeoutHandle=-1,Bf(d)),dn!==null)for(d=dn.return;d!==null;){var p=d;switch(ac(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&La();break;case 3:Qs(),zt(Jn),zt(Bn),wc();break;case 5:yc(p);break;case 4:Qs();break;case 13:zt(Gt);break;case 19:zt(Gt);break;case 10:fc(p.type._context);break;case 22:case 23:Qc()}d=d.return}if(bn=t,dn=t=Vi(t.current,null),_n=gr=s,xn=0,ta=null,Gc=al=vs=0,nr=na=null,ms!==null){for(s=0;s<ms.length;s++)if(d=ms[s],p=d.interleaved,p!==null){d.interleaved=null;var b=p.next,E=d.pending;if(E!==null){var M=E.next;E.next=b,p.next=M}d.pending=p}ms=null}return t}function Sh(t,s){do{var d=dn;try{if(hc(),$a.current=el,Ka){for(var p=Xt.memoizedState;p!==null;){var b=p.queue;b!==null&&(b.pending=null),p=p.next}Ka=!1}if(ys=0,wn=mn=Xt=null,qo=!1,$o=0,Hc.current=null,d===null||d.return===null){xn=1,ta=s,dn=null;break}e:{var E=t,M=d.return,K=d,ne=s;if(s=_n,K.flags|=32768,ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var ye=ne,je=K,Ne=je.tag;if((je.mode&1)===0&&(Ne===0||Ne===11||Ne===15)){var Ae=je.alternate;Ae?(je.updateQueue=Ae.updateQueue,je.memoizedState=Ae.memoizedState,je.lanes=Ae.lanes):(je.updateQueue=null,je.memoizedState=null)}var ze=Zu(M);if(ze!==null){ze.flags&=-257,qu(ze,M,K,E,s),ze.mode&1&&Yu(E,ye,s),s=ze,ne=ye;var Ve=s.updateQueue;if(Ve===null){var Xe=new Set;Xe.add(ne),s.updateQueue=Xe}else Ve.add(ne);break e}else{if((s&1)===0){Yu(E,ye,s),Jc();break e}ne=Error(a(426))}}else if(Vt&&K.mode&1){var on=Zu(M);if(on!==null){(on.flags&65536)===0&&(on.flags|=256),qu(on,M,K,E,s),dc(Js(ne,K));break e}}E=ne=Js(ne,K),xn!==4&&(xn=2),na===null?na=[E]:na.push(E),E=M;do{switch(E.tag){case 3:E.flags|=65536,s&=-s,E.lanes|=s;var he=Gu(E,ne,s);yu(E,he);break e;case 1:K=ne;var ie=E.type,ge=E.stateNode;if((E.flags&128)===0&&(typeof ie.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(zi===null||!zi.has(ge)))){E.flags|=65536,s&=-s,E.lanes|=s;var Re=Xu(E,K,s);yu(E,Re);break e}}E=E.return}while(E!==null)}Ih(d)}catch(Ye){s=Ye,dn===d&&d!==null&&(dn=d=d.return);continue}break}while(!0)}function Eh(){var t=ol.current;return ol.current=el,t===null?el:t}function Jc(){(xn===0||xn===3||xn===2)&&(xn=4),bn===null||(vs&268435455)===0&&(al&268435455)===0||Ui(bn,_n)}function fl(t,s){var d=vt;vt|=2;var p=Eh();(bn!==t||_n!==s)&&(ui=null,bs(t,s));do try{l1();break}catch(b){Sh(t,b)}while(!0);if(hc(),vt=d,ol.current=p,dn!==null)throw Error(a(261));return bn=null,_n=0,xn}function l1(){for(;dn!==null;)Ah(dn)}function c1(){for(;dn!==null&&!Rt();)Ah(dn)}function Ah(t){var s=Nh(t.alternate,t,gr);t.memoizedProps=t.pendingProps,s===null?Ih(t):dn=s,Hc.current=null}function Ih(t){var s=t;do{var d=s.alternate;if(t=s.return,(s.flags&32768)===0){if(d=t1(d,s,gr),d!==null){dn=d;return}}else{if(d=n1(d,s),d!==null){d.flags&=32767,dn=d;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xn=6,dn=null;return}}if(s=s.sibling,s!==null){dn=s;return}dn=s=t}while(s!==null);xn===0&&(xn=5)}function Cs(t,s,d){var p=ct,b=Ir.transition;try{Ir.transition=null,ct=1,d1(t,s,d,p)}finally{Ir.transition=b,ct=p}return null}function d1(t,s,d,p){do ro();while(Fi!==null);if((vt&6)!==0)throw Error(a(327));d=t.finishedWork;var b=t.finishedLanes;if(d===null)return null;if(t.finishedWork=null,t.finishedLanes=0,d===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var E=d.lanes|d.childLanes;if(Ze(t,E),t===bn&&(dn=bn=null,_n=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||cl||(cl=!0,Th(Nt,function(){return ro(),null})),E=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||E){E=Ir.transition,Ir.transition=null;var M=ct;ct=1;var K=vt;vt|=4,Hc.current=null,i1(t,d),mh(d,t),Mn(Jl),Gr=!!Ql,Jl=Ql=null,t.current=d,s1(d),ya(),vt=K,ct=M,Ir.transition=E}else t.current=d;if(cl&&(cl=!1,Fi=t,dl=b),E=t.pendingLanes,E===0&&(zi=null),pt(d.stateNode),rr(t,Et()),s!==null)for(p=t.onRecoverableError,d=0;d<s.length;d++)b=s[d],p(b.value,{componentStack:b.stack,digest:b.digest});if(ll)throw ll=!1,t=Yc,Yc=null,t;return(dl&1)!==0&&t.tag!==0&&ro(),E=t.pendingLanes,(E&1)!==0?t===Zc?ra++:(ra=0,Zc=t):ra=0,Pi(),null}function ro(){if(Fi!==null){var t=ba(dl),s=Ir.transition,d=ct;try{if(Ir.transition=null,ct=16>t?16:t,Fi===null)var p=!1;else{if(t=Fi,Fi=null,dl=0,(vt&6)!==0)throw Error(a(331));var b=vt;for(vt|=4,Ue=t.current;Ue!==null;){var E=Ue,M=E.child;if((Ue.flags&16)!==0){var K=E.deletions;if(K!==null){for(var ne=0;ne<K.length;ne++){var ye=K[ne];for(Ue=ye;Ue!==null;){var je=Ue;switch(je.tag){case 0:case 11:case 15:ea(8,je,E)}var Ne=je.child;if(Ne!==null)Ne.return=je,Ue=Ne;else for(;Ue!==null;){je=Ue;var Ae=je.sibling,ze=je.return;if(uh(je),je===ye){Ue=null;break}if(Ae!==null){Ae.return=ze,Ue=Ae;break}Ue=ze}}}var Ve=E.alternate;if(Ve!==null){var Xe=Ve.child;if(Xe!==null){Ve.child=null;do{var on=Xe.sibling;Xe.sibling=null,Xe=on}while(Xe!==null)}}Ue=E}}if((E.subtreeFlags&2064)!==0&&M!==null)M.return=E,Ue=M;else e:for(;Ue!==null;){if(E=Ue,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:ea(9,E,E.return)}var he=E.sibling;if(he!==null){he.return=E.return,Ue=he;break e}Ue=E.return}}var ie=t.current;for(Ue=ie;Ue!==null;){M=Ue;var ge=M.child;if((M.subtreeFlags&2064)!==0&&ge!==null)ge.return=M,Ue=ge;else e:for(M=ie;Ue!==null;){if(K=Ue,(K.flags&2048)!==0)try{switch(K.tag){case 0:case 11:case 15:sl(9,K)}}catch(Ye){$t(K,K.return,Ye)}if(K===M){Ue=null;break e}var Re=K.sibling;if(Re!==null){Re.return=K.return,Ue=Re;break e}Ue=K.return}}if(vt=b,Pi(),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot(mt,t)}catch{}p=!0}return p}finally{ct=d,Ir.transition=s}}return!1}function jh(t,s,d){s=Js(d,s),s=Gu(t,s,1),t=Bi(t,s,1),s=Xn(),t!==null&&(G(t,1,s),rr(t,s))}function $t(t,s,d){if(t.tag===3)jh(t,t,d);else for(;s!==null;){if(s.tag===3){jh(s,t,d);break}else if(s.tag===1){var p=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(zi===null||!zi.has(p))){t=Js(d,t),t=Xu(s,t,1),s=Bi(s,t,1),t=Xn(),s!==null&&(G(s,1,t),rr(s,t));break}}s=s.return}}function u1(t,s,d){var p=t.pingCache;p!==null&&p.delete(s),s=Xn(),t.pingedLanes|=t.suspendedLanes&d,bn===t&&(_n&d)===d&&(xn===4||xn===3&&(_n&130023424)===_n&&500>Et()-Xc?bs(t,0):Gc|=d),rr(t,s)}function kh(t,s){s===0&&((t.mode&1)===0?s=1:(s=Os,Os<<=1,(Os&130023424)===0&&(Os=4194304)));var d=Xn();t=li(t,s),t!==null&&(G(t,s,d),rr(t,d))}function h1(t){var s=t.memoizedState,d=0;s!==null&&(d=s.retryLane),kh(t,d)}function f1(t,s){var d=0;switch(t.tag){case 13:var p=t.stateNode,b=t.memoizedState;b!==null&&(d=b.retryLane);break;case 19:p=t.stateNode;break;default:throw Error(a(314))}p!==null&&p.delete(s),kh(t,d)}var Nh;Nh=function(t,s,d){if(t!==null)if(t.memoizedProps!==s.pendingProps||Jn.current)tr=!0;else{if((t.lanes&d)===0&&(s.flags&128)===0)return tr=!1,e1(t,s,d);tr=(t.flags&131072)!==0}else tr=!1,Vt&&(s.flags&1048576)!==0&&lu(s,Ua,s.index);switch(s.lanes=0,s.tag){case 2:var p=s.type;rl(t,s),t=s.pendingProps;var b=Gs(s,Bn.current);Ks(s,d),b=Sc(null,s,p,t,b,d);var E=Ec();return s.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,er(p)?(E=!0,za(s)):E=!1,s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,mc(s),b.updater=tl,s.stateNode=b,b._reactInternals=s,Tc(s,p,t,d),s=Dc(null,s,p,!0,E,d)):(s.tag=0,Vt&&E&&oc(s),Gn(null,s,b,d),s=s.child),s;case 16:p=s.elementType;e:{switch(rl(t,s),t=s.pendingProps,b=p._init,p=b(p._payload),s.type=p,b=s.tag=g1(p),t=Br(p,t),b){case 0:s=Oc(null,s,p,t,d);break e;case 1:s=th(null,s,p,t,d);break e;case 11:s=$u(null,s,p,t,d);break e;case 14:s=Ku(null,s,p,Br(p.type,t),d);break e}throw Error(a(306,p,""))}return s;case 0:return p=s.type,b=s.pendingProps,b=s.elementType===p?b:Br(p,b),Oc(t,s,p,b,d);case 1:return p=s.type,b=s.pendingProps,b=s.elementType===p?b:Br(p,b),th(t,s,p,b,d);case 3:e:{if(nh(s),t===null)throw Error(a(387));p=s.pendingProps,E=s.memoizedState,b=E.element,xu(t,s),Za(s,p,null,d);var M=s.memoizedState;if(p=M.element,E.isDehydrated)if(E={element:p,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},s.updateQueue.baseState=E,s.memoizedState=E,s.flags&256){b=Js(Error(a(423)),s),s=rh(t,s,p,d,b);break e}else if(p!==b){b=Js(Error(a(424)),s),s=rh(t,s,p,d,b);break e}else for(pr=Ri(s.stateNode.containerInfo.firstChild),fr=s,Vt=!0,Mr=null,d=gu(s,null,p,d),s.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Zs(),p===b){s=di(t,s,d);break e}Gn(t,s,p,d)}s=s.child}return s;case 5:return wu(s),t===null&&cc(s),p=s.type,b=s.pendingProps,E=t!==null?t.memoizedProps:null,M=b.children,ec(p,b)?M=null:E!==null&&ec(p,E)&&(s.flags|=32),eh(t,s),Gn(t,s,M,d),s.child;case 6:return t===null&&cc(s),null;case 13:return ih(t,s,d);case 4:return xc(s,s.stateNode.containerInfo),p=s.pendingProps,t===null?s.child=qs(s,null,p,d):Gn(t,s,p,d),s.child;case 11:return p=s.type,b=s.pendingProps,b=s.elementType===p?b:Br(p,b),$u(t,s,p,b,d);case 7:return Gn(t,s,s.pendingProps,d),s.child;case 8:return Gn(t,s,s.pendingProps.children,d),s.child;case 12:return Gn(t,s,s.pendingProps.children,d),s.child;case 10:e:{if(p=s.type._context,b=s.pendingProps,E=s.memoizedProps,M=b.value,Pt(Ga,p._currentValue),p._currentValue=M,E!==null)if(ae(E.value,M)){if(E.children===b.children&&!Jn.current){s=di(t,s,d);break e}}else for(E=s.child,E!==null&&(E.return=s);E!==null;){var K=E.dependencies;if(K!==null){M=E.child;for(var ne=K.firstContext;ne!==null;){if(ne.context===p){if(E.tag===1){ne=ci(-1,d&-d),ne.tag=2;var ye=E.updateQueue;if(ye!==null){ye=ye.shared;var je=ye.pending;je===null?ne.next=ne:(ne.next=je.next,je.next=ne),ye.pending=ne}}E.lanes|=d,ne=E.alternate,ne!==null&&(ne.lanes|=d),pc(E.return,d,s),K.lanes|=d;break}ne=ne.next}}else if(E.tag===10)M=E.type===s.type?null:E.child;else if(E.tag===18){if(M=E.return,M===null)throw Error(a(341));M.lanes|=d,K=M.alternate,K!==null&&(K.lanes|=d),pc(M,d,s),M=E.sibling}else M=E.child;if(M!==null)M.return=E;else for(M=E;M!==null;){if(M===s){M=null;break}if(E=M.sibling,E!==null){E.return=M.return,M=E;break}M=M.return}E=M}Gn(t,s,b.children,d),s=s.child}return s;case 9:return b=s.type,p=s.pendingProps.children,Ks(s,d),b=Er(b),p=p(b),s.flags|=1,Gn(t,s,p,d),s.child;case 14:return p=s.type,b=Br(p,s.pendingProps),b=Br(p.type,b),Ku(t,s,p,b,d);case 15:return Qu(t,s,s.type,s.pendingProps,d);case 17:return p=s.type,b=s.pendingProps,b=s.elementType===p?b:Br(p,b),rl(t,s),s.tag=1,er(p)?(t=!0,za(s)):t=!1,Ks(s,d),Vu(s,p,b),Tc(s,p,b,d),Dc(null,s,p,!0,t,d);case 19:return oh(t,s,d);case 22:return Ju(t,s,d)}throw Error(a(156,s.tag))};function Th(t,s){return ar(t,s)}function p1(t,s,d,p){this.tag=t,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(t,s,d,p){return new p1(t,s,d,p)}function ed(t){return t=t.prototype,!(!t||!t.isReactComponent)}function g1(t){if(typeof t=="function")return ed(t)?1:0;if(t!=null){if(t=t.$$typeof,t===we)return 11;if(t===Y)return 14}return 2}function Vi(t,s){var d=t.alternate;return d===null?(d=jr(t.tag,s,t.key,t.mode),d.elementType=t.elementType,d.type=t.type,d.stateNode=t.stateNode,d.alternate=t,t.alternate=d):(d.pendingProps=s,d.type=t.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=t.flags&14680064,d.childLanes=t.childLanes,d.lanes=t.lanes,d.child=t.child,d.memoizedProps=t.memoizedProps,d.memoizedState=t.memoizedState,d.updateQueue=t.updateQueue,s=t.dependencies,d.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},d.sibling=t.sibling,d.index=t.index,d.ref=t.ref,d}function pl(t,s,d,p,b,E){var M=2;if(p=t,typeof t=="function")ed(t)&&(M=1);else if(typeof t=="string")M=5;else e:switch(t){case F:return Ss(d.children,b,E,s);case Q:M=8,b|=8;break;case pe:return t=jr(12,d,s,b|2),t.elementType=pe,t.lanes=E,t;case de:return t=jr(13,d,s,b),t.elementType=de,t.lanes=E,t;case te:return t=jr(19,d,s,b),t.elementType=te,t.lanes=E,t;case se:return gl(d,b,E,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Me:M=10;break e;case be:M=9;break e;case we:M=11;break e;case Y:M=14;break e;case J:M=16,p=null;break e}throw Error(a(130,t==null?t:typeof t,""))}return s=jr(M,d,s,b),s.elementType=t,s.type=p,s.lanes=E,s}function Ss(t,s,d,p){return t=jr(7,t,p,s),t.lanes=d,t}function gl(t,s,d,p){return t=jr(22,t,p,s),t.elementType=se,t.lanes=d,t.stateNode={isHidden:!1},t}function td(t,s,d){return t=jr(6,t,null,s),t.lanes=d,t}function nd(t,s,d){return s=jr(4,t.children!==null?t.children:[],t.key,s),s.lanes=d,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function m1(t,s,d,p,b){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ue(0),this.expirationTimes=ue(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ue(0),this.identifierPrefix=p,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function rd(t,s,d,p,b,E,M,K,ne){return t=new m1(t,s,d,K,ne),s===1?(s=1,E===!0&&(s|=8)):s=0,E=jr(3,null,null,s),t.current=E,E.stateNode=t,E.memoizedState={element:p,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},mc(E),t}function x1(t,s,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q,key:p==null?null:""+p,children:t,containerInfo:s,implementation:d}}function _h(t){if(!t)return Di;t=t._reactInternals;e:{if(Qn(t)!==t||t.tag!==1)throw Error(a(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(er(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(a(171))}if(t.tag===1){var d=t.type;if(er(d))return su(t,d,s)}return s}function Rh(t,s,d,p,b,E,M,K,ne){return t=rd(d,p,!0,t,b,E,M,K,ne),t.context=_h(null),d=t.current,p=Xn(),b=Wi(d),E=ci(p,b),E.callback=s??null,Bi(d,E,b),t.current.lanes=b,G(t,b,p),rr(t,p),t}function ml(t,s,d,p){var b=s.current,E=Xn(),M=Wi(b);return d=_h(d),s.context===null?s.context=d:s.pendingContext=d,s=ci(E,M),s.payload={element:t},p=p===void 0?null:p,p!==null&&(s.callback=p),t=Bi(b,s,M),t!==null&&(Fr(t,b,M,E),Ya(t,b,M)),M}function xl(t){return t=t.current,t.child?(t.child.tag===5,t.child.stateNode):null}function Oh(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var d=t.retryLane;t.retryLane=d!==0&&d<s?d:s}}function id(t,s){Oh(t,s),(t=t.alternate)&&Oh(t,s)}function y1(){return null}var Dh=typeof reportError=="function"?reportError:function(t){console.error(t)};function sd(t){this._internalRoot=t}yl.prototype.render=sd.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));ml(t,s,null,null)},yl.prototype.unmount=sd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;ws(function(){ml(null,t,null,null)}),s[ii]=null}};function yl(t){this._internalRoot=t}yl.prototype.unstable_scheduleHydration=function(t){if(t){var s=Ot();t={blockedOn:null,target:t,priority:s};for(var d=0;d<jn.length&&s!==0&&s<jn[d].priority;d++);jn.splice(d,0,t),d===0&&Sa(t)}};function od(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ph(){}function v1(t,s,d,p,b){if(b){if(typeof p=="function"){var E=p;p=function(){var ye=xl(M);E.call(ye)}}var M=Rh(s,p,t,0,null,!1,!1,"",Ph);return t._reactRootContainer=M,t[ii]=M.current,Wo(t.nodeType===8?t.parentNode:t),ws(),M}for(;b=t.lastChild;)t.removeChild(b);if(typeof p=="function"){var K=p;p=function(){var ye=xl(ne);K.call(ye)}}var ne=rd(t,0,!1,null,null,!1,!1,"",Ph);return t._reactRootContainer=ne,t[ii]=ne.current,Wo(t.nodeType===8?t.parentNode:t),ws(function(){ml(s,ne,d,p)}),ne}function wl(t,s,d,p,b){var E=d._reactRootContainer;if(E){var M=E;if(typeof b=="function"){var K=b;b=function(){var ne=xl(M);K.call(ne)}}ml(s,M,t,b)}else M=v1(d,s,t,b,p);return xl(M)}Ds=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var d=Tt(s.pendingLanes);d!==0&&(Zt(s,d|1),rr(s,Et()),(vt&6)===0&&(no=Et()+500,Pi()))}break;case 13:ws(function(){var p=li(t,1);if(p!==null){var b=Xn();Fr(p,t,1,b)}}),id(t,1)}},Pn=function(t){if(t.tag===13){var s=li(t,134217728);if(s!==null){var d=Xn();Fr(s,t,134217728,d)}id(t,134217728)}},qe=function(t){if(t.tag===13){var s=Wi(t),d=li(t,s);if(d!==null){var p=Xn();Fr(d,t,s,p)}id(t,s)}},Ot=function(){return ct},jo=function(t,s){var d=ct;try{return ct=t,s()}finally{ct=d}},_s=function(t,s,d){switch(s){case"input":if(xt(t,d),s=d.name,d.type==="radio"&&s!=null){for(d=t;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<d.length;s++){var p=d[s];if(p!==t&&p.form===t.form){var b=Ba(p);if(!b)throw Error(a(90));st(p),xt(p,b)}}}break;case"textarea":Un(t,d);break;case"select":s=d.value,s!=null&&Le(t,!!d.multiple,s,!1)}},Rs=Kc,un=ws;var w1={usingClientEntryPoint:!1,Events:[Ho,Vs,Ba,wo,Kn,Kc]},ia={findFiberByHostInstance:hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},b1={bundleType:ia.bundleType,version:ia.version,rendererPackageName:ia.rendererPackageName,rendererConfig:ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ma(t),t===null?null:t.stateNode},findFiberByHostInstance:ia.findFiberByHostInstance||y1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bl.isDisabled&&bl.supportsFiber)try{mt=bl.inject(b1),lt=bl}catch{}}return ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w1,ir.createPortal=function(t,s){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!od(s))throw Error(a(200));return x1(t,s,null,d)},ir.createRoot=function(t,s){if(!od(t))throw Error(a(299));var d=!1,p="",b=Dh;return s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=rd(t,1,!1,null,null,d,!1,p,b),t[ii]=s.current,Wo(t.nodeType===8?t.parentNode:t),new sd(s)},ir.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=ma(s),t=t===null?null:t.stateNode,t},ir.flushSync=function(t){return ws(t)},ir.hydrate=function(t,s,d){if(!vl(s))throw Error(a(200));return wl(null,t,s,!0,d)},ir.hydrateRoot=function(t,s,d){if(!od(t))throw Error(a(405));var p=d!=null&&d.hydratedSources||null,b=!1,E="",M=Dh;if(d!=null&&(d.unstable_strictMode===!0&&(b=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onRecoverableError!==void 0&&(M=d.onRecoverableError)),s=Rh(s,null,t,1,d??null,b,!1,E,M),t[ii]=s.current,Wo(t),p)for(t=0;t<p.length;t++)d=p[t],b=d._getVersion,b=b(d._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[d,b]:s.mutableSourceEagerHydrationData.push(d,b);return new yl(s)},ir.render=function(t,s,d){if(!vl(s))throw Error(a(200));return wl(null,t,s,!1,d)},ir.unmountComponentAtNode=function(t){if(!vl(t))throw Error(a(40));return t._reactRootContainer?(ws(function(){wl(null,null,t,!1,function(){t._reactRootContainer=null,t[ii]=null})}),!0):!1},ir.unstable_batchedUpdates=Kc,ir.unstable_renderSubtreeIntoContainer=function(t,s,d,p){if(!vl(d))throw Error(a(200));if(t==null||t._reactInternals===void 0)throw Error(a(38));return wl(t,s,d,!1,p)},ir.version="18.3.1-next-f1338f8080-20240426",ir}var Vh;function V0(){if(Vh)return cd.exports;Vh=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(h){console.error(h)}}return u(),cd.exports=N1(),cd.exports}var Hh;function T1(){if(Hh)return Sl;Hh=1;var u=V0();return Sl.createRoot=u.createRoot,Sl.hydrateRoot=u.hydrateRoot,Sl}var _1=T1();const R1=Ll(_1);V0();function da(){return da=Object.assign?Object.assign.bind():function(u){for(var h=1;h<arguments.length;h++){var a=arguments[h];for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&(u[g]=a[g])}return u},da.apply(this,arguments)}var Xi;(function(u){u.Pop="POP",u.Push="PUSH",u.Replace="REPLACE"})(Xi||(Xi={}));const Gh="popstate";function O1(u){u===void 0&&(u={});function h(g,y){let{pathname:x,search:C,hash:I}=g.location;return Ed("",{pathname:x,search:C,hash:I},y.state&&y.state.usr||null,y.state&&y.state.key||"default")}function a(g,y){return typeof y=="string"?y:Rl(y)}return P1(h,a,null,u)}function an(u,h){if(u===!1||u===null||typeof u>"u")throw new Error(h)}function Md(u,h){if(!u){typeof console<"u"&&console.warn(h);try{throw new Error(h)}catch{}}}function D1(){return Math.random().toString(36).substr(2,8)}function Xh(u,h){return{usr:u.state,key:u.key,idx:h}}function Ed(u,h,a,g){return a===void 0&&(a=null),da({pathname:typeof u=="string"?u:u.pathname,search:"",hash:""},typeof h=="string"?fo(h):h,{state:a,key:h&&h.key||g||D1()})}function Rl(u){let{pathname:h="/",search:a="",hash:g=""}=u;return a&&a!=="?"&&(h+=a.charAt(0)==="?"?a:"?"+a),g&&g!=="#"&&(h+=g.charAt(0)==="#"?g:"#"+g),h}function fo(u){let h={};if(u){let a=u.indexOf("#");a>=0&&(h.hash=u.substr(a),u=u.substr(0,a));let g=u.indexOf("?");g>=0&&(h.search=u.substr(g),u=u.substr(0,g)),u&&(h.pathname=u)}return h}function P1(u,h,a,g){g===void 0&&(g={});let{window:y=document.defaultView,v5Compat:x=!1}=g,C=y.history,I=Xi.Pop,S=null,v=A();v==null&&(v=0,C.replaceState(da({},C.state,{idx:v}),""));function A(){return(C.state||{idx:null}).idx}function k(){I=Xi.Pop;let z=A(),H=z==null?null:z-v;v=z,S&&S({action:I,location:W.location,delta:H})}function _(z,H){I=Xi.Push;let T=Ed(W.location,z,H);v=A()+1;let N=Xh(T,v),P=W.createHref(T);try{C.pushState(N,"",P)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;y.location.assign(P)}x&&S&&S({action:I,location:W.location,delta:1})}function V(z,H){I=Xi.Replace;let T=Ed(W.location,z,H);v=A();let N=Xh(T,v),P=W.createHref(T);C.replaceState(N,"",P),x&&S&&S({action:I,location:W.location,delta:0})}function X(z){let H=y.location.origin!=="null"?y.location.origin:y.location.href,T=typeof z=="string"?z:Rl(z);return T=T.replace(/ $/,"%20"),an(H,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,H)}let W={get action(){return I},get location(){return u(y,C)},listen(z){if(S)throw new Error("A history only accepts one active listener");return y.addEventListener(Gh,k),S=z,()=>{y.removeEventListener(Gh,k),S=null}},createHref(z){return h(y,z)},createURL:X,encodeLocation(z){let H=X(z);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:_,replace:V,go(z){return C.go(z)}};return W}var Yh;(function(u){u.data="data",u.deferred="deferred",u.redirect="redirect",u.error="error"})(Yh||(Yh={}));function M1(u,h,a){return a===void 0&&(a="/"),B1(u,h,a)}function B1(u,h,a,g){let y=typeof h=="string"?fo(h):h,x=Bd(y.pathname||"/",a);if(x==null)return null;let C=H0(u);L1(C);let I=null;for(let S=0;I==null&&S<C.length;++S){let v=$1(x);I=Y1(C[S],v)}return I}function H0(u,h,a,g){h===void 0&&(h=[]),a===void 0&&(a=[]),g===void 0&&(g="");let y=(x,C,I)=>{let S={relativePath:I===void 0?x.path||"":I,caseSensitive:x.caseSensitive===!0,childrenIndex:C,route:x};S.relativePath.startsWith("/")&&(an(S.relativePath.startsWith(g),'Absolute route path "'+S.relativePath+'" nested under path '+('"'+g+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),S.relativePath=S.relativePath.slice(g.length));let v=Zi([g,S.relativePath]),A=a.concat(S);x.children&&x.children.length>0&&(an(x.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),H0(x.children,h,A,v)),!(x.path==null&&!x.index)&&h.push({path:v,score:G1(v,x.index),routesMeta:A})};return u.forEach((x,C)=>{var I;if(x.path===""||!((I=x.path)!=null&&I.includes("?")))y(x,C);else for(let S of G0(x.path))y(x,C,S)}),h}function G0(u){let h=u.split("/");if(h.length===0)return[];let[a,...g]=h,y=a.endsWith("?"),x=a.replace(/\?$/,"");if(g.length===0)return y?[x,""]:[x];let C=G0(g.join("/")),I=[];return I.push(...C.map(S=>S===""?x:[x,S].join("/"))),y&&I.push(...C),I.map(S=>u.startsWith("/")&&S===""?"/":S)}function L1(u){u.sort((h,a)=>h.score!==a.score?a.score-h.score:X1(h.routesMeta.map(g=>g.childrenIndex),a.routesMeta.map(g=>g.childrenIndex)))}const z1=/^:[\w-]+$/,F1=3,W1=2,U1=1,V1=10,H1=-2,Zh=u=>u==="*";function G1(u,h){let a=u.split("/"),g=a.length;return a.some(Zh)&&(g+=H1),h&&(g+=W1),a.filter(y=>!Zh(y)).reduce((y,x)=>y+(z1.test(x)?F1:x===""?U1:V1),g)}function X1(u,h){return u.length===h.length&&u.slice(0,-1).every((g,y)=>g===h[y])?u[u.length-1]-h[h.length-1]:0}function Y1(u,h,a){let{routesMeta:g}=u,y={},x="/",C=[];for(let I=0;I<g.length;++I){let S=g[I],v=I===g.length-1,A=x==="/"?h:h.slice(x.length)||"/",k=Z1({path:S.relativePath,caseSensitive:S.caseSensitive,end:v},A),_=S.route;if(!k)return null;Object.assign(y,k.params),C.push({params:y,pathname:Zi([x,k.pathname]),pathnameBase:tp(Zi([x,k.pathnameBase])),route:_}),k.pathnameBase!=="/"&&(x=Zi([x,k.pathnameBase]))}return C}function Z1(u,h){typeof u=="string"&&(u={path:u,caseSensitive:!1,end:!0});let[a,g]=q1(u.path,u.caseSensitive,u.end),y=h.match(a);if(!y)return null;let x=y[0],C=x.replace(/(.)\/+$/,"$1"),I=y.slice(1);return{params:g.reduce((v,A,k)=>{let{paramName:_,isOptional:V}=A;if(_==="*"){let W=I[k]||"";C=x.slice(0,x.length-W.length).replace(/(.)\/+$/,"$1")}const X=I[k];return V&&!X?v[_]=void 0:v[_]=(X||"").replace(/%2F/g,"/"),v},{}),pathname:x,pathnameBase:C,pattern:u}}function q1(u,h,a){h===void 0&&(h=!1),a===void 0&&(a=!0),Md(u==="*"||!u.endsWith("*")||u.endsWith("/*"),'Route path "'+u+'" will be treated as if it were '+('"'+u.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+u.replace(/\*$/,"/*")+'".'));let g=[],y="^"+u.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(C,I,S)=>(g.push({paramName:I,isOptional:S!=null}),S?"/?([^\\/]+)?":"/([^\\/]+)"));return u.endsWith("*")?(g.push({paramName:"*"}),y+=u==="*"||u==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?y+="\\/*$":u!==""&&u!=="/"&&(y+="(?:(?=\\/|$))"),[new RegExp(y,h?void 0:"i"),g]}function $1(u){try{return u.split("/").map(h=>decodeURIComponent(h).replace(/\//g,"%2F")).join("/")}catch(h){return Md(!1,'The URL path "'+u+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+h+").")),u}}function Bd(u,h){if(h==="/")return u;if(!u.toLowerCase().startsWith(h.toLowerCase()))return null;let a=h.endsWith("/")?h.length-1:h.length,g=u.charAt(a);return g&&g!=="/"?null:u.slice(a)||"/"}const K1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Q1=u=>K1.test(u);function J1(u,h){h===void 0&&(h="/");let{pathname:a,search:g="",hash:y=""}=typeof u=="string"?fo(u):u,x;if(a)if(Q1(a))x=a;else{if(a.includes("//")){let C=a;a=a.replace(/\/\/+/g,"/"),Md(!1,"Pathnames cannot have embedded double slashes - normalizing "+(C+" -> "+a))}a.startsWith("/")?x=qh(a.substring(1),"/"):x=qh(a,h)}else x=h;return{pathname:x,search:np(g),hash:rp(y)}}function qh(u,h){let a=h.replace(/\/+$/,"").split("/");return u.split("/").forEach(y=>{y===".."?a.length>1&&a.pop():y!=="."&&a.push(y)}),a.length>1?a.join("/"):"/"}function hd(u,h,a,g){return"Cannot include a '"+u+"' character in a manually specified "+("`to."+h+"` field ["+JSON.stringify(g)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ep(u){return u.filter((h,a)=>a===0||h.route.path&&h.route.path.length>0)}function Ld(u,h){let a=ep(u);return h?a.map((g,y)=>y===a.length-1?g.pathname:g.pathnameBase):a.map(g=>g.pathnameBase)}function zd(u,h,a,g){g===void 0&&(g=!1);let y;typeof u=="string"?y=fo(u):(y=da({},u),an(!y.pathname||!y.pathname.includes("?"),hd("?","pathname","search",y)),an(!y.pathname||!y.pathname.includes("#"),hd("#","pathname","hash",y)),an(!y.search||!y.search.includes("#"),hd("#","search","hash",y)));let x=u===""||y.pathname==="",C=x?"/":y.pathname,I;if(C==null)I=a;else{let k=h.length-1;if(!g&&C.startsWith("..")){let _=C.split("/");for(;_[0]==="..";)_.shift(),k-=1;y.pathname=_.join("/")}I=k>=0?h[k]:"/"}let S=J1(y,I),v=C&&C!=="/"&&C.endsWith("/"),A=(x||C===".")&&a.endsWith("/");return!S.pathname.endsWith("/")&&(v||A)&&(S.pathname+="/"),S}const Zi=u=>u.join("/").replace(/\/\/+/g,"/"),tp=u=>u.replace(/\/+$/,"").replace(/^\/*/,"/"),np=u=>!u||u==="?"?"":u.startsWith("?")?u:"?"+u,rp=u=>!u||u==="#"?"":u.startsWith("#")?u:"#"+u;function ip(u){return u!=null&&typeof u.status=="number"&&typeof u.statusText=="string"&&typeof u.internal=="boolean"&&"data"in u}const X0=["post","put","patch","delete"];new Set(X0);const sp=["get",...X0];new Set(sp);function ua(){return ua=Object.assign?Object.assign.bind():function(u){for(var h=1;h<arguments.length;h++){var a=arguments[h];for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&(u[g]=a[g])}return u},ua.apply(this,arguments)}const Fd=U.createContext(null),op=U.createContext(null),$i=U.createContext(null),zl=U.createContext(null),mi=U.createContext({outlet:null,matches:[],isDataRoute:!1}),Y0=U.createContext(null);function ap(u,h){let{relative:a}=h===void 0?{}:h;po()||an(!1);let{basename:g,navigator:y}=U.useContext($i),{hash:x,pathname:C,search:I}=q0(u,{relative:a}),S=C;return g!=="/"&&(S=C==="/"?g:Zi([g,C])),y.createHref({pathname:S,search:I,hash:x})}function po(){return U.useContext(zl)!=null}function Ts(){return po()||an(!1),U.useContext(zl).location}function Z0(u){U.useContext($i).static||U.useLayoutEffect(u)}function Wn(){let{isDataRoute:u}=U.useContext(mi);return u?wp():lp()}function lp(){po()||an(!1);let u=U.useContext(Fd),{basename:h,future:a,navigator:g}=U.useContext($i),{matches:y}=U.useContext(mi),{pathname:x}=Ts(),C=JSON.stringify(Ld(y,a.v7_relativeSplatPath)),I=U.useRef(!1);return Z0(()=>{I.current=!0}),U.useCallback(function(v,A){if(A===void 0&&(A={}),!I.current)return;if(typeof v=="number"){g.go(v);return}let k=zd(v,JSON.parse(C),x,A.relative==="path");u==null&&h!=="/"&&(k.pathname=k.pathname==="/"?h:Zi([h,k.pathname])),(A.replace?g.replace:g.push)(k,A.state,A)},[h,g,C,x,u])}function go(){let{matches:u}=U.useContext(mi),h=u[u.length-1];return h?h.params:{}}function q0(u,h){let{relative:a}=h===void 0?{}:h,{future:g}=U.useContext($i),{matches:y}=U.useContext(mi),{pathname:x}=Ts(),C=JSON.stringify(Ld(y,g.v7_relativeSplatPath));return U.useMemo(()=>zd(u,JSON.parse(C),x,a==="path"),[u,C,x,a])}function cp(u,h){return dp(u,h)}function dp(u,h,a,g){po()||an(!1);let{navigator:y}=U.useContext($i),{matches:x}=U.useContext(mi),C=x[x.length-1],I=C?C.params:{};C&&C.pathname;let S=C?C.pathnameBase:"/";C&&C.route;let v=Ts(),A;if(h){var k;let z=typeof h=="string"?fo(h):h;S==="/"||(k=z.pathname)!=null&&k.startsWith(S)||an(!1),A=z}else A=v;let _=A.pathname||"/",V=_;if(S!=="/"){let z=S.replace(/^\//,"").split("/");V="/"+_.replace(/^\//,"").split("/").slice(z.length).join("/")}let X=M1(u,{pathname:V}),W=gp(X&&X.map(z=>Object.assign({},z,{params:Object.assign({},I,z.params),pathname:Zi([S,y.encodeLocation?y.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?S:Zi([S,y.encodeLocation?y.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),x,a,g);return h&&W?U.createElement(zl.Provider,{value:{location:ua({pathname:"/",search:"",hash:"",state:null,key:"default"},A),navigationType:Xi.Pop}},W):W}function up(){let u=vp(),h=ip(u)?u.status+" "+u.statusText:u instanceof Error?u.message:JSON.stringify(u),a=u instanceof Error?u.stack:null,y={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},h),a?U.createElement("pre",{style:y},a):null,null)}const hp=U.createElement(up,null);class fp extends U.Component{constructor(h){super(h),this.state={location:h.location,revalidation:h.revalidation,error:h.error}}static getDerivedStateFromError(h){return{error:h}}static getDerivedStateFromProps(h,a){return a.location!==h.location||a.revalidation!=="idle"&&h.revalidation==="idle"?{error:h.error,location:h.location,revalidation:h.revalidation}:{error:h.error!==void 0?h.error:a.error,location:a.location,revalidation:h.revalidation||a.revalidation}}componentDidCatch(h,a){console.error("React Router caught the following error during render",h,a)}render(){return this.state.error!==void 0?U.createElement(mi.Provider,{value:this.props.routeContext},U.createElement(Y0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pp(u){let{routeContext:h,match:a,children:g}=u,y=U.useContext(Fd);return y&&y.static&&y.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(y.staticContext._deepestRenderedBoundaryId=a.route.id),U.createElement(mi.Provider,{value:h},g)}function gp(u,h,a,g){var y;if(h===void 0&&(h=[]),a===void 0&&(a=null),g===void 0&&(g=null),u==null){var x;if(!a)return null;if(a.errors)u=a.matches;else if((x=g)!=null&&x.v7_partialHydration&&h.length===0&&!a.initialized&&a.matches.length>0)u=a.matches;else return null}let C=u,I=(y=a)==null?void 0:y.errors;if(I!=null){let A=C.findIndex(k=>k.route.id&&I?.[k.route.id]!==void 0);A>=0||an(!1),C=C.slice(0,Math.min(C.length,A+1))}let S=!1,v=-1;if(a&&g&&g.v7_partialHydration)for(let A=0;A<C.length;A++){let k=C[A];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(v=A),k.route.id){let{loaderData:_,errors:V}=a,X=k.route.loader&&_[k.route.id]===void 0&&(!V||V[k.route.id]===void 0);if(k.route.lazy||X){S=!0,v>=0?C=C.slice(0,v+1):C=[C[0]];break}}}return C.reduceRight((A,k,_)=>{let V,X=!1,W=null,z=null;a&&(V=I&&k.route.id?I[k.route.id]:void 0,W=k.route.errorElement||hp,S&&(v<0&&_===0?(bp("route-fallback"),X=!0,z=null):v===_&&(X=!0,z=k.route.hydrateFallbackElement||null)));let H=h.concat(C.slice(0,_+1)),T=()=>{let N;return V?N=W:X?N=z:k.route.Component?N=U.createElement(k.route.Component,null):k.route.element?N=k.route.element:N=A,U.createElement(pp,{match:k,routeContext:{outlet:A,matches:H,isDataRoute:a!=null},children:N})};return a&&(k.route.ErrorBoundary||k.route.errorElement||_===0)?U.createElement(fp,{location:a.location,revalidation:a.revalidation,component:W,error:V,children:T(),routeContext:{outlet:null,matches:H,isDataRoute:!0}}):T()},null)}var $0=(function(u){return u.UseBlocker="useBlocker",u.UseRevalidator="useRevalidator",u.UseNavigateStable="useNavigate",u})($0||{}),K0=(function(u){return u.UseBlocker="useBlocker",u.UseLoaderData="useLoaderData",u.UseActionData="useActionData",u.UseRouteError="useRouteError",u.UseNavigation="useNavigation",u.UseRouteLoaderData="useRouteLoaderData",u.UseMatches="useMatches",u.UseRevalidator="useRevalidator",u.UseNavigateStable="useNavigate",u.UseRouteId="useRouteId",u})(K0||{});function mp(u){let h=U.useContext(Fd);return h||an(!1),h}function xp(u){let h=U.useContext(op);return h||an(!1),h}function yp(u){let h=U.useContext(mi);return h||an(!1),h}function Q0(u){let h=yp(),a=h.matches[h.matches.length-1];return a.route.id||an(!1),a.route.id}function vp(){var u;let h=U.useContext(Y0),a=xp(),g=Q0();return h!==void 0?h:(u=a.errors)==null?void 0:u[g]}function wp(){let{router:u}=mp($0.UseNavigateStable),h=Q0(K0.UseNavigateStable),a=U.useRef(!1);return Z0(()=>{a.current=!0}),U.useCallback(function(y,x){x===void 0&&(x={}),a.current&&(typeof y=="number"?u.navigate(y):u.navigate(y,ua({fromRouteId:h},x)))},[u,h])}const $h={};function bp(u,h,a){$h[u]||($h[u]=!0)}function Cp(u,h){u?.v7_startTransition,u?.v7_relativeSplatPath}function J0(u){let{to:h,replace:a,state:g,relative:y}=u;po()||an(!1);let{future:x,static:C}=U.useContext($i),{matches:I}=U.useContext(mi),{pathname:S}=Ts(),v=Wn(),A=zd(h,Ld(I,x.v7_relativeSplatPath),S,y==="path"),k=JSON.stringify(A);return U.useEffect(()=>v(JSON.parse(k),{replace:a,state:g,relative:y}),[v,k,y,a,g]),null}function Yn(u){an(!1)}function Sp(u){let{basename:h="/",children:a=null,location:g,navigationType:y=Xi.Pop,navigator:x,static:C=!1,future:I}=u;po()&&an(!1);let S=h.replace(/^\/*/,"/"),v=U.useMemo(()=>({basename:S,navigator:x,static:C,future:ua({v7_relativeSplatPath:!1},I)}),[S,I,x,C]);typeof g=="string"&&(g=fo(g));let{pathname:A="/",search:k="",hash:_="",state:V=null,key:X="default"}=g,W=U.useMemo(()=>{let z=Bd(A,S);return z==null?null:{location:{pathname:z,search:k,hash:_,state:V,key:X},navigationType:y}},[S,A,k,_,V,X,y]);return W==null?null:U.createElement($i.Provider,{value:v},U.createElement(zl.Provider,{children:a,value:W}))}function Ep(u){let{children:h,location:a}=u;return cp(Ad(h),a)}new Promise(()=>{});function Ad(u,h){h===void 0&&(h=[]);let a=[];return U.Children.forEach(u,(g,y)=>{if(!U.isValidElement(g))return;let x=[...h,y];if(g.type===U.Fragment){a.push.apply(a,Ad(g.props.children,x));return}g.type!==Yn&&an(!1),!g.props.index||!g.props.children||an(!1);let C={id:g.props.id||x.join("-"),caseSensitive:g.props.caseSensitive,element:g.props.element,Component:g.props.Component,index:g.props.index,path:g.props.path,loader:g.props.loader,action:g.props.action,errorElement:g.props.errorElement,ErrorBoundary:g.props.ErrorBoundary,hasErrorBoundary:g.props.ErrorBoundary!=null||g.props.errorElement!=null,shouldRevalidate:g.props.shouldRevalidate,handle:g.props.handle,lazy:g.props.lazy};g.props.children&&(C.children=Ad(g.props.children,x)),a.push(C)}),a}function Id(){return Id=Object.assign?Object.assign.bind():function(u){for(var h=1;h<arguments.length;h++){var a=arguments[h];for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&(u[g]=a[g])}return u},Id.apply(this,arguments)}function Ap(u,h){if(u==null)return{};var a={},g=Object.keys(u),y,x;for(x=0;x<g.length;x++)y=g[x],!(h.indexOf(y)>=0)&&(a[y]=u[y]);return a}function Ip(u){return!!(u.metaKey||u.altKey||u.ctrlKey||u.shiftKey)}function jp(u,h){return u.button===0&&(!h||h==="_self")&&!Ip(u)}const kp=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Np="6";try{window.__reactRouterVersion=Np}catch{}const Tp="startTransition",Kh=I1[Tp];function _p(u){let{basename:h,children:a,future:g,window:y}=u,x=U.useRef();x.current==null&&(x.current=O1({window:y,v5Compat:!0}));let C=x.current,[I,S]=U.useState({action:C.action,location:C.location}),{v7_startTransition:v}=g||{},A=U.useCallback(k=>{v&&Kh?Kh(()=>S(k)):S(k)},[S,v]);return U.useLayoutEffect(()=>C.listen(A),[C,A]),U.useEffect(()=>Cp(g),[g]),U.createElement(Sp,{basename:h,children:a,location:I.location,navigationType:I.action,navigator:C,future:g})}const Rp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Op=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nr=U.forwardRef(function(h,a){let{onClick:g,relative:y,reloadDocument:x,replace:C,state:I,target:S,to:v,preventScrollReset:A,viewTransition:k}=h,_=Ap(h,kp),{basename:V}=U.useContext($i),X,W=!1;if(typeof v=="string"&&Op.test(v)&&(X=v,Rp))try{let N=new URL(window.location.href),P=v.startsWith("//")?new URL(N.protocol+v):new URL(v),D=Bd(P.pathname,V);P.origin===N.origin&&D!=null?v=D+P.search+P.hash:W=!0}catch{}let z=ap(v,{relative:y}),H=Dp(v,{replace:C,state:I,target:S,preventScrollReset:A,relative:y,viewTransition:k});function T(N){g&&g(N),N.defaultPrevented||H(N)}return U.createElement("a",Id({},_,{href:X||z,onClick:W||x?g:T,ref:a,target:S}))});var Qh;(function(u){u.UseScrollRestoration="useScrollRestoration",u.UseSubmit="useSubmit",u.UseSubmitFetcher="useSubmitFetcher",u.UseFetcher="useFetcher",u.useViewTransitionState="useViewTransitionState"})(Qh||(Qh={}));var Jh;(function(u){u.UseFetcher="useFetcher",u.UseFetchers="useFetchers",u.UseScrollRestoration="useScrollRestoration"})(Jh||(Jh={}));function Dp(u,h){let{target:a,replace:g,state:y,preventScrollReset:x,relative:C,viewTransition:I}=h===void 0?{}:h,S=Wn(),v=Ts(),A=q0(u,{relative:C});return U.useCallback(k=>{if(jp(k,a)){k.preventDefault();let _=g!==void 0?g:Rl(v)===Rl(A);S(u,{replace:_,state:y,preventScrollReset:x,relative:C,viewTransition:I})}},[v,S,A,g,y,a,u,x,C,I])}const Pp="modulepreload",Mp=function(u){return"/"+u},e0={},kr=function(h,a,g){let y=Promise.resolve();if(a&&a.length>0){let S=function(v){return Promise.all(v.map(A=>Promise.resolve(A).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const C=document.querySelector("meta[property=csp-nonce]"),I=C?.nonce||C?.getAttribute("nonce");y=S(a.map(v=>{if(v=Mp(v),v in e0)return;e0[v]=!0;const A=v.endsWith(".css"),k=A?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${k}`))return;const _=document.createElement("link");if(_.rel=A?"stylesheet":Pp,A||(_.as="script"),_.crossOrigin="",_.href=v,I&&_.setAttribute("nonce",I),document.head.appendChild(_),A)return new Promise((V,X)=>{_.addEventListener("load",V),_.addEventListener("error",()=>X(new Error(`Unable to preload CSS for ${v}`)))})}))}function x(C){const I=new Event("vite:preloadError",{cancelable:!0});if(I.payload=C,window.dispatchEvent(I),!I.defaultPrevented)throw C}return y.then(C=>{for(const I of C||[])I.status==="rejected"&&x(I.reason);return h().catch(x)})};var Is;(function(u){u.Unimplemented="UNIMPLEMENTED",u.Unavailable="UNAVAILABLE"})(Is||(Is={}));class As extends Error{constructor(h,a,g){super(h),this.message=h,this.code=a,this.data=g}}const Bp=u=>{var h,a;return u?.androidBridge?"android":!((a=(h=u?.webkit)===null||h===void 0?void 0:h.messageHandlers)===null||a===void 0)&&a.bridge?"ios":"web"},Lp=u=>{const h=u.CapacitorCustomPlatform||null,a=u.Capacitor||{},g=a.Plugins=a.Plugins||{},y=()=>h!==null?h.name:Bp(u),x=()=>y()!=="web",C=k=>{const _=v.get(k);return!!(_?.platforms.has(y())||I(k))},I=k=>{var _;return(_=a.PluginHeaders)===null||_===void 0?void 0:_.find(V=>V.name===k)},S=k=>u.console.error(k),v=new Map,A=(k,_={})=>{const V=v.get(k);if(V)return console.warn(`Capacitor plugin "${k}" already registered. Cannot register plugins twice.`),V.proxy;const X=y(),W=I(k);let z;const H=async()=>(!z&&X in _?z=typeof _[X]=="function"?z=await _[X]():z=_[X]:h!==null&&!z&&"web"in _&&(z=typeof _.web=="function"?z=await _.web():z=_.web),z),T=(Q,pe)=>{var Me,be;if(W){const we=W?.methods.find(de=>pe===de.name);if(we)return we.rtype==="promise"?de=>a.nativePromise(k,pe.toString(),de):(de,te)=>a.nativeCallback(k,pe.toString(),de,te);if(Q)return(Me=Q[pe])===null||Me===void 0?void 0:Me.bind(Q)}else{if(Q)return(be=Q[pe])===null||be===void 0?void 0:be.bind(Q);throw new As(`"${k}" plugin is not implemented on ${X}`,Is.Unimplemented)}},N=Q=>{let pe;const Me=(...be)=>{const we=H().then(de=>{const te=T(de,Q);if(te){const Y=te(...be);return pe=Y?.remove,Y}else throw new As(`"${k}.${Q}()" is not implemented on ${X}`,Is.Unimplemented)});return Q==="addListener"&&(we.remove=async()=>pe()),we};return Me.toString=()=>`${Q.toString()}() { [capacitor code] }`,Object.defineProperty(Me,"name",{value:Q,writable:!1,configurable:!1}),Me},P=N("addListener"),D=N("removeListener"),q=(Q,pe)=>{const Me=P({eventName:Q},pe),be=async()=>{const de=await Me;D({eventName:Q,callbackId:de},pe)},we=new Promise(de=>Me.then(()=>de({remove:be})));return we.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await be()},we},F=new Proxy({},{get(Q,pe){switch(pe){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return W?q:P;case"removeListener":return D;default:return N(pe)}}});return g[k]=F,v.set(k,{name:k,proxy:F,platforms:new Set([...Object.keys(_),...W?[X]:[]])}),F};return a.convertFileSrc||(a.convertFileSrc=k=>k),a.getPlatform=y,a.handleError=S,a.isNativePlatform=x,a.isPluginAvailable=C,a.registerPlugin=A,a.Exception=As,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a},zp=u=>u.Capacitor=Lp(u),Ol=zp(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Ki=Ol.registerPlugin;class ga{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(h,a){let g=!1;this.listeners[h]||(this.listeners[h]=[],g=!0),this.listeners[h].push(a);const x=this.windowListeners[h];x&&!x.registered&&this.addWindowListener(x),g&&this.sendRetainedArgumentsForEvent(h);const C=async()=>this.removeListener(h,a);return Promise.resolve({remove:C})}async removeAllListeners(){this.listeners={};for(const h in this.windowListeners)this.removeWindowListener(this.windowListeners[h]);this.windowListeners={}}notifyListeners(h,a,g){const y=this.listeners[h];if(!y){if(g){let x=this.retainedEventArguments[h];x||(x=[]),x.push(a),this.retainedEventArguments[h]=x}return}y.forEach(x=>x(a))}hasListeners(h){var a;return!!(!((a=this.listeners[h])===null||a===void 0)&&a.length)}registerWindowListener(h,a){this.windowListeners[a]={registered:!1,windowEventName:h,pluginEventName:a,handler:g=>{this.notifyListeners(a,g)}}}unimplemented(h="not implemented"){return new Ol.Exception(h,Is.Unimplemented)}unavailable(h="not available"){return new Ol.Exception(h,Is.Unavailable)}async removeListener(h,a){const g=this.listeners[h];if(!g)return;const y=g.indexOf(a);this.listeners[h].splice(y,1),this.listeners[h].length||this.removeWindowListener(this.windowListeners[h])}addWindowListener(h){window.addEventListener(h.windowEventName,h.handler),h.registered=!0}removeWindowListener(h){h&&(window.removeEventListener(h.windowEventName,h.handler),h.registered=!1)}sendRetainedArgumentsForEvent(h){const a=this.retainedEventArguments[h];a&&(delete this.retainedEventArguments[h],a.forEach(g=>{this.notifyListeners(h,g)}))}}const t0=u=>encodeURIComponent(u).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),n0=u=>u.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Fp extends ga{async getCookies(){const h=document.cookie,a={};return h.split(";").forEach(g=>{if(g.length<=0)return;let[y,x]=g.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");y=n0(y).trim(),x=n0(x).trim(),a[y]=x}),a}async setCookie(h){try{const a=t0(h.key),g=t0(h.value),y=`; expires=${(h.expires||"").replace("expires=","")}`,x=(h.path||"/").replace("path=",""),C=h.url!=null&&h.url.length>0?`domain=${h.url}`:"";document.cookie=`${a}=${g||""}${y}; path=${x}; ${C};`}catch(a){return Promise.reject(a)}}async deleteCookie(h){try{document.cookie=`${h.key}=; Max-Age=0`}catch(a){return Promise.reject(a)}}async clearCookies(){try{const h=document.cookie.split(";")||[];for(const a of h)document.cookie=a.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(h){return Promise.reject(h)}}async clearAllCookies(){try{await this.clearCookies()}catch(h){return Promise.reject(h)}}}Ki("CapacitorCookies",{web:()=>new Fp});const Wp=async u=>new Promise((h,a)=>{const g=new FileReader;g.onload=()=>{const y=g.result;h(y.indexOf(",")>=0?y.split(",")[1]:y)},g.onerror=y=>a(y),g.readAsDataURL(u)}),Up=(u={})=>{const h=Object.keys(u);return Object.keys(u).map(y=>y.toLocaleLowerCase()).reduce((y,x,C)=>(y[x]=u[h[C]],y),{})},Vp=(u,h=!0)=>u?Object.entries(u).reduce((g,y)=>{const[x,C]=y;let I,S;return Array.isArray(C)?(S="",C.forEach(v=>{I=h?encodeURIComponent(v):v,S+=`${x}=${I}&`}),S.slice(0,-1)):(I=h?encodeURIComponent(C):C,S=`${x}=${I}`),`${g}&${S}`},"").substr(1):null,ef=(u,h={})=>{const a=Object.assign({method:u.method||"GET",headers:u.headers},h),y=Up(u.headers)["content-type"]||"";if(typeof u.data=="string")a.body=u.data;else if(y.includes("application/x-www-form-urlencoded")){const x=new URLSearchParams;for(const[C,I]of Object.entries(u.data||{}))x.set(C,I);a.body=x.toString()}else if(y.includes("multipart/form-data")||u.data instanceof FormData){const x=new FormData;if(u.data instanceof FormData)u.data.forEach((I,S)=>{x.append(S,I)});else for(const I of Object.keys(u.data))x.append(I,u.data[I]);a.body=x;const C=new Headers(a.headers);C.delete("content-type"),a.headers=C}else(y.includes("application/json")||typeof u.data=="object")&&(a.body=JSON.stringify(u.data));return a};class Hp extends ga{async request(h){const a=ef(h,h.webFetchExtra),g=Vp(h.params,h.shouldEncodeUrlParams),y=g?`${h.url}?${g}`:h.url,x=await fetch(y,a),C=x.headers.get("content-type")||"";let{responseType:I="text"}=x.ok?h:{};C.includes("application/json")&&(I="json");let S,v;switch(I){case"arraybuffer":case"blob":v=await x.blob(),S=await Wp(v);break;case"json":S=await x.json();break;default:S=await x.text()}const A={};return x.headers.forEach((k,_)=>{A[_]=k}),{data:S,headers:A,status:x.status,url:x.url}}async get(h){return this.request(Object.assign(Object.assign({},h),{method:"GET"}))}async post(h){return this.request(Object.assign(Object.assign({},h),{method:"POST"}))}async put(h){return this.request(Object.assign(Object.assign({},h),{method:"PUT"}))}async patch(h){return this.request(Object.assign(Object.assign({},h),{method:"PATCH"}))}async delete(h){return this.request(Object.assign(Object.assign({},h),{method:"DELETE"}))}}Ki("CapacitorHttp",{web:()=>new Hp});var jd;(function(u){u.Dark="DARK",u.Light="LIGHT",u.Default="DEFAULT"})(jd||(jd={}));var kd;(function(u){u.StatusBar="StatusBar",u.NavigationBar="NavigationBar"})(kd||(kd={}));class Gp extends ga{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}Ki("SystemBars",{web:()=>new Gp});const Nd=Object.freeze(Object.defineProperty({__proto__:null,Capacitor:Ol,CapacitorException:As,get ExceptionCode(){return Is},get SystemBarType(){return kd},get SystemBarsStyle(){return jd},WebPlugin:ga,buildRequestInit:ef,registerPlugin:Ki},Symbol.toStringTag,{value:"Module"})),r0=Ki("App",{web:()=>kr(()=>import("./web-CPRcLgCZ.js"),[]).then(u=>new u.AppWeb)});var i0;(function(u){u[u.NONE=0]="NONE",u[u.TOUCH_ID=1]="TOUCH_ID",u[u.FACE_ID=2]="FACE_ID",u[u.FINGERPRINT=3]="FINGERPRINT",u[u.FACE_AUTHENTICATION=4]="FACE_AUTHENTICATION",u[u.IRIS_AUTHENTICATION=5]="IRIS_AUTHENTICATION",u[u.MULTIPLE=6]="MULTIPLE"})(i0||(i0={}));var s0;(function(u){u[u.NONE=0]="NONE",u[u.STRONG=1]="STRONG",u[u.WEAK=2]="WEAK"})(s0||(s0={}));var o0;(function(u){u[u.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",u[u.BIOMETRICS_UNAVAILABLE=1]="BIOMETRICS_UNAVAILABLE",u[u.USER_LOCKOUT=2]="USER_LOCKOUT",u[u.BIOMETRICS_NOT_ENROLLED=3]="BIOMETRICS_NOT_ENROLLED",u[u.USER_TEMPORARY_LOCKOUT=4]="USER_TEMPORARY_LOCKOUT",u[u.AUTHENTICATION_FAILED=10]="AUTHENTICATION_FAILED",u[u.APP_CANCEL=11]="APP_CANCEL",u[u.INVALID_CONTEXT=12]="INVALID_CONTEXT",u[u.NOT_INTERACTIVE=13]="NOT_INTERACTIVE",u[u.PASSCODE_NOT_SET=14]="PASSCODE_NOT_SET",u[u.SYSTEM_CANCEL=15]="SYSTEM_CANCEL",u[u.USER_CANCEL=16]="USER_CANCEL",u[u.USER_FALLBACK=17]="USER_FALLBACK"})(o0||(o0={}));const io=Ki("NativeBiometric",{web:()=>kr(()=>import("./web-D3ibP3Et.js"),[]).then(u=>new u.NativeBiometricWeb)}),so={async isAvailable(){try{return(await io.isAvailable()).isAvailable}catch(u){return console.error("Biometric not available:",u),!1}},async authenticate(){try{const u=await io.verifyIdentity({reason:"Authenticate to access Guest Scanner",title:"Biometric Authentication",subtitle:"Please verify your identity",description:"Use your fingerprint or face to login",maxAttempts:3});return console.log("Biometric verification result:",u),!(u&&u.verified===!1)}catch(u){return console.error("Biometric authentication failed:",{code:u.code,message:u.message,error:u}),u.code===10?console.log("User cancelled biometric auth"):u.code===13&&console.log("Too many biometric auth attempts"),!1}},async saveCredentials(u,h,a){try{await io.setCredentials({username:h,password:a,server:u})}catch(g){console.error("Failed to save credentials:",g)}},async getCredentials(u){try{return await io.getCredentials({server:u})}catch(h){return console.error("Failed to get credentials:",h),null}},async hasCredentials(u){try{const h=await io.getCredentials({server:u});return h&&h.username&&h.password}catch{return!1}},async deleteCredentials(u){try{await io.deleteCredentials({server:u})}catch(h){console.error("Failed to delete credentials:",h)}}},a0=Object.freeze(Object.defineProperty({__proto__:null,BiometricService:so},Symbol.toStringTag,{value:"Module"})),oo=async(u,h={},a=3,g=3e4)=>{for(let y=0;y<a;y++)try{const x=new AbortController,C=setTimeout(()=>x.abort(),g),I=await fetch(u,{...h,signal:x.signal});return clearTimeout(C),I}catch(x){if(y===a-1)throw x;const I=Math.pow(2,y)*1e3;console.log(`Fetch failed (attempt ${y+1}/${a}), retrying in ${I}ms...`),await new Promise(S=>setTimeout(S,I))}};var fd={},l0;function Xp(){return l0||(l0=1,(function(u){Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function h(H,T){const N=H.indexOf(T);N!==-1&&H.splice(N,1)}const a=()=>{};var g=(H=>(H[H.None=0]="None",H[H.Fatal=1]="Fatal",H[H.Error=2]="Error",H[H.Warn=3]="Warn",H[H.Info=4]="Info",H[H.Debug=5]="Debug",H[H.Verbose=6]="Verbose",H))(g||{});class y{setLogLevel(T){window.cordova.exec(a,a,"OneSignalPush","setLogLevel",[T])}setAlertLevel(T){window.cordova.exec(a,a,"OneSignalPush","setAlertLevel",[T])}}class x{constructor(){this._inAppMessageClickListeners=[],this._willDisplayInAppMessageListeners=[],this._didDisplayInAppMessageListeners=[],this._willDismissInAppMessageListeners=[],this._didDismissInAppMessageListeners=[]}_processFunctionList(T,N){for(let P=0;P<T.length;P++)T[P](N)}addEventListener(T,N){if(T==="click"){this._inAppMessageClickListeners.push(N);const P=D=>{this._processFunctionList(this._inAppMessageClickListeners,D)};window.cordova.exec(P,a,"OneSignalPush","setInAppMessageClickHandler",[])}else if(T==="willDisplay"){this._willDisplayInAppMessageListeners.push(N);const P=D=>{this._processFunctionList(this._willDisplayInAppMessageListeners,D)};window.cordova.exec(P,a,"OneSignalPush","setOnWillDisplayInAppMessageHandler",[])}else if(T==="didDisplay"){this._didDisplayInAppMessageListeners.push(N);const P=D=>{this._processFunctionList(this._didDisplayInAppMessageListeners,D)};window.cordova.exec(P,a,"OneSignalPush","setOnDidDisplayInAppMessageHandler",[])}else if(T==="willDismiss"){this._willDismissInAppMessageListeners.push(N);const P=D=>{this._processFunctionList(this._willDismissInAppMessageListeners,D)};window.cordova.exec(P,a,"OneSignalPush","setOnWillDismissInAppMessageHandler",[])}else if(T==="didDismiss"){this._didDismissInAppMessageListeners.push(N);const P=D=>{this._processFunctionList(this._didDismissInAppMessageListeners,D)};window.cordova.exec(P,a,"OneSignalPush","setOnDidDismissInAppMessageHandler",[])}}removeEventListener(T,N){T==="click"?h(this._inAppMessageClickListeners,N):T==="willDisplay"?h(this._willDisplayInAppMessageListeners,N):T==="didDisplay"?h(this._didDisplayInAppMessageListeners,N):T==="willDismiss"?h(this._willDismissInAppMessageListeners,N):T==="didDismiss"&&h(this._didDismissInAppMessageListeners,N)}addTrigger(T,N){const P={[T]:N};this.addTriggers(P)}addTriggers(T){Object.keys(T).forEach(function(N){typeof T[N]!="string"&&(T[N]=JSON.stringify(T[N]))}),window.cordova.exec(a,a,"OneSignalPush","addTriggers",[T])}removeTrigger(T){this.removeTriggers([T])}removeTriggers(T){Array.isArray(T)||console.error("OneSignal: removeTriggers: argument must be of type Array"),window.cordova.exec(a,a,"OneSignalPush","removeTriggers",[T])}clearTriggers(){window.cordova.exec(a,a,"OneSignalPush","clearTriggers")}setPaused(T){window.cordova.exec(a,a,"OneSignalPush","setPaused",[T])}getPaused(){return new Promise((T,N)=>{window.cordova.exec(T,N,"OneSignalPush","isPaused",[])})}}class C{enter(T,N,P,D){P==null&&(P=a),D==null&&(D=a),window.cordova.exec(P,D,"OneSignalPush","enterLiveActivity",[T,N])}exit(T,N,P){N==null&&(N=a),P==null&&(P=a),window.cordova.exec(N,P,"OneSignalPush","exitLiveActivity",[T])}setPushToStartToken(T,N){window.cordova.exec(a,a,"OneSignalPush","setPushToStartToken",[T,N])}removePushToStartToken(T){window.cordova.exec(a,a,"OneSignalPush","removePushToStartToken",[T])}setupDefault(T){window.cordova.exec(a,a,"OneSignalPush","setupDefaultLiveActivity",[T])}startDefault(T,N,P){window.cordova.exec(a,a,"OneSignalPush","startDefaultLiveActivity",[T,N,P])}}class I{requestPermission(){window.cordova.exec(a,a,"OneSignalPush","requestLocationPermission",[])}setShared(T){window.cordova.exec(a,a,"OneSignalPush","setLocationShared",[T])}isShared(){return new Promise((T,N)=>{window.cordova.exec(T,N,"OneSignalPush","isLocationShared",[])})}}class S{constructor(T){this.notificationId=T.notificationId,this.body=T.body,this.title=T.title,this.additionalData=T.additionalData,typeof T.rawPayload=="string"?this.rawPayload=JSON.parse(T.rawPayload):this.rawPayload=T.rawPayload,this.launchURL=T.launchURL,this.sound=T.sound,T.actionButtons&&(this.actionButtons=T.actionButtons),T.groupKey&&(this.groupKey=T.groupKey),T.ledColor&&(this.ledColor=T.ledColor),typeof T.priority<"u"&&(this.priority=T.priority),T.smallIcon&&(this.smallIcon=T.smallIcon),T.largeIcon&&(this.largeIcon=T.largeIcon),T.bigPicture&&(this.bigPicture=T.bigPicture),T.collapseId&&(this.collapseId=T.collapseId),T.groupMessage&&(this.groupMessage=T.groupMessage),T.fromProjectNumber&&(this.fromProjectNumber=T.fromProjectNumber),T.smallIconAccentColor&&(this.smallIconAccentColor=T.smallIconAccentColor),T.lockScreenVisibility&&(this.lockScreenVisibility=T.lockScreenVisibility),T.androidNotificationId&&(this.androidNotificationId=T.androidNotificationId),T.groupedNotifications&&T.groupedNotifications.length&&(this.groupedNotifications=T.groupedNotifications),T.badge&&(this.badge=T.badge),T.category&&(this.category=T.category),T.threadId&&(this.threadId=T.threadId),T.subtitle&&(this.subtitle=T.subtitle),T.templateId&&(this.templateId=T.templateId),T.attachments&&(this.attachments=T.attachments),T.templateName&&(this.templateName=T.templateName),T.mutableContent&&(this.mutableContent=T.mutableContent),T.badgeIncrement&&(this.badgeIncrement=T.badgeIncrement),T.contentAvailable&&(this.contentAvailable=T.contentAvailable),T.relevanceScore&&(this.relevanceScore=T.relevanceScore),T.interruptionLevel&&(this.interruptionLevel=T.interruptionLevel)}display(){window.cordova.exec(a,a,"OneSignalPush","displayNotification",[this.notificationId])}}class v{constructor(T){this.notification=new S(T)}preventDefault(T=!1){window.cordova.exec(a,a,"OneSignalPush","preventDefault",[this.notification.notificationId,T])}getNotification(){return this.notification}}var A=(H=>(H[H.NotDetermined=0]="NotDetermined",H[H.Denied=1]="Denied",H[H.Authorized=2]="Authorized",H[H.Provisional=3]="Provisional",H[H.Ephemeral=4]="Ephemeral",H))(A||{});class k{constructor(){this._permissionObserverList=[],this._notificationClickedListeners=[],this._notificationWillDisplayListeners=[]}_processFunctionList(T,N){for(let P=0;P<T.length;P++)T[P](N)}_setPropertyAndObserver(){const T=N=>{this._permission=N};window.cordova.exec(T,a,"OneSignalPush","getPermissionInternal"),this.addEventListener("permissionChange",N=>{this._permission=N})}hasPermission(){return this._permission||!1}getPermissionAsync(){return new Promise((T,N)=>{window.cordova.exec(T,N,"OneSignalPush","getPermissionInternal")})}permissionNative(){return new Promise((T,N)=>{window.cordova.exec(T,N,"OneSignalPush","permissionNative",[])})}requestPermission(T){let N=T??!1;return new Promise((P,D)=>{window.cordova.exec(P,D,"OneSignalPush","requestPermission",[N])})}canRequestPermission(){return new Promise((T,N)=>{window.cordova.exec(T,N,"OneSignalPush","canRequestPermission",[])})}registerForProvisionalAuthorization(T=a){window.cordova.exec(T,a,"OneSignalPush","registerForProvisionalAuthorization",[])}addEventListener(T,N){if(T==="click"){this._notificationClickedListeners.push(N);const P=D=>{this._processFunctionList(this._notificationClickedListeners,D)};window.cordova.exec(P,a,"OneSignalPush","addNotificationClickListener",[])}else if(T==="foregroundWillDisplay"){this._notificationWillDisplayListeners.push(N);const P=D=>{this._notificationWillDisplayListeners.forEach(q=>{q(new v(D))}),window.cordova.exec(a,a,"OneSignalPush","proceedWithWillDisplay",[D.notificationId])};window.cordova.exec(P,a,"OneSignalPush","addForegroundLifecycleListener",[])}else if(T==="permissionChange"){this._permissionObserverList.push(N);const P=D=>{this._processFunctionList(this._permissionObserverList,D)};window.cordova.exec(P,a,"OneSignalPush","addPermissionObserver",[])}}removeEventListener(T,N){T==="click"?h(this._notificationClickedListeners,N):T==="foregroundWillDisplay"?h(this._notificationWillDisplayListeners,N):T==="permissionChange"&&h(this._permissionObserverList,N)}clearAll(){window.cordova.exec(a,a,"OneSignalPush","clearAllNotifications",[])}removeNotification(T){window.cordova.exec(a,a,"OneSignalPush","removeNotification",[T])}removeGroupedNotifications(T){window.cordova.exec(a,a,"OneSignalPush","removeGroupedNotifications",[T])}}class _{addOutcome(T){window.cordova.exec(a,a,"OneSignalPush","addOutcome",[T])}addUniqueOutcome(T){window.cordova.exec(a,a,"OneSignalPush","addUniqueOutcome",[T])}addOutcomeWithValue(T,N){window.cordova.exec(a,a,"OneSignalPush","addOutcomeWithValue",[T,N])}}class V{constructor(){this._subscriptionObserverList=[]}_processFunctionList(T,N){for(let P=0;P<T.length;P++)T[P](N)}_setPropertiesAndObserver(){const T=D=>{this._id=D};window.cordova.exec(T,a,"OneSignalPush","getPushSubscriptionId");const N=D=>{this._token=D};window.cordova.exec(N,a,"OneSignalPush","getPushSubscriptionToken");const P=D=>{this._optedIn=D};window.cordova.exec(P,a,"OneSignalPush","getPushSubscriptionOptedIn"),this.addEventListener("change",D=>{this._id=D.current.id,this._token=D.current.token,this._optedIn=D.current.optedIn})}get id(){return console.warn("OneSignal: This method has been deprecated. Use getIdAsync instead for getting push subscription id."),this._id}get token(){return console.warn("OneSignal: This method has been deprecated. Use getTokenAsync instead for getting push subscription token."),this._token}get optedIn(){return console.warn("OneSignal: This method has been deprecated. Use getOptedInAsync instead for getting push subscription opted in status."),this._optedIn||!1}getIdAsync(){return new Promise((T,N)=>{window.cordova.exec(T,N,"OneSignalPush","getPushSubscriptionId")})}getTokenAsync(){return new Promise((T,N)=>{window.cordova.exec(T,N,"OneSignalPush","getPushSubscriptionToken")})}getOptedInAsync(){return new Promise((T,N)=>{window.cordova.exec(T,N,"OneSignalPush","getPushSubscriptionOptedIn")})}addEventListener(T,N){this._subscriptionObserverList.push(N);const P=D=>{this._processFunctionList(this._subscriptionObserverList,D)};window.cordova.exec(P,a,"OneSignalPush","addPushSubscriptionObserver",[])}removeEventListener(T,N){h(this._subscriptionObserverList,N)}optIn(){window.cordova.exec(a,a,"OneSignalPush","optInPushSubscription")}optOut(){window.cordova.exec(a,a,"OneSignalPush","optOutPushSubscription")}}class X{constructor(){this.pushSubscription=new V,this._userStateObserverList=[]}_processFunctionList(T,N){for(let P=0;P<T.length;P++)T[P](N)}setLanguage(T){window.cordova.exec(a,a,"OneSignalPush","setLanguage",[T])}addAlias(T,N){const P={[T]:N};window.cordova.exec(a,a,"OneSignalPush","addAliases",[P])}addAliases(T){window.cordova.exec(a,a,"OneSignalPush","addAliases",[T])}removeAlias(T){window.cordova.exec(a,a,"OneSignalPush","removeAliases",[T])}removeAliases(T){window.cordova.exec(a,a,"OneSignalPush","removeAliases",T)}addEmail(T){window.cordova.exec(a,a,"OneSignalPush","addEmail",[T])}removeEmail(T){window.cordova.exec(a,a,"OneSignalPush","removeEmail",[T])}addSms(T){window.cordova.exec(a,a,"OneSignalPush","addSms",[T])}removeSms(T){window.cordova.exec(a,a,"OneSignalPush","removeSms",[T])}addTag(T,N){const P={[T]:N};window.cordova.exec(a,a,"OneSignalPush","addTags",[P])}addTags(T){const N=T;Object.keys(T).forEach(function(P){typeof N[P]!="string"&&(N[P]=JSON.stringify(N[P]))}),window.cordova.exec(a,a,"OneSignalPush","addTags",[N])}removeTag(T){window.cordova.exec(a,a,"OneSignalPush","removeTags",[T])}removeTags(T){window.cordova.exec(a,a,"OneSignalPush","removeTags",T)}getTags(){return new Promise((T,N)=>{window.cordova.exec(T,N,"OneSignalPush","getTags",[])})}addEventListener(T,N){this._userStateObserverList.push(N);const P=D=>{this._processFunctionList(this._userStateObserverList,D)};window.cordova.exec(P,a,"OneSignalPush","addUserStateObserver",[])}removeEventListener(T,N){h(this._userStateObserverList,N)}getOnesignalId(){return new Promise((T,N)=>{window.cordova.exec(T,N,"OneSignalPush","getOnesignalId",[])})}getExternalId(){return new Promise((T,N)=>{window.cordova.exec(T,N,"OneSignalPush","getExternalId",[])})}}class W{constructor(){this.User=new X,this.Debug=new y,this.Session=new _,this.Location=new I,this.InAppMessages=new x,this.Notifications=new k,this.LiveActivities=new C,this._appID=""}initialize(T){this._appID=T;const N=()=>{this.User.pushSubscription._setPropertiesAndObserver(),this.Notifications._setPropertyAndObserver()};window.cordova.exec(N,a,"OneSignalPush","init",[this._appID])}login(T){window.cordova.exec(a,a,"OneSignalPush","login",[T])}logout(){window.cordova.exec(a,a,"OneSignalPush","logout")}setConsentRequired(T){window.cordova.exec(a,a,"OneSignalPush","setPrivacyConsentRequired",[T])}setConsentGiven(T){window.cordova.exec(a,a,"OneSignalPush","setPrivacyConsentGiven",[T])}}const z=new W;window.plugins||(window.plugins={}),window.plugins.OneSignal||(window.plugins.OneSignal=z),u.LogLevel=g,u.NotificationWillDisplayEvent=v,u.OSNotification=S,u.OSNotificationPermission=A,u.OneSignalPlugin=W,u.default=z})(fd)),fd}Xp();const Yp="a2ee0c7f-460f-4d5e-a36f-635a0492d6b5",Es="https://gatherly-backend-3vmv.onrender.com";class Zp{constructor(){this.initialized=!1,this.userId=null,this.playerId=null}getOneSignal(){return window.plugins?.OneSignal||window.OneSignal}async initialize(){if(this.initialized){console.log("OneSignal already initialized");return}await this.waitForOneSignal();try{console.log(" Initializing OneSignal..."),window.plugins.OneSignal.initialize(Yp),this.setupNotificationHandlers(),console.log(" Requesting notification permission..."),window.plugins.OneSignal.Notifications.requestPermission(!0).then(h=>{console.log(" Notification permission:",h?"Granted":"Denied")}),this.initialized=!0,console.log(" OneSignal initialized successfully")}catch(h){console.error(" Error initializing OneSignal:",h)}}async waitForOneSignal(){return new Promise(h=>{if(window.plugins?.OneSignal){h();return}const a=setInterval(()=>{window.plugins?.OneSignal&&(clearInterval(a),h())},100);setTimeout(()=>{clearInterval(a),window.plugins?.OneSignal||console.error(" OneSignal not available after timeout"),h()},1e4)})}setupNotificationHandlers(){window.plugins.OneSignal.Notifications.addEventListener("foregroundWillDisplay",h=>{console.log(" Notification will display in foreground:",h),h.preventDefault(),h.notification.display()}),window.plugins.OneSignal.Notifications.addEventListener("click",h=>{console.log(" Notification clicked:",h);const a=h.notification.additionalData;a&&this.handleNotificationTap(a)})}handleNotificationTap(h){switch(console.log(" Handling notification tap:",h),h.type){case"guest_added":h.eventId&&(window.location.href=`/event/${h.eventId}`);break;case"event_wall_post":h.eventId&&(window.location.href=`/event/${h.eventId}/wall`);break;default:console.log("Unknown notification type:",h.type)}}async registerDevice(h,a){try{this.userId=h;const g=await window.plugins.OneSignal.User.pushSubscription.getIdAsync();if(!g){console.error("No OneSignal subscription ID available");return}this.playerId=g,console.log(" OneSignal Subscription ID:",this.playerId);const y=this.getPlatform();if(!(await fetch(`${Es}/notifications/register-device`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({playerId:this.playerId,platform:y})})).ok)throw new Error("Failed to register device");window.plugins.OneSignal.login(h),console.log(" Device registered successfully")}catch(g){console.error(" Error registering device:",g)}}async unregisterDevice(){try{if(!this.playerId)return;window.plugins.OneSignal.logout(),console.log(" Device unregistered"),this.userId=null}catch(h){console.error(" Error unregistering device:",h)}}async getUnreadCount(h){try{const a=await fetch(`${Es}/notifications/unread-count`,{headers:{Authorization:`Bearer ${h}`}});return a.ok&&(await a.json()).count||0}catch(a){return console.error("Error fetching unread count:",a),0}}getPlatform(){const h=navigator.userAgent||navigator.vendor||window.opera;return/android/i.test(h)?"android":/iPad|iPhone|iPod/.test(h)&&!window.MSStream?"ios":"web"}async getUnreadCount(h){try{const a=await fetch(`${Es}/notifications/unread-count`,{headers:{Authorization:`Bearer ${h}`}});if(!a.ok)throw new Error("Failed to get unread count");return(await a.json()).count||0}catch(a){return console.error("Error getting unread count:",a),0}}async getNotifications(h,a={}){try{const{limit:g=20,offset:y=0,unreadOnly:x=!1}=a,C=new URLSearchParams({limit:g.toString(),offset:y.toString(),unreadOnly:x.toString()}),I=await fetch(`${Es}/notifications?${C}`,{headers:{Authorization:`Bearer ${h}`}});if(!I.ok)throw new Error("Failed to fetch notifications");return await I.json()}catch(g){return console.error("Error fetching notifications:",g),{notifications:[],hasMore:!1}}}async markAsRead(h,a){try{if(!(await fetch(`${Es}/notifications/${h}/read`,{method:"PATCH",headers:{Authorization:`Bearer ${a}`}})).ok)throw new Error("Failed to mark notification as read");return!0}catch(g){return console.error("Error marking notification as read:",g),!1}}async markAllAsRead(h){try{if(!(await fetch(`${Es}/notifications/mark-all-read`,{method:"PATCH",headers:{Authorization:`Bearer ${h}`}})).ok)throw new Error("Failed to mark all notifications as read");return!0}catch(a){return console.error("Error marking all notifications as read:",a),!1}}async deleteNotification(h,a){try{if(!(await fetch(`${Es}/notifications/${h}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})).ok)throw new Error("Failed to delete notification");return!0}catch(g){return console.error("Error deleting notification:",g),!1}}}const Yi=new Zp,tf=U.createContext(),El="https://gatherly-backend-3vmv.onrender.com/api",qp=({children:u})=>{const[h,a]=U.useState(null),[g,y]=U.useState(localStorage.getItem("token")),[x,C]=U.useState(!0),[I,S]=U.useState(!1),v="hosteze-app";U.useEffect(()=>{(async()=>{const N=localStorage.getItem("token");if(N){if(N.startsWith("guest_")){const P=localStorage.getItem("guestUser");P&&a(JSON.parse(P)),C(!1);return}try{const P=await oo(`${El}/auth/me`,{headers:{Authorization:`Bearer ${N}`}},3,15e3);if(P.ok){const D=await P.json();a(D.user),y(N)}else localStorage.removeItem("token"),y(null)}catch(P){console.error("Auth check failed:",P),localStorage.removeItem("token"),y(null)}}C(!1)})(),so.isAvailable().then(S)},[g]);const A=async(T,N,P,D)=>{const q=await oo(`${El}/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:T,email:N,phone:D,password:P})},3,3e4);if(!q.ok){const Q=await q.json();throw new Error(Q.error||"Signup failed")}return await q.json()},k=async(T,N,P=!1)=>{const D=P?{phone:T,password:N}:{email:T,password:N},q=await oo(`${El}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)},3,3e4);if(!q.ok){const Q=await q.json();throw new Error(Q.error||"Login failed")}const F=await q.json();localStorage.setItem("token",F.token),y(F.token),a(F.user);try{await Yi.registerDevice(F.user.id,F.token)}catch(Q){console.error("Failed to register device for push notifications:",Q)}return F},_=async()=>{try{if(!await so.authenticate())throw new Error("Biometric authentication failed");const N=await so.getCredentials(v);if(!N||!N.username||!N.password)throw new Error("No saved credentials found");await k(N.username,N.password)}catch(T){throw console.error("Biometric login failed:",T),T}},V=async(T,N)=>{try{await so.saveCredentials(v,T,N)}catch(P){throw console.error("Failed to enable biometric:",P),P}},X=async()=>{try{await so.deleteCredentials(v)}catch(T){throw console.error("Failed to disable biometric:",T),T}},W=()=>{const T=Math.floor(1e4+Math.random()*9e4),N=`guest-${T}`,P={id:N,name:`Guest ${T}`,email:`${N}@guest.local`,isGuest:!0},D=`guest_${N}`;localStorage.setItem("token",D),localStorage.setItem("guestUser",JSON.stringify(P)),y(D),a(P)},z=()=>{Yi.unregisterDevice().catch(T=>{console.error("Failed to unregister device:",T)}),localStorage.removeItem("token"),localStorage.removeItem("guestUser"),y(null),a(null)},H=async()=>{const T=localStorage.getItem("token");if(!(!T||T.startsWith("guest_")))try{const N=await oo(`${El}/auth/me`,{headers:{Authorization:`Bearer ${T}`}},3,15e3);if(N.ok){const P=await N.json();a(P.user)}}catch(N){console.error("Failed to refresh user:",N)}};return r.jsx(tf.Provider,{value:{user:h,token:g,loading:x,biometricAvailable:I,signup:A,login:k,loginWithBiometric:_,enableBiometric:V,disableBiometric:X,continueAsGuest:W,logout:z,refreshUser:H,isAuthenticated:!!h},children:u})},Wr=()=>{const u=U.useContext(tf);if(!u)throw new Error("useAuth must be used within an AuthProvider");return u},Rn=[];for(let u=0;u<256;++u)Rn.push((u+256).toString(16).slice(1));function $p(u,h=0){return(Rn[u[h+0]]+Rn[u[h+1]]+Rn[u[h+2]]+Rn[u[h+3]]+"-"+Rn[u[h+4]]+Rn[u[h+5]]+"-"+Rn[u[h+6]]+Rn[u[h+7]]+"-"+Rn[u[h+8]]+Rn[u[h+9]]+"-"+Rn[u[h+10]]+Rn[u[h+11]]+Rn[u[h+12]]+Rn[u[h+13]]+Rn[u[h+14]]+Rn[u[h+15]]).toLowerCase()}let pd;const Kp=new Uint8Array(16);function Qp(){if(!pd){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");pd=crypto.getRandomValues.bind(crypto)}return pd(Kp)}const Jp=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),c0={randomUUID:Jp};function eg(u,h,a){u=u||{};const g=u.random??u.rng?.()??Qp();if(g.length<16)throw new Error("Random bytes length must be >= 16");return g[6]=g[6]&15|64,g[8]=g[8]&63|128,$p(g)}function Al(u,h,a){return c0.randomUUID&&!u?c0.randomUUID():eg(u)}const nf=U.createContext(),Sn="https://gatherly-backend-3vmv.onrender.com/api",tg=({children:u})=>{const{user:h}=Wr(),[a,g]=U.useState([]),[y,x]=U.useState([]),[C,I]=U.useState(!0),[S,v]=U.useState(null),A=()=>{const de=localStorage.getItem("token");return de?{"Content-Type":"application/json",Authorization:`Bearer ${de}`}:{"Content-Type":"application/json"}},k=async()=>{try{const de=localStorage.getItem("token");if(console.log("Fetching events, token exists:",!!de),de?.startsWith("guest_")){const J=localStorage.getItem("guestEvents");g(J?JSON.parse(J):[]),I(!1);return}console.log("Fetching from server with headers");const te=await oo(`${Sn}/events`,{headers:A()},3,3e4);if(console.log("Fetch response status:",te.status),!te.ok){if(te.status===401){console.error("401 Unauthorized - clearing token"),localStorage.removeItem("token"),g([]);return}throw new Error("Failed to fetch events")}const Y=await te.json();console.log("Events fetched successfully:",Y.length,"events"),g(Y)}catch(de){console.error("Error fetching events:",de),v("Could not connect to server. Backend may be starting up, please wait...")}finally{I(!1)}},_=async()=>{try{if(console.log(" FETCH-CONTACTS: Starting fetch..."),localStorage.getItem("token")?.startsWith("guest_")){const Y=localStorage.getItem("guestContacts");x(Y?JSON.parse(Y):[]),console.log(" FETCH-CONTACTS: Loaded guest contacts from localStorage");return}const te=await oo(`${Sn}/contacts`,{headers:A()},3,3e4);if(te.ok){const Y=await te.json();console.log(" FETCH-CONTACTS: Received",Y.length,"contacts from server"),x(Y)}else console.error(" FETCH-CONTACTS: Request failed with status",te.status)}catch(de){console.error(" FETCH-CONTACTS: Error -",de)}};U.useEffect(()=>{const de=localStorage.getItem("token");if(!de){I(!1);return}if(k(),_(),!de.startsWith("guest_")){const te=setInterval(()=>{if(!localStorage.getItem("token")){clearInterval(te);return}k(),_()},5e3),Y=setInterval(async()=>{try{await fetch(`${Sn}/health`,{method:"GET"}),console.log("Backend keep-alive ping sent")}catch(J){console.log("Keep-alive ping failed:",J)}},24e4);return()=>{clearInterval(te),clearInterval(Y)}}},[h]);const V=async de=>{const te={id:Al(),createdAt:new Date().toISOString(),guests:[],...de};if(g(J=>[te,...J]),localStorage.getItem("token")?.startsWith("guest_")){const J=[te,...a];return localStorage.setItem("guestEvents",JSON.stringify(J)),te}else try{const J=await fetch(`${Sn}/events`,{method:"POST",headers:A(),body:JSON.stringify(de)});if(!J.ok)throw console.error("Failed to save event to server:",J.status),g(ce=>ce.filter(Ce=>Ce.id!==te.id)),new Error("Failed to save event");const se=await J.json();return console.log("Event saved successfully:",se),g(ce=>ce.map(Ce=>Ce.id===te.id?se:Ce)),se}catch(J){throw console.error("Error saving event:",J),g(se=>se.filter(ce=>ce.id!==te.id)),J}},X=async de=>{g(te=>te.filter(Y=>Y.id!==de));try{const te=await fetch(`${Sn}/events/${de}`,{method:"DELETE",headers:A()});if(!te.ok)throw console.error("Failed to delete event on server:",te.status),await k(),new Error("Failed to delete event")}catch(te){throw console.error("Error deleting event:",te),await k(),te}},W=de=>a.find(te=>te.id===de),z=async(de,te)=>{const Y={id:Al(),addedAt:new Date().toISOString(),attended:!1,attendedCount:0,...te};g(J=>J.map(se=>se.id===de?{...se,guests:[...se.guests,Y]}:se));try{const J=await fetch(`${Sn}/events/${de}/guests`,{method:"POST",headers:A(),body:JSON.stringify({...te,email:te.email&&te.email.trim()?te.email:null,phone:te.phone&&te.phone.trim()?te.phone:null})});if(!J.ok)throw console.error("Failed to add guest to server:",J.status),g(ce=>ce.map(Ce=>Ce.id===de?{...Ce,guests:Ce.guests.filter($=>$.id!==Y.id)}:Ce)),new Error("Failed to add guest");const se=await J.json();return console.log("Guest added successfully:",se),console.log(" ADD-GUEST: Guest contact_id:",se.contact_id),g(ce=>ce.map(Ce=>Ce.id===de?{...Ce,guests:Ce.guests.map($=>$.id===Y.id?se:$)}:Ce)),console.log(" ADD-GUEST: Calling fetchContacts to refresh..."),await _(),console.log(" ADD-GUEST: fetchContacts completed"),se}catch(J){throw console.error("Error adding guest:",J),g(se=>se.map(ce=>ce.id===de?{...ce,guests:ce.guests.filter(Ce=>Ce.id!==Y.id)}:ce)),J}},H=async(de,te,Y=1)=>{console.log("markGuestAttended called:",{eventId:de,guestId:te,count:Y}),g(J=>J.map(se=>se.id===de?{...se,guests:se.guests.map(ce=>ce.id===te?{...ce,attended:!0,attendedCount:(ce.attendedCount||0)+Y,checkInTime:new Date().toISOString()}:ce)}:se));try{const J=await fetch(`${Sn}/events/${de}/guests/${te}/checkin`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({count:Y})});if(!J.ok){const se=await J.json();throw console.error("Check-in API failed:",se),new Error(se.error||"Failed to check in guest")}console.log("Check-in successful"),await k()}catch(J){throw console.error("markGuestAttended error:",J),g(se=>se.map(ce=>ce.id===de?{...ce,guests:ce.guests.map(Ce=>Ce.id===te?{...Ce,attended:!1,attendedCount:Math.max(0,(Ce.attendedCount||0)-Y),checkInTime:null}:Ce)}:ce)),J}},T=async(de,te,Y)=>{const J=a;g(se=>se.map(ce=>ce.id===de?{...ce,guests:ce.guests.map(Ce=>Ce.id===te?{...Ce,rsvp:Y,rsvpTime:new Date().toISOString()}:Ce)}:ce));try{if(!(await fetch(`${Sn}/events/${de}/guests/${te}/rsvp`,{method:"PUT",headers:{...A(),"Content-Type":"application/json"},body:JSON.stringify({rsvp:Y})})).ok)throw new Error("Failed to update RSVP")}catch(se){throw console.error("RSVP update failed:",se),g(J),se}},N=async(de,te)=>{const Y=te.map(J=>({id:Al(),addedAt:new Date().toISOString(),attended:!1,attendedCount:0,...J}));g(J=>J.map(se=>se.id===de?{...se,guests:[...se.guests,...Y]}:se));try{const J=await fetch(`${Sn}/events/${de}/guests/bulk`,{method:"POST",headers:A(),body:JSON.stringify({guests:te})});if(!J.ok)throw console.error("Failed to add guests to server:",J.status),g(Ce=>Ce.map($=>{if($.id===de){const B=Y.map(oe=>oe.id);return{...$,guests:$.guests.filter(oe=>!B.includes(oe.id))}}return $})),new Error("Failed to add guests");const se=await J.json(),ce=se.added||se;return se.skipped&&se.skipped.length>0&&console.log(`Skipped ${se.skipped.length} duplicate guests:`,se.skipped),console.log("Bulk guests added successfully"),g(Ce=>Ce.map($=>{if($.id===de){const B=$.guests.filter(oe=>!Y.some(Ee=>Ee.id===oe.id));return{...$,guests:[...B,...ce]}}return $})),ce}catch(J){throw console.error("Error adding bulk guests:",J),g(se=>se.map(ce=>{if(ce.id===de){const Ce=Y.map($=>$.id);return{...ce,guests:ce.guests.filter($=>!Ce.includes($.id))}}return ce})),J}},P=async(de,te)=>{let Y=null;g(J=>J.map(se=>se.id===de?(Y=se.guests.find(ce=>ce.id===te),{...se,guests:se.guests.filter(ce=>ce.id!==te)}):se));try{const J=await fetch(`${Sn}/events/${de}/guests/${te}`,{method:"DELETE",headers:A()});if(!J.ok)throw console.error("Failed to delete guest from server:",J.status),Y&&g(se=>se.map(ce=>ce.id===de?{...ce,guests:[...ce.guests,Y]}:ce)),new Error("Failed to delete guest");console.log("Guest deleted successfully")}catch(J){throw console.error("Error deleting guest:",J),Y&&g(se=>se.map(ce=>ce.id===de?{...ce,guests:[...ce.guests,Y]}:ce)),J}},D=async(de,te)=>{const Y=[...a];if(g(se=>se.map(ce=>ce.id===de?{...ce,...te}:ce)),localStorage.getItem("token")?.startsWith("guest_")){const se=a.map(ce=>ce.id===de?{...ce,...te}:ce);localStorage.setItem("guestEvents",JSON.stringify(se))}else try{const se=await fetch(`${Sn}/events/${de}`,{method:"PUT",headers:A(),body:JSON.stringify(te)});if(!se.ok)throw console.error("Failed to update event, reverting:",se.status),g(Y),new Error("Failed to update event")}catch(se){throw console.error("Error updating event:",se),g(Y),se}},q=async de=>{if(localStorage.getItem("token")?.startsWith("guest_")){const J={id:Al(),...de,addedAt:new Date().toISOString()},se=[...y,J];return x(se),localStorage.setItem("guestContacts",JSON.stringify(se)),J}const Y=await fetch(`${Sn}/contacts`,{method:"POST",headers:A(),body:JSON.stringify(de)});if(Y.ok){const J=await Y.json();return x(se=>[...se,J]),J}},F=async(de,te)=>{if(localStorage.getItem("token")?.startsWith("guest_")){const J=y.map(se=>se.id===de?{...se,...te}:se);x(J),localStorage.setItem("guestContacts",JSON.stringify(J));return}await fetch(`${Sn}/contacts/${de}`,{method:"PUT",headers:A(),body:JSON.stringify(te)}),x(J=>J.map(se=>se.id===de?{...se,...te}:se))},Q=async de=>{if(localStorage.getItem("token")?.startsWith("guest_")){const Y=y.filter(J=>J.id!==de);x(Y),localStorage.setItem("guestContacts",JSON.stringify(Y));return}await fetch(`${Sn}/contacts/${de}`,{method:"DELETE",headers:A()}),x(Y=>Y.filter(J=>J.id!==de))},pe=async(de,te)=>{try{const Y=await fetch(`${Sn}/contacts/add-to-event/${de}`,{method:"POST",headers:A(),body:JSON.stringify({contactIds:te})});if(!Y.ok)throw new Error("Failed to add contacts to event");const J=await Y.json();return await k(),J}catch(Y){throw console.error("Error adding contacts to event:",Y),Y}},Me=async de=>{const te=y.find(Y=>Y.phone&&Y.phone===de.phone);return te||await q({name:de.name,phone:de.phone||"",email:de.email||"",notes:""})},be=async de=>{const te=localStorage.getItem("guestEvents");if(te){const J=JSON.parse(te).find(se=>se.id===de);if(J)return{id:J.id,title:J.title,venue:J.venue,date:J.date,time:J.time,description:J.description}}try{const Y=await fetch(`${Sn}/public/events/${de}`);if(Y.ok)return await Y.json()}catch(Y){console.error("Failed to fetch public event:",Y)}throw new Error("Event not found")},we=async(de,te)=>{const Y=localStorage.getItem("guestEvents");if(Y){const J=JSON.parse(Y),se=J.findIndex(ce=>ce.id===de);if(se!==-1){const ce=J[se];let Ce=ce.guests.find($=>te.phone&&$.phone===te.phone||te.email&&$.email===te.email);if(Ce)Ce.rsvp=te.response==="yes"?!0:te.response==="no"?!1:null,Ce.rsvpTime=new Date().toISOString(),Ce.plusOnes=te.plusOnes||0,Ce.dietaryRestrictions=te.dietaryRestrictions||"";else{const $={id:Date.now().toString(),name:te.name,phone:te.phone||"",email:te.email||"",rsvp:te.response==="yes"?!0:te.response==="no"?!1:null,rsvpTime:new Date().toISOString(),plusOnes:te.plusOnes||0,dietaryRestrictions:te.dietaryRestrictions||"",addedAt:new Date().toISOString(),attended:!1,attendedCount:0,source:"public_invitation"};ce.guests.push($)}return localStorage.setItem("guestEvents",JSON.stringify(J)),{success:!0,message:"RSVP submitted successfully"}}}try{const J=await fetch(`${Sn}/public/events/${de}/rsvp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(te)});if(J.ok)return await J.json()}catch(J){console.error("Failed to submit RSVP:",J)}throw new Error("Failed to submit RSVP")};return r.jsx(nf.Provider,{value:{API_URL:Sn,events:a,contacts:y,loading:C,error:S,createEvent:V,deleteEvent:X,getEvent:W,addGuest:z,addBulkGuests:N,deleteGuest:P,markGuestAttended:H,rsvpGuest:T,updateEvent:D,fetchContacts:_,addContact:q,updateContact:F,deleteContact:Q,addContactsToEvent:pe,saveGuestToContacts:Me,fetchPublicEvent:be,submitPublicRSVP:we},children:u})},Tr=()=>{const u=U.useContext(nf);if(!u)throw new Error("useApp must be used within an AppProvider");return u},rf=U.createContext(),ng=({children:u})=>{const[h,a]=U.useState(()=>localStorage.getItem("theme")||"light");U.useEffect(()=>{document.documentElement.setAttribute("data-theme",h),localStorage.setItem("theme",h)},[h]);const g=()=>{a(y=>y==="light"?"dark":"light")};return r.jsx(rf.Provider,{value:{theme:h,toggleTheme:g},children:u})},rg=()=>{const u=U.useContext(rf);if(!u)throw new Error("useTheme must be used within ThemeProvider");return u};var ig={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const sg=u=>u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),He=(u,h)=>{const a=U.forwardRef(({color:g="currentColor",size:y=24,strokeWidth:x=2,absoluteStrokeWidth:C,className:I="",children:S,...v},A)=>U.createElement("svg",{ref:A,...ig,width:y,height:y,stroke:g,strokeWidth:C?Number(x)*24/Number(y):x,className:["lucide",`lucide-${sg(u)}`,I].join(" "),...v},[...h.map(([k,_])=>U.createElement(k,_)),...Array.isArray(S)?S:[S]]));return a.displayName=`${u}`,a};const mo=He("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const xi=He("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const sf=He("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const co=He("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const of=He("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);const og=He("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const Zn=He("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const af=He("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const d0=He("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const js=He("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const lf=He("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);const Qt=He("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const ag=He("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const ha=He("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const qi=He("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const cf=He("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const gd=He("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const md=He("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const lg=He("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);const u0=He("Fingerprint",[["path",{d:"M2 12C2 6.5 6.5 2 12 2a10 10 0 0 1 8 4",key:"1jc9o5"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12c0-.7.12-1.37.34-2",key:"1mxgy1"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2c0 .47 0 1.17-.02 2",key:"1fgabc"}]]);const cg=He("Flashlight",[["path",{d:"M18 6c0 2-2 2-2 4v10a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4V2h12z",key:"1orkel"}],["line",{x1:"6",x2:"18",y1:"6",y2:"6",key:"1z11jq"}],["line",{x1:"12",x2:"12",y1:"12",y2:"12",key:"1f4yc1"}]]);const Td=He("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);const df=He("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);const Nl=He("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const dg=He("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const h0=He("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const ug=He("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const uf=He("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const f0=He("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const Tl=He("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);const fa=He("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const hg=He("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const ks=He("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const Kr=He("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const _l=He("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const _d=He("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const fg=He("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const hf=He("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);const pg=He("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const gi=He("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);const uo=He("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const Mt=He("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const ff=He("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);const gg=He("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);const pf=He("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const gf=He("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);const mg=He("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);const xo=He("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const mf=He("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const Rd=He("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const xg=He("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);const xf=He("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);const yf=He("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const yg=He("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const Yt=He("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const pa=He("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const vg=He("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const wg=He("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const vf=He("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const wf=He("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Wt=He("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const bf=He("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);const Wd=He("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const It=He("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),bg=({showAuth:u=!0})=>{const{user:h,logout:a}=Wr();return!u||!h?null:r.jsxs("div",{style:{padding:"12px 16px",paddingTop:"calc(env(safe-area-inset-top) + 12px)",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid var(--border)",backgroundColor:"var(--bg-primary)",position:"sticky",top:0,zIndex:100},children:[r.jsxs(Nr,{to:"/profile",style:{textDecoration:"none",display:"flex",alignItems:"center",gap:"8px",padding:"6px 12px",background:"var(--bg-secondary)",borderRadius:"20px",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:g=>g.currentTarget.style.background="var(--bg-tertiary)",onMouseLeave:g=>g.currentTarget.style.background="var(--bg-secondary)",children:[h.profilePictureUrl?r.jsx("img",{src:h.profilePictureUrl,alt:h.name,style:{width:"28px",height:"28px",borderRadius:"50%",objectFit:"cover"}}):r.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"linear-gradient(135deg, #6366f1, #a855f7)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:"700"},children:h.name?.charAt(0).toUpperCase()||"U"}),r.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text-primary)",maxWidth:"100px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:h.name})]}),r.jsxs(Nr,{to:"/",style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"18px",fontWeight:"700",color:"var(--text-primary)",textDecoration:"none",position:"absolute",left:"50%",transform:"translateX(-50%)"},children:[r.jsx(mg,{size:22,style:{color:"var(--primary)"}}),r.jsxs("span",{children:["Host",r.jsx("i",{children:"Eze"})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[h?.is_admin&&r.jsx(Nr,{to:"/admin",title:"Admin Dashboard","data-testid":"admin-dashboard-button","aria-label":"Admin Dashboard",accessibilityLabel:"Admin Dashboard",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"36px",height:"36px",background:"linear-gradient(135deg, #6366f1, #a855f7)",border:"none",borderRadius:"50%",color:"white",textDecoration:"none",transition:"all 0.2s",boxShadow:"0 2px 8px rgba(99, 102, 241, 0.3)"},onMouseEnter:g=>{g.currentTarget.style.transform="scale(1.1)",g.currentTarget.style.boxShadow="0 4px 12px rgba(99, 102, 241, 0.5)"},onMouseLeave:g=>{g.currentTarget.style.transform="scale(1)",g.currentTarget.style.boxShadow="0 2px 8px rgba(99, 102, 241, 0.3)"},children:r.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:r.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})}),r.jsxs("button",{onClick:a,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:"#fee2e2",border:"none",borderRadius:"8px",color:"#dc2626",fontWeight:"600",fontSize:"13px",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:g=>g.currentTarget.style.background="#fecaca",onMouseLeave:g=>g.currentTarget.style.background="#fee2e2",children:[r.jsx(hg,{size:16}),"Logout"]})]})]})},Cg=()=>{const u=Wn(),h=Ts(),[a,g]=sr.useState(0);sr.useEffect(()=>{const C=async()=>{const S=localStorage.getItem("token");if(S){const v=await Yi.getUnreadCount(S);g(v)}};C();const I=setInterval(C,3e4);return()=>clearInterval(I)},[]);const y=[{id:"home",label:"Home",icon:ug,path:"/",isActive:h.pathname==="/"||h.pathname==="/manager"||h.pathname.startsWith("/event")},{id:"scanner",label:"Scanner",icon:gf,path:"/scanner",isActive:h.pathname==="/scanner"},{id:"contacts",label:"Contacts",icon:Wt,path:"/contacts",isActive:h.pathname==="/contacts"},{id:"notifications",label:"Notifications",icon:co,path:"/notifications",isActive:h.pathname==="/notifications",badge:a}],x=C=>{u(C)};return r.jsx("nav",{className:"bottom-navigation",children:r.jsx("div",{className:"bottom-nav-container",children:y.map(C=>{const I=C.icon;return r.jsxs("button",{onClick:()=>x(C.path),className:`nav-item ${C.isActive?"active":""}`,children:[r.jsxs("div",{className:"nav-icon-wrapper",children:[r.jsx(I,{size:24,className:"nav-icon"}),C.badge>0&&r.jsx("span",{className:"nav-badge",children:C.badge>99?"99+":C.badge})]}),r.jsx("span",{className:"nav-label",children:C.label})]},C.id)})})})},hi=({children:u})=>{const{user:h}=Wr();return r.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[r.jsx(bg,{showAuth:!0}),h?.isGuest&&r.jsx("div",{style:{background:"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)",padding:"0.75rem 1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:600,color:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:" Viewing as Guest"}),r.jsx("main",{style:{flex:1,paddingBottom:"calc(60px + env(safe-area-inset-bottom))",overflow:"auto"},children:u}),r.jsx(Cg,{})]})},fi=({children:u})=>{const{isAuthenticated:h,loading:a}=Wr();return a?r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{style:{marginTop:"1rem",color:"var(--text-secondary)"},children:"Loading..."})]})}):h?u:r.jsx(J0,{to:"/login",replace:!0})},Sg=()=>{const u=Wn(),{login:h,loginWithBiometric:a,enableBiometric:g,continueAsGuest:y,biometricAvailable:x}=Wr(),[C,I]=U.useState("email"),[S,v]=U.useState(""),[A,k]=U.useState("+91"),[_,V]=U.useState(""),[X,W]=U.useState(""),[z,H]=U.useState(""),[T,N]=U.useState(!1),[P,D]=U.useState(!1),[q,F]=U.useState(null);U.useEffect(()=>{(async()=>{if(x)try{const{BiometricService:we}=await kr(async()=>{const{BiometricService:te}=await Promise.resolve().then(()=>a0);return{BiometricService:te}},void 0);if(await we.hasCredentials("hosteze-app")&&await we.authenticate()){const Y=await we.getCredentials("hosteze-app");Y&&Y.username&&Y.password&&(await h(Y.username,Y.password),u("/"))}}catch(we){console.log("Auto biometric login failed:",we)}})()},[x]);const Q=async be=>{be.preventDefault(),H(""),N(!0);try{const we=C==="phone",de=we?`${A}${_}`:S;if(await h(de,X,we),x){const{BiometricService:te}=await kr(async()=>{const{BiometricService:J}=await Promise.resolve().then(()=>a0);return{BiometricService:J}},void 0);await te.hasCredentials("hosteze-app")?u("/"):(F({email:de,password:X}),D(!0))}else u("/")}catch(we){H(we.message)}finally{N(!1)}},pe=async()=>{try{await g(q.email,q.password),u("/")}catch(be){console.error("Failed to save biometric:",be),u("/")}},Me=()=>{u("/")};return P?r.jsx("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",backgroundColor:"var(--bg-primary)"},children:r.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem 1rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"440px",width:"100%"},children:[r.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[r.jsx(u0,{size:64,style:{color:"var(--primary)",margin:"0 auto 1rem"}}),r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"0.5rem"},children:"Enable Biometric Login?"}),r.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.9375rem"},children:"Use your fingerprint or face to login faster next time"})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[r.jsxs("button",{onClick:pe,className:"btn btn-primary",style:{width:"100%",padding:"0.875rem"},children:[r.jsx(u0,{size:18}),"Enable Biometric"]}),r.jsx("button",{onClick:Me,className:"btn",style:{width:"100%",padding:"0.875rem",background:"var(--bg-secondary)",border:"1px solid var(--border)",color:"var(--text-primary)"},children:"Skip for Now"})]})]})})}):r.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",backgroundColor:"var(--bg-primary)"},children:[r.jsx("div",{style:{padding:"3rem 0 2rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("div",{className:"container",style:{textAlign:"center"},children:[r.jsxs("h1",{style:{fontSize:"2.5rem",fontWeight:700,color:"var(--text-primary)",margin:0},children:[" Host",r.jsx("i",{children:"Eze"})]}),r.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginTop:"0.5rem"},children:"Event Management Made Easy"})]})}),r.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem 1rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"440px",width:"100%"},children:[r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"0.5rem"},children:"Welcome Back"}),r.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.9375rem"},children:"Sign in to manage your events"})]}),z&&r.jsxs("div",{style:{padding:"0.875rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"var(--radius-md)",marginBottom:"1.5rem",display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[r.jsx(mo,{size:18,style:{color:"#dc2626",flexShrink:0,marginTop:"0.125rem"}}),r.jsx("span",{style:{color:"#991b1b",fontSize:"0.875rem",lineHeight:"1.5"},children:z})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",background:"var(--bg-secondary)",padding:"4px",borderRadius:"10px"},children:[r.jsxs("button",{type:"button",onClick:()=>I("email"),style:{flex:1,padding:"0.5rem",borderRadius:"8px",border:"none",background:C==="email"?"white":"transparent",color:C==="email"?"var(--primary)":"var(--text-secondary)",fontWeight:600,fontSize:"0.875rem",cursor:"pointer",boxShadow:C==="email"?"0 2px 4px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[r.jsx(ks,{size:16,style:{verticalAlign:"middle",marginRight:"4px"}}),"Email"]}),r.jsxs("button",{type:"button",onClick:()=>I("phone"),style:{flex:1,padding:"0.5rem",borderRadius:"8px",border:"none",background:C==="phone"?"white":"transparent",color:C==="phone"?"var(--primary)":"var(--text-secondary)",fontWeight:600,fontSize:"0.875rem",cursor:"pointer",boxShadow:C==="phone"?"0 2px 4px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[r.jsx(uo,{size:16,style:{verticalAlign:"middle",marginRight:"4px"}}),"Phone"]})]}),r.jsxs("form",{onSubmit:Q,style:{display:"flex",flexDirection:"column",gap:"1.25rem",marginBottom:"1.5rem"},children:[C==="email"?r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:"Email Address"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(ks,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),r.jsx("input",{type:"email",value:S,onChange:be=>v(be.target.value),className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"your@email.com",required:!0})]})]}):r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:"Phone Number"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("div",{style:{position:"relative",width:"120px"},children:r.jsxs("select",{value:A,onChange:be=>k(be.target.value),className:"form-input",style:{paddingLeft:"1rem",paddingRight:"0.5rem"},children:[r.jsx("option",{value:"+91",children:" +91"}),r.jsx("option",{value:"+1",children:" +1"}),r.jsx("option",{value:"+44",children:" +44"}),r.jsx("option",{value:"+61",children:" +61"}),r.jsx("option",{value:"+971",children:" +971"})]})}),r.jsxs("div",{style:{position:"relative",flex:1},children:[r.jsx(uo,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),r.jsx("input",{type:"tel",value:_,onChange:be=>V(be.target.value.replace(/\D/g,"")),className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"9876543210",maxLength:10,required:!0})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:"Password"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(fa,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),r.jsx("input",{type:"password",value:X,onChange:be=>W(be.target.value),className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"Enter your password",required:!0})]})]}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:T,style:{width:"100%",padding:"0.875rem",fontSize:"1rem",fontWeight:600},children:T?"Signing in...":"Sign In"})]}),r.jsxs("div",{style:{margin:"1.5rem 0",display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{flex:1,height:"1px",background:"var(--border)"}}),r.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.875rem",fontWeight:500},children:"OR"}),r.jsx("div",{style:{flex:1,height:"1px",background:"var(--border)"}})]}),r.jsx("button",{onClick:()=>{y(),u("/")},className:"btn",style:{width:"100%",padding:"0.875rem",fontSize:"1rem",fontWeight:600,background:"var(--bg-secondary)",border:"1px solid var(--border)",color:"var(--text-primary)"},children:"Continue as Guest"}),r.jsxs("div",{style:{marginTop:"1.5rem",textAlign:"center",fontSize:"0.9375rem",color:"var(--text-secondary)"},children:["Don't have an account?"," ",r.jsx(Nr,{to:"/signup",style:{color:"var(--primary)",fontWeight:600,textDecoration:"none"},children:"Create Account"})]})]})})]})},Eg=({password:u})=>{const a=(()=>{if(!u)return{score:0,label:"None",color:"#6b7280",width:"0%"};let y=0;u.length>=8&&y++,u.length>=12&&y++,/[a-z]/.test(u)&&/[A-Z]/.test(u)&&y++,/[0-9]/.test(u)&&y++,/[!@#$%^&*(),.?":{}|<>]/.test(u)&&y++;const x=[{score:0,label:"None",color:"#6b7280",width:"0%"},{score:1,label:"Very Weak",color:"#ef4444",width:"20%"},{score:2,label:"Weak",color:"#f97316",width:"40%"},{score:3,label:"Fair",color:"#eab308",width:"60%"},{score:4,label:"Good",color:"#22c55e",width:"80%"},{score:5,label:"Strong",color:"#10b981",width:"100%"}],C=Math.min(y,5);return x[C]})(),g=[{met:u.length>=8,text:"8+ characters"},{met:/[A-Z]/.test(u),text:"Uppercase letter"},{met:/[a-z]/.test(u),text:"Lowercase letter"},{met:/[0-9]/.test(u),text:"Number"},{met:/[!@#$%^&*(),.?":{}|<>]/.test(u),text:"Special character"}];return r.jsxs("div",{style:{marginTop:"0.5rem"},children:[r.jsxs("div",{style:{marginBottom:"0.5rem"},children:[r.jsx("div",{style:{height:"4px",backgroundColor:"var(--bg-secondary)",borderRadius:"2px",overflow:"hidden"},children:r.jsx("div",{style:{height:"100%",width:a.width,backgroundColor:a.color,transition:"all 0.3s ease"}})}),u&&r.jsx("div",{style:{fontSize:"0.75rem",color:a.color,fontWeight:600,marginTop:"0.25rem"},children:a.label})]}),u&&r.jsx("div",{style:{fontSize:"0.75rem",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.25rem",marginTop:"0.5rem"},children:g.map((y,x)=>r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:y.met?"#10b981":"var(--text-secondary)"},children:[r.jsx("span",{children:y.met?"":""}),r.jsx("span",{children:y.text})]},x))})]})},Ag=()=>{const{signup:u}=Wr(),[h,a]=U.useState(""),[g,y]=U.useState(""),[x,C]=U.useState("+91"),[I,S]=U.useState(""),[v,A]=U.useState(""),[k,_]=U.useState(""),[V,X]=U.useState(""),[W,z]=U.useState(!1),[H,T]=U.useState(!1),[N,P]=U.useState(""),D=F=>F?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(F):!0,q=async F=>{if(F.preventDefault(),X(""),!g&&!I){X("Please enter either email or phone number");return}if(g&&!D(g)){X("Please enter a valid email address");return}if(v!==k){X("Passwords do not match");return}if(v.length<8){X("Password must be at least 8 characters");return}z(!0);try{const Q=I?`${x}${I}`:null,pe=await u(h,g||null,v,Q);P(pe.email||g||I),T(!0)}catch(Q){X(Q.message)}finally{z(!1)}};return H?r.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",backgroundColor:"var(--bg-primary)"},children:[r.jsx("div",{style:{padding:"3rem 0 2rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("div",{className:"container",style:{textAlign:"center"},children:[r.jsxs("h1",{style:{fontSize:"2.5rem",fontWeight:700,color:"var(--text-primary)",margin:0},children:[" Host",r.jsx("i",{children:"Eze"})]}),r.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginTop:"0.5rem"},children:"Event Management Made Easy"})]})}),r.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem 1rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"440px",width:"100%",textAlign:"center"},children:[r.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:r.jsx(js,{size:32,color:"white"})}),r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"0.75rem"},children:"Account Created!"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem",lineHeight:"1.6"},children:g?r.jsxs(r.Fragment,{children:["We've sent a verification link to:",r.jsx("br",{}),r.jsx("strong",{style:{color:"var(--text-primary)"},children:N})]}):"Your account has been created successfully!"}),r.jsx(Nr,{to:"/login",className:"btn btn-primary",style:{display:"inline-block",padding:"0.875rem 2rem"},children:"Continue to Login"})]})})]}):r.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",backgroundColor:"var(--bg-primary)"},children:[r.jsx("div",{style:{padding:"3rem 0 2rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("div",{className:"container",style:{textAlign:"center"},children:[r.jsxs("h1",{style:{fontSize:"2.5rem",fontWeight:700,color:"var(--text-primary)",margin:0},children:[" Host",r.jsx("i",{children:"Eze"})]}),r.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginTop:"0.5rem"},children:"Event Management Made Easy"})]})}),r.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem 1rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"440px",width:"100%"},children:[r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"0.5rem"},children:"Create Account"}),r.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.9375rem"},children:"Start managing your events today"})]}),V&&r.jsxs("div",{style:{padding:"0.875rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"var(--radius-md)",marginBottom:"1.5rem",display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[r.jsx(mo,{size:18,style:{color:"#dc2626",flexShrink:0,marginTop:"0.125rem"}}),r.jsx("span",{style:{color:"#991b1b",fontSize:"0.875rem",lineHeight:"1.5"},children:V})]}),r.jsxs("form",{onSubmit:q,style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:"Full Name"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(wf,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),r.jsx("input",{type:"text",value:h,onChange:F=>a(F.target.value),className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"John Doe",required:!0})]})]}),r.jsxs("div",{children:[r.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:["Email Address ",r.jsx("span",{style:{color:"var(--text-secondary)",fontWeight:400},children:"(Optional)"})]}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(ks,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),r.jsx("input",{type:"email",value:g,onChange:F=>y(F.target.value),className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"your@email.com"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:["Phone Number ",r.jsx("span",{style:{color:"var(--text-secondary)",fontWeight:400},children:"(Optional)"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("div",{style:{position:"relative",width:"120px"},children:r.jsxs("select",{value:x,onChange:F=>C(F.target.value),className:"form-input",style:{paddingLeft:"1rem",paddingRight:"0.5rem"},children:[r.jsx("option",{value:"+91",children:" +91"}),r.jsx("option",{value:"+1",children:" +1"}),r.jsx("option",{value:"+44",children:" +44"}),r.jsx("option",{value:"+61",children:" +61"}),r.jsx("option",{value:"+971",children:" +971"})]})}),r.jsxs("div",{style:{position:"relative",flex:1},children:[r.jsx(uo,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),r.jsx("input",{type:"tel",value:I,onChange:F=>S(F.target.value.replace(/\D/g,"")),className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"9876543210",maxLength:10})]})]}),r.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:"0.375rem"},children:"Enter email OR phone number"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:"Password"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(fa,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),r.jsx("input",{type:"password",value:v,onChange:F=>A(F.target.value),className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"Strong password",required:!0})]}),r.jsx(Eg,{password:v})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-primary)"},children:"Confirm Password"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(fa,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),r.jsx("input",{type:"password",value:k,onChange:F=>_(F.target.value),className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"Confirm your password",required:!0})]})]}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:W,style:{width:"100%",padding:"0.875rem",fontSize:"1rem",fontWeight:600},children:W?"Creating Account...":"Create Account"})]}),r.jsxs("div",{style:{marginTop:"1.5rem",textAlign:"center",fontSize:"0.9375rem",color:"var(--text-secondary)"},children:["Already have an account?"," ",r.jsx(Nr,{to:"/login",style:{color:"var(--primary)",fontWeight:600,textDecoration:"none"},children:"Sign In"})]})]})})]})};var Ud={};(function u(h,a,g,y){var x=!!(h.Worker&&h.Blob&&h.Promise&&h.OffscreenCanvas&&h.OffscreenCanvasRenderingContext2D&&h.HTMLCanvasElement&&h.HTMLCanvasElement.prototype.transferControlToOffscreen&&h.URL&&h.URL.createObjectURL),C=typeof Path2D=="function"&&typeof DOMMatrix=="function",I=(function(){if(!h.OffscreenCanvas)return!1;try{var $=new OffscreenCanvas(1,1),B=$.getContext("2d");B.fillRect(0,0,1,1);var oe=$.transferToImageBitmap();B.createPattern(oe,"no-repeat")}catch{return!1}return!0})();function S(){}function v($){var B=a.exports.Promise,oe=B!==void 0?B:h.Promise;return typeof oe=="function"?new oe($):($(S,S),null)}var A=(function($,B){return{transform:function(oe){if($)return oe;if(B.has(oe))return B.get(oe);var Ee=new OffscreenCanvas(oe.width,oe.height),le=Ee.getContext("2d");return le.drawImage(oe,0,0),B.set(oe,Ee),Ee},clear:function(){B.clear()}}})(I,new Map),k=(function(){var $=Math.floor(16.666666666666668),B,oe,Ee={},le=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(B=function(ke){var ve=Math.random();return Ee[ve]=requestAnimationFrame(function Oe(fe){le===fe||le+$-1<fe?(le=fe,delete Ee[ve],ke()):Ee[ve]=requestAnimationFrame(Oe)}),ve},oe=function(ke){Ee[ke]&&cancelAnimationFrame(Ee[ke])}):(B=function(ke){return setTimeout(ke,$)},oe=function(ke){return clearTimeout(ke)}),{frame:B,cancel:oe}})(),_=(function(){var $,B,oe={};function Ee(le){function ke(ve,Oe){le.postMessage({options:ve||{},callback:Oe})}le.init=function(Oe){var fe=Oe.transferControlToOffscreen();le.postMessage({canvas:fe},[fe])},le.fire=function(Oe,fe,De){if(B)return ke(Oe,null),B;var $e=Math.random().toString(36).slice(2);return B=v(function(Ge){function st(We){We.data.callback===$e&&(delete oe[$e],le.removeEventListener("message",st),B=null,A.clear(),De(),Ge())}le.addEventListener("message",st),ke(Oe,$e),oe[$e]=st.bind(null,{data:{callback:$e}})}),B},le.reset=function(){le.postMessage({reset:!0});for(var Oe in oe)oe[Oe](),delete oe[Oe]}}return function(){if($)return $;if(!g&&x){var le=["var CONFETTI, SIZE = {}, module = {};","("+u.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{$=new Worker(URL.createObjectURL(new Blob([le])))}catch(ke){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",ke),null}Ee($)}return $}})(),V={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function X($,B){return B?B($):$}function W($){return $!=null}function z($,B,oe){return X($&&W($[B])?$[B]:V[B],oe)}function H($){return $<0?0:Math.floor($)}function T($,B){return Math.floor(Math.random()*(B-$))+$}function N($){return parseInt($,16)}function P($){return $.map(D)}function D($){var B=String($).replace(/[^0-9a-f]/gi,"");return B.length<6&&(B=B[0]+B[0]+B[1]+B[1]+B[2]+B[2]),{r:N(B.substring(0,2)),g:N(B.substring(2,4)),b:N(B.substring(4,6))}}function q($){var B=z($,"origin",Object);return B.x=z(B,"x",Number),B.y=z(B,"y",Number),B}function F($){$.width=document.documentElement.clientWidth,$.height=document.documentElement.clientHeight}function Q($){var B=$.getBoundingClientRect();$.width=B.width,$.height=B.height}function pe($){var B=document.createElement("canvas");return B.style.position="fixed",B.style.top="0px",B.style.left="0px",B.style.pointerEvents="none",B.style.zIndex=$,B}function Me($,B,oe,Ee,le,ke,ve,Oe,fe){$.save(),$.translate(B,oe),$.rotate(ke),$.scale(Ee,le),$.arc(0,0,1,ve,Oe,fe),$.restore()}function be($){var B=$.angle*(Math.PI/180),oe=$.spread*(Math.PI/180);return{x:$.x,y:$.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:$.startVelocity*.5+Math.random()*$.startVelocity,angle2D:-B+(.5*oe-Math.random()*oe),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:$.color,shape:$.shape,tick:0,totalTicks:$.ticks,decay:$.decay,drift:$.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:$.gravity*3,ovalScalar:.6,scalar:$.scalar,flat:$.flat}}function we($,B){B.x+=Math.cos(B.angle2D)*B.velocity+B.drift,B.y+=Math.sin(B.angle2D)*B.velocity+B.gravity,B.velocity*=B.decay,B.flat?(B.wobble=0,B.wobbleX=B.x+10*B.scalar,B.wobbleY=B.y+10*B.scalar,B.tiltSin=0,B.tiltCos=0,B.random=1):(B.wobble+=B.wobbleSpeed,B.wobbleX=B.x+10*B.scalar*Math.cos(B.wobble),B.wobbleY=B.y+10*B.scalar*Math.sin(B.wobble),B.tiltAngle+=.1,B.tiltSin=Math.sin(B.tiltAngle),B.tiltCos=Math.cos(B.tiltAngle),B.random=Math.random()+2);var oe=B.tick++/B.totalTicks,Ee=B.x+B.random*B.tiltCos,le=B.y+B.random*B.tiltSin,ke=B.wobbleX+B.random*B.tiltCos,ve=B.wobbleY+B.random*B.tiltSin;if($.fillStyle="rgba("+B.color.r+", "+B.color.g+", "+B.color.b+", "+(1-oe)+")",$.beginPath(),C&&B.shape.type==="path"&&typeof B.shape.path=="string"&&Array.isArray(B.shape.matrix))$.fill(se(B.shape.path,B.shape.matrix,B.x,B.y,Math.abs(ke-Ee)*.1,Math.abs(ve-le)*.1,Math.PI/10*B.wobble));else if(B.shape.type==="bitmap"){var Oe=Math.PI/10*B.wobble,fe=Math.abs(ke-Ee)*.1,De=Math.abs(ve-le)*.1,$e=B.shape.bitmap.width*B.scalar,Ge=B.shape.bitmap.height*B.scalar,st=new DOMMatrix([Math.cos(Oe)*fe,Math.sin(Oe)*fe,-Math.sin(Oe)*De,Math.cos(Oe)*De,B.x,B.y]);st.multiplySelf(new DOMMatrix(B.shape.matrix));var We=$.createPattern(A.transform(B.shape.bitmap),"no-repeat");We.setTransform(st),$.globalAlpha=1-oe,$.fillStyle=We,$.fillRect(B.x-$e/2,B.y-Ge/2,$e,Ge),$.globalAlpha=1}else if(B.shape==="circle")$.ellipse?$.ellipse(B.x,B.y,Math.abs(ke-Ee)*B.ovalScalar,Math.abs(ve-le)*B.ovalScalar,Math.PI/10*B.wobble,0,2*Math.PI):Me($,B.x,B.y,Math.abs(ke-Ee)*B.ovalScalar,Math.abs(ve-le)*B.ovalScalar,Math.PI/10*B.wobble,0,2*Math.PI);else if(B.shape==="star")for(var Qe=Math.PI/2*3,St=4*B.scalar,ln=8*B.scalar,xt=B.x,dt=B.y,ot=5,Jt=Math.PI/ot;ot--;)xt=B.x+Math.cos(Qe)*ln,dt=B.y+Math.sin(Qe)*ln,$.lineTo(xt,dt),Qe+=Jt,xt=B.x+Math.cos(Qe)*St,dt=B.y+Math.sin(Qe)*St,$.lineTo(xt,dt),Qe+=Jt;else $.moveTo(Math.floor(B.x),Math.floor(B.y)),$.lineTo(Math.floor(B.wobbleX),Math.floor(le)),$.lineTo(Math.floor(ke),Math.floor(ve)),$.lineTo(Math.floor(Ee),Math.floor(B.wobbleY));return $.closePath(),$.fill(),B.tick<B.totalTicks}function de($,B,oe,Ee,le){var ke=B.slice(),ve=$.getContext("2d"),Oe,fe,De=v(function($e){function Ge(){Oe=fe=null,ve.clearRect(0,0,Ee.width,Ee.height),A.clear(),le(),$e()}function st(){g&&!(Ee.width===y.width&&Ee.height===y.height)&&(Ee.width=$.width=y.width,Ee.height=$.height=y.height),!Ee.width&&!Ee.height&&(oe($),Ee.width=$.width,Ee.height=$.height),ve.clearRect(0,0,Ee.width,Ee.height),ke=ke.filter(function(We){return we(ve,We)}),ke.length?Oe=k.frame(st):Ge()}Oe=k.frame(st),fe=Ge});return{addFettis:function($e){return ke=ke.concat($e),De},canvas:$,promise:De,reset:function(){Oe&&k.cancel(Oe),fe&&fe()}}}function te($,B){var oe=!$,Ee=!!z(B||{},"resize"),le=!1,ke=z(B,"disableForReducedMotion",Boolean),ve=x&&!!z(B||{},"useWorker"),Oe=ve?_():null,fe=oe?F:Q,De=$&&Oe?!!$.__confetti_initialized:!1,$e=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Ge;function st(Qe,St,ln){for(var xt=z(Qe,"particleCount",H),dt=z(Qe,"angle",Number),ot=z(Qe,"spread",Number),Jt=z(Qe,"startVelocity",Number),Le=z(Qe,"decay",Number),Ur=z(Qe,"gravity",Number),Qi=z(Qe,"drift",Number),Un=z(Qe,"colors",P),yi=z(Qe,"ticks",Number),An=z(Qe,"shapes"),vi=z(Qe,"scalar"),Vn=!!z(Qe,"flat"),en=q(Qe),_r=xt,qn=[],yo=$.width*en.x,Bt=$.height*en.y;_r--;)qn.push(be({x:yo,y:Bt,angle:dt,spread:ot,startVelocity:Jt,color:Un[_r%Un.length],shape:An[T(0,An.length)],ticks:yi,decay:Le,gravity:Ur,drift:Qi,scalar:vi,flat:Vn}));return Ge?Ge.addFettis(qn):(Ge=de($,qn,fe,St,ln),Ge.promise)}function We(Qe){var St=ke||z(Qe,"disableForReducedMotion",Boolean),ln=z(Qe,"zIndex",Number);if(St&&$e)return v(function(Jt){Jt()});oe&&Ge?$=Ge.canvas:oe&&!$&&($=pe(ln),document.body.appendChild($)),Ee&&!De&&fe($);var xt={width:$.width,height:$.height};Oe&&!De&&Oe.init($),De=!0,Oe&&($.__confetti_initialized=!0);function dt(){if(Oe){var Jt={getBoundingClientRect:function(){if(!oe)return $.getBoundingClientRect()}};fe(Jt),Oe.postMessage({resize:{width:Jt.width,height:Jt.height}});return}xt.width=xt.height=null}function ot(){Ge=null,Ee&&(le=!1,h.removeEventListener("resize",dt)),oe&&$&&(document.body.contains($)&&document.body.removeChild($),$=null,De=!1)}return Ee&&!le&&(le=!0,h.addEventListener("resize",dt,!1)),Oe?Oe.fire(Qe,xt,ot):st(Qe,xt,ot)}return We.reset=function(){Oe&&Oe.reset(),Ge&&Ge.reset()},We}var Y;function J(){return Y||(Y=te(null,{useWorker:!0,resize:!0})),Y}function se($,B,oe,Ee,le,ke,ve){var Oe=new Path2D($),fe=new Path2D;fe.addPath(Oe,new DOMMatrix(B));var De=new Path2D;return De.addPath(fe,new DOMMatrix([Math.cos(ve)*le,Math.sin(ve)*le,-Math.sin(ve)*ke,Math.cos(ve)*ke,oe,Ee])),De}function ce($){if(!C)throw new Error("path confetti are not supported in this browser");var B,oe;typeof $=="string"?B=$:(B=$.path,oe=$.matrix);var Ee=new Path2D(B),le=document.createElement("canvas"),ke=le.getContext("2d");if(!oe){for(var ve=1e3,Oe=ve,fe=ve,De=0,$e=0,Ge,st,We=0;We<ve;We+=2)for(var Qe=0;Qe<ve;Qe+=2)ke.isPointInPath(Ee,We,Qe,"nonzero")&&(Oe=Math.min(Oe,We),fe=Math.min(fe,Qe),De=Math.max(De,We),$e=Math.max($e,Qe));Ge=De-Oe,st=$e-fe;var St=10,ln=Math.min(St/Ge,St/st);oe=[ln,0,0,ln,-Math.round(Ge/2+Oe)*ln,-Math.round(st/2+fe)*ln]}return{type:"path",path:B,matrix:oe}}function Ce($){var B,oe=1,Ee="#000000",le='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof $=="string"?B=$:(B=$.text,oe="scalar"in $?$.scalar:oe,le="fontFamily"in $?$.fontFamily:le,Ee="color"in $?$.color:Ee);var ke=10*oe,ve=""+ke+"px "+le,Oe=new OffscreenCanvas(ke,ke),fe=Oe.getContext("2d");fe.font=ve;var De=fe.measureText(B),$e=Math.ceil(De.actualBoundingBoxRight+De.actualBoundingBoxLeft),Ge=Math.ceil(De.actualBoundingBoxAscent+De.actualBoundingBoxDescent),st=2,We=De.actualBoundingBoxLeft+st,Qe=De.actualBoundingBoxAscent+st;$e+=st+st,Ge+=st+st,Oe=new OffscreenCanvas($e,Ge),fe=Oe.getContext("2d"),fe.font=ve,fe.fillStyle=Ee,fe.fillText(B,We,Qe);var St=1/oe;return{type:"bitmap",bitmap:Oe.transferToImageBitmap(),matrix:[St,0,0,St,-$e*St/2,-Ge*St/2]}}a.exports=function(){return J().apply(this,arguments)},a.exports.reset=function(){J().reset()},a.exports.create=te,a.exports.shapeFromPath=ce,a.exports.shapeFromText=Ce})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),Ud,!1);const Cf=Ud.exports;Ud.exports.create;const Ig=()=>{const{events:u,createEvent:h,deleteEvent:a}=Tr(),g=Wn(),[y,x]=U.useState(!1),[C,I]=U.useState({title:"",date:"",location:""}),S=async A=>{if(A.preventDefault(),!!C.title)try{const k=await h(C);Cf({particleCount:100,spread:70,origin:{y:.6},colors:["#6366f1","#a855f7","#ec4899","#f472b6"]}),I({title:"",date:"",location:""}),x(!1),k&&k.id&&g(`/event/${k.id}`)}catch(k){console.error("Failed to create event:",k),alert("Failed to create event. Please try again.")}},v=(A,k)=>{A.preventDefault(),confirm("Are you sure you want to delete this event?")&&a(k)};return r.jsxs("div",{style:{maxWidth:"56rem",margin:"0 auto",padding:"16px"},children:[r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[r.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",margin:0},children:"My Events"}),r.jsxs("button",{onClick:()=>x(!0),className:"btn btn-primary",style:{fontSize:"14px",padding:"8px 16px"},children:[r.jsx(Mt,{size:16})," New Event"]})]}),r.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",margin:0},children:"Create and manage your events"})]}),y&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:50,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:()=>x(!1),children:r.jsxs("div",{className:"card",style:{maxWidth:"32rem",width:"100%",padding:"2rem"},onClick:A=>A.stopPropagation(),children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"1.5rem",color:"var(--text-primary)"},children:"Create New Event"}),r.jsxs("form",{onSubmit:S,style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Event Type"}),r.jsxs("select",{className:"input",value:C.eventType||"host",onChange:A=>I({...C,eventType:A.target.value}),children:[r.jsx("option",{value:"host",children:" Host Event (Birthday, Wedding, Party)"}),r.jsx("option",{value:"shared",children:" Shared Event (Trip, Outing, Group Activity)"})]}),r.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-tertiary)",marginTop:"0.5rem"},children:C.eventType==="shared"?"Everyone can add expenses and manage the event together":"You host, others are guests with limited permissions"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Event Title"}),r.jsx("input",{type:"text",value:C.title,onChange:A=>I({...C,title:A.target.value}),className:"input",placeholder:"e.g. Annual Conference 2024",autoFocus:!0})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Date"}),r.jsx("input",{type:"date",value:C.date,onChange:A=>I({...C,date:A.target.value}),className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Location"}),r.jsx("input",{type:"text",value:C.location,onChange:A=>I({...C,location:A.target.value}),className:"input",placeholder:"Grand Hall"})]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.75rem",marginTop:"1rem"},children:[r.jsx("button",{type:"button",onClick:()=>x(!1),className:"btn btn-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",children:"Create Event"})]})]})]})}),u.length===0?r.jsxs("div",{className:"card",style:{padding:"4rem 2rem",textAlign:"center",backgroundColor:"var(--bg-secondary)"},children:[r.jsx("div",{style:{width:"4rem",height:"4rem",margin:"0 auto 1.5rem",borderRadius:"50%",backgroundColor:"var(--bg-tertiary)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-tertiary)"},children:r.jsx(Zn,{size:32})}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"0.5rem"},children:"No events yet"}),r.jsx("p",{style:{color:"var(--text-secondary)"},children:'Click "New Event" to create your first event'})]}):r.jsx("div",{style:{display:"grid",gap:"12px"},children:u.sort((A,k)=>!A.date&&!k.date?0:A.date?k.date?new Date(A.date)-new Date(k.date):-1:1).map(A=>{const k=A.role==="guest",_=A.event_type==="shared",V=k&&!_?`/guest/event/${A.id}`:`/event/${A.id}`;return r.jsx(Nr,{to:V,style:{textDecoration:"none"},children:r.jsxs("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",padding:"16px",border:"1px solid var(--border)",boxShadow:"0 1px 3px rgba(0,0,0,0.05)",display:"flex",alignItems:"center",gap:"16px",transition:"all 0.2s",cursor:"pointer"},onMouseEnter:X=>{X.currentTarget.style.transform="translateY(-2px)",X.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},onMouseLeave:X=>{X.currentTarget.style.transform="translateY(0)",X.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.05)"},children:[r.jsxs("div",{style:{width:"56px",height:"56px",background:k?"linear-gradient(135deg, #60a5fa, #3b82f6)":"linear-gradient(135deg, #6366f1, #a855f7)",borderRadius:"12px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexShrink:0,color:"white"},children:[r.jsx("span",{style:{fontSize:"10px",fontWeight:700,textTransform:"uppercase",opacity:.9},children:A.date?new Date(A.date).toLocaleString("default",{month:"short"}):"TBD"}),r.jsx("span",{style:{fontSize:"20px",fontWeight:700,lineHeight:1},children:A.date?new Date(A.date).getDate():"?"})]}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[r.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"var(--text-primary)",margin:0,wordBreak:"break-word",lineHeight:"1.3"},children:A.title}),k&&r.jsx("span",{style:{padding:"2px 8px",background:"#dbeafe",color:"#1e40af",borderRadius:"12px",fontSize:"10px",fontWeight:700,textTransform:"uppercase",flexShrink:0},children:"GUEST"})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",fontSize:"13px",color:"var(--text-secondary)"},children:[A.location&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[r.jsx(Kr,{size:12}),A.location]}),!k&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx(Wt,{size:12}),A.guests?.length||0]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[!k&&r.jsx("button",{onClick:X=>v(X,A.id),style:{padding:"8px",color:"#9ca3af",transition:"all 0.2s",border:"none",background:"none",cursor:"pointer",borderRadius:"8px"},onMouseEnter:X=>{X.currentTarget.style.background="#fee2e2",X.currentTarget.style.color="#ef4444"},onMouseLeave:X=>{X.currentTarget.style.background="none",X.currentTarget.style.color="#9ca3af"},title:"Delete Event",children:r.jsx(Yt,{size:16})}),r.jsx(ag,{size:18,style:{color:"#9ca3af"}})]})]})},A.id)})})]})},jg=({tabs:u,activeTab:h,onTabChange:a})=>r.jsx("div",{style:{borderBottom:"2px solid var(--border)",marginBottom:"2rem"},children:r.jsx("div",{style:{display:"flex",gap:"0.25rem",justifyContent:"center",flexWrap:"wrap",padding:"0.5rem"},children:u.map(g=>{const y=h===g.id,x=g.icon;return r.jsxs("button",{onClick:()=>a(g.id),title:g.label,style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"0.25rem",padding:"0.75rem 1rem",background:y?"var(--bg-secondary)":"transparent",border:"none",borderBottom:y?"3px solid var(--primary)":"3px solid transparent",borderRadius:y?"8px 8px 0 0":"0",color:y?"var(--primary)":"var(--text-secondary)",fontSize:"0.75rem",fontWeight:y?600:500,cursor:"pointer",transition:"all 0.2s ease",position:"relative",marginBottom:"-2px",minWidth:"64px"},onMouseEnter:C=>{y||(C.currentTarget.style.background="var(--bg-secondary)",C.currentTarget.style.color="var(--text-primary)")},onMouseLeave:C=>{y||(C.currentTarget.style.background="transparent",C.currentTarget.style.color="var(--text-secondary)")},children:[r.jsxs("div",{style:{position:"relative"},children:[r.jsx(x,{size:22}),g.badge&&g.badge>0&&r.jsx("span",{style:{position:"absolute",top:"-6px",right:"-8px",display:"inline-flex",alignItems:"center",justifyContent:"center",minWidth:"18px",height:"18px",padding:"0 4px",background:y?"var(--primary)":"#ef4444",color:"white",borderRadius:"999px",fontSize:"0.625rem",fontWeight:700},children:g.badge})]}),r.jsx("span",{style:{fontSize:"0.6875rem",fontWeight:500},children:g.label})]},g.id)})})}),kg=({event:u})=>{const[h,a]=U.useState(!1),[g,y]=U.useState(""),[x,C]=U.useState([]);if(!u)return null;if(u.event_type==="shared"){const z=(u.guests?.length||0)+1,H=u.date?new Date(u.date):null,N=H?Math.ceil((H-new Date)/(1e3*60*60*24)):null;let P=1;if(u.end_date&&u.date){const D=new Date(u.date),q=new Date(u.end_date);P=Math.ceil((q-D)/(1e3*60*60*24))+1}return r.jsxs("div",{children:[r.jsxs("div",{className:"card",style:{marginBottom:"2rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"2rem"},children:[r.jsx("h1",{style:{fontSize:"2.25rem",fontWeight:900,marginBottom:"1rem",color:"white",lineHeight:"1.2",letterSpacing:"-0.02em",textShadow:"0 2px 12px rgba(0,0,0,0.15)"},children:u.title}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1.5rem",fontSize:"0.9375rem",opacity:.95},children:[r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Zn,{size:16}),u.date?new Date(u.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Date TBD",u.end_date&&` - ${new Date(u.end_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}`]}),u.location&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Kr,{size:16}),u.location]})]}),u.description&&r.jsx("p",{style:{marginTop:"1rem",opacity:.9,lineHeight:"1.6"},children:u.description})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[r.jsx("div",{className:"card",style:{padding:"1.75rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"3.5rem",height:"3.5rem",borderRadius:"var(--radius-lg)",background:"rgba(99, 102, 241, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Wt,{size:28,style:{color:"var(--primary)"}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--text-primary)"},children:z}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",fontWeight:500},children:"Participants"})]})]})}),N!==null&&r.jsx("div",{className:"card",style:{padding:"1.75rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"3.5rem",height:"3.5rem",borderRadius:"var(--radius-lg)",background:"rgba(16, 185, 129, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(ha,{size:28,style:{color:"#10b981"}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--text-primary)"},children:N>0?N:N===0?"Today!":"Past"}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",fontWeight:500},children:N>0?"Days Away":N===0?"Happening Now":"Days Ago"})]})]})}),r.jsx("div",{className:"card",style:{padding:"1.75rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"3.5rem",height:"3.5rem",borderRadius:"var(--radius-lg)",background:"rgba(245, 158, 11, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Zn,{size:28,style:{color:"#f59e0b"}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--text-primary)"},children:P}),r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",fontWeight:500},children:["Day",P!==1?"s":""]})]})]})})]})]})}const S=u.guests?.length||0,v=u.guests?.filter(z=>z.rsvp===!0)||[],A=u.guests?.filter(z=>z.attended)||[],k=u.guests?.filter(z=>z.rsvp===null||z.rsvp===void 0).length||0,_=u.guests?.filter(z=>z.rsvp===!1).length||0,V=S>0?Math.round(A.length/S*100):0,X=S>0?Math.round((v.length+_)/S*100):0,W=(z,H)=>{y(z),C(H),a(!0)};return r.jsxs("div",{children:[r.jsxs("div",{className:"card",style:{marginBottom:"2rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"2rem"},children:[r.jsx("h1",{style:{fontSize:"2.25rem",fontWeight:900,marginBottom:"1rem",color:"white",lineHeight:"1.2",letterSpacing:"-0.02em",textShadow:"0 2px 12px rgba(0,0,0,0.15)"},children:u.title}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1.5rem",fontSize:"0.9375rem",opacity:.95},children:[r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Zn,{size:16}),u.date?new Date(u.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Date TBD"]}),u.location&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Kr,{size:16}),u.location]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1.75rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[r.jsx("div",{style:{width:"3.5rem",height:"3.5rem",borderRadius:"var(--radius-lg)",background:"rgba(99, 102, 241, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Wt,{size:28,style:{color:"var(--primary)"}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--text-primary)"},children:S}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",fontWeight:500},children:"Total Invited"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.8125rem",paddingTop:"0.75rem",borderTop:"1px solid var(--border)",flexWrap:"wrap"},children:[r.jsxs("button",{onClick:()=>W("Confirmed Guests",v),style:{background:"none",border:"none",padding:0,color:"#10b981",fontWeight:500,cursor:"pointer",textDecoration:"underline"},children:[" ",v.length," confirmed"]}),r.jsxs("button",{onClick:()=>W("Declined Guests",u.guests?.filter(z=>z.rsvp===!1)||[]),style:{background:"none",border:"none",padding:0,color:"#ef4444",fontWeight:500,cursor:"pointer",textDecoration:"underline"},children:[" ",_," declined"]}),r.jsxs("span",{style:{color:"#94a3b8",fontWeight:500},children:[" ",k," pending"]})]})]}),r.jsxs("div",{className:"card",style:{padding:"1.75rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[r.jsx("div",{style:{width:"3.5rem",height:"3.5rem",borderRadius:"var(--radius-lg)",background:"rgba(16, 185, 129, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(js,{size:28,style:{color:"#10b981"}})}),r.jsxs("div",{children:[r.jsx("button",{onClick:()=>W("Checked-In Guests",A),style:{background:"none",border:"none",padding:0,cursor:"pointer"},children:r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--text-primary)",textDecoration:"underline"},children:A.length})}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",fontWeight:500},children:"Checked In"})]})]}),r.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)",paddingTop:"0.75rem",borderTop:"1px solid var(--border)"},children:[r.jsxs("span",{style:{fontWeight:600,color:"#10b981"},children:[V,"%"]})," attendance rate"]})]}),r.jsxs("div",{className:"card",style:{padding:"1.75rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[r.jsx("div",{style:{width:"3.5rem",height:"3.5rem",borderRadius:"var(--radius-lg)",background:"rgba(99, 102, 241, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(ks,{size:28,style:{color:"var(--primary)"}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--text-primary)"},children:v.length+_}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",fontWeight:500},children:"RSVPs"})]})]}),r.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)",paddingTop:"0.75rem",borderTop:"1px solid var(--border)"},children:[r.jsxs("span",{style:{fontWeight:600,color:"var(--primary)"},children:[X,"%"]})," response rate"]})]})]}),h&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"100%",maxHeight:"80vh",display:"flex",flexDirection:"column",padding:0},children:[r.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:700},children:[g," (",x.length,")"]}),r.jsx("button",{onClick:()=>a(!1),className:"btn btn-secondary",style:{padding:"0.5rem"},children:r.jsx(It,{size:20})})]}),r.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:x.length===0?r.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:"No guests found"}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:x.map(z=>r.jsxs("div",{className:"card",style:{padding:"1rem",background:"var(--bg-secondary)"},children:[r.jsx("div",{style:{fontWeight:600,color:"var(--text-primary)",marginBottom:"0.25rem"},children:z.name}),z.phone&&r.jsx("div",{style:{fontSize:"0.875rem"},children:r.jsxs("a",{href:`tel:${z.phone}`,style:{color:"var(--primary)",textDecoration:"none"},children:[" ",z.phone]})}),z.attended&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"#10b981",marginTop:"0.5rem",fontWeight:500},children:[" Checked in ",z.attendedCount,"x"]})]},z.id))})})]})})]})},Ng=({event:u,onUpdateCatering:h})=>{const[a,g]=U.useState(u.catering?.items||[]),[y,x]=U.useState(!1),[C,I]=U.useState(null),[S,v]=U.useState({name:"",category:"appetizer",quantity:"",servings:"",cost:"",vendor:"",status:"planned"}),A=[{id:"appetizer",label:"Appetizers",emoji:""},{id:"main",label:"Main Course",emoji:""},{id:"dessert",label:"Desserts",emoji:""},{id:"beverage",label:"Beverages",emoji:""},{id:"other",label:"Other",emoji:""}],k=[{id:"planned",label:"Planned",color:"var(--text-tertiary)"},{id:"ordered",label:"Ordered",color:"var(--warning)"},{id:"confirmed",label:"Confirmed",color:"var(--success)"}],_=()=>{if(!S.name)return;const D={id:Date.now().toString(),...S,quantity:parseInt(S.quantity)||0,servings:parseInt(S.servings)||0,cost:parseFloat(S.cost)||0},q=[...a,D];g(q),h?.(q),v({name:"",category:"appetizer",quantity:"",servings:"",cost:"",vendor:"",status:"planned"}),x(!1)},V=D=>{const q=a.filter(F=>F.id!==D);g(q),h?.(q)},X=(D,q)=>{const F=a.map(Q=>Q.id===D?{...Q,status:q}:Q);g(F),h?.(F)},W=D=>{I({...D})},z=()=>{if(!C.name)return;const D=a.map(q=>q.id===C.id?{...C,quantity:parseInt(C.quantity)||0,servings:parseInt(C.servings)||0,cost:parseFloat(C.cost)||0}:q);g(D),h?.(D),I(null)},H=()=>{I(null)},T=a.reduce((D,q)=>D+(q.cost||0),0),N=a.reduce((D,q)=>D+(q.servings||0),0),P=u.guests?.filter(D=>D.rsvp===!0).length||0;return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>x(!y),className:"btn btn-primary",style:{marginBottom:"1.5rem"},children:[r.jsx(Mt,{size:16})," Add Menu Item"]}),y&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"New Menu Item"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Item Name*"}),r.jsx("input",{type:"text",className:"form-input",value:S.name,onChange:D=>v({...S,name:D.target.value}),placeholder:"e.g., Caesar Salad",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Category"}),r.jsx("select",{className:"form-input",value:S.category,onChange:D=>v({...S,category:D.target.value}),children:A.map(D=>r.jsxs("option",{value:D.id,children:[D.emoji," ",D.label]},D.id))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Quantity"}),r.jsx("input",{type:"number",className:"form-input",value:S.quantity,onChange:D=>v({...S,quantity:D.target.value}),placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Servings"}),r.jsx("input",{type:"number",className:"form-input",value:S.servings,onChange:D=>v({...S,servings:D.target.value}),placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Cost ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:S.cost,onChange:D=>v({...S,cost:D.target.value}),placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Vendor (Optional)"}),r.jsx("input",{type:"text",className:"form-input",value:S.vendor,onChange:D=>v({...S,vendor:D.target.value}),placeholder:"Vendor name"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{onClick:_,className:"btn btn-primary",children:[r.jsx(Qt,{size:16})," Add Item"]}),r.jsxs("button",{onClick:()=>x(!1),className:"btn btn-secondary",children:[r.jsx(It,{size:16})," Cancel"]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Menu Items"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--primary)"},children:a.length})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Servings"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--success)"},children:N})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Confirmed Guests"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--text-primary)"},children:P})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Cost"}),r.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--warning)"},children:["$",T.toFixed(2)]})]})]}),A.map(D=>{const q=a.filter(F=>F.category===D.id);return q.length===0?null:r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{children:D.emoji}),D.label,r.jsx("span",{className:"badge badge-primary",children:q.length})]}),r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:q.map(F=>r.jsx("div",{children:C?.id===F.id?r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.75rem"},children:"Edit Menu Item"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.75rem",marginBottom:"0.75rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Item Name"}),r.jsx("input",{type:"text",className:"form-input",value:C.name,onChange:Q=>I({...C,name:Q.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Category"}),r.jsx("select",{className:"form-input",value:C.category,onChange:Q=>I({...C,category:Q.target.value}),style:{padding:"0.5rem"},children:A.map(Q=>r.jsx("option",{value:Q.id,children:Q.label},Q.id))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Quantity"}),r.jsx("input",{type:"number",className:"form-input",value:C.quantity,onChange:Q=>I({...C,quantity:Q.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Servings"}),r.jsx("input",{type:"number",className:"form-input",value:C.servings,onChange:Q=>I({...C,servings:Q.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Cost ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:C.cost,onChange:Q=>I({...C,cost:Q.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Vendor"}),r.jsx("input",{type:"text",className:"form-input",value:C.vendor||"",onChange:Q=>I({...C,vendor:Q.target.value}),style:{padding:"0.5rem"}})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("button",{onClick:z,className:"btn btn-primary",style:{padding:"0.5rem 1rem"},children:[r.jsx(Qt,{size:14})," Save"]}),r.jsxs("button",{onClick:H,className:"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:[r.jsx(It,{size:14})," Cancel"]})]})]}):r.jsx("div",{className:"card",style:{padding:"1rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.5rem"},children:F.name}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:[r.jsxs("span",{children:["Qty: ",F.quantity]}),r.jsxs("span",{children:["Servings: ",F.servings]}),r.jsxs("span",{style:{fontWeight:600,color:"var(--warning)"},children:["$",F.cost.toFixed(2)]}),F.vendor&&r.jsxs("span",{children:["Vendor: ",F.vendor]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("select",{value:F.status,onChange:Q=>X(F.id,Q.target.value),style:{padding:"0.375rem 0.75rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border)",fontSize:"0.875rem",fontWeight:500,color:k.find(Q=>Q.id===F.status)?.color,cursor:"pointer"},children:k.map(Q=>r.jsx("option",{value:Q.id,children:Q.label},Q.id))}),r.jsx("button",{onClick:()=>W(F),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--primary)",cursor:"pointer",borderRadius:"var(--radius-md)"},title:"Edit item",children:r.jsx(gi,{size:16})}),r.jsx("button",{onClick:()=>V(F.id),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--error)",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(Yt,{size:16})})]})]})})},F.id))})]},D.id)}),a.length===0&&!y&&r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[r.jsx(bf,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"No Menu Items Yet"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Start planning your menu by adding items"}),r.jsxs("button",{onClick:()=>x(!0),className:"btn btn-primary",children:[r.jsx(Mt,{size:16})," Add First Item"]})]})]})},Tg=({event:u,onUpdateTasks:h})=>{const[a,g]=U.useState(u.tasks||[]),[y,x]=U.useState(!1),[C,I]=U.useState({title:"",category:"planning",priority:"medium",deadline:"",status:"not-started"}),S=[{id:"planning",label:"Planning",emoji:""},{id:"booking",label:"Booking",emoji:""},{id:"day-of",label:"Day-of Event",emoji:""},{id:"post-event",label:"Post-Event",emoji:""}],v=[{id:"high",label:"High",color:"var(--error)"},{id:"medium",label:"Medium",color:"var(--warning)"},{id:"low",label:"Low",color:"var(--success)"}],A=[{id:"not-started",label:"Not Started",color:"var(--text-tertiary)"},{id:"in-progress",label:"In Progress",color:"var(--warning)"},{id:"completed",label:"Completed",color:"var(--success)"}],k=()=>{if(!C.title)return;const N={id:Date.now().toString(),...C,createdAt:new Date().toISOString()},P=[...a,N];g(P),h?.(P),I({title:"",category:"planning",priority:"medium",deadline:"",status:"not-started"}),x(!1)},_=N=>{const P=a.filter(D=>D.id!==N);g(P),h?.(P)},V=(N,P)=>{const D=a.map(q=>q.id===N?{...q,status:P}:q);g(D),h?.(D)},X=a.length,W=a.filter(N=>N.status==="completed").length,z=a.filter(N=>N.status==="in-progress").length,H=X>0?W/X*100:0,T=a.filter(N=>!N.deadline||N.status==="completed"?!1:new Date(N.deadline)<new Date);return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>x(!y),className:"btn btn-primary",style:{marginBottom:"1.5rem"},children:[r.jsx(Mt,{size:16})," Add Task"]}),y&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"New Task"}),r.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Task Title*"}),r.jsx("input",{type:"text",className:"form-input",value:C.title,onChange:N=>I({...C,title:N.target.value}),placeholder:"e.g., Book photographer",autoFocus:!0})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Category"}),r.jsx("select",{className:"form-input",value:C.category,onChange:N=>I({...C,category:N.target.value}),children:S.map(N=>r.jsxs("option",{value:N.id,children:[N.emoji," ",N.label]},N.id))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Priority"}),r.jsx("select",{className:"form-input",value:C.priority,onChange:N=>I({...C,priority:N.target.value}),children:v.map(N=>r.jsx("option",{value:N.id,children:N.label},N.id))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Deadline (Optional)"}),r.jsx("input",{type:"date",className:"form-input",value:C.deadline,onChange:N=>I({...C,deadline:N.target.value})})]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{onClick:k,className:"btn btn-primary",children:[r.jsx(Qt,{size:16})," Add Task"]}),r.jsxs("button",{onClick:()=>x(!1),className:"btn btn-secondary",children:[r.jsx(It,{size:16})," Cancel"]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Tasks"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--primary)"},children:X})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Completed"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--success)"},children:W})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"In Progress"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--warning)"},children:z})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Overdue"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--error)"},children:T.length})]})]}),r.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[r.jsx("span",{style:{fontSize:"0.9375rem",fontWeight:500},children:"Overall Progress"}),r.jsxs("span",{style:{fontSize:"0.9375rem",fontWeight:600,color:"var(--primary)"},children:[H.toFixed(0),"%"]})]}),r.jsx("div",{style:{height:"12px",background:"var(--bg-secondary)",borderRadius:"999px",overflow:"hidden"},children:r.jsx("div",{style:{height:"100%",width:`${H}%`,background:"linear-gradient(90deg, var(--success) 0%, #059669 100%)",transition:"width 0.5s ease",borderRadius:"999px"}})})]}),S.map(N=>{const P=a.filter(D=>D.category===N.id);return P.length===0?null:r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{children:N.emoji}),N.label,r.jsx("span",{className:"badge badge-primary",children:P.length})]}),r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:P.map(D=>{const q=D.deadline&&new Date(D.deadline)<new Date&&D.status!=="completed",F=v.find(Q=>Q.id===D.priority)?.color;return r.jsx("div",{className:"card",style:{padding:"1rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600},children:D.title}),r.jsx("span",{style:{padding:"0.25rem 0.5rem",background:F,color:"white",borderRadius:"var(--radius-sm)",fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase"},children:D.priority})]}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:D.deadline&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:q?"var(--error)":"inherit"},children:[r.jsx(Zn,{size:14}),new Date(D.deadline).toLocaleDateString(),q&&" (Overdue)"]})})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("select",{value:D.status,onChange:Q=>V(D.id,Q.target.value),style:{padding:"0.375rem 0.75rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border)",fontSize:"0.875rem",fontWeight:500,color:A.find(Q=>Q.id===D.status)?.color,cursor:"pointer"},children:A.map(Q=>r.jsx("option",{value:Q.id,children:Q.label},Q.id))}),r.jsx("button",{onClick:()=>_(D.id),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--error)",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(Yt,{size:16})})]})]})},D.id)})})]},N.id)}),a.length===0&&!y&&r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[r.jsx(lf,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"No Tasks Yet"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Start organizing your event with a task checklist"}),r.jsxs("button",{onClick:()=>x(!0),className:"btn btn-primary",children:[r.jsx(Mt,{size:16})," Add First Task"]})]})]})},_g=({event:u,onUpdateVenue:h})=>{const[a,g]=U.useState(u.venue||{name:"",address:"",contact:"",phone:"",capacity:"",setupTime:"",eventTime:"",teardownTime:"",bookingStatus:"not-booked",deposit:"",totalCost:"",notes:"",amenities:[]}),[y,x]=U.useState(!u.venue?.name),C=[{id:"not-booked",label:"Not Booked",color:"var(--text-tertiary)"},{id:"pending",label:"Pending",color:"var(--warning)"},{id:"deposit-paid",label:"Deposit Paid",color:"var(--primary)"},{id:"confirmed",label:"Confirmed",color:"var(--success)"}],I=["Parking","Wheelchair Accessible","WiFi","Sound System","Projector/Screen","Kitchen","Bar","Dance Floor","Outdoor Space","Air Conditioning","Heating","Tables & Chairs"],S=()=>{h?.(a),x(!1)},v=()=>{u.venue&&(g(u.venue),x(!1))},A=_=>{const V=a.amenities||[];V.includes(_)?g({...a,amenities:V.filter(X=>X!==_)}):g({...a,amenities:[...V,_]})},k=a.name||u.venue?.name;return!k&&!y?r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[r.jsx(og,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"No Venue Yet"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Add your venue details to keep track of location and booking information"}),r.jsx("button",{onClick:()=>x(!0),className:"btn btn-primary",children:"Add Venue Information"})]}):r.jsx("div",{children:k&&!y?r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)"},children:a.name}),r.jsx("button",{onClick:()=>x(!0),className:"btn btn-secondary",children:"Edit Venue Details"})]}),r.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1.5rem",background:`linear-gradient(135deg, ${C.find(_=>_.id===a.bookingStatus)?.color||"var(--primary)"} 0%, var(--primary-dark) 100%)`,color:"white"},children:[r.jsx("div",{style:{fontSize:"0.875rem",opacity:.9,marginBottom:"0.5rem"},children:"Booking Status"}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:700},children:C.find(_=>_.id===a.bookingStatus)?.label})]}),r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Kr,{size:20,style:{color:"var(--primary)"}}),"Location & Contact"]}),r.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[a.address&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Address"}),r.jsx("div",{style:{fontSize:"1rem",color:"var(--text-primary)"},children:a.address})]}),a.contact&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Contact Person"}),r.jsx("div",{style:{fontSize:"1rem",color:"var(--text-primary)"},children:a.contact})]}),a.phone&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Phone"}),r.jsx("div",{style:{fontSize:"1rem",color:"var(--text-primary)"},children:a.phone})]}),a.capacity&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Capacity"}),r.jsxs("div",{style:{fontSize:"1rem",color:"var(--text-primary)"},children:[a.capacity," guests"]})]})]})]}),(a.setupTime||a.eventTime||a.teardownTime)&&r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"Schedule"}),r.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[a.setupTime&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Setup Time"}),r.jsx("div",{style:{fontSize:"1rem",color:"var(--text-primary)"},children:a.setupTime})]}),a.eventTime&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Event Time"}),r.jsx("div",{style:{fontSize:"1rem",color:"var(--text-primary)"},children:a.eventTime})]}),a.teardownTime&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Teardown Time"}),r.jsx("div",{style:{fontSize:"1rem",color:"var(--text-primary)"},children:a.teardownTime})]})]})]}),(a.deposit||a.totalCost)&&r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"Costs"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[a.deposit&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Deposit Paid"}),r.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--warning)"},children:["$",parseFloat(a.deposit).toFixed(2)]})]}),a.totalCost&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Cost"}),r.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--primary)"},children:["$",parseFloat(a.totalCost).toFixed(2)]})]})]})]}),a.amenities&&a.amenities.length>0&&r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"Amenities"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:a.amenities.map(_=>r.jsx("span",{className:"badge badge-primary",children:_},_))})]}),a.notes&&r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"Notes"}),r.jsx("p",{style:{color:"var(--text-secondary)",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:a.notes})]})]})]}):r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1.5rem"},children:k?"Edit Venue Details":"Add Venue Information"}),r.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Venue Name*"}),r.jsx("input",{type:"text",className:"form-input",value:a.name,onChange:_=>g({...a,name:_.target.value}),placeholder:"e.g., Grand Ballroom Hotel"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Capacity"}),r.jsx("input",{type:"number",className:"form-input",value:a.capacity,onChange:_=>g({...a,capacity:_.target.value}),placeholder:"e.g., 200"})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Address"}),r.jsx("input",{type:"text",className:"form-input",value:a.address,onChange:_=>g({...a,address:_.target.value}),placeholder:"Full venue address"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Contact Person"}),r.jsx("input",{type:"text",className:"form-input",value:a.contact,onChange:_=>g({...a,contact:_.target.value}),placeholder:"Name"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Phone"}),r.jsx("input",{type:"tel",className:"form-input",value:a.phone,onChange:_=>g({...a,phone:_.target.value}),placeholder:"+1 (555) 000-0000"})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Setup Time"}),r.jsx("input",{type:"time",className:"form-input",value:a.setupTime,onChange:_=>g({...a,setupTime:_.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Event Time"}),r.jsx("input",{type:"time",className:"form-input",value:a.eventTime,onChange:_=>g({...a,eventTime:_.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Teardown Time"}),r.jsx("input",{type:"time",className:"form-input",value:a.teardownTime,onChange:_=>g({...a,teardownTime:_.target.value})})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Booking Status"}),r.jsx("select",{className:"form-input",value:a.bookingStatus,onChange:_=>g({...a,bookingStatus:_.target.value}),children:C.map(_=>r.jsx("option",{value:_.id,children:_.label},_.id))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Deposit Paid ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:a.deposit,onChange:_=>g({...a,deposit:_.target.value}),placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Total Cost ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:a.totalCost,onChange:_=>g({...a,totalCost:_.target.value}),placeholder:"0.00"})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.75rem"},children:"Amenities"}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"0.5rem"},children:I.map(_=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",padding:"0.5rem",borderRadius:"var(--radius-md)",background:(a.amenities||[]).includes(_)?"var(--bg-secondary)":"transparent"},children:[r.jsx("input",{type:"checkbox",checked:(a.amenities||[]).includes(_),onChange:()=>A(_),style:{cursor:"pointer"}}),r.jsx("span",{style:{fontSize:"0.875rem"},children:_})]},_))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Notes"}),r.jsx("textarea",{className:"form-input",value:a.notes,onChange:_=>g({...a,notes:_.target.value}),placeholder:"Any special requirements, restrictions, or important details...",rows:4,style:{resize:"vertical"}})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",paddingTop:"1rem",borderTop:"1px solid var(--border)"},children:[r.jsxs("button",{onClick:S,className:"btn btn-primary",disabled:!a.name,children:[r.jsx(pf,{size:16})," Save Venue Details"]}),k&&r.jsxs("button",{onClick:v,className:"btn btn-secondary",children:[r.jsx(It,{size:16})," Cancel"]})]})]})]})})},Rg=({event:u,onUpdateDecorations:h})=>{const[a,g]=U.useState(u.decorations||{theme:"",colorPalette:[],items:[]}),[y,x]=U.useState(!1),[C,I]=U.useState(null),[S,v]=U.useState({item:"",area:"entrance",quantity:"",cost:"",status:"planned"}),A=[{id:"entrance",label:"Entrance",emoji:""},{id:"stage",label:"Stage/Main Area",emoji:""},{id:"tables",label:"Tables",emoji:""},{id:"ceiling",label:"Ceiling",emoji:""},{id:"walls",label:"Walls",emoji:""},{id:"outdoor",label:"Outdoor",emoji:""}],k=[{id:"planned",label:"Planned",color:"var(--text-tertiary)"},{id:"ordered",label:"Ordered",color:"var(--warning)"},{id:"received",label:"Received",color:"var(--success)"}],_=()=>{if(!S.item)return;const D={id:Date.now().toString(),...S,quantity:parseInt(S.quantity)||0,cost:parseFloat(S.cost)||0},q={...a,items:[...a.items||[],D]};g(q),h?.(q),v({item:"",area:"entrance",quantity:"",cost:"",status:"planned"}),x(!1)},V=D=>{const q={...a,items:a.items.filter(F=>F.id!==D)};g(q),h?.(q)},X=(D,q)=>{const F={...a,items:a.items.map(Q=>Q.id===D?{...Q,status:q}:Q)};g(F),h?.(F)},W=(D,q)=>{const F={...a,theme:D,colorPalette:q};g(F),h?.(F)},z=D=>{I({...D})},H=()=>{if(!C.item)return;const D={...a,items:a.items.map(q=>q.id===C.id?{...C,quantity:parseInt(C.quantity)||0,cost:parseFloat(C.cost)||0}:q)};g(D),h?.(D),I(null)},T=()=>{I(null)},N=a.items||[],P=N.reduce((D,q)=>D+(q.cost||0),0);return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>x(!y),className:"btn btn-primary",style:{marginBottom:"1.5rem"},children:[r.jsx(Mt,{size:16})," Add Decoration Item"]}),y&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"New Decoration Item"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Item*"}),r.jsx("input",{type:"text",className:"form-input",value:S.item,onChange:D=>v({...S,item:D.target.value}),placeholder:"e.g., Balloons, Flowers",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Area"}),r.jsx("select",{className:"form-input",value:S.area,onChange:D=>v({...S,area:D.target.value}),children:A.map(D=>r.jsxs("option",{value:D.id,children:[D.emoji," ",D.label]},D.id))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Quantity"}),r.jsx("input",{type:"number",className:"form-input",value:S.quantity,onChange:D=>v({...S,quantity:D.target.value}),placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Cost ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:S.cost,onChange:D=>v({...S,cost:D.target.value}),placeholder:"0.00"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{onClick:_,className:"btn btn-primary",children:[r.jsx(Qt,{size:16})," Add Item"]}),r.jsxs("button",{onClick:()=>x(!1),className:"btn btn-secondary",children:[r.jsx(It,{size:16})," Cancel"]})]})]}),r.jsxs("div",{className:"card",style:{marginBottom:"2rem",padding:"1.5rem"},children:[r.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(pg,{size:20,style:{color:"var(--primary)"}}),"Theme & Color Palette"]}),r.jsx("div",{style:{display:"grid",gap:"1rem"},children:r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Theme Name"}),r.jsx("input",{type:"text",className:"form-input",value:a.theme,onChange:D=>W(D.target.value,a.colorPalette),placeholder:"e.g., Vintage Garden, Modern Elegance"})]})})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Items"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--primary)"},children:N.length})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Cost"}),r.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--warning)"},children:["$",P.toFixed(2)]})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Received"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--success)"},children:N.filter(D=>D.status==="received").length})]})]}),A.map(D=>{const q=N.filter(F=>F.area===D.id);return q.length===0?null:r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{children:D.emoji}),D.label,r.jsx("span",{className:"badge badge-primary",children:q.length})]}),r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:q.map(F=>r.jsx("div",{children:C?.id===F.id?r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.75rem"},children:"Edit Decoration"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.75rem",marginBottom:"0.75rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Item"}),r.jsx("input",{type:"text",className:"form-input",value:C.item,onChange:Q=>I({...C,item:Q.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Area"}),r.jsx("select",{className:"form-input",value:C.area,onChange:Q=>I({...C,area:Q.target.value}),style:{padding:"0.5rem"},children:A.map(Q=>r.jsx("option",{value:Q.id,children:Q.label},Q.id))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Quantity"}),r.jsx("input",{type:"number",className:"form-input",value:C.quantity,onChange:Q=>I({...C,quantity:Q.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Cost ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:C.cost,onChange:Q=>I({...C,cost:Q.target.value}),style:{padding:"0.5rem"}})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("button",{onClick:H,className:"btn btn-primary",style:{padding:"0.5rem 1rem"},children:[r.jsx(Qt,{size:14})," Save"]}),r.jsxs("button",{onClick:T,className:"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:[r.jsx(It,{size:14})," Cancel"]})]})]}):r.jsx("div",{className:"card",style:{padding:"1rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.5rem"},children:F.item}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:[r.jsxs("span",{children:["Qty: ",F.quantity]}),r.jsxs("span",{style:{fontWeight:600,color:"var(--warning)"},children:["$",F.cost.toFixed(2)]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("select",{value:F.status,onChange:Q=>X(F.id,Q.target.value),style:{padding:"0.375rem 0.75rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border)",fontSize:"0.875rem",fontWeight:500,color:k.find(Q=>Q.id===F.status)?.color,cursor:"pointer"},children:k.map(Q=>r.jsx("option",{value:Q.id,children:Q.label},Q.id))}),r.jsx("button",{onClick:()=>z(F),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--primary)",cursor:"pointer",borderRadius:"var(--radius-md)"},title:"Edit item",children:r.jsx(gi,{size:16})}),r.jsx("button",{onClick:()=>V(F.id),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--error)",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(Yt,{size:16})})]})]})})},F.id))})]},D.id)}),N.length===0&&!y&&r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[r.jsx(yf,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"No Decorations Yet"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Start planning your decor by adding items"}),r.jsxs("button",{onClick:()=>x(!0),className:"btn btn-primary",children:[r.jsx(Mt,{size:16})," Add First Item"]})]})]})},Og=({event:u,onUpdateGifts:h})=>{const[a,g]=U.useState(u.gifts?.items||[]),[y,x]=U.useState(!1),[C,I]=U.useState(null),[S,v]=U.useState({name:"",quantity:"",cost:"",personalization:"",status:"planned"}),A=[{id:"planned",label:"Planned",color:"var(--text-tertiary)"},{id:"ordered",label:"Ordered",color:"var(--warning)"},{id:"received",label:"Received",color:"var(--success)"},{id:"distributed",label:"Distributed",color:"var(--primary)"}],k=u.guests?.length||0,_=()=>{if(!S.name)return;const P={id:Date.now().toString(),...S,quantity:parseInt(S.quantity)||0,cost:parseFloat(S.cost)||0},D=[...a,P];g(D),h?.({items:D}),v({name:"",quantity:"",cost:"",personalization:"",status:"planned"}),x(!1)},V=P=>{const D=a.filter(q=>q.id!==P);g(D),h?.({items:D})},X=(P,D)=>{const q=a.map(F=>F.id===P?{...F,status:D}:F);g(q),h?.({items:q})},W=P=>{I({...P})},z=()=>{if(!C.name)return;const P=a.map(D=>D.id===C.id?{...C,quantity:parseInt(C.quantity)||0,cost:parseFloat(C.cost)||0}:D);g(P),h?.({items:P}),I(null)},H=()=>{I(null)},T=a.reduce((P,D)=>P+(D.cost||0),0),N=a.reduce((P,D)=>P+(D.quantity||0),0);return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>x(!y),className:"btn btn-primary",style:{marginBottom:"1.5rem"},children:[r.jsx(Mt,{size:16})," Add Gift Item"]}),y&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"New Gift Item"}),r.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Gift Name*"}),r.jsx("input",{type:"text",className:"form-input",value:S.name,onChange:P=>v({...S,name:P.target.value}),placeholder:"e.g., Personalized Keychains",autoFocus:!0})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Quantity"}),r.jsx("input",{type:"number",className:"form-input",value:S.quantity,onChange:P=>v({...S,quantity:P.target.value}),placeholder:k?`Suggested: ${k}`:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Cost per Item ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:S.cost,onChange:P=>v({...S,cost:P.target.value}),placeholder:"0.00"})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Personalization Notes (Optional)"}),r.jsx("input",{type:"text",className:"form-input",value:S.personalization,onChange:P=>v({...S,personalization:P.target.value}),placeholder:"e.g., Names engraved, Custom message"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{onClick:_,className:"btn btn-primary",children:[r.jsx(Qt,{size:16})," Add Gift"]}),r.jsxs("button",{onClick:()=>x(!1),className:"btn btn-secondary",children:[r.jsx(It,{size:16})," Cancel"]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Gift Types"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--primary)"},children:a.length})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Quantity"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--success)"},children:N})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Guests"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--text-primary)"},children:k})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Cost"}),r.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--warning)"},children:["$",T.toFixed(2)]})]})]}),k>0&&N<k&&r.jsx("div",{className:"card",style:{padding:"1rem",marginBottom:"1.5rem",background:"#fef3c7",borderLeft:"4px solid var(--warning)"},children:r.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",fontWeight:500},children:[" You need ",k-N," more gifts to cover all guests"]})}),r.jsxs("button",{onClick:()=>x(!y),className:"btn btn-primary",style:{marginBottom:"1.5rem"},children:[r.jsx(Mt,{size:16})," Add Gift Item"]}),y&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"New Gift Item"}),r.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Gift Name*"}),r.jsx("input",{type:"text",className:"form-input",value:S.name,onChange:P=>v({...S,name:P.target.value}),placeholder:"e.g., Personalized Keychains"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Quantity"}),r.jsx("input",{type:"number",className:"form-input",value:S.quantity,onChange:P=>v({...S,quantity:P.target.value}),placeholder:k?`Suggested: ${k}`:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Cost per Item ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:S.cost,onChange:P=>v({...S,cost:P.target.value}),placeholder:"0.00"})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Personalization Notes (Optional)"}),r.jsx("input",{type:"text",className:"form-input",value:S.personalization,onChange:P=>v({...S,personalization:P.target.value}),placeholder:"e.g., Names engraved, Custom message"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{onClick:_,className:"btn btn-primary",children:[r.jsx(Qt,{size:16})," Add Gift"]}),r.jsxs("button",{onClick:()=>x(!1),className:"btn btn-secondary",children:[r.jsx(It,{size:16})," Cancel"]})]})]}),a.length>0&&r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:a.map(P=>r.jsx("div",{children:C?.id===P.id?r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.75rem"},children:"Edit Gift"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.75rem",marginBottom:"0.75rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Gift Name"}),r.jsx("input",{type:"text",className:"form-input",value:C.name,onChange:D=>I({...C,name:D.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Quantity"}),r.jsx("input",{type:"number",className:"form-input",value:C.quantity,onChange:D=>I({...C,quantity:D.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Cost ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:C.cost,onChange:D=>I({...C,cost:D.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Recipient"}),r.jsx("input",{type:"text",className:"form-input",value:C.recipient||"",onChange:D=>I({...C,recipient:D.target.value}),style:{padding:"0.5rem"}})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("button",{onClick:z,className:"btn btn-primary",style:{padding:"0.5rem 1rem"},children:[r.jsx(Qt,{size:14})," Save"]}),r.jsxs("button",{onClick:H,className:"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:[r.jsx(It,{size:14})," Cancel"]})]})]}):r.jsx("div",{className:"card",style:{padding:"1rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.5rem"},children:P.name}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:[r.jsxs("span",{children:["Qty: ",P.quantity]}),r.jsxs("span",{children:["@ $",(P.cost/P.quantity||0).toFixed(2)," each"]}),r.jsxs("span",{style:{fontWeight:600,color:"var(--warning)"},children:["Total: $",P.cost.toFixed(2)]})]}),P.personalization&&r.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)",fontStyle:"italic"},children:P.personalization})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("select",{value:P.status,onChange:D=>X(P.id,D.target.value),style:{padding:"0.375rem 0.75rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border)",fontSize:"0.875rem",fontWeight:500,color:A.find(D=>D.id===P.status)?.color,cursor:"pointer"},children:A.map(D=>r.jsx("option",{value:D.id,children:D.label},D.id))}),r.jsx("button",{onClick:()=>W(P),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--primary)",cursor:"pointer",borderRadius:"var(--radius-md)"},title:"Edit gift",children:r.jsx(gi,{size:16})}),r.jsx("button",{onClick:()=>V(P.id),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--error)",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(Yt,{size:16})})]})]})})},P.id))}),a.length===0&&!y&&r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[r.jsx(df,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"No Gifts Yet"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Add return gifts or party favors for your guests"}),r.jsxs("button",{onClick:()=>x(!0),className:"btn btn-primary",children:[r.jsx(Mt,{size:16})," Add First Gift"]})]})]})},Dg=({event:u,onUpdateEntertainment:h})=>{const[a,g]=U.useState(u.entertainment||{activities:[],playlist:[]}),[y,x]=U.useState(!1),[C,I]=U.useState(null),[S,v]=U.useState({name:"",time:"",duration:"",performer:"",notes:""}),A=()=>{if(!S.name)return;const H={id:Date.now().toString(),...S},T={...a,activities:[...a.activities||[],H]};g(T),h?.(T),v({name:"",time:"",duration:"",performer:"",notes:""}),x(!1)},k=H=>{const T={...a,activities:a.activities.filter(N=>N.id!==H)};g(T),h?.(T)},_=H=>{I({...H})},V=()=>{if(!C.name)return;const H={...a,activities:a.activities.map(T=>T.id===C.id?{...C}:T)};g(H),h?.(H),I(null)},X=()=>{I(null)},W=a.activities||[],z=[...W].sort((H,T)=>!H.time||!T.time?0:H.time.localeCompare(T.time));return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>x(!y),className:"btn btn-primary",style:{marginBottom:"1.5rem"},children:[r.jsx(Mt,{size:16})," Add Activity"]}),y&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"New Activity"}),r.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Activity Name*"}),r.jsx("input",{type:"text",className:"form-input",value:S.name,onChange:H=>v({...S,name:H.target.value}),placeholder:"e.g., DJ Performance, Games, Dance",autoFocus:!0})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Start Time"}),r.jsx("input",{type:"time",className:"form-input",value:S.time,onChange:H=>v({...S,time:H.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Duration (minutes)"}),r.jsx("input",{type:"number",className:"form-input",value:S.duration,onChange:H=>v({...S,duration:H.target.value}),placeholder:"30"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Performer/Host (Optional)"}),r.jsx("input",{type:"text",className:"form-input",value:S.performer,onChange:H=>v({...S,performer:H.target.value}),placeholder:"Name"})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Notes (Optional)"}),r.jsx("textarea",{className:"form-input",value:S.notes,onChange:H=>v({...S,notes:H.target.value}),placeholder:"Equipment needed, special instructions, etc.",rows:2})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{onClick:A,className:"btn btn-primary",children:[r.jsx(Qt,{size:16})," Add Activity"]}),r.jsxs("button",{onClick:()=>x(!1),className:"btn btn-secondary",children:[r.jsx(It,{size:16})," Cancel"]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Activities"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--primary)"},children:W.length})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Scheduled"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--success)"},children:W.filter(H=>H.time).length})]})]}),z.length>0&&r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(ha,{size:20,style:{color:"var(--primary)"}}),"Event Timeline"]}),r.jsx("div",{style:{display:"grid",gap:"1rem"},children:z.map((H,T)=>r.jsxs("div",{style:{position:"relative",paddingLeft:"2.5rem"},children:[r.jsx("div",{style:{position:"absolute",left:"0",top:"0.5rem",width:"12px",height:"12px",borderRadius:"50%",background:"var(--primary)",border:"3px solid var(--bg-primary)"}}),T<z.length-1&&r.jsx("div",{style:{position:"absolute",left:"5px",top:"1.5rem",bottom:"-1rem",width:"2px",background:"var(--border)"}}),C?.id===H.id?r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.75rem"},children:"Edit Activity"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.75rem",marginBottom:"0.75rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Activity Name"}),r.jsx("input",{type:"text",className:"form-input",value:C.name,onChange:N=>I({...C,name:N.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Time"}),r.jsx("input",{type:"time",className:"form-input",value:C.time,onChange:N=>I({...C,time:N.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Duration (mins)"}),r.jsx("input",{type:"text",className:"form-input",value:C.duration,onChange:N=>I({...C,duration:N.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Performer/Host"}),r.jsx("input",{type:"text",className:"form-input",value:C.performer||"",onChange:N=>I({...C,performer:N.target.value}),style:{padding:"0.5rem"}})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("button",{onClick:V,className:"btn btn-primary",style:{padding:"0.5rem 1rem"},children:[r.jsx(Qt,{size:14})," Save"]}),r.jsxs("button",{onClick:X,className:"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:[r.jsx(It,{size:14})," Cancel"]})]})]}):r.jsx("div",{style:{background:"var(--bg-secondary)",padding:"1rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border)"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.5rem"},children:H.name}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:[H.time&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(ha,{size:14}),H.time]}),H.duration&&r.jsxs("span",{children:[" ",H.duration," mins"]}),H.performer&&r.jsxs("span",{children:[" ",H.performer]})]}),H.notes&&r.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)",fontStyle:"italic"},children:H.notes})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("button",{onClick:()=>_(H),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--primary)",cursor:"pointer",borderRadius:"var(--radius-md)"},title:"Edit activity",children:r.jsx(gi,{size:16})}),r.jsx("button",{onClick:()=>k(H.id),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--error)",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(Yt,{size:16})})]})]})})]},H.id))})]}),W.length===0&&!y&&r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[r.jsx(hf,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"No Activities Yet"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Plan your entertainment schedule and activities"}),r.jsxs("button",{onClick:()=>x(!0),className:"btn btn-primary",children:[r.jsx(Mt,{size:16})," Add First Activity"]})]})]})},Pg=({event:u,onUpdateVendors:h})=>{const[a,g]=U.useState(u.vendors||[]),[y,x]=U.useState(!1),[C,I]=U.useState(null),[S,v]=U.useState({name:"",category:"other",contact:"",phone:"",email:"",cost:"",status:"contacted",notes:""}),A=[{id:"photography",label:"Photography",emoji:""},{id:"catering",label:"Catering",emoji:""},{id:"entertainment",label:"Entertainment",emoji:""},{id:"decoration",label:"Decoration",emoji:""},{id:"venue",label:"Venue",emoji:""},{id:"transport",label:"Transportation",emoji:""},{id:"other",label:"Other",emoji:""}],k=[{id:"contacted",label:"Contacted",color:"var(--text-tertiary)"},{id:"quoted",label:"Quoted",color:"var(--warning)"},{id:"booked",label:"Booked",color:"var(--success)"},{id:"paid",label:"Paid",color:"var(--primary)"}],_=()=>{if(!S.name)return;const P={id:Date.now().toString(),...S,cost:parseFloat(S.cost)||0},D=[...a,P];g(D),h?.(D),v({name:"",category:"other",contact:"",phone:"",email:"",cost:"",status:"contacted",notes:""}),x(!1)},V=P=>{const D=a.filter(q=>q.id!==P);g(D),h?.(D)},X=(P,D)=>{const q=a.map(F=>F.id===P?{...F,status:D}:F);g(q),h?.(q)},W=P=>{I({...P})},z=()=>{if(!C.name)return;const P=a.map(D=>D.id===C.id?{...C,cost:parseFloat(C.cost)||0}:D);g(P),h?.(P),I(null)},H=()=>{I(null)},T=a.reduce((P,D)=>P+(D.cost||0),0),N=a.filter(P=>P.status==="booked"||P.status==="paid").length;return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>x(!y),className:"btn btn-primary",style:{marginBottom:"1.5rem"},children:[r.jsx(Mt,{size:16})," Add Vendor"]}),y&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem"},children:"New Vendor"}),r.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Vendor Name*"}),r.jsx("input",{type:"text",className:"form-input",value:S.name,onChange:P=>v({...S,name:P.target.value}),placeholder:"Company or person name",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Category"}),r.jsx("select",{className:"form-input",value:S.category,onChange:P=>v({...S,category:P.target.value}),children:A.map(P=>r.jsxs("option",{value:P.id,children:[P.emoji," ",P.label]},P.id))})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Contact Person"}),r.jsx("input",{type:"text",className:"form-input",value:S.contact,onChange:P=>v({...S,contact:P.target.value}),placeholder:"Name"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Phone"}),r.jsx("input",{type:"tel",className:"form-input",value:S.phone,onChange:P=>v({...S,phone:P.target.value}),placeholder:"+1 (555) 000-0000"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Email"}),r.jsx("input",{type:"email",className:"form-input",value:S.email,onChange:P=>v({...S,email:P.target.value}),placeholder:"email@example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Cost ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:S.cost,onChange:P=>v({...S,cost:P.target.value}),placeholder:"0.00"})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.5rem"},children:"Notes (Optional)"}),r.jsx("textarea",{className:"form-input",value:S.notes,onChange:P=>v({...S,notes:P.target.value}),placeholder:"Contract details, special requirements, etc.",rows:2})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{onClick:_,className:"btn btn-primary",children:[r.jsx(Qt,{size:16})," Add Vendor"]}),r.jsxs("button",{onClick:()=>x(!1),className:"btn btn-secondary",children:[r.jsx(It,{size:16})," Cancel"]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Vendors"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--primary)"},children:a.length})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Booked"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--success)"},children:N})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Cost"}),r.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--warning)"},children:["$",T.toFixed(2)]})]})]}),A.map(P=>{const D=a.filter(q=>q.category===P.id);return D.length===0?null:r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{children:P.emoji}),P.label,r.jsx("span",{className:"badge badge-primary",children:D.length})]}),r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:D.map(q=>r.jsx("div",{children:C?.id===q.id?r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.75rem"},children:"Edit Vendor"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.75rem",marginBottom:"0.75rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Name"}),r.jsx("input",{type:"text",className:"form-input",value:C.name,onChange:F=>I({...C,name:F.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Category"}),r.jsx("select",{className:"form-input",value:C.category,onChange:F=>I({...C,category:F.target.value}),style:{padding:"0.5rem"},children:A.map(F=>r.jsx("option",{value:F.id,children:F.label},F.id))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Contact Person"}),r.jsx("input",{type:"text",className:"form-input",value:C.contact||"",onChange:F=>I({...C,contact:F.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Phone"}),r.jsx("input",{type:"tel",className:"form-input",value:C.phone||"",onChange:F=>I({...C,phone:F.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Email"}),r.jsx("input",{type:"email",className:"form-input",value:C.email||"",onChange:F=>I({...C,email:F.target.value}),style:{padding:"0.5rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.75rem",marginBottom:"0.25rem"},children:"Cost ($)"}),r.jsx("input",{type:"number",step:"0.01",className:"form-input",value:C.cost,onChange:F=>I({...C,cost:F.target.value}),style:{padding:"0.5rem"}})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("button",{onClick:z,className:"btn btn-primary",style:{padding:"0.5rem 1rem"},children:[r.jsx(Qt,{size:14})," Save"]}),r.jsxs("button",{onClick:H,className:"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:[r.jsx(It,{size:14})," Cancel"]})]})]}):r.jsx("div",{className:"card",style:{padding:"1rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.5rem"},children:q.name}),r.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.5rem"},children:[q.contact&&r.jsxs("div",{children:[" ",q.contact]}),q.phone&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(uo,{size:14}),r.jsx("a",{href:`tel:${q.phone}`,style:{color:"var(--primary)"},children:q.phone})]}),q.email&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(ks,{size:14}),r.jsx("a",{href:`mailto:${q.email}`,style:{color:"var(--primary)"},children:q.email})]}),q.cost>0&&r.jsxs("div",{style:{fontWeight:600,color:"var(--warning)",marginTop:"0.25rem"},children:["Cost: $",q.cost.toFixed(2)]})]}),q.notes&&r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",fontStyle:"italic",marginTop:"0.5rem"},children:q.notes})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("select",{value:q.status,onChange:F=>X(q.id,F.target.value),style:{padding:"0.375rem 0.75rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border)",fontSize:"0.875rem",fontWeight:500,color:k.find(F=>F.id===q.status)?.color,cursor:"pointer"},children:k.map(F=>r.jsx("option",{value:F.id,children:F.label},F.id))}),r.jsx("button",{onClick:()=>W(q),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--primary)",cursor:"pointer",borderRadius:"var(--radius-md)"},title:"Edit vendor",children:r.jsx(gi,{size:16})}),r.jsx("button",{onClick:()=>V(q.id),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--error)",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(Yt,{size:16})})]})]})})},q.id))})]},P.id)}),a.length===0&&!y&&r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[r.jsx(of,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"No Vendors Yet"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Build your vendor directory to manage all event suppliers"}),r.jsxs("button",{onClick:()=>x(!0),className:"btn btn-primary",children:[r.jsx(Mt,{size:16})," Add First Vendor"]})]})]})},Mg=["Venue","Catering","Decorations","Entertainment","Photography","Transportation","Gifts","Misc"],Bg=({event:u})=>{const{API_URL:h}=Tr(),[a,g]=U.useState(null),[y,x]=U.useState([]),[C,I]=U.useState(null),[S,v]=U.useState(!0),A=(J,se=2)=>{const ce=parseFloat(J);return isNaN(ce)?"0.00":ce.toFixed(se)},[k,_]=U.useState(""),[V,X]=U.useState(!1),[W,z]=U.useState(!1),[H,T]=U.useState(null),[N,P]=U.useState({category:"Venue",description:"",amount:"",vendor:"",paid:!1,date:new Date().toISOString().split("T")[0]});U.useEffect(()=>{u?.id&&D()},[u?.id]);const D=async()=>{try{v(!0);const se={Authorization:`Bearer ${localStorage.getItem("token")}`},ce=await fetch(`${h}/events/${u.id}/budget`,{headers:se});if(ce.ok){const B=await ce.json();g(B),B&&_(B.total_budget)}const Ce=await fetch(`${h}/events/${u.id}/expenses`,{headers:se});if(Ce.ok){const B=await Ce.json(),oe=Array.isArray(B)?B:B.expenses||[],Ee=[];(u.catering?.items||[]).forEach(le=>{parseFloat(le.cost)>0&&Ee.push({id:`catering-${le.id||Math.random()}`,category:"Catering",description:le.name||le.item||"Catering Item",amount:parseFloat(le.cost),paid:parseFloat(le.paid)||!1,source:"Catering Tab",isAutoGenerated:!0,date:new Date().toISOString()})}),(u.decorations?.items||[]).forEach(le=>{parseFloat(le.cost)>0&&Ee.push({id:`decorations-${le.id||Math.random()}`,category:"Decorations",description:le.name||le.item||"Decoration Item",amount:parseFloat(le.cost),paid:parseFloat(le.paid)||!1,source:"Decorations Tab",isAutoGenerated:!0,date:new Date().toISOString()})}),(u.gifts?.items||[]).forEach(le=>{parseFloat(le.cost)>0&&Ee.push({id:`gifts-${le.id||Math.random()}`,category:"Gifts",description:le.name||le.item||"Gift Item",amount:parseFloat(le.cost),paid:parseFloat(le.paid)||!1,source:"Gifts Tab",isAutoGenerated:!0,date:new Date().toISOString()})}),(u.vendors||[]).forEach(le=>{parseFloat(le.cost)>0&&Ee.push({id:`vendor-${le.id||Math.random()}`,category:"Vendors",description:le.name||"Vendor Service",amount:parseFloat(le.cost),paid:le.paid||!1,source:"Vendors Tab",isAutoGenerated:!0,date:new Date().toISOString(),vendor:le.name})}),u.venue?.totalCost&&parseFloat(u.venue.totalCost)>0&&Ee.push({id:"venue-cost",category:"Venue",description:u.venue.name||"Venue Rental",amount:parseFloat(u.venue.totalCost),paid:u.venue.deposit&&parseFloat(u.venue.deposit)>0,source:"Venue Tab",isAutoGenerated:!0,date:new Date().toISOString()}),x([...Ee,...oe])}const $=await fetch(`${h}/events/${u.id}/expenses/summary`,{headers:se});if($.ok){const B=await $.json();I(B)}}catch(J){console.error("Error fetching budget data:",J)}finally{v(!1)}},q=async()=>{try{const J=localStorage.getItem("token");(await fetch(`${h}/events/${u.id}/budget`,{method:"POST",headers:{Authorization:`Bearer ${J}`,"Content-Type":"application/json"},body:JSON.stringify({total_budget:parseFloat(k)})})).ok&&(X(!1),D())}catch(J){console.error("Error creating budget:",J)}},F=async()=>{try{const J=localStorage.getItem("token");(await fetch(`${h}/events/${u.id}/budget`,{method:"PUT",headers:{Authorization:`Bearer ${J}`,"Content-Type":"application/json"},body:JSON.stringify({total_budget:parseFloat(k)})})).ok&&D()}catch(J){console.error("Error updating budget:",J)}},Q=async()=>{try{const J=localStorage.getItem("token"),se=H?`${h}/events/${u.id}/expenses/${H.id}`:`${h}/events/${u.id}/expenses`;(await fetch(se,{method:H?"PUT":"POST",headers:{Authorization:`Bearer ${J}`,"Content-Type":"application/json"},body:JSON.stringify({...N,amount:parseFloat(N.amount)})})).ok&&(z(!1),T(null),P({category:"Venue",description:"",amount:"",vendor:"",paid:!1,date:new Date().toISOString().split("T")[0]}),D())}catch(J){console.error("Error saving expense:",J)}},pe=async J=>{if(confirm("Delete this expense?"))try{const se=localStorage.getItem("token");await fetch(`${h}/events/${u.id}/expenses/${J}`,{method:"DELETE",headers:{Authorization:`Bearer ${se}`}}),D()}catch(se){console.error("Error deleting expense:",se)}},Me=J=>{T(J),P({category:J.category,description:J.description||"",amount:J.amount,vendor:J.vendor||"",paid:J.paid,date:J.date?.split("T")[0]||new Date().toISOString().split("T")[0]}),z(!0)},be=y.reduce((J,se)=>J+(parseFloat(se.amount)||0),0),we=a?.total_budget||0,de=we-be,te=we>0?be/we*100:0,Y=te>100;return S?r.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Loading budget..."}):r.jsxs("div",{children:[V&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:[r.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:700,marginBottom:"1rem"},children:a?"Update Budget":"Set Budget"}),r.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[r.jsx("input",{type:"number",value:k,onChange:J=>_(J.target.value),placeholder:"Enter total budget",className:"form-input",style:{flex:1,background:"white",color:"var(--text-primary)"},autoFocus:!0}),r.jsxs("button",{onClick:a?F:q,className:"btn btn-primary",style:{background:"white",color:"var(--primary)"},children:[r.jsx(Qt,{size:18})," Save"]}),r.jsx("button",{onClick:()=>X(!1),className:"btn btn-secondary",style:{background:"rgba(255,255,255,0.2)",color:"white",border:"1px solid white"},children:r.jsx(It,{size:18})})]})]}),a?r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700},children:"Budget Overview"}),r.jsx("button",{onClick:()=>{_(a.total_budget),X(!0)},style:{padding:"0.5rem",border:"none",background:"rgba(255,255,255,0.2)",color:"white",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(gi,{size:18})})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem",marginBottom:"0.5rem"},children:[r.jsx("span",{children:"Progress"}),r.jsxs("span",{style:{fontWeight:700},children:[A(te,1),"%"]})]}),r.jsx("div",{style:{width:"100%",background:"rgba(255,255,255,0.3)",borderRadius:"999px",height:"12px",overflow:"hidden"},children:r.jsx("div",{style:{height:"100%",background:Y?"#ef4444":"white",width:`${Math.min(te,100)}%`,transition:"width 0.3s ease"}})})]}),C?.guest_count>0&&r.jsxs("div",{style:{fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(qi,{size:16}),r.jsxs("span",{children:["Cost per guest: ",r.jsxs("strong",{children:["$",A(C.cost_per_guest)]})," (",C.guest_count," guests)"]})]}),Y&&r.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(239,68,68,0.9)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(mo,{size:18}),r.jsx("span",{style:{fontSize:"0.875rem",fontWeight:600},children:"You are over budget!"})]})]}):r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center",marginBottom:"1.5rem"},children:[r.jsx(qi,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"Set Your Budget"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Track expenses and stay within your event budget"}),r.jsxs("button",{onClick:()=>X(!0),className:"btn btn-primary",children:[r.jsx(Mt,{size:18})," Set Budget"]})]}),a&&r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Budget"}),r.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--primary)"},children:["$",A(we)]})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Expenses"}),r.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--warning)"},children:["$",A(be)]})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Remaining"}),r.jsxs("div",{style:{fontSize:"1.75rem",fontWeight:700,color:Y?"var(--error)":"var(--success)"},children:["$",A(de)]})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Expenses"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--text-primary)"},children:y.length})]})]}),C?.by_category&&Object.keys(C.by_category).length>0&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:700,marginBottom:"1rem"},children:"Expenses by Category"}),r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:Object.entries(C.by_category).map(([J,se])=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)"},children:[r.jsx("span",{style:{fontWeight:600},children:J}),r.jsxs("span",{style:{color:"var(--warning)",fontWeight:700},children:["$",A(se)]})]},J))})]}),a&&r.jsxs("button",{onClick:()=>{T(null),P({category:"Venue",description:"",amount:"",vendor:"",paid:!1,date:new Date().toISOString().split("T")[0]}),z(!W)},className:"btn btn-primary",style:{marginBottom:"1.5rem"},children:[r.jsx(Mt,{size:18})," Add Expense"]}),W&&r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white"},children:[r.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:700,marginBottom:"1rem"},children:H?"Edit Expense":"Add Expense"}),r.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Category"}),r.jsx("select",{value:N.category,onChange:J=>P({...N,category:J.target.value}),className:"form-input",style:{background:"white",color:"var(--text-primary)"},children:Mg.map(J=>r.jsx("option",{value:J,children:J},J))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Amount ($)"}),r.jsx("input",{type:"number",step:"0.01",value:N.amount,onChange:J=>P({...N,amount:J.target.value}),placeholder:"0.00",className:"form-input",style:{background:"white",color:"var(--text-primary)"},autoFocus:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Description"}),r.jsx("input",{type:"text",value:N.description,onChange:J=>P({...N,description:J.target.value}),placeholder:"Optional description",className:"form-input",style:{background:"white",color:"var(--text-primary)"}})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Vendor"}),r.jsx("input",{type:"text",value:N.vendor,onChange:J=>P({...N,vendor:J.target.value}),placeholder:"Optional vendor name",className:"form-input",style:{background:"white",color:"var(--text-primary)"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Date"}),r.jsx("input",{type:"date",value:N.date,onChange:J=>P({...N,date:J.target.value}),className:"form-input",style:{background:"white",color:"var(--text-primary)"}})]})]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:600},children:[r.jsx("input",{type:"checkbox",checked:N.paid,onChange:J=>P({...N,paid:J.target.checked}),style:{width:"1rem",height:"1rem"}}),r.jsx("span",{children:"Paid"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{onClick:Q,className:"btn btn-primary",style:{flex:1,background:"white",color:"var(--success)"},children:[r.jsx(Qt,{size:18})," ",H?"Update":"Add"]}),r.jsx("button",{onClick:()=>{z(!1),T(null)},className:"btn btn-secondary",style:{background:"rgba(255,255,255,0.2)",color:"white",border:"1px solid white"},children:r.jsx(It,{size:18})})]})]})]}),r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsxs("h4",{style:{fontSize:"1.125rem",fontWeight:700,marginBottom:"1rem"},children:["Expenses (",y.length,")"]}),y.length===0?r.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[r.jsx(qi,{size:40,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("p",{style:{color:"var(--text-secondary)"},children:"No expenses recorded yet"})]}):r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:y.map(J=>r.jsx("div",{className:"card",style:{padding:"1rem",background:"var(--bg-secondary)"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",flexWrap:"wrap"},children:[r.jsx("span",{style:{fontWeight:700,fontSize:"1rem"},children:J.category}),r.jsxs("span",{style:{fontSize:"1rem",fontWeight:700,color:"var(--warning)"},children:["$",A(J.amount)]}),J.paid&&r.jsx("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",background:"var(--success)",color:"white",borderRadius:"var(--radius-sm)",fontWeight:600},children:"Paid"}),J.source&&r.jsxs("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",background:"rgba(99,102,241,0.1)",color:"var(--primary)",borderRadius:"var(--radius-sm)",fontWeight:600},children:[" ",J.source]})]}),J.description&&r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:J.description}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-tertiary)",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[J.vendor&&r.jsxs("span",{children:["Vendor: ",J.vendor]}),r.jsx("span",{children:new Date(J.date).toLocaleDateString()})]})]}),!J.isAutoGenerated&&r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>Me(J),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--primary)",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(gi,{size:16})}),r.jsx("button",{onClick:()=>pe(J.id),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--error)",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(Yt,{size:16})})]})]})},J.id))})]})]})},Lg=[{value:"rsvp_followup",label:"RSVP Follow-up"},{value:"event_tomorrow",label:"Day Before Event"},{value:"event_starting",label:"Event Starting Soon"},{value:"custom",label:"Custom Reminder"}],zg=({event:u})=>{const{API_URL:h}=Tr(),[a,g]=U.useState([]),[y,x]=U.useState(!0),[C,I]=U.useState(!1),[S,v]=U.useState({reminder_type:"custom",recipient_type:"guests",send_at:"",message:""});U.useEffect(()=>{u?.id&&A()},[u?.id]);const A=async()=>{try{x(!0);const H=localStorage.getItem("token"),T=await fetch(`${h}/events/${u.id}/reminders`,{headers:{Authorization:`Bearer ${H}`}});if(T.ok){const N=await T.json();g(N)}}catch(H){console.error("Error fetching reminders:",H)}finally{x(!1)}},k=async()=>{try{const H=localStorage.getItem("token");(await fetch(`${h}/events/${u.id}/reminders/auto-schedule`,{method:"POST",headers:{Authorization:`Bearer ${H}`,"Content-Type":"application/json"}})).ok&&(A(),alert("Smart reminders scheduled successfully!"))}catch(H){console.error("Error scheduling reminders:",H)}},_=async()=>{try{const H=localStorage.getItem("token"),T=new Date(S.send_at).toISOString();(await fetch(`${h}/events/${u.id}/reminders`,{method:"POST",headers:{Authorization:`Bearer ${H}`,"Content-Type":"application/json"},body:JSON.stringify({...S,send_at:T})})).ok&&(I(!1),v({reminder_type:"custom",recipient_type:"guests",send_at:"",message:""}),A())}catch(H){console.error("Error creating reminder:",H)}},V=async H=>{if(confirm("Delete this reminder?"))try{const T=localStorage.getItem("token");await fetch(`${h}/events/${u.id}/reminders/${H}`,{method:"DELETE",headers:{Authorization:`Bearer ${T}`}}),A()}catch(T){console.error("Error deleting reminder:",T)}},X=H=>new Date(H).toLocaleString();if(y)return r.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Loading reminders..."});const W=a.filter(H=>H.sent).length,z=a.filter(H=>!H.sent).length;return r.jsxs("div",{children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Total Reminders"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--primary)"},children:a.length})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Sent"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--success)"},children:W})]}),r.jsxs("div",{className:"card",style:{padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Pending"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--warning)"},children:z})]})]}),r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,marginBottom:"0.5rem"},children:"Smart Reminders"}),r.jsx("p",{style:{fontSize:"0.875rem",opacity:.9},children:"Automatically schedule reminders for your event"})]}),r.jsx(co,{size:32,style:{opacity:.9}})]}),r.jsxs("button",{onClick:k,className:"btn btn-primary",style:{width:"100%",background:"white",color:"var(--primary)",marginBottom:"1rem"},children:[r.jsx(Zn,{size:18})," Auto-Schedule Reminders"]}),r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8,display:"grid",gap:"0.25rem"},children:[r.jsx("p",{children:" RSVP Follow-up: 7 days before event"}),r.jsx("p",{children:" Day Before: 24 hours before event"}),r.jsx("p",{children:" Event Starting: 2 hours before event"})]})]}),r.jsxs("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsxs("h4",{style:{fontSize:"1.125rem",fontWeight:700},children:["Scheduled Reminders (",a.length,")"]}),r.jsxs("button",{onClick:()=>I(!C),className:"btn btn-secondary",style:{padding:"0.5rem 1rem"},children:[r.jsx(Mt,{size:16})," Add Custom"]})]}),C&&r.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1.5rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",border:"2px solid var(--primary)"},children:[r.jsx("h5",{style:{fontWeight:700,marginBottom:"1rem"},children:"Create Custom Reminder"}),r.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Type"}),r.jsx("select",{value:S.reminder_type,onChange:H=>v({...S,reminder_type:H.target.value}),className:"form-input",children:Lg.map(H=>r.jsx("option",{value:H.value,children:H.label},H.value))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Recipients"}),r.jsxs("select",{value:S.recipient_type,onChange:H=>v({...S,recipient_type:H.target.value}),className:"form-input",children:[r.jsx("option",{value:"guests",children:"All Guests"}),r.jsx("option",{value:"host",children:"Event Host (Me)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Send Date & Time"}),r.jsx("input",{type:"datetime-local",value:S.send_at,onChange:H=>v({...S,send_at:H.target.value}),className:"form-input"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Message"}),r.jsx("textarea",{value:S.message,onChange:H=>v({...S,message:H.target.value}),placeholder:"Enter reminder message...",className:"form-input",rows:"3"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsxs("button",{onClick:_,className:"btn btn-primary",style:{flex:1},children:[r.jsx(Qt,{size:16})," Create"]}),r.jsx("button",{onClick:()=>I(!1),className:"btn btn-secondary",children:r.jsx(It,{size:16})})]})]})]}),a.length===0?r.jsxs("div",{style:{padding:"3rem",textAlign:"center"},children:[r.jsx(co,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"0.5rem"},children:"No Reminders Scheduled"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Set up smart reminders to notify guests about your event"}),r.jsxs("button",{onClick:k,className:"btn btn-primary",children:[r.jsx(Zn,{size:18})," Auto-Schedule Now"]})]}):r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:a.map(H=>r.jsx("div",{className:"card",style:{padding:"1rem",background:H.sent?"var(--bg-secondary)":"white"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx(co,{size:16,style:{color:"var(--primary)"}}),r.jsx("span",{style:{fontWeight:700,textTransform:"capitalize"},children:H.reminder_type.replace("_"," ")}),H.sent&&r.jsx("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",background:"var(--success)",color:"white",borderRadius:"var(--radius-sm)",fontWeight:600},children:"Sent"}),!H.sent&&r.jsx("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",background:"var(--warning)",color:"white",borderRadius:"var(--radius-sm)",fontWeight:600},children:"Pending"})]}),r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.5rem"},children:H.message}),r.jsxs("p",{style:{fontSize:"0.75rem",color:"var(--text-tertiary)"},children:[X(H.send_at),"  ",H.recipient_type]})]}),!H.sent&&r.jsx("button",{onClick:()=>V(H.id),style:{padding:"0.5rem",border:"none",background:"transparent",color:"var(--error)",cursor:"pointer",borderRadius:"var(--radius-md)"},children:r.jsx(Yt,{size:18})})]})},H.id))})]})]})},Fg=({event:u})=>{const{token:h,user:a}=Wr(),[g,y]=U.useState("announcement"),[x,C]=U.useState(""),[I,S]=U.useState("all"),[v,A]=U.useState(a?.name||"Your Event Team"),[k,_]=U.useState(!1),[V,X]=U.useState([]),[W,z]=U.useState(!0),H="https://gatherly-backend-3vmv.onrender.com";U.useEffect(()=>{T()},[u.id]);const T=async()=>{try{const F=await fetch(`${H}/api/events/${u.id}/communications`,{headers:{Authorization:`Bearer ${h}`}});if(F.ok){const Q=await F.json();X(Q)}}catch(F){console.error("Error fetching communications:",F)}finally{z(!1)}},N=()=>u.guests?I==="all"?u.guests.length:I==="confirmed"?u.guests.filter(F=>F.rsvp===!0).length:I==="attended"?u.guests.filter(F=>F.attended===!0).length:0:0,P=async()=>{if(!x.trim()){alert("Please enter a message");return}if(x.length>320){alert("Message must be 320 characters or less");return}const F=N();if(F===0){alert("No guests match the selected filter");return}if(confirm(`Send announcement to ${F} guests?`)){_(!0);try{const Q=await fetch(`${H}/api/events/${u.id}/communications/announcement`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({message:x,recipientFilter:I,senderName:v})});if(Q.ok)alert("Announcement sent successfully!"),C(""),T();else{const pe=await Q.json();alert(pe.error||"Failed to send announcement")}}catch(Q){console.error("Error sending announcement:",Q),alert("Failed to send announcement")}finally{_(!1)}}},D=async()=>{const F=u.guests?.filter(Q=>Q.attended===!0).length||0;if(F===0){alert("No guests have attended this event yet");return}if(confirm(`Send thank you messages to ${F} guests who attended?`)){_(!0);try{const Q=await fetch(`${H}/api/events/${u.id}/communications/thank-you`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({senderName:v})});if(Q.ok)alert("Thank you messages sent successfully!"),T();else{const pe=await Q.json();alert(pe.error||"Failed to send thank you messages")}}catch(Q){console.error("Error sending thank you:",Q),alert("Failed to send thank you messages")}finally{_(!1)}}},q=F=>new Date(F).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});return r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",gap:"0.5rem",borderBottom:"2px solid var(--border)",paddingBottom:"0.5rem"},children:[r.jsxs("button",{onClick:()=>y("announcement"),style:{padding:"0.5rem 1rem",background:g==="announcement"?"var(--primary)":"transparent",color:g==="announcement"?"white":"var(--text-secondary)",border:"none",borderRadius:"var(--radius-md)",fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(_d,{size:16})," Announcement"]}),r.jsxs("button",{onClick:()=>y("thankyou"),style:{padding:"0.5rem 1rem",background:g==="thankyou"?"var(--primary)":"transparent",color:g==="thankyou"?"white":"var(--text-secondary)",border:"none",borderRadius:"var(--radius-md)",fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Nl,{size:16})," Thank You"]}),r.jsxs("button",{onClick:()=>y("history"),style:{padding:"0.5rem 1rem",background:g==="history"?"var(--primary)":"transparent",color:g==="history"?"white":"var(--text-secondary)",border:"none",borderRadius:"var(--radius-md)",fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(h0,{size:16})," History"]})]}),g==="announcement"&&r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-primary)"},children:"Send Announcement"}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-secondary)"},children:"Message"}),r.jsx("textarea",{value:x,onChange:F=>C(F.target.value),placeholder:"Type your announcement here...",style:{width:"100%",minHeight:"120px",padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",fontSize:"0.875rem",resize:"vertical",fontFamily:"inherit"},maxLength:320}),r.jsxs("div",{style:{textAlign:"right",fontSize:"0.75rem",color:"var(--text-tertiary)",marginTop:"0.25rem"},children:[x.length,"/320 characters"]})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-secondary)"},children:"Sender Name"}),r.jsx("input",{type:"text",value:v,onChange:F=>A(F.target.value),placeholder:"Your name or organization",style:{width:"100%",padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",fontSize:"0.875rem",fontFamily:"inherit"}})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500,color:"var(--text-secondary)"},children:"Send to"}),r.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"recipient",value:"all",checked:I==="all",onChange:F=>S(F.target.value)}),r.jsx("span",{style:{fontSize:"0.875rem"},children:"All Guests"})]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"recipient",value:"confirmed",checked:I==="confirmed",onChange:F=>S(F.target.value)}),r.jsx("span",{style:{fontSize:"0.875rem"},children:"Confirmed Only"})]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"recipient",value:"attended",checked:I==="attended",onChange:F=>S(F.target.value)}),r.jsx("span",{style:{fontSize:"0.875rem"},children:"Attended Only"})]})]})]}),r.jsx("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:[r.jsx(Wt,{size:16}),r.jsxs("span",{children:["Will send to ",r.jsx("strong",{style:{color:"var(--primary)"},children:N()})," guests"]})]})}),r.jsx("button",{onClick:P,disabled:k||!x.trim(),className:"btn btn-primary",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:k?r.jsxs(r.Fragment,{children:[r.jsx(Tl,{size:16,className:"animate-spin"})," Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx(mf,{size:16})," Send Announcement"]})})]}),g==="thankyou"&&r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-primary)"},children:"Send Thank You Messages"}),r.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Send personalized thank you messages to all guests who attended your event."}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:[r.jsx(Wt,{size:16}),r.jsxs("span",{children:["Will send to ",r.jsx("strong",{style:{color:"var(--primary)"},children:u.guests?.filter(F=>F.attended===!0).length||0})," attended guests"]})]})]}),r.jsx("button",{onClick:D,disabled:k||(u.guests?.filter(F=>F.attended===!0).length||0)===0,className:"btn btn-primary",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:k?r.jsxs(r.Fragment,{children:[r.jsx(Tl,{size:16,className:"animate-spin"})," Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Nl,{size:16})," Send Thank You Messages"]})})]}),g==="history"&&r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-primary)"},children:"Message History"}),W?r.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:[r.jsx(Tl,{size:24,className:"animate-spin",style:{margin:"0 auto"}}),r.jsx("p",{style:{marginTop:"0.5rem"},children:"Loading..."})]}):V.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:[r.jsx(h0,{size:48,style:{margin:"0 auto",opacity:.3}}),r.jsx("p",{style:{marginTop:"1rem"},children:"No messages sent yet"})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:V.map(F=>r.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",borderLeft:`4px solid ${F.type==="announcement"?"var(--primary)":"#10b981"}`},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"0.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[F.type==="announcement"?r.jsx(_d,{size:16}):r.jsx(Nl,{size:16}),r.jsx("span",{style:{fontWeight:600,fontSize:"0.875rem"},children:F.type==="announcement"?"Announcement":"Thank You"})]}),r.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-tertiary)"},children:q(F.created_at)})]}),F.type==="announcement"&&r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.5rem"},children:F.message}),r.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.75rem",color:"var(--text-tertiary)"},children:[r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(js,{size:12,style:{color:"#10b981"}}),F.sent_count," sent"]}),F.failed_count>0&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx(Wd,{size:12,style:{color:"#ef4444"}}),F.failed_count," failed"]}),r.jsxs("span",{children:[" ",F.recipient_filter]})]})]},F.id))})]})]})},Wg=({item:u,eventId:h,onUpdate:a,onDelete:g})=>{const y="https://gatherly-backend-3vmv.onrender.com",x=async()=>{if(confirm("Are you sure you want to delete this activity?"))try{const v=localStorage.getItem("token");(await fetch(`${y}/api/events/${h}/schedule/${u.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${v}`}})).ok&&g()}catch(v){console.error("Error deleting schedule item:",v)}},C=v=>{if(!v)return null;const[A,k]=v.split(":"),_=parseInt(A),V=_>=12?"PM":"AM";return`${_%12||12}:${k} ${V}`},I=v=>({meals:"",transport:"",accommodation:"",activities:"",meetings:"",other:""})[v]||"",S=v=>{const A={meals:"linear-gradient(135deg, #667eea, #764ba2)",transport:"linear-gradient(135deg, #f093fb, #f5576c)",accommodation:"linear-gradient(135deg, #4facfe, #00f2fe)",activities:"linear-gradient(135deg, #43e97b, #38f9d7)",meetings:"linear-gradient(135deg, #fa709a, #fee140)",other:"linear-gradient(135deg, #a8edea, #fed6e3)"};return A[v]||A.other};return r.jsxs("div",{className:"card",style:{padding:"1.5rem",position:"relative"},children:[r.jsx("button",{onClick:x,style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",cursor:"pointer",color:"var(--text-tertiary)",padding:"0.5rem",borderRadius:"var(--radius)",transition:"all 0.2s"},onMouseEnter:v=>{v.currentTarget.style.background="rgba(239, 68, 68, 0.1)",v.currentTarget.style.color="#ef4444"},onMouseLeave:v=>{v.currentTarget.style.background="none",v.currentTarget.style.color="var(--text-tertiary)"},children:r.jsx(Yt,{size:18})}),r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1.25rem"},children:[r.jsx("div",{style:{width:"3.5rem",height:"3.5rem",borderRadius:"var(--radius-lg)",background:S(u.category),display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:r.jsx("span",{style:{fontSize:"1.75rem"},children:I(u.category)})}),r.jsxs("div",{style:{flex:1,minWidth:0,paddingRight:"2rem"},children:[(u.start_time||u.end_time)&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:600,color:"var(--primary)"},children:[r.jsx(ha,{size:14}),C(u.start_time),u.end_time&&` - ${C(u.end_time)}`]}),r.jsx("h4",{style:{fontSize:"1.0625rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"0.5rem"},children:u.title}),u.description&&r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.75rem",lineHeight:"1.5"},children:u.description}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",fontSize:"0.8125rem",color:"var(--text-secondary)"},children:[u.location&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[r.jsx(Kr,{size:14}),u.location]}),u.estimated_cost&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[r.jsx(qi,{size:14}),"$",parseFloat(u.estimated_cost).toFixed(2)]}),u.assigned_to&&u.assigned_to.length>0&&r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[r.jsx(Wt,{size:14}),u.assigned_to.length," assigned"]})]})]})]})]})},Ug=({event:u,selectedDate:h,onClose:a,onItemAdded:g})=>{const[y,x]=U.useState({date:h?h.toISOString().split("T")[0]:"",startTime:"",endTime:"",title:"",description:"",location:"",category:"activities",estimatedCost:""}),[C,I]=U.useState(!1),[S,v]=U.useState(""),A="https://gatherly-backend-3vmv.onrender.com",k=[{value:"meals",label:" Meals",emoji:""},{value:"transport",label:" Transport",emoji:""},{value:"accommodation",label:" Accommodation",emoji:""},{value:"activities",label:" Activities",emoji:""},{value:"meetings",label:" Meetings",emoji:""},{value:"other",label:" Other",emoji:""}],_=async V=>{if(V.preventDefault(),v(""),!y.title||!y.date){v("Title and date are required");return}I(!0);try{const X=localStorage.getItem("token"),W=await fetch(`${A}/api/events/${u.id}/schedule`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X}`},body:JSON.stringify({date:y.date,startTime:y.startTime||null,endTime:y.endTime||null,title:y.title,description:y.description||null,location:y.location||null,category:y.category,estimatedCost:y.estimatedCost?parseFloat(y.estimatedCost):null})});if(W.ok)g();else{const z=await W.json();v(z.error||"Failed to create activity")}}catch(X){console.error("Error creating schedule item:",X),v("Failed to create activity")}finally{I(!1)}};return r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"100%",maxHeight:"90vh",display:"flex",flexDirection:"column",padding:0,overflow:"hidden"},children:[r.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)"},children:"Add Activity"}),r.jsx("button",{onClick:a,className:"btn btn-secondary",style:{padding:"0.5rem"},children:r.jsx(It,{size:20})})]}),r.jsxs("form",{onSubmit:_,style:{flex:1,overflowY:"auto",padding:"1.5rem",display:"flex",flexDirection:"column",gap:"1.25rem"},children:[S&&r.jsx("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",borderRadius:"var(--radius)",fontSize:"0.875rem"},children:S}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Date *"}),r.jsx("input",{type:"date",className:"input",value:y.date,onChange:V=>x({...y,date:V.target.value}),required:!0})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Start Time"}),r.jsx("input",{type:"time",className:"input",value:y.startTime,onChange:V=>x({...y,startTime:V.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"End Time"}),r.jsx("input",{type:"time",className:"input",value:y.endTime,onChange:V=>x({...y,endTime:V.target.value})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Title *"}),r.jsx("input",{type:"text",className:"input",value:y.title,onChange:V=>x({...y,title:V.target.value}),placeholder:"e.g., Temple Tour, Breakfast, Check-in",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Category"}),r.jsx("select",{className:"input",value:y.category,onChange:V=>x({...y,category:V.target.value}),children:k.map(V=>r.jsx("option",{value:V.value,children:V.label},V.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Description"}),r.jsx("textarea",{className:"input",value:y.description,onChange:V=>x({...y,description:V.target.value}),placeholder:"Add details about this activity...",rows:3,style:{resize:"vertical"}})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Location"}),r.jsx("input",{type:"text",className:"input",value:y.location,onChange:V=>x({...y,location:V.target.value}),placeholder:"e.g., Tanah Lot Temple, Hotel Restaurant"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Estimated Cost (per person)"}),r.jsx("input",{type:"number",className:"input",value:y.estimatedCost,onChange:V=>x({...y,estimatedCost:V.target.value}),placeholder:"0.00",step:"0.01",min:"0"})]}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:C,style:{marginTop:"0.5rem"},children:C?"Adding...":"Add Activity"})]})]})})},Vg=({event:u})=>{const[h,a]=U.useState([]),[g,y]=U.useState(null),[x,C]=U.useState(!1),[I,S]=U.useState(!0),[v,A]=U.useState([]),k="https://gatherly-backend-3vmv.onrender.com";U.useEffect(()=>{if(!u?.date)return;const z=new Date(u.date),H=u.end_date?new Date(u.end_date):new Date(z.getTime()+10080*60*1e3),T=[],N=new Date(z);for(;N<=H;)T.push(new Date(N)),N.setDate(N.getDate()+1);A(T),y(T[0])},[u]);const _=async()=>{if(u?.id)try{S(!0);const z=localStorage.getItem("token"),H=await fetch(`${k}/api/events/${u.id}/schedule`,{headers:{Authorization:`Bearer ${z}`}});if(H.ok){const T=await H.json();a(T.scheduleItems||[])}}catch(z){console.error("Error fetching schedule:",z)}finally{S(!1)}};U.useEffect(()=>{_()},[u?.id]);const V=h.filter(z=>g?new Date(z.date).toDateString()===g.toDateString():!1).sort((z,H)=>!z.start_time&&!H.start_time?0:z.start_time?H.start_time?z.start_time.localeCompare(H.start_time):-1:1),X=z=>z.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),W=z=>{const H=new Date;return z.toDateString()===H.toDateString()};return I?r.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:"Loading schedule..."}):r.jsxs("div",{children:[r.jsx("div",{style:{marginBottom:"2rem",overflowX:"auto",WebkitOverflowScrolling:"touch"},children:r.jsx("div",{style:{display:"flex",gap:"0.75rem",paddingBottom:"0.5rem",minWidth:"min-content"},children:v.map((z,H)=>r.jsxs("button",{onClick:()=>y(z),style:{padding:"1rem 1.5rem",borderRadius:"var(--radius-lg)",border:g?.toDateString()===z.toDateString()?"2px solid var(--primary)":"1px solid var(--border)",background:g?.toDateString()===z.toDateString()?"var(--primary)":"var(--bg-primary)",color:g?.toDateString()===z.toDateString()?"white":"var(--text-primary)",cursor:"pointer",transition:"all 0.2s",fontWeight:600,fontSize:"0.875rem",whiteSpace:"nowrap",position:"relative"},children:[X(z),W(z)&&r.jsx("div",{style:{position:"absolute",top:"0.25rem",right:"0.25rem",width:"6px",height:"6px",borderRadius:"50%",background:g?.toDateString()===z.toDateString()?"white":"var(--primary)"}})]},H))})}),r.jsxs("button",{onClick:()=>C(!0),className:"btn btn-primary",style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Mt,{size:20}),"Add Activity"]}),V.length===0?r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[r.jsx(Zn,{size:48,style:{margin:"0 auto 1rem",color:"var(--text-tertiary)"}}),r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"0.5rem"},children:"No activities planned"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Add activities to plan your day"})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:V.map(z=>r.jsx(Wg,{item:z,eventId:u.id,onUpdate:_,onDelete:_},z.id))}),x&&r.jsx(Ug,{event:u,selectedDate:g,onClose:()=>C(!1),onItemAdded:()=>{_(),C(!1)}})]})};var Hg=Object.defineProperty,Dl=Object.getOwnPropertySymbols,Sf=Object.prototype.hasOwnProperty,Ef=Object.prototype.propertyIsEnumerable,p0=(u,h,a)=>h in u?Hg(u,h,{enumerable:!0,configurable:!0,writable:!0,value:a}):u[h]=a,g0=(u,h)=>{for(var a in h||(h={}))Sf.call(h,a)&&p0(u,a,h[a]);if(Dl)for(var a of Dl(h))Ef.call(h,a)&&p0(u,a,h[a]);return u},Gg=(u,h)=>{var a={};for(var g in u)Sf.call(u,g)&&h.indexOf(g)<0&&(a[g]=u[g]);if(u!=null&&Dl)for(var g of Dl(u))h.indexOf(g)<0&&Ef.call(u,g)&&(a[g]=u[g]);return a};var Ns;(u=>{const h=class{constructor(S,v,A,k){if(this.version=S,this.errorCorrectionLevel=v,this.modules=[],this.isFunction=[],S<h.MIN_VERSION||S>h.MAX_VERSION)throw new RangeError("Version value out of range");if(k<-1||k>7)throw new RangeError("Mask value out of range");this.size=S*4+17;let _=[];for(let X=0;X<this.size;X++)_.push(!1);for(let X=0;X<this.size;X++)this.modules.push(_.slice()),this.isFunction.push(_.slice());this.drawFunctionPatterns();const V=this.addEccAndInterleave(A);if(this.drawCodewords(V),k==-1){let X=1e9;for(let W=0;W<8;W++){this.applyMask(W),this.drawFormatBits(W);const z=this.getPenaltyScore();z<X&&(k=W,X=z),this.applyMask(W)}}x(0<=k&&k<=7),this.mask=k,this.applyMask(k),this.drawFormatBits(k),this.isFunction=[]}static encodeText(S,v){const A=u.QrSegment.makeSegments(S);return h.encodeSegments(A,v)}static encodeBinary(S,v){const A=u.QrSegment.makeBytes(S);return h.encodeSegments([A],v)}static encodeSegments(S,v,A=1,k=40,_=-1,V=!0){if(!(h.MIN_VERSION<=A&&A<=k&&k<=h.MAX_VERSION)||_<-1||_>7)throw new RangeError("Invalid value");let X,W;for(X=A;;X++){const N=h.getNumDataCodewords(X,v)*8,P=I.getTotalBits(S,X);if(P<=N){W=P;break}if(X>=k)throw new RangeError("Data too long")}for(const N of[h.Ecc.MEDIUM,h.Ecc.QUARTILE,h.Ecc.HIGH])V&&W<=h.getNumDataCodewords(X,N)*8&&(v=N);let z=[];for(const N of S){g(N.mode.modeBits,4,z),g(N.numChars,N.mode.numCharCountBits(X),z);for(const P of N.getData())z.push(P)}x(z.length==W);const H=h.getNumDataCodewords(X,v)*8;x(z.length<=H),g(0,Math.min(4,H-z.length),z),g(0,(8-z.length%8)%8,z),x(z.length%8==0);for(let N=236;z.length<H;N^=253)g(N,8,z);let T=[];for(;T.length*8<z.length;)T.push(0);return z.forEach((N,P)=>T[P>>>3]|=N<<7-(P&7)),new h(X,v,T,_)}getModule(S,v){return 0<=S&&S<this.size&&0<=v&&v<this.size&&this.modules[v][S]}getModules(){return this.modules}drawFunctionPatterns(){for(let A=0;A<this.size;A++)this.setFunctionModule(6,A,A%2==0),this.setFunctionModule(A,6,A%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const S=this.getAlignmentPatternPositions(),v=S.length;for(let A=0;A<v;A++)for(let k=0;k<v;k++)A==0&&k==0||A==0&&k==v-1||A==v-1&&k==0||this.drawAlignmentPattern(S[A],S[k]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(S){const v=this.errorCorrectionLevel.formatBits<<3|S;let A=v;for(let _=0;_<10;_++)A=A<<1^(A>>>9)*1335;const k=(v<<10|A)^21522;x(k>>>15==0);for(let _=0;_<=5;_++)this.setFunctionModule(8,_,y(k,_));this.setFunctionModule(8,7,y(k,6)),this.setFunctionModule(8,8,y(k,7)),this.setFunctionModule(7,8,y(k,8));for(let _=9;_<15;_++)this.setFunctionModule(14-_,8,y(k,_));for(let _=0;_<8;_++)this.setFunctionModule(this.size-1-_,8,y(k,_));for(let _=8;_<15;_++)this.setFunctionModule(8,this.size-15+_,y(k,_));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let S=this.version;for(let A=0;A<12;A++)S=S<<1^(S>>>11)*7973;const v=this.version<<12|S;x(v>>>18==0);for(let A=0;A<18;A++){const k=y(v,A),_=this.size-11+A%3,V=Math.floor(A/3);this.setFunctionModule(_,V,k),this.setFunctionModule(V,_,k)}}drawFinderPattern(S,v){for(let A=-4;A<=4;A++)for(let k=-4;k<=4;k++){const _=Math.max(Math.abs(k),Math.abs(A)),V=S+k,X=v+A;0<=V&&V<this.size&&0<=X&&X<this.size&&this.setFunctionModule(V,X,_!=2&&_!=4)}}drawAlignmentPattern(S,v){for(let A=-2;A<=2;A++)for(let k=-2;k<=2;k++)this.setFunctionModule(S+k,v+A,Math.max(Math.abs(k),Math.abs(A))!=1)}setFunctionModule(S,v,A){this.modules[v][S]=A,this.isFunction[v][S]=!0}addEccAndInterleave(S){const v=this.version,A=this.errorCorrectionLevel;if(S.length!=h.getNumDataCodewords(v,A))throw new RangeError("Invalid argument");const k=h.NUM_ERROR_CORRECTION_BLOCKS[A.ordinal][v],_=h.ECC_CODEWORDS_PER_BLOCK[A.ordinal][v],V=Math.floor(h.getNumRawDataModules(v)/8),X=k-V%k,W=Math.floor(V/k);let z=[];const H=h.reedSolomonComputeDivisor(_);for(let N=0,P=0;N<k;N++){let D=S.slice(P,P+W-_+(N<X?0:1));P+=D.length;const q=h.reedSolomonComputeRemainder(D,H);N<X&&D.push(0),z.push(D.concat(q))}let T=[];for(let N=0;N<z[0].length;N++)z.forEach((P,D)=>{(N!=W-_||D>=X)&&T.push(P[N])});return x(T.length==V),T}drawCodewords(S){if(S.length!=Math.floor(h.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let v=0;for(let A=this.size-1;A>=1;A-=2){A==6&&(A=5);for(let k=0;k<this.size;k++)for(let _=0;_<2;_++){const V=A-_,W=(A+1&2)==0?this.size-1-k:k;!this.isFunction[W][V]&&v<S.length*8&&(this.modules[W][V]=y(S[v>>>3],7-(v&7)),v++)}}x(v==S.length*8)}applyMask(S){if(S<0||S>7)throw new RangeError("Mask value out of range");for(let v=0;v<this.size;v++)for(let A=0;A<this.size;A++){let k;switch(S){case 0:k=(A+v)%2==0;break;case 1:k=v%2==0;break;case 2:k=A%3==0;break;case 3:k=(A+v)%3==0;break;case 4:k=(Math.floor(A/3)+Math.floor(v/2))%2==0;break;case 5:k=A*v%2+A*v%3==0;break;case 6:k=(A*v%2+A*v%3)%2==0;break;case 7:k=((A+v)%2+A*v%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[v][A]&&k&&(this.modules[v][A]=!this.modules[v][A])}}getPenaltyScore(){let S=0;for(let _=0;_<this.size;_++){let V=!1,X=0,W=[0,0,0,0,0,0,0];for(let z=0;z<this.size;z++)this.modules[_][z]==V?(X++,X==5?S+=h.PENALTY_N1:X>5&&S++):(this.finderPenaltyAddHistory(X,W),V||(S+=this.finderPenaltyCountPatterns(W)*h.PENALTY_N3),V=this.modules[_][z],X=1);S+=this.finderPenaltyTerminateAndCount(V,X,W)*h.PENALTY_N3}for(let _=0;_<this.size;_++){let V=!1,X=0,W=[0,0,0,0,0,0,0];for(let z=0;z<this.size;z++)this.modules[z][_]==V?(X++,X==5?S+=h.PENALTY_N1:X>5&&S++):(this.finderPenaltyAddHistory(X,W),V||(S+=this.finderPenaltyCountPatterns(W)*h.PENALTY_N3),V=this.modules[z][_],X=1);S+=this.finderPenaltyTerminateAndCount(V,X,W)*h.PENALTY_N3}for(let _=0;_<this.size-1;_++)for(let V=0;V<this.size-1;V++){const X=this.modules[_][V];X==this.modules[_][V+1]&&X==this.modules[_+1][V]&&X==this.modules[_+1][V+1]&&(S+=h.PENALTY_N2)}let v=0;for(const _ of this.modules)v=_.reduce((V,X)=>V+(X?1:0),v);const A=this.size*this.size,k=Math.ceil(Math.abs(v*20-A*10)/A)-1;return x(0<=k&&k<=9),S+=k*h.PENALTY_N4,x(0<=S&&S<=2568888),S}getAlignmentPatternPositions(){if(this.version==1)return[];{const S=Math.floor(this.version/7)+2,v=this.version==32?26:Math.ceil((this.version*4+4)/(S*2-2))*2;let A=[6];for(let k=this.size-7;A.length<S;k-=v)A.splice(1,0,k);return A}}static getNumRawDataModules(S){if(S<h.MIN_VERSION||S>h.MAX_VERSION)throw new RangeError("Version number out of range");let v=(16*S+128)*S+64;if(S>=2){const A=Math.floor(S/7)+2;v-=(25*A-10)*A-55,S>=7&&(v-=36)}return x(208<=v&&v<=29648),v}static getNumDataCodewords(S,v){return Math.floor(h.getNumRawDataModules(S)/8)-h.ECC_CODEWORDS_PER_BLOCK[v.ordinal][S]*h.NUM_ERROR_CORRECTION_BLOCKS[v.ordinal][S]}static reedSolomonComputeDivisor(S){if(S<1||S>255)throw new RangeError("Degree out of range");let v=[];for(let k=0;k<S-1;k++)v.push(0);v.push(1);let A=1;for(let k=0;k<S;k++){for(let _=0;_<v.length;_++)v[_]=h.reedSolomonMultiply(v[_],A),_+1<v.length&&(v[_]^=v[_+1]);A=h.reedSolomonMultiply(A,2)}return v}static reedSolomonComputeRemainder(S,v){let A=v.map(k=>0);for(const k of S){const _=k^A.shift();A.push(0),v.forEach((V,X)=>A[X]^=h.reedSolomonMultiply(V,_))}return A}static reedSolomonMultiply(S,v){if(S>>>8||v>>>8)throw new RangeError("Byte out of range");let A=0;for(let k=7;k>=0;k--)A=A<<1^(A>>>7)*285,A^=(v>>>k&1)*S;return x(A>>>8==0),A}finderPenaltyCountPatterns(S){const v=S[1];x(v<=this.size*3);const A=v>0&&S[2]==v&&S[3]==v*3&&S[4]==v&&S[5]==v;return(A&&S[0]>=v*4&&S[6]>=v?1:0)+(A&&S[6]>=v*4&&S[0]>=v?1:0)}finderPenaltyTerminateAndCount(S,v,A){return S&&(this.finderPenaltyAddHistory(v,A),v=0),v+=this.size,this.finderPenaltyAddHistory(v,A),this.finderPenaltyCountPatterns(A)}finderPenaltyAddHistory(S,v){v[0]==0&&(S+=this.size),v.pop(),v.unshift(S)}};let a=h;a.MIN_VERSION=1,a.MAX_VERSION=40,a.PENALTY_N1=3,a.PENALTY_N2=3,a.PENALTY_N3=40,a.PENALTY_N4=10,a.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],a.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],u.QrCode=a;function g(S,v,A){if(v<0||v>31||S>>>v)throw new RangeError("Value out of range");for(let k=v-1;k>=0;k--)A.push(S>>>k&1)}function y(S,v){return(S>>>v&1)!=0}function x(S){if(!S)throw new Error("Assertion error")}const C=class{constructor(S,v,A){if(this.mode=S,this.numChars=v,this.bitData=A,v<0)throw new RangeError("Invalid argument");this.bitData=A.slice()}static makeBytes(S){let v=[];for(const A of S)g(A,8,v);return new C(C.Mode.BYTE,S.length,v)}static makeNumeric(S){if(!C.isNumeric(S))throw new RangeError("String contains non-numeric characters");let v=[];for(let A=0;A<S.length;){const k=Math.min(S.length-A,3);g(parseInt(S.substr(A,k),10),k*3+1,v),A+=k}return new C(C.Mode.NUMERIC,S.length,v)}static makeAlphanumeric(S){if(!C.isAlphanumeric(S))throw new RangeError("String contains unencodable characters in alphanumeric mode");let v=[],A;for(A=0;A+2<=S.length;A+=2){let k=C.ALPHANUMERIC_CHARSET.indexOf(S.charAt(A))*45;k+=C.ALPHANUMERIC_CHARSET.indexOf(S.charAt(A+1)),g(k,11,v)}return A<S.length&&g(C.ALPHANUMERIC_CHARSET.indexOf(S.charAt(A)),6,v),new C(C.Mode.ALPHANUMERIC,S.length,v)}static makeSegments(S){return S==""?[]:C.isNumeric(S)?[C.makeNumeric(S)]:C.isAlphanumeric(S)?[C.makeAlphanumeric(S)]:[C.makeBytes(C.toUtf8ByteArray(S))]}static makeEci(S){let v=[];if(S<0)throw new RangeError("ECI assignment value out of range");if(S<128)g(S,8,v);else if(S<16384)g(2,2,v),g(S,14,v);else if(S<1e6)g(6,3,v),g(S,21,v);else throw new RangeError("ECI assignment value out of range");return new C(C.Mode.ECI,0,v)}static isNumeric(S){return C.NUMERIC_REGEX.test(S)}static isAlphanumeric(S){return C.ALPHANUMERIC_REGEX.test(S)}getData(){return this.bitData.slice()}static getTotalBits(S,v){let A=0;for(const k of S){const _=k.mode.numCharCountBits(v);if(k.numChars>=1<<_)return 1/0;A+=4+_+k.bitData.length}return A}static toUtf8ByteArray(S){S=encodeURI(S);let v=[];for(let A=0;A<S.length;A++)S.charAt(A)!="%"?v.push(S.charCodeAt(A)):(v.push(parseInt(S.substr(A+1,2),16)),A+=2);return v}};let I=C;I.NUMERIC_REGEX=/^[0-9]*$/,I.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,I.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",u.QrSegment=I})(Ns||(Ns={}));(u=>{(h=>{const a=class{constructor(y,x){this.ordinal=y,this.formatBits=x}};let g=a;g.LOW=new a(0,1),g.MEDIUM=new a(1,0),g.QUARTILE=new a(2,3),g.HIGH=new a(3,2),h.Ecc=g})(u.QrCode||(u.QrCode={}))})(Ns||(Ns={}));(u=>{(h=>{const a=class{constructor(y,x){this.modeBits=y,this.numBitsCharCount=x}numCharCountBits(y){return this.numBitsCharCount[Math.floor((y+7)/17)]}};let g=a;g.NUMERIC=new a(1,[10,12,14]),g.ALPHANUMERIC=new a(2,[9,11,13]),g.BYTE=new a(4,[8,16,16]),g.KANJI=new a(8,[8,10,12]),g.ECI=new a(7,[0,0,0]),h.Mode=g})(u.QrSegment||(u.QrSegment={}))})(Ns||(Ns={}));var aa=Ns;var Xg={L:aa.QrCode.Ecc.LOW,M:aa.QrCode.Ecc.MEDIUM,Q:aa.QrCode.Ecc.QUARTILE,H:aa.QrCode.Ecc.HIGH},Yg=128,Zg="L",qg="#FFFFFF",$g="#000000",Kg=!1,Af=4,Qg=.1;function Jg(u,h=0){const a=[];return u.forEach(function(g,y){let x=null;g.forEach(function(C,I){if(!C&&x!==null){a.push(`M${x+h} ${y+h}h${I-x}v1H${x+h}z`),x=null;return}if(I===g.length-1){if(!C)return;x===null?a.push(`M${I+h},${y+h} h1v1H${I+h}z`):a.push(`M${x+h},${y+h} h${I+1-x}v1H${x+h}z`);return}C&&x===null&&(x=I)})}),a.join("")}function em(u,h){return u.slice().map((a,g)=>g<h.y||g>=h.y+h.h?a:a.map((y,x)=>x<h.x||x>=h.x+h.w?y:!1))}function tm(u,h,a,g){if(g==null)return null;const y=a?Af:0,x=u.length+y*2,C=Math.floor(h*Qg),I=x/h,S=(g.width||C)*I,v=(g.height||C)*I,A=g.x==null?u.length/2-S/2:g.x*I,k=g.y==null?u.length/2-v/2:g.y*I;let _=null;if(g.excavate){let V=Math.floor(A),X=Math.floor(k),W=Math.ceil(S+A-V),z=Math.ceil(v+k-X);_={x:V,y:X,w:W,h:z}}return{x:A,y:k,h:v,w:S,excavation:_}}var nm=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function rm(u){const h=u,{value:a,size:g=Yg,level:y=Zg,bgColor:x=qg,fgColor:C=$g,includeMargin:I=Kg,style:S,imageSettings:v}=h,A=Gg(h,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),k=v?.src,_=sr.useRef(null),V=sr.useRef(null),[X,W]=sr.useState(!1);sr.useEffect(()=>{if(_.current!=null){const T=_.current,N=T.getContext("2d");if(!N)return;let P=aa.QrCode.encodeText(a,Xg[y]).getModules();const D=I?Af:0,q=P.length+D*2,F=tm(P,g,I,v),Q=V.current,pe=F!=null&&Q!==null&&Q.complete&&Q.naturalHeight!==0&&Q.naturalWidth!==0;pe&&F.excavation!=null&&(P=em(P,F.excavation));const Me=window.devicePixelRatio||1;T.height=T.width=g*Me;const be=g/q*Me;N.scale(be,be),N.fillStyle=x,N.fillRect(0,0,q,q),N.fillStyle=C,nm?N.fill(new Path2D(Jg(P,D))):P.forEach(function(we,de){we.forEach(function(te,Y){te&&N.fillRect(Y+D,de+D,1,1)})}),pe&&N.drawImage(Q,F.x+D,F.y+D,F.w,F.h)}}),sr.useEffect(()=>{W(!1)},[k]);const z=g0({height:g,width:g},S);let H=null;return k!=null&&(H=sr.createElement("img",{src:k,key:k,style:{display:"none"},onLoad:()=>{W(!0)},ref:V})),sr.createElement(sr.Fragment,null,sr.createElement("canvas",g0({style:z,height:g,width:g,ref:_},A)),H)}const If=({payload:u,name:h,eventTitle:a,phoneNumber:g})=>{const y=U.useRef(),[x,C]=U.useState(!1),I=async()=>{try{const v=y.current.querySelector("canvas");if(!v){console.error("Canvas not found");return}const A=await new Promise(V=>v.toBlob(V,"image/png"));try{const{Capacitor:V}=await kr(async()=>{const{Capacitor:X}=await Promise.resolve().then(()=>Nd);return{Capacitor:X}},void 0);if(V.isNativePlatform()){const{Filesystem:X,Directory:W}=await kr(async()=>{const{Filesystem:P,Directory:D}=await import("./index-Dkbkizh3.js");return{Filesystem:P,Directory:D}},[]),z=new FileReader;z.readAsDataURL(A),await new Promise(P=>z.onloadend=P);const H=z.result.split(",")[1],T=`invite-${h.replace(/\s+/g,"-").toLowerCase()}-${Date.now()}.png`,N=await X.writeFile({path:T,data:H,directory:W.Documents});alert(`QR code saved to Documents folder as ${T}`);return}}catch(V){console.log("Not a native platform, using browser download:",V)}const k=URL.createObjectURL(A),_=document.createElement("a");_.download=`invite-${h.replace(/\s+/g,"-").toLowerCase()}.png`,_.href=k,_.click(),URL.revokeObjectURL(k)}catch(v){console.error("Error downloading QR code:",v),alert("Failed to save QR code")}},S=async()=>{C(!0);try{const v=y.current.querySelector("canvas");if(!v)throw new Error("QR code not found");const A=await new Promise(_=>v.toBlob(_,"image/png"));try{const{Capacitor:_}=await kr(async()=>{const{Capacitor:V}=await Promise.resolve().then(()=>Nd);return{Capacitor:V}},void 0);if(_.isNativePlatform()){const{Share:V}=await kr(async()=>{const{Share:P}=await import("./index-D9YJlFdZ.js");return{Share:P}},[]),{Filesystem:X,Directory:W}=await kr(async()=>{const{Filesystem:P,Directory:D}=await import("./index-Dkbkizh3.js");return{Filesystem:P,Directory:D}},[]),z=new FileReader;z.readAsDataURL(A),await new Promise(P=>z.onloadend=P);const H=z.result.split(",")[1],T=`${h}-qr-code.png`,N=await X.writeFile({path:T,data:H,directory:W.Cache});await V.share({title:"Event QR Code",text:`QR Code for ${h} - ${a}`,url:N.uri,dialogTitle:"Share QR Code"}),C(!1);return}}catch(_){console.log("Capacitor share not available, trying web API:",_)}const k=new File([A],`${h}-qr-ticket.png`,{type:"image/png"});navigator.canShare&&navigator.canShare({files:[k]})?await navigator.share({files:[k],title:"Event QR Code"}):navigator.share?await navigator.share({text:"Event QR Code",title:"Event QR Code"}):I()}catch(v){v.name!=="AbortError"&&(console.error("Error sharing:",v),I())}finally{C(!1)}};return r.jsxs("div",{ref:y,className:"card",style:{maxWidth:"340px",width:"100%",overflow:"hidden"},children:[r.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"1.5rem 1.25rem",textAlign:"center"},children:[r.jsx("p",{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:"0.6875rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.375rem"},children:a}),r.jsx("h4",{style:{color:"white",fontSize:"1.375rem",fontWeight:"700",margin:"0",lineHeight:"1.2"},children:h}),g&&r.jsx("p",{style:{color:"rgba(255, 255, 255, 0.85)",fontSize:"0.875rem",marginTop:"0.375rem",fontWeight:"500"},children:g})]}),r.jsx("div",{style:{padding:"2rem 1.5rem",background:"var(--bg-secondary)",display:"flex",justifyContent:"center"},children:r.jsx("div",{style:{padding:"1rem",background:"white",borderRadius:"var(--radius-lg)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)",border:"1px solid var(--border)"},children:r.jsx(rm,{value:JSON.stringify(u),size:180,level:"H",includeMargin:!0})})}),r.jsxs("div",{style:{padding:"1.25rem"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsxs("button",{onClick:I,className:"btn btn-secondary",style:{padding:"0.75rem",fontSize:"0.875rem",justifyContent:"center"},children:[r.jsx(cf,{size:16})," Save"]}),r.jsx("button",{onClick:S,disabled:x,className:"btn btn-primary",style:{padding:"0.75rem",fontSize:"0.875rem",justifyContent:"center"},children:x?"Sharing...":r.jsxs(r.Fragment,{children:[r.jsx(Rd,{size:16})," Share"]})})]}),r.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-tertiary)",textAlign:"center",marginTop:"1rem",lineHeight:"1.4"},children:"Scan this code at the event to check in"})]})]})},im=({onImport:u,onClose:h})=>{const[a,g]=U.useState(""),[y,x]=U.useState([]),C=v=>{const A=v.trim().split(`
`),k=[];for(let _ of A){if(_=_.trim(),!_)continue;let V=_.match(/^(.+?)[,\-]\s*(.+)$/);V?k.push({name:V[1].trim(),phone:V[2].trim()}):k.push({name:_,phone:""})}return k},I=v=>{const A=v.target.value;g(A),x(C(A))},S=()=>{y.length>0&&(u(y),h())};return r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:h,children:r.jsxs("div",{className:"card",style:{maxWidth:"40rem",width:"100%",maxHeight:"90vh",overflow:"auto"},onClick:v=>v.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[r.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(pa,{size:24,style:{color:"var(--primary)"}}),"Bulk Add Guests"]}),r.jsx("button",{onClick:h,style:{padding:"0.5rem",border:"none",background:"none",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(It,{size:20})})]}),r.jsxs("div",{style:{padding:"1rem",backgroundColor:"#e0e7ff",borderRadius:"var(--radius-md)",marginBottom:"1.5rem"},children:[r.jsx("p",{style:{fontSize:"0.875rem",color:"#3730a3",marginBottom:"0.5rem",fontWeight:500},children:"Paste your guest list below. Formats supported:"}),r.jsxs("ul",{style:{fontSize:"0.875rem",color:"#4338ca",paddingLeft:"1.25rem",lineHeight:1.6},children:[r.jsx("li",{children:"John Doe, +1 555-0100"}),r.jsx("li",{children:"Jane Smith - 555-0101"}),r.jsx("li",{children:"Bob Johnson (name only)"})]})]}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Paste Contact List"}),r.jsx("textarea",{value:a,onChange:I,className:"input",rows:8,placeholder:`John Doe, +1 555-0100
Jane Smith, 555-0101
Bob Johnson`,style:{fontFamily:"monospace",fontSize:"0.875rem",resize:"vertical"}})]}),y.length>0&&r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[r.jsx(Wt,{size:16,style:{color:"var(--success)"}}),r.jsxs("span",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--success)"},children:[y.length," guest",y.length!==1?"s":""," ready to import"]})]}),r.jsx("div",{style:{maxHeight:"12rem",overflow:"auto",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",padding:"0.75rem"},children:y.map((v,A)=>r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.5rem",fontSize:"0.875rem",borderBottom:A<y.length-1?"1px solid var(--border-light)":"none"},children:[r.jsx("span",{style:{fontWeight:500,color:"var(--text-primary)"},children:v.name}),r.jsx("span",{style:{color:"var(--text-secondary)"},children:v.phone||"No phone"})]},A))})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:h,className:"btn btn-secondary",children:"Cancel"}),r.jsxs("button",{onClick:S,className:"btn btn-primary",disabled:y.length===0,style:{opacity:y.length===0?.5:1},children:[r.jsx(pa,{size:16})," Add ",y.length," Guest",y.length!==1?"s":""]})]})]})})};var m0;(function(u){u.Home="home",u.Work="work",u.Other="other",u.Custom="custom",u.Mobile="mobile",u.FaxWork="fax_work",u.FaxHome="fax_home",u.Pager="pager",u.Callback="callback",u.Car="car",u.CompanyMain="company_main",u.Isdn="isdn",u.Main="main",u.OtherFax="other_fax",u.Radio="radio",u.Telex="telex",u.TtyTdd="tty_tdd",u.WorkMobile="work_mobile",u.WorkPager="work_pager",u.Assistant="assistant",u.Mms="mms"})(m0||(m0={}));var x0;(function(u){u.Home="home",u.Work="work",u.Other="other",u.Custom="custom",u.Mobile="mobile"})(x0||(x0={}));var y0;(function(u){u.Home="home",u.Work="work",u.Other="other",u.Custom="custom"})(y0||(y0={}));const v0=Ki("Contacts",{web:()=>kr(()=>import("./web-DAAo67Hl.js"),[]).then(u=>new u.ContactsWeb)}),jf=({onImport:u,onClose:h})=>{const[a,g]=U.useState([]),[y,x]=U.useState([]),[C,I]=U.useState(new Set),[S,v]=U.useState(""),[A,k]=U.useState(!0),[_,V]=U.useState(null),[X,W]=U.useState(!1);U.useEffect(()=>{z()},[]),U.useEffect(()=>{if(S){const D=a.filter(q=>q.name?.toLowerCase().includes(S.toLowerCase())||q.phoneNumbers?.some(F=>F.number?.includes(S)));x(D)}else x(a)},[S,a]);const z=async()=>{try{const{Capacitor:D}=await kr(async()=>{const{Capacitor:F}=await Promise.resolve().then(()=>Nd);return{Capacitor:F}},void 0),q=D.getPlatform();if(console.log("Capacitor platform:",q),console.log("Is native platform:",D.isNativePlatform()),q==="web"){V(` Contact import only works in the native Android app.

To use this feature:
1. Build the Android APK
2. Install it on your phone
3. Grant contacts permission`),k(!1);return}console.log("Running on native platform, loading contacts plugin..."),await H()}catch(D){console.error("Contacts plugin error:",D),V(`Failed to load contacts: ${D.message||"Unknown error"}`),k(!1)}},H=async()=>{try{(await v0.requestPermissions()).contacts==="granted"?(W(!0),await T()):(V("Permission denied. Please enable contacts access in your phone settings."),k(!1))}catch(D){console.error("Error requesting contacts permission:",D),V(`Failed to access contacts: ${D.message||"Unknown error"}`),k(!1)}},T=async()=>{try{const D=await v0.getContacts({projection:{name:!0,phones:!0}});console.log("Contacts loaded:",D.contacts?.length||0);const q=D.contacts.filter(F=>F.name?.display).map(F=>({id:F.contactId,name:F.name.display,phoneNumbers:F.phones||[],primaryPhone:F.phones?.[0]?.number||""})).sort((F,Q)=>F.name.localeCompare(Q.name));g(q),x(q),k(!1)}catch(D){console.error("Error loading contacts:",D),V(`Failed to load contacts: ${D.message||"Unknown error"}`),k(!1)}},N=D=>{const q=new Set(C);q.has(D)?q.delete(D):q.add(D),I(q)},P=()=>{const D=a.filter(q=>C.has(q.id)).map(q=>({name:q.name,phone:q.primaryPhone}));D.length>0&&(u(D),h())};return r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:h,children:r.jsxs("div",{className:"card",style:{maxWidth:"40rem",width:"100%",maxHeight:"90vh",display:"flex",flexDirection:"column"},onClick:D=>D.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid var(--border)"},children:[r.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(xf,{size:24,style:{color:"var(--primary)"}}),"Select Contacts"]}),r.jsx("button",{onClick:h,style:{padding:"0.5rem",border:"none",background:"none",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(It,{size:20})})]}),A&&r.jsxs("div",{style:{padding:"3rem",textAlign:"center",color:"var(--text-secondary)"},children:[r.jsx(Wt,{size:48,style:{margin:"0 auto 1rem",opacity:.3}}),r.jsx("p",{children:"Loading contacts..."})]}),_&&r.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[r.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"#fef3c7",borderRadius:"var(--radius-lg)",marginBottom:"1rem"},children:[r.jsx(mo,{size:32,style:{color:"#92400e",margin:"0 auto 1rem"}}),r.jsx("p",{style:{fontSize:"0.9375rem",color:"#92400e",whiteSpace:"pre-line",lineHeight:"1.6"},children:_})]}),r.jsx("button",{onClick:h,className:"btn btn-secondary",children:"Close"})]}),!A&&!_&&X&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{marginBottom:"1rem"},children:r.jsxs("div",{style:{position:"relative"},children:[r.jsx(xo,{size:18,style:{position:"absolute",left:"0.875rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)"}}),r.jsx("input",{type:"text",className:"input",style:{paddingLeft:"2.75rem"},placeholder:"Search contacts...",value:S,onChange:D=>v(D.target.value)})]})}),r.jsxs("div",{style:{padding:"0.75rem 1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("span",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[y.length," contact",y.length!==1?"s":""]}),r.jsxs("span",{className:"badge badge-primary",children:[C.size," selected"]})]}),r.jsx("div",{style:{flex:1,overflow:"auto",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",marginBottom:"1.5rem"},children:y.length===0?r.jsxs("div",{style:{padding:"3rem",textAlign:"center",color:"var(--text-secondary)"},children:[r.jsx(Wt,{size:48,style:{margin:"0 auto 1rem",opacity:.2}}),r.jsx("p",{children:"No contacts found"})]}):y.map(D=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",cursor:"pointer",borderBottom:"1px solid var(--border-light)",transition:"background 0.2s"},onMouseEnter:q=>q.currentTarget.style.backgroundColor="var(--bg-secondary)",onMouseLeave:q=>q.currentTarget.style.backgroundColor="transparent",children:[r.jsx("input",{type:"checkbox",checked:C.has(D.id),onChange:()=>N(D.id),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:600,color:"var(--text-primary)",marginBottom:"0.25rem"},children:D.name}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:D.primaryPhone||"No phone number"})]})]},D.id))}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:h,className:"btn btn-secondary",children:"Cancel"}),r.jsxs("button",{onClick:P,className:"btn btn-primary",disabled:C.size===0,style:{opacity:C.size===0?.5:1},children:[r.jsx(Wt,{size:16})," Add ",C.size," Contact",C.size!==1?"s":""]})]})]})]})})},xd="https://gatherly-backend-3vmv.onrender.com",sm=({isOpen:u,onClose:h,onSelectContacts:a,event:g})=>{const{contacts:y}=Tr(),[x,C]=U.useState(""),[I,S]=U.useState(new Set),[v,A]=U.useState("contacts"),[k,_]=U.useState([]),[V,X]=U.useState(new Set),[W,z]=U.useState(!1),[H,T]=U.useState({}),[N,P]=U.useState(null);U.useEffect(()=>{u&&v==="groups"&&D()},[u,v]);const D=async()=>{z(!0),P(null);try{const te=localStorage.getItem("token");console.log("Fetching contact groups from:",`${xd}/contact-groups`);const Y=await fetch(`${xd}/contact-groups`,{headers:{Authorization:`Bearer ${te}`}});if(console.log("Contact groups response status:",Y.status),Y.ok){const J=await Y.json();console.log("Contact groups data:",J),_(J),P(null)}else{const J=await Y.text();console.error("Failed to fetch groups:",Y.status,J),Y.status===404?P("Contact groups feature not available. Please update the backend."):P(`Failed to load groups (${Y.status})`)}}catch(te){console.error("Error fetching groups:",te),P("Network error. Please check your connection.")}finally{z(!1)}},q=async te=>{try{const Y=localStorage.getItem("token"),J=await fetch(`${xd}/contact-groups/${te}/members`,{headers:{Authorization:`Bearer ${Y}`}});if(J.ok){const se=await J.json();T(ce=>({...ce,[te]:se}))}}catch(Y){console.error("Error fetching group contacts:",Y)}};if(!u)return null;const F=U.useMemo(()=>{const te=g?.guests||[];return Y=>te.some(J=>J.phone&&Y.phone&&J.phone===Y.phone||J.name.toLowerCase()===Y.name.toLowerCase())},[g]),Q=y.filter(te=>te.name.toLowerCase().includes(x.toLowerCase())||te.phone.includes(x)),pe=k.filter(te=>te.name.toLowerCase().includes(x.toLowerCase())),Me=te=>{const Y=new Set(I);Y.has(te)?Y.delete(te):Y.add(te),S(Y)},be=async te=>{const Y=new Set(V);Y.has(te)?Y.delete(te):(Y.add(te),H[te]||await q(te)),X(Y)},we=async(te=!1)=>{let Y=[];if(v==="contacts")Y=y.filter(J=>I.has(J.id));else{const J=[];for(const ce of V){const Ce=H[ce]||[];J.push(...Ce)}const se=new Set;Y=J.filter(ce=>{const Ce=ce.phone||ce.name.toLowerCase();return se.has(Ce)?!1:(se.add(Ce),!0)})}a(Y,te),S(new Set),X(new Set),C(""),h()},de=()=>{if(v==="contacts")return I.size;{const te=[];for(const J of V){const se=H[J]||[];te.push(...se)}const Y=new Set;return te.filter(J=>{const se=J.phone||J.name.toLowerCase();return Y.has(se)?!1:(Y.add(se),!0)}).length}};return r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"600px",width:"100%",maxHeight:"80vh",display:"flex",flexDirection:"column",padding:0},children:[r.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:700,display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Wt,{size:24,style:{color:"var(--primary)"}}),"Import Contacts"]}),r.jsx("button",{onClick:h,className:"btn btn-secondary",style:{padding:"0.5rem"},children:r.jsx(It,{size:20})})]}),r.jsxs("div",{style:{display:"flex",borderBottom:"1px solid var(--border)"},children:[r.jsxs("button",{onClick:()=>A("contacts"),style:{flex:1,padding:"1rem",background:"none",border:"none",borderBottom:`3px solid ${v==="contacts"?"var(--primary)":"transparent"}`,color:v==="contacts"?"var(--primary)":"var(--text-secondary)",fontWeight:v==="contacts"?600:500,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[r.jsx(Wt,{size:18}),"Contacts"]}),r.jsxs("button",{onClick:()=>A("groups"),style:{flex:1,padding:"1rem",background:"none",border:"none",borderBottom:`3px solid ${v==="groups"?"var(--primary)":"transparent"}`,color:v==="groups"?"var(--primary)":"var(--text-secondary)",fontWeight:v==="groups"?600:500,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[r.jsx(Td,{size:18}),"Groups"]})]}),r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)"},children:r.jsxs("div",{style:{position:"relative"},children:[r.jsx(xo,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)"}}),r.jsx("input",{type:"text",className:"form-input",value:x,onChange:te=>C(te.target.value),placeholder:v==="contacts"?"Search by name or phone...":"Search groups...",style:{paddingLeft:"2.5rem"}})]})}),r.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:v==="contacts"?Q.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:[r.jsx(Wt,{size:48,style:{margin:"0 auto 1rem",opacity:.3}}),r.jsx("p",{children:"No contacts found"})]}):r.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:Q.map(te=>{const Y=F(te);return r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"var(--radius-md)",background:Y?"#f3f4f6":I.has(te.id)?"var(--bg-secondary)":"transparent",border:`2px solid ${Y?"#e5e7eb":I.has(te.id)?"var(--primary)":"var(--border)"}`,cursor:Y?"not-allowed":"pointer",opacity:Y?.6:1,transition:"all 0.2s"},children:[r.jsx("input",{type:"checkbox",checked:I.has(te.id),onChange:()=>Me(te.id),disabled:Y,style:{cursor:Y?"not-allowed":"pointer",width:"18px",height:"18px"}}),r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{fontWeight:600,color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[te.name,Y&&r.jsx("span",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:500},children:"(Already added)"})]}),te.phone&&r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:te.phone})]}),I.has(te.id)&&!Y&&r.jsx(Qt,{size:20,style:{color:"var(--primary)"}})]},te.id)})}):W?r.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:r.jsx("p",{children:"Loading groups..."})}):pe.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:[r.jsx(Td,{size:48,style:{margin:"0 auto 1rem",opacity:.3}}),r.jsx("p",{children:"No groups found"}),r.jsx("p",{style:{fontSize:"0.875rem",marginTop:"0.5rem"},children:"Create contact groups in the Contacts page"})]}):r.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:pe.map(te=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"var(--radius-md)",background:V.has(te.id)?"var(--bg-secondary)":"transparent",border:`2px solid ${V.has(te.id)?"var(--primary)":"var(--border)"}`,cursor:"pointer",transition:"all 0.2s"},children:[r.jsx("input",{type:"checkbox",checked:V.has(te.id),onChange:()=>be(te.id),style:{cursor:"pointer",width:"18px",height:"18px"}}),r.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:te.color||"#6B7280"}}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:600,color:"var(--text-primary)"},children:te.name}),r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[te.member_count||0," contacts"]})]}),V.has(te.id)&&r.jsx(Qt,{size:20,style:{color:"var(--primary)"}})]},te.id))})}),r.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[de()," contacts selected"]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsx("button",{onClick:h,className:"btn btn-secondary",children:"Cancel"}),r.jsxs("button",{onClick:()=>we(!1),className:"btn btn-secondary",disabled:de()===0,children:[r.jsx(Qt,{size:16})," Add to List"]}),r.jsxs("button",{onClick:()=>we(!0),className:"btn btn-primary",disabled:de()===0,children:[r.jsx(Qt,{size:16})," Add & Invite All"]})]})]})]})})},om=u=>{if(u.length===0)return"";const h=Object.keys(u[0]);return[h.join(","),...u.map(g=>h.map(y=>{const x=g[y],C=String(x).replace(/"/g,'""');return C.includes(",")?`"${C}"`:C}).join(","))].join(`
`)},am=(u,h)=>{const a=new Blob([u],{type:"text/csv;charset=utf-8;"}),g=document.createElement("a"),y=URL.createObjectURL(a);g.setAttribute("href",y),g.setAttribute("download",h),g.style.visibility="hidden",document.body.appendChild(g),g.click(),document.body.removeChild(g)},lm=u=>{if(!u||!u.guests||u.guests.length===0){alert("No guests to export");return}const h=u.guests.map(y=>({Name:y.name,Phone:y.phone||"N/A","RSVP Status":y.rsvp===!0?"Confirmed":y.rsvp===!1?"Declined":"No Response","Checked In":y.attended?"Yes":"No","Times Checked In":y.attendedCount||0,"Added Date":new Date(y.addedAt).toLocaleDateString(),"Added Time":new Date(y.addedAt).toLocaleTimeString()})),a=om(h),g=`${u.title.replace(/[^a-z0-9]/gi,"_")}_all_guests_${new Date().toISOString().split("T")[0]}.csv`;am(a,g)},cm=()=>{const{id:u}=go(),h=Wn(),{getEvent:a,addGuest:g,addBulkGuests:y,deleteGuest:x,deleteEvent:C}=Tr(),I=a(u),[S,v]=U.useState({name:"",phone:"",email:""}),[A,k]=U.useState("+91"),[_,V]=U.useState(""),[X,W]=U.useState(null),[z,H]=U.useState(!1),[T,N]=U.useState(!1),[P,D]=U.useState(!1),[q,F]=U.useState(!1),[Q,pe]=U.useState(null),[Me,be]=U.useState(null),[we,de]=U.useState(!1),[te,Y]=U.useState(null),[J,se]=U.useState(!1);if(!I)return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",textAlign:"center",gap:"1.5rem"},children:[r.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:700,color:"var(--text-primary)"},children:"Event not found"}),r.jsxs(Nr,{to:"/manager",className:"btn btn-secondary",children:[r.jsx(xi,{size:18})," Back to Dashboard"]})]});const ce=async(fe,De=!1)=>{if(fe.preventDefault(),!S.name.trim()||we)return;if(I.guests.some(Ge=>Ge.name.toLowerCase()===S.name.trim().toLowerCase()&&(!S.phone||Ge.phone===S.phone))){alert("This guest has already been added!");return}de(!0);try{const Ge=await g(u,{name:S.name.trim(),phone:S.phone.trim()?`${A}${S.phone.trim()}`:null,email:S.email.trim()||null});De&&Ge&&setTimeout(()=>oe(Ge),500),v({name:"",phone:"",email:""}),F(!1)}catch(Ge){console.error("Failed to add guest:",Ge),alert("Failed to add guest. Please try again.")}finally{de(!1)}},Ce=fe=>{y(u,fe)},$=async(fe,De=!1)=>{const $e=fe.filter(st=>!I.guests.some(Qe=>Qe.name.toLowerCase()===st.name.toLowerCase()||st.phone&&Qe.phone===st.phone));if($e.length===0){alert("All selected contacts have already been added as guests!");return}if($e.length<fe.length){const st=fe.length-$e.length;alert(`${st} duplicate${st>1?"s":""} skipped. Adding ${$e.length} new guest${$e.length>1?"s":""}.`)}const Ge=$e.map(st=>({name:st.name,phone:st.phone,email:st.email||""}));await y(u,Ge),De&&Ge.length>0&&setTimeout(async()=>{const We=a(u).guests.slice(-Ge.length);for(const Qe of We)Qe.phone&&(await oe(Qe),await new Promise(St=>setTimeout(St,500)))},500)},B=async fe=>{if(!Me)try{if(be(fe.id),!fe.phone){alert("No phone number for this guest!");return}const $e=`${window.location.origin.includes("localhost")?"https://gatherly-backend-3vmv.onrender.com":window.location.origin}/invite/${u}?guest=${fe.id}`,Ge=`You're invited to ${I.title}!

Event Details:
${I.venue?`Venue: ${I.venue}
`:""}${I.date?`Date: ${new Date(I.date).toLocaleDateString()}
`:""}${I.time?`Time: ${I.time}
`:""}

RSVP here: ${$e}

 Download the HostEze app:
Play Store: https://play.google.com/store/apps/details?id=com.guestscanner.app
App Store: https://apps.apple.com/app/hosteze`,We=`https://wa.me/${fe.phone.replace(/\D/g,"")}?text=${encodeURIComponent(Ge)}`;window.open(We,"_blank"),pe(fe.id),setTimeout(()=>pe(null),2e3)}catch(De){console.error("Error sending WhatsApp invite:",De),alert(`Failed to send WhatsApp invitation: ${De.message}`)}finally{be(null)}},oe=async fe=>{if(!Me)try{be(fe.id);const $e=`${window.location.origin.includes("localhost")?"https://gatherly-backend-3vmv.onrender.com":window.location.origin}/invite/${u}?guest=${fe.id}`,Ge=`You're invited to ${I.title}!

Event Details:
${I.venue?`Venue: ${I.venue}
`:""}${I.date?`Date: ${new Date(I.date).toLocaleDateString()}
`:""}${I.time?`Time: ${I.time}
`:""}

RSVP here: ${$e}

 Download the HostEze app:
Play Store: https://play.google.com/store/apps/details?id=com.guestscanner.app
App Store: https://apps.apple.com/app/hosteze`,{Share:st}=await kr(async()=>{const{Share:We}=await import("./index-D9YJlFdZ.js");return{Share:We}},[]);try{await st.share({title:`Invitation to ${I.title}`,text:Ge,dialogTitle:`Invite ${fe.name}`}),pe(fe.id),setTimeout(()=>pe(null),2e3)}catch(We){if(We.message&&!We.message.includes("canceled")&&!We.message.includes("cancelled")){console.error("Share failed:",We);try{await navigator.clipboard.writeText(Ge),alert("Share failed. Invitation copied to clipboard instead!")}catch(Qe){console.error("Clipboard fallback failed:",Qe),alert("Failed to share invitation. Please try again.")}}}}catch(De){console.error("Error inviting guest:",De),alert(`Failed to send invitation: ${De.message}`)}finally{be(null)}},Ee=async fe=>{try{await x(u,fe.id),Y(null)}catch(De){console.error("Error deleting guest:",De),alert("Failed to delete guest. Please try again.")}},le=async()=>{try{await C(u),se(!1),h("/manager")}catch(fe){console.error("Error deleting event:",fe),alert("Failed to delete event. Please try again.")}},ke=I.guests?.filter(fe=>fe.name.toLowerCase().includes(_.toLowerCase())||fe.phone.includes(_)).sort((fe,De)=>new Date(De.addedAt)-new Date(fe.addedAt))||[],ve=I.guests?.length||0,Oe=I.guests?.filter(fe=>fe.attended).length||0;return r.jsxs("div",{style:{maxWidth:"75rem",margin:"0 auto"},children:[r.jsx("div",{style:{marginBottom:"2rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.875rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"0.5rem"},children:"Guests"}),r.jsxs("p",{style:{fontSize:"0.9375rem",color:"var(--text-secondary)"},children:[ve," invited  ",Oe," checked in"]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",alignItems:"center"},children:[r.jsxs("button",{onClick:()=>lm(I),className:"btn btn-secondary",style:{fontSize:"0.875rem"},children:[r.jsx(cf,{size:16})," Export"]}),r.jsxs("button",{onClick:()=>F(!0),className:"btn btn-primary",children:[r.jsx(Mt,{size:18})," Add Guest"]})]})]})}),r.jsx("div",{style:{marginBottom:"1.5rem"},children:r.jsxs("div",{style:{position:"relative"},children:[r.jsx(xo,{size:18,style:{position:"absolute",left:"0.875rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)"}}),r.jsx("input",{type:"text",className:"input",style:{paddingLeft:"2.75rem"},placeholder:"Search guests by name or phone...",value:_,onChange:fe=>V(fe.target.value)})]})}),ke.length===0?r.jsxs("div",{className:"card",style:{padding:"3rem 2rem",textAlign:"center",backgroundColor:"var(--bg-secondary)"},children:[r.jsx(Wt,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("p",{style:{color:"var(--text-secondary)"},children:_?"No guests found matching your search.":"No guests added yet."}),!_&&r.jsxs("button",{onClick:()=>F(!0),className:"btn btn-primary",style:{marginTop:"1rem"},children:[r.jsx(Mt,{size:18})," Add Your First Guest"]})]}):r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:ke.map(fe=>r.jsxs("div",{className:"card",style:{padding:"1.25rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"0.375rem"},children:fe.name}),r.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[fe.phone?r.jsxs("a",{href:`tel:${fe.phone}`,style:{color:"var(--primary)",textDecoration:"none"},children:[" ",fe.phone]}):r.jsx("span",{children:"No phone"}),fe.attended&&r.jsxs("span",{className:"badge badge-success",children:[r.jsx(d0,{size:12})," Checked In"]}),fe.rsvp===!0&&!fe.attended&&r.jsx("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",fontWeight:"600",color:"#059669",background:"#d1fae5",padding:"0.25rem 0.5rem",borderRadius:"0.375rem"},children:" Confirmed"}),fe.rsvp===!1&&r.jsx("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",fontWeight:"600",color:"#dc2626",background:"#fee2e2",padding:"0.25rem 0.5rem",borderRadius:"0.375rem"},children:" Declined"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0},children:[fe.phone&&r.jsx("button",{onClick:()=>B(fe),className:"btn btn-secondary",style:{fontSize:"0.875rem",padding:"0.5rem 0.875rem",background:"#25D366",color:"white",border:"none"},title:"Send via WhatsApp",children:r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L0 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})}),r.jsx("button",{onClick:()=>oe(fe),className:"btn btn-secondary",style:{fontSize:"0.875rem",padding:"0.5rem 0.875rem"},title:"Share invitation",children:Q===fe.id?r.jsxs(r.Fragment,{children:[r.jsx(d0,{size:16})," Shared!"]}):r.jsx(r.Fragment,{children:r.jsx(Rd,{size:16})})}),r.jsxs("button",{onClick:()=>W(fe.id),className:"btn btn-secondary",style:{fontSize:"0.875rem",padding:"0.5rem 0.875rem"},children:[r.jsx(ff,{size:16})," QR"]}),r.jsx("button",{onClick:()=>Y(fe),className:"btn btn-secondary",style:{fontSize:"0.875rem",padding:"0.5rem 0.875rem",background:"#ef4444",color:"white",border:"none"},title:"Delete guest",children:r.jsx(Yt,{size:16})})]})]}),X===fe.id&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:()=>W(null),children:r.jsxs("div",{onClick:De=>De.stopPropagation(),style:{position:"relative"},children:[r.jsx("button",{onClick:()=>W(null),style:{position:"absolute",top:"-12px",right:"-12px",width:"40px",height:"40px",borderRadius:"50%",background:"white",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:"#64748b",fontWeight:"bold",zIndex:10,transition:"all 0.2s"},onMouseEnter:De=>{De.currentTarget.style.background="#ef4444",De.currentTarget.style.color="white",De.currentTarget.style.transform="scale(1.1)"},onMouseLeave:De=>{De.currentTarget.style.background="white",De.currentTarget.style.color="#64748b",De.currentTarget.style.transform="scale(1)"},children:r.jsx(It,{size:24})}),r.jsx(If,{name:fe.name,eventTitle:I.title,phoneNumber:fe.phone,payload:{eventId:I.id,guestId:fe.id,name:fe.name,valid:!0,timestamp:Date.now()}})]})})]},fe.id))}),q&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:()=>F(!1),children:r.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"100%",padding:"2rem"},onClick:fe=>fe.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)"},children:"Add Guest"}),r.jsx("button",{onClick:()=>F(!1),style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:ce,style:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Name *"}),r.jsx("input",{type:"text",className:"input",value:S.name,onChange:fe=>v({...S,name:fe.target.value}),placeholder:"John Doe",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Phone (optional)"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("select",{value:A,onChange:fe=>k(fe.target.value),className:"input",style:{width:"120px"},children:[r.jsx("option",{value:"+91",children:" +91"}),r.jsx("option",{value:"+1",children:" +1"}),r.jsx("option",{value:"+44",children:" +44"}),r.jsx("option",{value:"+61",children:" +61"}),r.jsx("option",{value:"+971",children:" +971"})]}),r.jsx("input",{type:"tel",className:"input",value:S.phone,onChange:fe=>v({...S,phone:fe.target.value.replace(/\D/g,"")}),placeholder:"9876543210",maxLength:10,style:{flex:1}})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Email (optional)"}),r.jsx("input",{type:"email",className:"input",value:S.email,onChange:fe=>v({...S,email:fe.target.value}),placeholder:"john@example.com"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginTop:"0.5rem"},children:[r.jsxs("button",{type:"button",onClick:fe=>ce(fe,!1),className:"btn btn-secondary",style:{justifyContent:"center"},disabled:we,children:[r.jsx(vf,{size:16})," ",we?"Adding...":"Add to List"]}),r.jsxs("button",{type:"button",onClick:fe=>ce(fe,!0),className:"btn btn-primary",style:{justifyContent:"center"},disabled:we,children:[r.jsx(Rd,{size:16})," ",we?"Adding...":"Add & Invite"]})]})]}),r.jsxs("div",{style:{paddingTop:"1.5rem",borderTop:"1px solid var(--border)"},children:[r.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-secondary)",marginBottom:"1rem"},children:"Quick Import"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[r.jsxs("button",{type:"button",onClick:()=>{F(!1),D(!0)},className:"btn btn-secondary",style:{width:"100%",justifyContent:"center"},children:[r.jsx(Wt,{size:16})," Add from Contacts"]}),r.jsxs("button",{type:"button",onClick:()=>{F(!1),H(!0)},className:"btn btn-secondary",style:{width:"100%",justifyContent:"center"},children:[r.jsx(pa,{size:16})," Import from CSV"]}),r.jsxs("button",{type:"button",onClick:()=>{F(!1),N(!0)},className:"btn btn-secondary",style:{width:"100%",justifyContent:"center"},children:[r.jsx(xf,{size:16})," Import from Phone"]})]})]})]})}),z&&r.jsx(im,{onImport:Ce,onClose:()=>H(!1)}),T&&r.jsx(jf,{onImport:Ce,onClose:()=>N(!1)}),P&&r.jsx(sm,{isOpen:P,onClose:()=>D(!1),onSelectContacts:$,event:I}),te&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:()=>Y(null),children:r.jsx("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"2rem"},onClick:fe=>fe.stopPropagation(),children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)"},children:"Delete Guest?"}),r.jsxs("p",{style:{color:"var(--text-secondary)"},children:["Are you sure you want to delete ",r.jsx("strong",{children:te.name}),"? This action cannot be undone."]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginTop:"0.5rem"},children:[r.jsx("button",{onClick:()=>Y(null),className:"btn btn-secondary",style:{justifyContent:"center"},children:"Cancel"}),r.jsxs("button",{onClick:()=>Ee(te),className:"btn btn-primary",style:{justifyContent:"center",background:"#ef4444",border:"none"},children:[r.jsx(Yt,{size:16})," Delete"]})]})]})})}),J&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:()=>se(!1),children:r.jsx("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"2rem"},onClick:fe=>fe.stopPropagation(),children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)"},children:"Delete Event?"}),r.jsxs("p",{style:{color:"var(--text-secondary)"},children:["Are you sure you want to delete ",r.jsx("strong",{children:I.title}),"? This will permanently delete the event and all ",ve," guest",ve!==1?"s":"",". This action cannot be undone."]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginTop:"0.5rem"},children:[r.jsx("button",{onClick:()=>se(!1),className:"btn btn-secondary",style:{justifyContent:"center"},children:"Cancel"}),r.jsxs("button",{onClick:le,className:"btn btn-primary",style:{justifyContent:"center",background:"#ef4444",border:"none"},children:[r.jsx(Yt,{size:16})," Delete Event"]})]})]})})})]})},dm=({expenses:u,eventId:h,onExpenseDeleted:a,userId:g})=>{const y="https://gatherly-backend-3vmv.onrender.com",x=async k=>{if(confirm("Are you sure you want to delete this expense?"))try{const _=localStorage.getItem("token");(await fetch(`${y}/api/events/${h}/expenses/${k}`,{method:"DELETE",headers:{Authorization:`Bearer ${_}`}})).ok&&a()}catch(_){console.error("Error deleting expense:",_)}},C=k=>{const _={};return k.forEach(V=>{const W=new Date(V.expense_date).toLocaleDateString("en-US",{month:"long",year:"numeric"});_[W]||(_[W]=[]),_[W].push(V)}),_},I=k=>{const _=k.paid_by===g||k.paid_by_id===g,V=k.splits||[],X=V.find(W=>W.user_id===g);return X?_?{type:"lent",text:"you lent",amount:V.filter(z=>z.user_id!==g).reduce((z,H)=>z+parseFloat(H.amount||0),0),color:"#10b981"}:{type:"borrowed",text:"you borrowed",amount:parseFloat(X.amount||0),color:"#f59e0b"}:{type:"not_involved",text:"not involved",color:"var(--text-tertiary)"}},S=k=>({food:"",transport:"",accommodation:"",activities:"",entertainment:"",other:""})[k]||"";if(u.length===0)return r.jsxs("div",{className:"card",style:{padding:"3rem",textAlign:"center"},children:[r.jsx(qi,{size:48,style:{margin:"0 auto 1rem",color:"var(--text-tertiary)"}}),r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"0.5rem"},children:"No expenses yet"}),r.jsx("p",{style:{color:"var(--text-secondary)"},children:'Click "Add Expense" to start tracking expenses'})]});const v=C(u),A=Object.keys(v).sort((k,_)=>new Date(_)-new Date(k));return r.jsx("div",{children:A.map(k=>r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-secondary)",marginBottom:"1rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:k}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:v[k].sort((_,V)=>new Date(V.expense_date)-new Date(_.expense_date)).map(_=>{const V=I(_),X=new Date(_.expense_date);return r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius)",transition:"background 0.2s"},onMouseEnter:W=>W.currentTarget.style.background="var(--bg-tertiary)",onMouseLeave:W=>W.currentTarget.style.background="var(--bg-secondary)",children:[r.jsxs("div",{style:{minWidth:"3rem",textAlign:"center",color:"var(--text-tertiary)",fontSize:"0.75rem"},children:[r.jsx("div",{style:{fontWeight:600,fontSize:"0.875rem"},children:X.toLocaleDateString("en-US",{month:"short"})}),r.jsx("div",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)"},children:X.getDate()})]}),r.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"var(--radius)",background:"var(--bg-primary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",flexShrink:0},children:S(_.category)}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:_.description}),r.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)"},children:[_.paid_by_name," paid ",_.currency," ",parseFloat(_.amount).toFixed(2)]})]}),r.jsx("div",{style:{textAlign:"right",minWidth:"5rem"},children:V.type!=="not_involved"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{fontSize:"0.9375rem",fontWeight:600,color:V.color,marginBottom:"0.125rem"},children:[_.currency," ",V.amount.toFixed(2)]}),r.jsx("div",{style:{fontSize:"0.75rem",color:V.color,fontWeight:500},children:V.text})]}):r.jsx("div",{style:{fontSize:"0.75rem",color:V.color,fontWeight:500},children:V.text})}),r.jsx("button",{onClick:()=>x(_.id),style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-tertiary)",padding:"0.5rem",borderRadius:"var(--radius)",transition:"all 0.2s",flexShrink:0},onMouseEnter:W=>{W.currentTarget.style.background="rgba(239, 68, 68, 0.1)",W.currentTarget.style.color="#ef4444"},onMouseLeave:W=>{W.currentTarget.style.background="none",W.currentTarget.style.color="var(--text-tertiary)"},children:r.jsx(Yt,{size:16})})]},_.id)})})]},k))})},um=({eventId:u,event:h,onClose:a,onExpenseAdded:g})=>{const[y,x]=U.useState({amount:"",currency:"USD",description:"",category:"food",paidBy:"",expenseDate:new Date().toISOString().split("T")[0],splitType:"equal"}),[C,I]=U.useState({}),[S,v]=U.useState([]),[A,k]=U.useState(!1),[_,V]=U.useState(""),X="https://gatherly-backend-3vmv.onrender.com",W=[{id:h.user_id,name:h.user_name||"Event Owner"},...(h.guests||[]).filter(D=>D.user_id).map(D=>({id:D.user_id,name:D.name}))].filter((D,q,F)=>q===F.findIndex(Q=>Q.id===D.id));sr.useEffect(()=>{if(S.length===0&&W.length>0){v(W.map(F=>F.id));const D=localStorage.getItem("userId"),q=W.find(F=>F.id===D)?D:W[0]?.id;q&&!y.paidBy&&x(F=>({...F,paidBy:q}))}},[W.length]);const z=async D=>{D.preventDefault(),V(""),k(!0);try{const q=parseFloat(y.amount);if(isNaN(q)||q<=0){V("Please enter a valid amount"),k(!1);return}if(S.length===0){V("Please select at least one participant"),k(!1);return}let F=[];if(y.splitType==="equal"){const we=q/S.length;F=S.map(de=>({userId:de,amount:we}))}else{F=S.map(de=>({userId:de,amount:parseFloat(C[de]||0)}));const we=F.reduce((de,te)=>de+te.amount,0);if(Math.abs(we-q)>.01){V(`Split amounts ($${we.toFixed(2)}) must equal total amount ($${q.toFixed(2)})`),k(!1);return}}const Q=localStorage.getItem("token"),pe={...y,amount:q,splits:F};console.log("Sending expense creation request:",pe),console.log("Splits:",F);const Me=await fetch(`${X}/api/events/${u}/expenses`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Q}`},body:JSON.stringify(pe)});console.log("Expense creation response status:",Me.status);const be=await Me.text();if(console.log("Expense creation response:",be),Me.ok){const we=JSON.parse(be);console.log("Expense created successfully:",we),g(),a()}else{const we=be?JSON.parse(be):{};console.error("Expense creation failed:",we),V(we.error||"Failed to create expense")}}catch(q){console.error("Error creating expense:",q),V("Failed to create expense")}finally{k(!1)}},H=D=>{v(q=>q.includes(D)?q.filter(F=>F!==D):[...q,D])},T=(D,q)=>{I(F=>({...F,[D]:q}))},N=["USD","EUR","GBP","INR","AUD","CAD","SGD","AED"],P=["food","transport","accommodation","activities","entertainment","other"];return r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:a,children:r.jsxs("div",{className:"card",style:{maxWidth:"600px",width:"100%",padding:"2rem",maxHeight:"90vh",overflowY:"auto"},onClick:D=>D.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)"},children:"Add Expense"}),r.jsx("button",{onClick:a,style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(It,{size:24})})]}),_&&r.jsx("div",{style:{padding:"0.75rem",marginBottom:"1rem",borderRadius:"8px",background:"#fee2e2",color:"#991b1b",fontSize:"0.875rem"},children:_}),r.jsxs("form",{onSubmit:z,style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Amount *"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(qi,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)"}}),r.jsx("input",{type:"number",step:"0.01",className:"input",style:{paddingLeft:"2.5rem"},value:y.amount,onChange:D=>x({...y,amount:D.target.value}),placeholder:"0.00",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Currency"}),r.jsx("select",{className:"input",value:y.currency,onChange:D=>x({...y,currency:D.target.value}),children:N.map(D=>r.jsx("option",{value:D,children:D},D))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Description *"}),r.jsx("input",{type:"text",className:"input",value:y.description,onChange:D=>x({...y,description:D.target.value}),placeholder:"e.g., Dinner at restaurant",required:!0})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Category"}),r.jsx("select",{className:"input",value:y.category,onChange:D=>x({...y,category:D.target.value}),children:P.map(D=>r.jsx("option",{value:D,children:D.charAt(0).toUpperCase()+D.slice(1)},D))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Date"}),r.jsx("input",{type:"date",className:"input",value:y.expenseDate,onChange:D=>x({...y,expenseDate:D.target.value})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Paid By"}),r.jsx("select",{className:"input",value:y.paidBy,onChange:D=>x({...y,paidBy:D.target.value}),children:W.map(D=>r.jsx("option",{value:D.id,children:D.name},D.id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Split Type"}),r.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"splitType",value:"equal",checked:y.splitType==="equal",onChange:D=>x({...y,splitType:D.target.value})}),r.jsx("span",{style:{color:"var(--text-primary)"},children:"Equal Split"})]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"splitType",value:"custom",checked:y.splitType==="custom",onChange:D=>x({...y,splitType:D.target.value})}),r.jsx("span",{style:{color:"var(--text-primary)"},children:"Custom Split"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.75rem",fontWeight:500},children:["Split Among (",S.length," selected)"]}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:W.map(D=>r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"8px",background:S.includes(D.id)?"var(--bg-secondary)":"transparent",border:"1px solid var(--border)"},children:[r.jsx("input",{type:"checkbox",checked:S.includes(D.id),onChange:()=>H(D.id),style:{cursor:"pointer"}}),r.jsx("span",{style:{flex:1,color:"var(--text-primary)"},children:D.name}),y.splitType==="custom"&&S.includes(D.id)&&r.jsx("input",{type:"number",step:"0.01",className:"input",style:{width:"100px"},placeholder:"0.00",value:C[D.id]||"",onChange:q=>T(D.id,q.target.value)}),y.splitType==="equal"&&S.includes(D.id)&&y.amount&&r.jsxs("span",{style:{color:"var(--text-secondary)",fontSize:"0.875rem"},children:["$",(parseFloat(y.amount)/S.length).toFixed(2)]})]},D.id))})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1rem"},children:[r.jsx("button",{type:"button",onClick:a,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",style:{flex:1},disabled:A,children:A?"Adding...":"Add Expense"})]})]})]})})},hm=({balances:u,eventId:h,onSettled:a})=>{const[g,y]=U.useState(null),x="https://gatherly-backend-3vmv.onrender.com",C=async I=>{if(confirm(`Settle ${I.currency} ${parseFloat(I.amount).toFixed(2)} from ${I.fromUserName} to ${I.toUserName}?`)){y(I);try{const S=localStorage.getItem("token");(await fetch(`${x}/api/events/${h}/settlements`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify({fromUser:I.fromUser,toUser:I.toUser,amount:I.amount,currency:I.currency})})).ok&&a()}catch(S){console.error("Error settling balance:",S)}finally{y(null)}}};return u.length===0?null:r.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:"2rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"1rem"},children:"Balances to Settle"}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:u.map((I,S)=>r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",borderRadius:"8px",background:"var(--bg-secondary)",border:"1px solid var(--border)"},children:[r.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:I.fromUserName}),r.jsx(sf,{size:18,style:{color:"var(--text-tertiary)"}}),r.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:I.toUserName})]}),r.jsxs("span",{style:{fontSize:"1.125rem",fontWeight:700,color:"#ef4444"},children:[I.currency," ",parseFloat(I.amount).toFixed(2)]}),r.jsxs("button",{onClick:()=>C(I),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},disabled:g===I,children:[r.jsx(Qt,{size:16}),g===I?"Settling...":"Settle Up"]})]},S))})]})},fm=({eventId:u,event:h})=>{const[a,g]=U.useState([]),[y,x]=U.useState([]),[C,I]=U.useState(!0),[S,v]=U.useState(!1),[A,k]=U.useState("expenses"),_="https://gatherly-backend-3vmv.onrender.com",V=async()=>{try{const T=localStorage.getItem("token"),N=await fetch(`${_}/api/events/${u}/expenses`,{headers:{Authorization:`Bearer ${T}`}});if(N.ok){const P=await N.json();g(P.expenses||[])}}catch(T){console.error("Error fetching expenses:",T)}},X=async()=>{try{const T=localStorage.getItem("token"),N=await fetch(`${_}/api/events/${u}/balances`,{headers:{Authorization:`Bearer ${T}`}});if(N.ok){const P=await N.json();x(P.balances||[])}}catch(T){console.error("Error fetching balances:",T)}};U.useEffect(()=>{(async()=>(I(!0),await Promise.all([V(),X()]),I(!1)))()},[u]);const W=localStorage.getItem("userId");a.reduce((T,N)=>T+parseFloat(N.amount||0),0),a.filter(T=>T.paid_by===W||T.paid_by_id===W).reduce((T,N)=>T+parseFloat(N.amount||0),0);const z=y.filter(T=>(T.fromUser===W||T.from_user===W)&&parseFloat(T.amount)>0).reduce((T,N)=>T+parseFloat(N.amount),0),H=y.filter(T=>(T.toUser===W||T.to_user===W)&&parseFloat(T.amount)>0).reduce((T,N)=>T+parseFloat(N.amount),0);return C?r.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:"Loading expenses..."}):r.jsxs("div",{children:[r.jsx("div",{style:{padding:"1.5rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",marginBottom:"1.5rem"},children:H>z?r.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:600,color:"#10b981"},children:["You are owed $",(H-z).toFixed(2)]}):z>H?r.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:600,color:"#ef4444"},children:["You owe $",(z-H).toFixed(2)]}):r.jsx("div",{style:{fontSize:"1.125rem",fontWeight:600,color:"var(--text-secondary)"},children:"You are all settled up"})}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",borderBottom:"1px solid var(--border)",paddingBottom:"0.5rem"},children:[r.jsx("button",{onClick:()=>k("expenses"),style:{padding:"0.75rem 1.5rem",borderRadius:"var(--radius)",border:"none",background:A==="expenses"?"var(--primary)":"transparent",color:A==="expenses"?"white":"var(--text-secondary)",fontWeight:600,fontSize:"0.875rem",cursor:"pointer",transition:"all 0.2s"},children:"Expenses"}),r.jsx("button",{onClick:()=>k("balances"),style:{padding:"0.75rem 1.5rem",borderRadius:"var(--radius)",border:"none",background:A==="balances"?"var(--primary)":"transparent",color:A==="balances"?"white":"var(--text-secondary)",fontWeight:600,fontSize:"0.875rem",cursor:"pointer",transition:"all 0.2s"},children:"Balances"})]}),r.jsxs("button",{onClick:()=>v(!0),className:"btn btn-primary",style:{marginBottom:"1.5rem",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"1rem"},children:[r.jsx(Mt,{size:20}),"Add Expense"]}),A==="expenses"?r.jsx(dm,{expenses:a,eventId:u,onExpenseDeleted:()=>{V(),X()},userId:W}):r.jsx(hm,{balances:y,eventId:u,onSettled:()=>{X(),V()}}),S&&r.jsx(um,{event:h,onClose:()=>v(!1),onExpenseAdded:()=>{V(),X(),v(!1)}})]})},pm=()=>{const{id:u}=go(),h=Wn(),{getEvent:a,updateEvent:g,deleteEvent:y}=Tr(),x=a(u),[C,I]=U.useState("overview"),[S,v]=U.useState(!1);if(!x)return r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",textAlign:"center",gap:"1.5rem"},children:[r.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:700,color:"var(--text-primary)"},children:"Event not found"}),r.jsxs(Nr,{to:"/manager",className:"btn btn-secondary",children:[r.jsx(xi,{size:18})," Back to Dashboard"]})]});const A=q=>{g(u,{...x,catering:{items:q}})},k=q=>{g(u,{...x,tasks:q})},_=q=>{g(u,{...x,venue:q})},V=q=>{g(u,{...x,decorations:q})},X=q=>{g(u,{...x,gifts:q})},W=q=>{g(u,{...x,entertainment:q})},z=q=>{g(u,{...x,vendors:q})},H=async()=>{try{await y(u),v(!1),h("/manager")}catch(q){console.error("Error deleting event:",q),alert("Failed to delete event. Please try again.")}},T=x.event_type==="shared",N=[{id:"overview",label:"Overview",icon:f0},{id:"guests",label:"Guests",icon:Wt,badge:x.guests?.length||0},{id:"catering",label:"Catering",icon:bf,badge:x.catering?.items?.length||null},{id:"tasks",label:"Tasks",icon:lf,badge:x.tasks?.length||null},{id:"venue",label:"Venue",icon:Kr,badge:null},{id:"decorations",label:"Decorations",icon:yf,badge:x.decorations?.items?.length||null},{id:"gifts",label:"Gifts",icon:df,badge:x.gifts?.items?.length||null},{id:"entertainment",label:"Entertainment",icon:hf,badge:x.entertainment?.activities?.length||null},{id:"vendors",label:"Vendors",icon:of,badge:x.vendors?.length||null},{id:"budget",label:"Budget",icon:qi,badge:null},{id:"reminders",label:"Reminders",icon:co,badge:null},{id:"messages",label:"Messages",icon:_l,badge:null}],P=[{id:"overview",label:"Overview",icon:f0},{id:"schedule",label:"Schedule",icon:Zn,badge:null},{id:"guests",label:"Participants",icon:Wt,badge:x.guests?.length||0},{id:"expenses",label:"Expenses",icon:qi,badge:null},{id:"messages",label:"Messages",icon:_l,badge:null}],D=T?P:N;return r.jsxs("div",{style:{maxWidth:"75rem",margin:"0 auto",padding:"16px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},children:[r.jsxs(Nr,{to:`/event/${u}/wall`,style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 20px",borderRadius:"12px",background:"linear-gradient(135deg, #6366f1, #a855f7)",border:"none",color:"#ffffff",fontWeight:700,fontSize:"14px",textDecoration:"none",boxShadow:"0 4px 12px rgba(99,102,241,0.3)",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:q=>{q.currentTarget.style.transform="translateY(-2px)",q.currentTarget.style.boxShadow="0 6px 16px rgba(99,102,241,0.4)"},onMouseLeave:q=>{q.currentTarget.style.transform="translateY(0)",q.currentTarget.style.boxShadow="0 4px 12px rgba(99,102,241,0.3)"},children:[r.jsx(_l,{size:18,strokeWidth:2.5})," Event Wall"]}),r.jsx("button",{onClick:()=>v(!0),style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"8px",background:"#ef4444",border:"none",color:"#ffffff",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:q=>q.currentTarget.style.background="#dc2626",onMouseLeave:q=>q.currentTarget.style.background="#ef4444",title:"Delete Event",children:r.jsx(Yt,{size:16})})]}),r.jsx(jg,{tabs:D,activeTab:C,onTabChange:I}),r.jsxs("div",{children:[C==="overview"&&r.jsx(kg,{event:x}),C==="schedule"&&r.jsx(Vg,{event:x}),C==="guests"&&r.jsx(cm,{}),C==="expenses"&&r.jsx(fm,{eventId:u,event:x}),C==="catering"&&r.jsx(Ng,{event:x,onUpdate:A}),C==="tasks"&&r.jsx(Tg,{event:x,onUpdateTasks:k}),C==="venue"&&r.jsx(_g,{event:x,onUpdateVenue:_}),C==="decorations"&&r.jsx(Rg,{event:x,onUpdateDecorations:V}),C==="gifts"&&r.jsx(Og,{event:x,onUpdateGifts:X}),C==="entertainment"&&r.jsx(Dg,{event:x,onUpdateEntertainment:W}),C==="vendors"&&r.jsx(Pg,{event:x,onUpdateVendors:z}),C==="budget"&&r.jsx(Bg,{event:x}),C==="reminders"&&r.jsx(zg,{event:x}),C==="messages"&&r.jsx(Fg,{event:x})]}),S&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:()=>v(!1),children:r.jsx("div",{style:{maxWidth:"400px",width:"100%",padding:"2rem",background:"var(--bg-primary)",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},onClick:q=>q.stopPropagation(),children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)"},children:"Delete Event?"}),r.jsxs("p",{style:{color:"var(--text-secondary)"},children:["Are you sure you want to delete ",r.jsx("strong",{children:x.title}),"? This will permanently delete the event and all ",x.guests?.length||0," guest",x.guests?.length!==1?"s":"",". This action cannot be undone."]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginTop:"0.5rem"},children:[r.jsx("button",{onClick:()=>v(!1),style:{padding:"10px 20px",borderRadius:"8px",background:"var(--bg-secondary)",border:"1px solid var(--border)",color:"var(--text-primary)",fontWeight:600,cursor:"pointer"},children:"Cancel"}),r.jsxs("button",{onClick:H,style:{padding:"10px 20px",borderRadius:"8px",background:"#ef4444",border:"none",color:"#ffffff",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[r.jsx(Yt,{size:16})," Delete Event"]})]})]})})})]})},gm=()=>{const{id:u}=go(),h=Wn(),{getEvent:a,rsvpGuest:g}=Tr(),{user:y}=Wr(),x=a(u),[C,I]=U.useState(null),[S,v]=U.useState(!1);if(U.useEffect(()=>{if(!x||!x.guests)return;const _=X=>X?X.replace(/\D/g,"").slice(-10):null,V=x.guests.find(X=>{const W=y?.email&&X.email===y.email,z=_(y?.phone),H=_(X.phone),T=z&&H&&z===H,N=X.user_id===y?.id;return W||T||N});I(V)},[x,y]),!x)return r.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[r.jsx("h2",{children:"Event not found"}),r.jsx(Nr,{to:"/",className:"btn btn-primary",style:{marginTop:"1rem"},children:"Back to Events"})]});const A=C?C.rsvp:x.rsvp,k=A!=null;return r.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem"},children:[r.jsx("button",{onClick:()=>h("/"),style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--bg-secondary)",border:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(xi,{size:20})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{display:"inline-block",padding:"4px 12px",background:"rgba(99,102,241,0.1)",color:"var(--primary)",borderRadius:"12px",fontSize:"12px",fontWeight:600,marginBottom:"8px"},children:"YOU'RE INVITED"}),r.jsx("h1",{style:{fontSize:"28px",fontWeight:900,color:"var(--text-primary)",margin:0},children:x.title})]})]}),r.jsxs("div",{className:"card",style:{padding:"2rem",marginBottom:"1.5rem"},children:[r.jsx("h2",{style:{fontSize:"18px",fontWeight:700,color:"var(--text-primary)",marginBottom:"1.5rem"},children:"Event Details"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[x.date&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #6366f1, #a855f7)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r.jsx(Zn,{size:24,color:"white"})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",fontWeight:600,marginBottom:"2px"},children:"DATE & TIME"}),r.jsx("div",{style:{fontSize:"16px",fontWeight:700,color:"var(--text-primary)"},children:new Date(x.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),x.location&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #10b981, #14b8a6)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r.jsx(Kr,{size:24,color:"white"})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",fontWeight:600,marginBottom:"2px"},children:"LOCATION"}),r.jsx("div",{style:{fontSize:"16px",fontWeight:700,color:"var(--text-primary)"},children:x.location})]})]}),x.description&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",fontWeight:600,marginBottom:"8px"},children:"DESCRIPTION"}),r.jsx("p",{style:{fontSize:"15px",color:"var(--text-primary)",lineHeight:"1.6",margin:0},children:x.description})]})]})]}),r.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:"1.5rem"},children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:r.jsxs("div",{children:[r.jsx("h3",{style:{fontSize:"16px",fontWeight:700,color:"var(--text-primary)",marginBottom:"4px"},children:"Your RSVP"}),k?r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:A?r.jsxs(r.Fragment,{children:[r.jsx(js,{size:18,color:"#10b981"}),r.jsx("span",{style:{color:"#10b981",fontWeight:600,fontSize:"14px"},children:"Attending"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Wd,{size:18,color:"#ef4444"}),r.jsx("span",{style:{color:"#ef4444",fontWeight:600,fontSize:"14px"},children:"Not Attending"})]})}):r.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:"Please respond to your invitation"})]})}),C&&r.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid var(--border)"},children:[r.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:k?"Want to change your response?":"Will you be attending?"}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsx("button",{onClick:async()=>{v(!0);try{await g(x.id,C.id,!1)}catch(_){console.error("RSVP error:",_),alert("Failed to update RSVP. Please try again.")}finally{v(!1)}},disabled:S,className:"btn",style:{flex:1,padding:"0.75rem",background:A===!1?"linear-gradient(135deg, #ef4444, #dc2626)":"var(--bg-secondary)",color:A===!1?"white":"var(--text-primary)",border:A===!1?"none":"1px solid var(--border)",fontWeight:600,fontSize:"14px"},children:A===!1?" Not Attending":"Can't Make It"}),r.jsx("button",{onClick:async()=>{v(!0);try{await g(x.id,C.id,!0)}catch(_){console.error("RSVP error:",_),alert("Failed to update RSVP. Please try again.")}finally{v(!1)}},disabled:S,className:"btn btn-primary",style:{flex:1,padding:"0.75rem",background:A===!0?"linear-gradient(135deg, #10b981, #059669)":"",fontWeight:600,fontSize:"14px"},children:A===!0?" Attending":"I'll Be There!"})]})]})]}),C&&r.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[r.jsx(ff,{size:20,color:"var(--primary)"}),r.jsx("h3",{style:{fontSize:"16px",fontWeight:700,color:"var(--text-primary)",margin:0},children:"Your Check-in QR Code"})]}),r.jsx("p",{style:{fontSize:"14px",color:"var(--text-secondary)",margin:0},children:"Show this QR code at the event entrance for quick check-in"})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center"},children:r.jsx(If,{payload:{eventId:x.id,guestId:C.id,name:C.name,valid:!0,timestamp:Date.now()},name:C.name,eventTitle:x.title,phoneNumber:C.phone})})]}),r.jsxs(Nr,{to:`/event/${u}/wall`,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",padding:"16px",borderRadius:"16px",background:"linear-gradient(135deg, #6366f1, #a855f7)",border:"none",color:"#ffffff",fontWeight:900,fontSize:"16px",textDecoration:"none",boxShadow:"0 8px 20px rgba(99,102,241,0.3)",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseEnter:_=>{_.currentTarget.style.transform="translateY(-2px)",_.currentTarget.style.boxShadow="0 12px 24px rgba(99,102,241,0.4)"},onMouseLeave:_=>{_.currentTarget.style.transform="translateY(0)",_.currentTarget.style.boxShadow="0 8px 20px rgba(99,102,241,0.3)"},children:[r.jsx(_l,{size:22,strokeWidth:2.5}),"Open Event Wall"]})]})};var Fe;(function(u){u[u.QR_CODE=0]="QR_CODE",u[u.AZTEC=1]="AZTEC",u[u.CODABAR=2]="CODABAR",u[u.CODE_39=3]="CODE_39",u[u.CODE_93=4]="CODE_93",u[u.CODE_128=5]="CODE_128",u[u.DATA_MATRIX=6]="DATA_MATRIX",u[u.MAXICODE=7]="MAXICODE",u[u.ITF=8]="ITF",u[u.EAN_13=9]="EAN_13",u[u.EAN_8=10]="EAN_8",u[u.PDF_417=11]="PDF_417",u[u.RSS_14=12]="RSS_14",u[u.RSS_EXPANDED=13]="RSS_EXPANDED",u[u.UPC_A=14]="UPC_A",u[u.UPC_E=15]="UPC_E",u[u.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Fe||(Fe={}));var w0=new Map([[Fe.QR_CODE,"QR_CODE"],[Fe.AZTEC,"AZTEC"],[Fe.CODABAR,"CODABAR"],[Fe.CODE_39,"CODE_39"],[Fe.CODE_93,"CODE_93"],[Fe.CODE_128,"CODE_128"],[Fe.DATA_MATRIX,"DATA_MATRIX"],[Fe.MAXICODE,"MAXICODE"],[Fe.ITF,"ITF"],[Fe.EAN_13,"EAN_13"],[Fe.EAN_8,"EAN_8"],[Fe.PDF_417,"PDF_417"],[Fe.RSS_14,"RSS_14"],[Fe.RSS_EXPANDED,"RSS_EXPANDED"],[Fe.UPC_A,"UPC_A"],[Fe.UPC_E,"UPC_E"],[Fe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),b0;(function(u){u[u.UNKNOWN=0]="UNKNOWN",u[u.URL=1]="URL"})(b0||(b0={}));function mm(u){return Object.values(Fe).includes(u)}var Pl;(function(u){u[u.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",u[u.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Pl||(Pl={}));var xm=(function(){function u(){}return u.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",u.SCAN_DEFAULT_FPS=2,u.DEFAULT_DISABLE_FLIP=!1,u.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,u.DEFAULT_SUPPORTED_SCAN_TYPE=[Pl.SCAN_TYPE_CAMERA,Pl.SCAN_TYPE_FILE],u})(),kf=(function(){function u(h,a){this.format=h,this.formatName=a}return u.prototype.toString=function(){return this.formatName},u.create=function(h){if(!w0.has(h))throw"".concat(h," not in html5QrcodeSupportedFormatsTextMap");return new u(h,w0.get(h))},u})(),C0=(function(){function u(){}return u.createFromText=function(h){var a={text:h};return{decodedText:h,result:a}},u.createFromQrcodeResult=function(h){return{decodedText:h.text,result:h}},u})(),Od;(function(u){u[u.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",u[u.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",u[u.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Od||(Od={}));var ym=(function(){function u(){}return u.createFrom=function(h){return{errorMessage:h,type:Od.UNKWOWN_ERROR}},u})(),vm=(function(){function u(h){this.verbose=h}return u.prototype.log=function(h){this.verbose&&console.log(h)},u.prototype.warn=function(h){this.verbose&&console.warn(h)},u.prototype.logError=function(h,a){(this.verbose||a===!0)&&console.error(h)},u.prototype.logErrors=function(h){if(h.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(h)},u})();function pi(u){return typeof u>"u"||u===null}var ao=(function(){function u(){}return u.codeParseError=function(h){return"QR code parse error, error = ".concat(h)},u.errorGettingUserMedia=function(h){return"Error getting userMedia, error = ".concat(h)},u.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},u.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},u.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},u.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},u.scannerPaused=function(){return"Scanner paused"},u})(),Nf=(function(){function u(){}return u.isMediaStreamConstraintsValid=function(h,a){if(typeof h!="object"){var g=typeof h;return a.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(g,"."),!0),!1}for(var y=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],x=new Set(y),C=Object.keys(h),I=0,S=C;I<S.length;I++){var v=S[I];if(x.has(v))return a.logError("".concat(v," is not supported videoConstaints."),!0),!1}return!0},u})(),la={exports:{}},wm=la.exports,S0;function bm(){return S0||(S0=1,(function(u,h){(function(a,g){g(h)})(wm,(function(a){function g(R){return R==null}var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,e){R.__proto__=e}||function(R,e){for(var n in e)e.hasOwnProperty(n)&&(R[n]=e[n])};function x(R,e){y(R,e);function n(){this.constructor=R}R.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function C(R,e){var n=Object.setPrototypeOf;n?n(R,e):R.__proto__=e}function I(R,e){e===void 0&&(e=R.constructor);var n=Error.captureStackTrace;n&&n(R,e)}var S=(function(R){x(e,R);function e(n){var i=this.constructor,o=R.call(this,n)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1}),C(o,i.prototype),I(o),o}return e})(Error);class v extends S{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}v.kind="Exception";class A extends v{}A.kind="ArgumentException";class k extends v{}k.kind="IllegalArgumentException";class _{constructor(e){if(this.binarizer=e,e===null)throw new k("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,n){return this.binarizer.getBlackRow(e,n)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,n,i,o){const l=this.binarizer.getLuminanceSource().crop(e,n,i,o);return new _(this.binarizer.createBinarizer(l))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class V extends v{static getChecksumInstance(){return new V}}V.kind="ChecksumException";class X{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class W{static arraycopy(e,n,i,o,l){for(;l--;)i[o++]=e[n++]}static currentTimeMillis(){return Date.now()}}class z extends v{}z.kind="IndexOutOfBoundsException";class H extends z{constructor(e=void 0,n=void 0){super(n),this.index=e,this.message=n}}H.kind="ArrayIndexOutOfBoundsException";class T{static fill(e,n){for(let i=0,o=e.length;i<o;i++)e[i]=n}static fillWithin(e,n,i,o){T.rangeCheck(e.length,n,i);for(let l=n;l<i;l++)e[l]=o}static rangeCheck(e,n,i){if(n>i)throw new k("fromIndex("+n+") > toIndex("+i+")");if(n<0)throw new H(n);if(i>e)throw new H(i)}static asList(...e){return e}static create(e,n,i){return Array.from({length:e}).map(l=>Array.from({length:n}).fill(i))}static createInt32Array(e,n,i){return Array.from({length:e}).map(l=>Int32Array.from({length:n}).fill(i))}static equals(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(let i=0,o=e.length;i<o;i++)if(e[i]!==n[i])return!1;return!0}static hashCode(e){if(e===null)return 0;let n=1;for(const i of e)n=31*n+i;return n}static fillUint8Array(e,n){for(let i=0;i!==e.length;i++)e[i]=n}static copyOf(e,n){return e.slice(0,n)}static copyOfUint8Array(e,n){if(e.length<=n){const i=new Uint8Array(n);return i.set(e),i}return e.slice(0,n)}static copyOfRange(e,n,i){const o=i-n,l=new Int32Array(o);return W.arraycopy(e,n,l,0,o),l}static binarySearch(e,n,i){i===void 0&&(i=T.numberComparator);let o=0,l=e.length-1;for(;o<=l;){const c=l+o>>1,f=i(n,e[c]);if(f>0)o=c+1;else if(f<0)l=c-1;else return c}return-o-1}static numberComparator(e,n){return e-n}}class N{static numberOfTrailingZeros(e){let n;if(e===0)return 32;let i=31;return n=e<<16,n!==0&&(i-=16,e=n),n=e<<8,n!==0&&(i-=8,e=n),n=e<<4,n!==0&&(i-=4,e=n),n=e<<2,n!==0&&(i-=2,e=n),i-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,n){return Math.trunc(e/n)}static parseInt(e,n=void 0){return parseInt(e,n)}}N.MIN_VALUE_32_BITS=-2147483648,N.MAX_VALUE=Number.MAX_SAFE_INTEGER;class P{constructor(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=P.makeArray(e):this.bits=n)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const n=P.makeArray(e);W.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const n=this.size;if(e>=n)return n;const i=this.bits;let o=Math.floor(e/32),l=i[o];l&=~((1<<(e&31))-1);const c=i.length;for(;l===0;){if(++o===c)return n;l=i[o]}const f=o*32+N.numberOfTrailingZeros(l);return f>n?n:f}getNextUnset(e){const n=this.size;if(e>=n)return n;const i=this.bits;let o=Math.floor(e/32),l=~i[o];l&=~((1<<(e&31))-1);const c=i.length;for(;l===0;){if(++o===c)return n;l=~i[o]}const f=o*32+N.numberOfTrailingZeros(l);return f>n?n:f}setBulk(e,n){this.bits[Math.floor(e/32)]=n}setRange(e,n){if(n<e||e<0||n>this.size)throw new k;if(n===e)return;n--;const i=Math.floor(e/32),o=Math.floor(n/32),l=this.bits;for(let c=i;c<=o;c++){const f=c>i?0:e&31,w=(2<<(c<o?31:n&31))-(1<<f);l[c]|=w}}clear(){const e=this.bits.length,n=this.bits;for(let i=0;i<e;i++)n[i]=0}isRange(e,n,i){if(n<e||e<0||n>this.size)throw new k;if(n===e)return!0;n--;const o=Math.floor(e/32),l=Math.floor(n/32),c=this.bits;for(let f=o;f<=l;f++){const m=f>o?0:e&31,j=(2<<(f<l?31:n&31))-(1<<m)&4294967295;if((c[f]&j)!==(i?j:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,n){if(n<0||n>32)throw new k("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(let i=n;i>0;i--)this.appendBit((e>>i-1&1)===1)}appendBitArray(e){const n=e.size;this.ensureCapacity(this.size+n);for(let i=0;i<n;i++)this.appendBit(e.get(i))}xor(e){if(this.size!==e.size)throw new k("Sizes don't match");const n=this.bits;for(let i=0,o=n.length;i<o;i++)n[i]^=e.bits[i]}toBytes(e,n,i,o){for(let l=0;l<o;l++){let c=0;for(let f=0;f<8;f++)this.get(e)&&(c|=1<<7-f),e++;n[i+l]=c}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),i=n+1,o=this.bits;for(let l=0;l<i;l++){let c=o[l];c=c>>1&1431655765|(c&1431655765)<<1,c=c>>2&858993459|(c&858993459)<<2,c=c>>4&252645135|(c&252645135)<<4,c=c>>8&16711935|(c&16711935)<<8,c=c>>16&65535|(c&65535)<<16,e[n-l]=c}if(this.size!==i*32){const l=i*32-this.size;let c=e[0]>>>l;for(let f=1;f<i;f++){const m=e[f];c|=m<<32-l,e[f-1]=c,c=m>>>l}e[i-1]=c}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof P))return!1;const n=e;return this.size===n.size&&T.equals(this.bits,n.bits)}hashCode(){return 31*this.size+T.hashCode(this.bits)}toString(){let e="";for(let n=0,i=this.size;n<i;n++)(n&7)===0&&(e+=" "),e+=this.get(n)?"X":".";return e}clone(){return new P(this.size,this.bits.slice())}}var D;(function(R){R[R.OTHER=0]="OTHER",R[R.PURE_BARCODE=1]="PURE_BARCODE",R[R.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",R[R.TRY_HARDER=3]="TRY_HARDER",R[R.CHARACTER_SET=4]="CHARACTER_SET",R[R.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",R[R.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",R[R.ASSUME_GS1=7]="ASSUME_GS1",R[R.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",R[R.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",R[R.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(D||(D={}));var q=D;class F extends v{static getFormatInstance(){return new F}}F.kind="FormatException";var Q;(function(R){R[R.Cp437=0]="Cp437",R[R.ISO8859_1=1]="ISO8859_1",R[R.ISO8859_2=2]="ISO8859_2",R[R.ISO8859_3=3]="ISO8859_3",R[R.ISO8859_4=4]="ISO8859_4",R[R.ISO8859_5=5]="ISO8859_5",R[R.ISO8859_6=6]="ISO8859_6",R[R.ISO8859_7=7]="ISO8859_7",R[R.ISO8859_8=8]="ISO8859_8",R[R.ISO8859_9=9]="ISO8859_9",R[R.ISO8859_10=10]="ISO8859_10",R[R.ISO8859_11=11]="ISO8859_11",R[R.ISO8859_13=12]="ISO8859_13",R[R.ISO8859_14=13]="ISO8859_14",R[R.ISO8859_15=14]="ISO8859_15",R[R.ISO8859_16=15]="ISO8859_16",R[R.SJIS=16]="SJIS",R[R.Cp1250=17]="Cp1250",R[R.Cp1251=18]="Cp1251",R[R.Cp1252=19]="Cp1252",R[R.Cp1256=20]="Cp1256",R[R.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",R[R.UTF8=22]="UTF8",R[R.ASCII=23]="ASCII",R[R.Big5=24]="Big5",R[R.GB18030=25]="GB18030",R[R.EUC_KR=26]="EUC_KR"})(Q||(Q={}));class pe{constructor(e,n,i,...o){this.valueIdentifier=e,this.name=i,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=o,pe.VALUE_IDENTIFIER_TO_ECI.set(e,this),pe.NAME_TO_ECI.set(i,this);const l=this.values;for(let c=0,f=l.length;c!==f;c++){const m=l[c];pe.VALUES_TO_ECI.set(m,this)}for(const c of o)pe.NAME_TO_ECI.set(c,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new F("incorect value");const n=pe.VALUES_TO_ECI.get(e);if(n===void 0)throw new F("incorect value");return n}static getCharacterSetECIByName(e){const n=pe.NAME_TO_ECI.get(e);if(n===void 0)throw new F("incorect value");return n}equals(e){if(!(e instanceof pe))return!1;const n=e;return this.getName()===n.getName()}}pe.VALUE_IDENTIFIER_TO_ECI=new Map,pe.VALUES_TO_ECI=new Map,pe.NAME_TO_ECI=new Map,pe.Cp437=new pe(Q.Cp437,Int32Array.from([0,2]),"Cp437"),pe.ISO8859_1=new pe(Q.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),pe.ISO8859_2=new pe(Q.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),pe.ISO8859_3=new pe(Q.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),pe.ISO8859_4=new pe(Q.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),pe.ISO8859_5=new pe(Q.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),pe.ISO8859_6=new pe(Q.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),pe.ISO8859_7=new pe(Q.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),pe.ISO8859_8=new pe(Q.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),pe.ISO8859_9=new pe(Q.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),pe.ISO8859_10=new pe(Q.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),pe.ISO8859_11=new pe(Q.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),pe.ISO8859_13=new pe(Q.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),pe.ISO8859_14=new pe(Q.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),pe.ISO8859_15=new pe(Q.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),pe.ISO8859_16=new pe(Q.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),pe.SJIS=new pe(Q.SJIS,20,"SJIS","Shift_JIS"),pe.Cp1250=new pe(Q.Cp1250,21,"Cp1250","windows-1250"),pe.Cp1251=new pe(Q.Cp1251,22,"Cp1251","windows-1251"),pe.Cp1252=new pe(Q.Cp1252,23,"Cp1252","windows-1252"),pe.Cp1256=new pe(Q.Cp1256,24,"Cp1256","windows-1256"),pe.UnicodeBigUnmarked=new pe(Q.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),pe.UTF8=new pe(Q.UTF8,26,"UTF8","UTF-8"),pe.ASCII=new pe(Q.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),pe.Big5=new pe(Q.Big5,28,"Big5"),pe.GB18030=new pe(Q.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),pe.EUC_KR=new pe(Q.EUC_KR,30,"EUC_KR","EUC-KR");class Me extends v{}Me.kind="UnsupportedOperationException";class be{static decode(e,n){const i=this.encodingName(n);return this.customDecoder?this.customDecoder(e,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(e,i):new TextDecoder(i).decode(e)}static shouldDecodeOnFallback(e){return!be.isBrowser()&&e==="ISO-8859-1"}static encode(e,n){const i=this.encodingName(n);return this.customEncoder?this.customEncoder(e,i):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof pe?e:pe.getCharacterSetECIByName(e)}static decodeFallback(e,n){const i=this.encodingCharacterSet(n);if(be.isDecodeFallbackSupported(i)){let o="";for(let l=0,c=e.length;l<c;l++){let f=e[l].toString(16);f.length<2&&(f="0"+f),o+="%"+f}return decodeURIComponent(o)}if(i.equals(pe.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Me(`Encoding ${this.encodingName(n)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(pe.UTF8)||e.equals(pe.ISO8859_1)||e.equals(pe.ASCII)}static encodeFallback(e){const i=btoa(unescape(encodeURIComponent(e))).split(""),o=[];for(let l=0;l<i.length;l++)o.push(i[l].charCodeAt(0));return new Uint8Array(o)}}class we{static castAsNonUtf8Char(e,n=null){const i=n?n.getName():this.ISO88591;return be.decode(new Uint8Array([e]),i)}static guessEncoding(e,n){if(n!=null&&n.get(q.CHARACTER_SET)!==void 0)return n.get(q.CHARACTER_SET).toString();const i=e.length;let o=!0,l=!0,c=!0,f=0,m=0,w=0,j=0,O=0,L=0,Z=0,ee=0,re=0,ae=0,me=0;const Te=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let _e=0;_e<i&&(o||l||c);_e++){const Ie=e[_e]&255;c&&(f>0?(Ie&128)===0?c=!1:f--:(Ie&128)!==0&&((Ie&64)===0?c=!1:(f++,(Ie&32)===0?m++:(f++,(Ie&16)===0?w++:(f++,(Ie&8)===0?j++:c=!1))))),o&&(Ie>127&&Ie<160?o=!1:Ie>159&&(Ie<192||Ie===215||Ie===247)&&me++),l&&(O>0?Ie<64||Ie===127||Ie>252?l=!1:O--:Ie===128||Ie===160||Ie>239?l=!1:Ie>160&&Ie<224?(L++,ee=0,Z++,Z>re&&(re=Z)):Ie>127?(O++,Z=0,ee++,ee>ae&&(ae=ee)):(Z=0,ee=0))}return c&&f>0&&(c=!1),l&&O>0&&(l=!1),c&&(Te||m+w+j>0)?we.UTF8:l&&(we.ASSUME_SHIFT_JIS||re>=3||ae>=3)?we.SHIFT_JIS:o&&l?re===2&&L===2||me*10>=i?we.SHIFT_JIS:we.ISO88591:o?we.ISO88591:l?we.SHIFT_JIS:c?we.UTF8:we.PLATFORM_DEFAULT_ENCODING}static format(e,...n){let i=-1;function o(c,f,m,w,j,O){if(c==="%%")return"%";if(n[++i]===void 0)return;c=w?parseInt(w.substr(1)):void 0;let L=j?parseInt(j.substr(1)):void 0,Z;switch(O){case"s":Z=n[i];break;case"c":Z=n[i][0];break;case"f":Z=parseFloat(n[i]).toFixed(c);break;case"p":Z=parseFloat(n[i]).toPrecision(c);break;case"e":Z=parseFloat(n[i]).toExponential(c);break;case"x":Z=parseInt(n[i]).toString(L||16);break;case"d":Z=parseFloat(parseInt(n[i],L||10).toPrecision(c)).toFixed(0);break}Z=typeof Z=="object"?JSON.stringify(Z):(+Z).toString(L);let ee=parseInt(m),re=m&&m[0]+""=="0"?"0":" ";for(;Z.length<ee;)Z=f!==void 0?Z+re:re+Z;return Z}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(l,o)}static getBytes(e,n){return be.encode(e,n)}static getCharCode(e,n=0){return e.charCodeAt(n)}static getCharAt(e){return String.fromCharCode(e)}}we.SHIFT_JIS=pe.SJIS.getName(),we.GB2312="GB2312",we.ISO88591=pe.ISO8859_1.getName(),we.EUC_JP="EUC_JP",we.UTF8=pe.UTF8.getName(),we.PLATFORM_DEFAULT_ENCODING=we.UTF8,we.ASSUME_SHIFT_JIS=!1;class de{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=we.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,n,i){for(let o=n;n<n+i;o++)this.append(e[o]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)}substring(e,n){return this.value.substring(e,n)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+n.length)}}class te{constructor(e,n,i,o){if(this.width=e,this.height=n,this.rowSize=i,this.bits=o,n==null&&(n=e),this.height=n,e<1||n<1)throw new k("Both dimensions must be greater than 0");i==null&&(i=Math.floor((e+31)/32)),this.rowSize=i,o==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const n=e.length,i=e[0].length,o=new te(i,n);for(let l=0;l<n;l++){const c=e[l];for(let f=0;f<i;f++)c[f]&&o.set(f,l)}return o}static parseFromString(e,n,i){if(e===null)throw new k("stringRepresentation cannot be null");const o=new Array(e.length);let l=0,c=0,f=-1,m=0,w=0;for(;w<e.length;)if(e.charAt(w)===`
`||e.charAt(w)==="\r"){if(l>c){if(f===-1)f=l-c;else if(l-c!==f)throw new k("row lengths do not match");c=l,m++}w++}else if(e.substring(w,w+n.length)===n)w+=n.length,o[l]=!0,l++;else if(e.substring(w,w+i.length)===i)w+=i.length,o[l]=!1,l++;else throw new k("illegal character encountered: "+e.substring(w));if(l>c){if(f===-1)f=l-c;else if(l-c!==f)throw new k("row lengths do not match");m++}const j=new te(f,m);for(let O=0;O<l;O++)o[O]&&j.set(Math.floor(O%f),Math.floor(O/f));return j}get(e,n){const i=n*this.rowSize+Math.floor(e/32);return(this.bits[i]>>>(e&31)&1)!==0}set(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]|=1<<(e&31)&4294967295}unset(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]&=~(1<<(e&31)&4294967295)}flip(e,n){const i=n*this.rowSize+Math.floor(e/32);this.bits[i]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new k("input matrix dimensions do not match");const n=new P(Math.floor(this.width/32)+1),i=this.rowSize,o=this.bits;for(let l=0,c=this.height;l<c;l++){const f=l*i,m=e.getRow(l,n).getBitArray();for(let w=0;w<i;w++)o[f+w]^=m[w]}}clear(){const e=this.bits,n=e.length;for(let i=0;i<n;i++)e[i]=0}setRegion(e,n,i,o){if(n<0||e<0)throw new k("Left and top must be nonnegative");if(o<1||i<1)throw new k("Height and width must be at least 1");const l=e+i,c=n+o;if(c>this.height||l>this.width)throw new k("The region must fit inside the matrix");const f=this.rowSize,m=this.bits;for(let w=n;w<c;w++){const j=w*f;for(let O=e;O<l;O++)m[j+Math.floor(O/32)]|=1<<(O&31)&4294967295}}getRow(e,n){n==null||n.getSize()<this.width?n=new P(this.width):n.clear();const i=this.rowSize,o=this.bits,l=e*i;for(let c=0;c<i;c++)n.setBulk(c*32,o[l+c]);return n}setRow(e,n){W.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),n=this.getHeight();let i=new P(e),o=new P(e);for(let l=0,c=Math.floor((n+1)/2);l<c;l++)i=this.getRow(l,i),o=this.getRow(n-1-l,o),i.reverse(),o.reverse(),this.setRow(l,o),this.setRow(n-1-l,i)}getEnclosingRectangle(){const e=this.width,n=this.height,i=this.rowSize,o=this.bits;let l=e,c=n,f=-1,m=-1;for(let w=0;w<n;w++)for(let j=0;j<i;j++){const O=o[w*i+j];if(O!==0){if(w<c&&(c=w),w>m&&(m=w),j*32<l){let L=0;for(;(O<<31-L&4294967295)===0;)L++;j*32+L<l&&(l=j*32+L)}if(j*32+31>f){let L=31;for(;!(O>>>L);)L--;j*32+L>f&&(f=j*32+L)}}}return f<l||m<c?null:Int32Array.from([l,c,f-l+1,m-c+1])}getTopLeftOnBit(){const e=this.rowSize,n=this.bits;let i=0;for(;i<n.length&&n[i]===0;)i++;if(i===n.length)return null;const o=i/e;let l=i%e*32;const c=n[i];let f=0;for(;(c<<31-f&4294967295)===0;)f++;return l+=f,Int32Array.from([l,o])}getBottomRightOnBit(){const e=this.rowSize,n=this.bits;let i=n.length-1;for(;i>=0&&n[i]===0;)i--;if(i<0)return null;const o=Math.floor(i/e);let l=Math.floor(i%e)*32;const c=n[i];let f=31;for(;!(c>>>f);)f--;return l+=f,Int32Array.from([l,o])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof te))return!1;const n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&T.equals(this.bits,n.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+T.hashCode(this.bits),e}toString(e="X ",n="  ",i=`
`){return this.buildToString(e,n,i)}buildToString(e,n,i){let o=new de;for(let l=0,c=this.height;l<c;l++){for(let f=0,m=this.width;f<m;f++)o.append(this.get(f,l)?e:n);o.append(i)}return o.toString()}clone(){return new te(this.width,this.height,this.rowSize,this.bits.slice())}}class Y extends v{static getNotFoundInstance(){return new Y}}Y.kind="NotFoundException";class J extends X{constructor(e){super(e),this.luminances=J.EMPTY,this.buckets=new Int32Array(J.LUMINANCE_BUCKETS)}getBlackRow(e,n){const i=this.getLuminanceSource(),o=i.getWidth();n==null||n.getSize()<o?n=new P(o):n.clear(),this.initArrays(o);const l=i.getRow(e,this.luminances),c=this.buckets;for(let m=0;m<o;m++)c[(l[m]&255)>>J.LUMINANCE_SHIFT]++;const f=J.estimateBlackPoint(c);if(o<3)for(let m=0;m<o;m++)(l[m]&255)<f&&n.set(m);else{let m=l[0]&255,w=l[1]&255;for(let j=1;j<o-1;j++){const O=l[j+1]&255;(w*4-m-O)/2<f&&n.set(j),m=w,w=O}}return n}getBlackMatrix(){const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight(),o=new te(n,i);this.initArrays(n);const l=this.buckets;for(let m=1;m<5;m++){const w=Math.floor(i*m/5),j=e.getRow(w,this.luminances),O=Math.floor(n*4/5);for(let L=Math.floor(n/5);L<O;L++){const Z=j[L]&255;l[Z>>J.LUMINANCE_SHIFT]++}}const c=J.estimateBlackPoint(l),f=e.getMatrix();for(let m=0;m<i;m++){const w=m*n;for(let j=0;j<n;j++)(f[w+j]&255)<c&&o.set(j,m)}return o}createBinarizer(e){return new J(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const n=this.buckets;for(let i=0;i<J.LUMINANCE_BUCKETS;i++)n[i]=0}static estimateBlackPoint(e){const n=e.length;let i=0,o=0,l=0;for(let j=0;j<n;j++)e[j]>l&&(o=j,l=e[j]),e[j]>i&&(i=e[j]);let c=0,f=0;for(let j=0;j<n;j++){const O=j-o,L=e[j]*O*O;L>f&&(c=j,f=L)}if(o>c){const j=o;o=c,c=j}if(c-o<=n/16)throw new Y;let m=c-1,w=-1;for(let j=c-1;j>o;j--){const O=j-o,L=O*O*(c-j)*(i-e[j]);L>w&&(m=j,w=L)}return m<<J.LUMINANCE_SHIFT}}J.LUMINANCE_BITS=5,J.LUMINANCE_SHIFT=8-J.LUMINANCE_BITS,J.LUMINANCE_BUCKETS=1<<J.LUMINANCE_BITS,J.EMPTY=Uint8ClampedArray.from([0]);class se extends J{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),n=e.getWidth(),i=e.getHeight();if(n>=se.MINIMUM_DIMENSION&&i>=se.MINIMUM_DIMENSION){const o=e.getMatrix();let l=n>>se.BLOCK_SIZE_POWER;(n&se.BLOCK_SIZE_MASK)!==0&&l++;let c=i>>se.BLOCK_SIZE_POWER;(i&se.BLOCK_SIZE_MASK)!==0&&c++;const f=se.calculateBlackPoints(o,l,c,n,i),m=new te(n,i);se.calculateThresholdForBlock(o,l,c,n,i,f,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new se(e)}static calculateThresholdForBlock(e,n,i,o,l,c,f){const m=l-se.BLOCK_SIZE,w=o-se.BLOCK_SIZE;for(let j=0;j<i;j++){let O=j<<se.BLOCK_SIZE_POWER;O>m&&(O=m);const L=se.cap(j,2,i-3);for(let Z=0;Z<n;Z++){let ee=Z<<se.BLOCK_SIZE_POWER;ee>w&&(ee=w);const re=se.cap(Z,2,n-3);let ae=0;for(let Te=-2;Te<=2;Te++){const _e=c[L+Te];ae+=_e[re-2]+_e[re-1]+_e[re]+_e[re+1]+_e[re+2]}const me=ae/25;se.thresholdBlock(e,ee,O,me,o,f)}}}static cap(e,n,i){return e<n?n:e>i?i:e}static thresholdBlock(e,n,i,o,l,c){for(let f=0,m=i*l+n;f<se.BLOCK_SIZE;f++,m+=l)for(let w=0;w<se.BLOCK_SIZE;w++)(e[m+w]&255)<=o&&c.set(n+w,i+f)}static calculateBlackPoints(e,n,i,o,l){const c=l-se.BLOCK_SIZE,f=o-se.BLOCK_SIZE,m=new Array(i);for(let w=0;w<i;w++){m[w]=new Int32Array(n);let j=w<<se.BLOCK_SIZE_POWER;j>c&&(j=c);for(let O=0;O<n;O++){let L=O<<se.BLOCK_SIZE_POWER;L>f&&(L=f);let Z=0,ee=255,re=0;for(let me=0,Te=j*o+L;me<se.BLOCK_SIZE;me++,Te+=o){for(let _e=0;_e<se.BLOCK_SIZE;_e++){const Ie=e[Te+_e]&255;Z+=Ie,Ie<ee&&(ee=Ie),Ie>re&&(re=Ie)}if(re-ee>se.MIN_DYNAMIC_RANGE)for(me++,Te+=o;me<se.BLOCK_SIZE;me++,Te+=o)for(let _e=0;_e<se.BLOCK_SIZE;_e++)Z+=e[Te+_e]&255}let ae=Z>>se.BLOCK_SIZE_POWER*2;if(re-ee<=se.MIN_DYNAMIC_RANGE&&(ae=ee/2,w>0&&O>0)){const me=(m[w-1][O]+2*m[w][O-1]+m[w-1][O-1])/4;ee<me&&(ae=me)}m[w][O]=ae}}return m}}se.BLOCK_SIZE_POWER=3,se.BLOCK_SIZE=1<<se.BLOCK_SIZE_POWER,se.BLOCK_SIZE_MASK=se.BLOCK_SIZE-1,se.MINIMUM_DIMENSION=se.BLOCK_SIZE*5,se.MIN_DYNAMIC_RANGE=24;class ce{constructor(e,n){this.width=e,this.height=n}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,n,i,o){throw new Me("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Me("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Me("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let n=new de;for(let i=0;i<this.height;i++){const o=this.getRow(i,e);for(let l=0;l<this.width;l++){const c=o[l]&255;let f;c<64?f="#":c<128?f="+":c<192?f=".":f=" ",n.append(f)}n.append(`
`)}return n.toString()}}class Ce extends ce{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,n){const i=this.delegate.getRow(e,n),o=this.getWidth();for(let l=0;l<o;l++)i[l]=255-(i[l]&255);return i}getMatrix(){const e=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n);for(let o=0;o<n;o++)i[o]=255-(e[o]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(e,n,i,o){return new Ce(this.delegate.crop(e,n,i,o))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ce(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ce(this.delegate.rotateCounterClockwise45())}}class $ extends ce{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=$.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const n=e.getContext("2d").getImageData(0,0,e.width,e.height);return $.toGrayscaleBuffer(n.data,e.width,e.height)}static toGrayscaleBuffer(e,n,i){const o=new Uint8ClampedArray(n*i);for(let l=0,c=0,f=e.length;l<f;l+=4,c++){let m;if(e[l+3]===0)m=255;else{const j=e[l],O=e[l+1],L=e[l+2];m=306*j+601*O+117*L+512>>10}o[c]=m}return o}getRow(e,n){if(e<0||e>=this.getHeight())throw new k("Requested row is outside the image: "+e);const i=this.getWidth(),o=e*i;return n===null?n=this.buffer.slice(o,o+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(o,o+i))),n}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,n,i,o){return super.crop(e,n,i,o),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const n=this.getTempCanvasElement(),i=n.getContext("2d"),o=e*$.DEGREE_TO_RADIANS,l=this.canvas.width,c=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(o))*l+Math.abs(Math.sin(o))*c),m=Math.ceil(Math.abs(Math.sin(o))*l+Math.abs(Math.cos(o))*c);return n.width=f,n.height=m,i.translate(f/2,m/2),i.rotate(o),i.drawImage(this.canvas,l/-2,c/-2),this.buffer=$.makeBufferFromCanvasImageData(n),this}invert(){return new Ce(this)}}$.DEGREE_TO_RADIANS=Math.PI/180;class B{constructor(e,n,i){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var oe=(globalThis||Cl||self||window||void 0)&&(globalThis||Cl||self||window||void 0).__awaiter||function(R,e,n,i){function o(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function f(j){try{w(i.next(j))}catch(O){c(O)}}function m(j){try{w(i.throw(j))}catch(O){c(O)}}function w(j){j.done?l(j.value):o(j.value).then(f,m)}w((i=i.apply(R,e||[])).next())})};class Ee{constructor(e,n=500,i){this.reader=e,this.timeBetweenScansMillis=n,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return oe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),n=[];for(const i of e){const o=i.kind==="video"?"videoinput":i.kind;if(o!=="videoinput")continue;const l=i.deviceId||i.id,c=i.label||`Video device ${n.length+1}`,f=i.groupId,m={deviceId:l,label:c,kind:o,groupId:f};n.push(m)}return n})}getVideoInputDevices(){return oe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(n=>new B(n.deviceId,n.label))})}findDeviceById(e){return oe(this,void 0,void 0,function*(){const n=yield this.listVideoInputDevices();return n?n.find(i=>i.deviceId===e):null})}decodeFromInputVideoDevice(e,n){return oe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,n)})}decodeOnceFromVideoDevice(e,n){return oe(this,void 0,void 0,function*(){this.reset();let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const o={video:i};return yield this.decodeOnceFromConstraints(o,n)})}decodeOnceFromConstraints(e,n){return oe(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(i,n)})}decodeOnceFromStream(e,n){return oe(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,n);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(e,n,i){return oe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,n,i)})}decodeFromVideoDevice(e,n,i){return oe(this,void 0,void 0,function*(){let o;e?o={deviceId:{exact:e}}:o={facingMode:"environment"};const l={video:o};return yield this.decodeFromConstraints(l,n,i)})}decodeFromConstraints(e,n,i){return oe(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(o,n,i)})}decodeFromStream(e,n,i){return oe(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(e,n);return yield this.decodeContinuously(o,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,n){return oe(this,void 0,void 0,function*(){const i=this.prepareVideoElement(n);return this.addVideoSource(i,e),this.videoElement=i,this.stream=e,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(e){return new Promise((n,i)=>this.playVideoOnLoad(e,()=>n()))}playVideoOnLoad(e,n){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return oe(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,n){const i=document.getElementById(e);if(!i)throw new A(`element with id '${e}' not found`);if(i.nodeName.toLowerCase()!==n.toLowerCase())throw new A(`element with id '${e}' must be an ${n} element`);return i}decodeFromImage(e,n){if(!e&&!n)throw new A("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)}decodeFromVideo(e,n){if(!e&&!n)throw new A("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,n,i){if(e===void 0&&n===void 0)throw new A("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,i):this.decodeFromVideoElementContinuously(e,i)}decodeFromImageElement(e){if(!e)throw new A("An image element must be provided.");this.reset();const n=this.prepareImageElement(e);this.imageElement=n;let i;return this.isImageLoaded(n)?i=this.decodeOnce(n,!1,!0):i=this._decodeOnLoadImage(n),i}decodeFromVideoElement(e){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)}decodeFromVideoElementContinuously(e,n){const i=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(i,n)}_decodeFromVideoElementSetup(e){if(!e)throw new A("A video element must be provided.");this.reset();const n=this.prepareVideoElement(e);return this.videoElement=n,n}decodeFromImageUrl(e){if(!e)throw new A("An URL must be provided.");this.reset();const n=this.prepareImageElement();this.imageElement=n;const i=this._decodeOnLoadImage(n);return n.src=e,i}decodeFromVideoUrl(e){if(!e)throw new A("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),i=this.decodeFromVideoElement(n);return n.src=e,i}decodeFromVideoUrlContinuously(e,n){if(!e)throw new A("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),o=this.decodeFromVideoElementContinuously(i,n);return i.src=e,o}_decodeOnLoadImage(e){return new Promise((n,i)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(n,i),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return oe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,n){return oe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,n)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n}prepareVideoElement(e){let n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n}decodeOnce(e,n=!0,i=!0){this._stopAsyncDecode=!1;const o=(l,c)=>{if(this._stopAsyncDecode){c(new Y("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const f=this.decode(e);l(f)}catch(f){const m=n&&f instanceof Y,j=(f instanceof V||f instanceof F)&&i;if(m||j)return setTimeout(o,this._timeBetweenDecodingAttempts,l,c);c(f)}};return new Promise((l,c)=>o(l,c))}decodeContinuously(e,n){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const o=this.decode(e);n(o,null),setTimeout(i,this.timeBetweenScansMillis)}catch(o){n(null,o);const l=o instanceof V||o instanceof F,c=o instanceof Y;(l||c)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(e){const n=this.createBinaryBitmap(e);return this.decodeBitmap(n)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,n,i){n||(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}drawImageOnCanvas(e,n,i=this.captureCanvasContext){n||(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const n=this.getCaptureCanvas(e),i=new $(n),o=new se(i);return new _(o)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const n=document.createElement("canvas");let i,o;return typeof e<"u"&&(e instanceof HTMLVideoElement?(i=e.videoWidth,o=e.videoHeight):e instanceof HTMLImageElement&&(i=e.naturalWidth||e.width,o=e.naturalHeight||e.height)),n.style.width=i+"px",n.style.height=o+"px",n.width=i,n.height=o,n}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class le{constructor(e,n,i=n==null?0:8*n.length,o,l,c=W.currentTimeMillis()){this.text=e,this.rawBytes=n,this.numBits=i,this.resultPoints=o,this.format=l,this.timestamp=c,this.text=e,this.rawBytes=n,i==null?this.numBits=n==null?0:8*n.length:this.numBits=i,this.resultPoints=o,this.format=l,this.resultMetadata=null,c==null?this.timestamp=W.currentTimeMillis():this.timestamp=c}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){const i=new Array(n.length+e.length);W.arraycopy(n,0,i,0,n.length),W.arraycopy(e,0,i,n.length,e.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ke;(function(R){R[R.AZTEC=0]="AZTEC",R[R.CODABAR=1]="CODABAR",R[R.CODE_39=2]="CODE_39",R[R.CODE_93=3]="CODE_93",R[R.CODE_128=4]="CODE_128",R[R.DATA_MATRIX=5]="DATA_MATRIX",R[R.EAN_8=6]="EAN_8",R[R.EAN_13=7]="EAN_13",R[R.ITF=8]="ITF",R[R.MAXICODE=9]="MAXICODE",R[R.PDF_417=10]="PDF_417",R[R.QR_CODE=11]="QR_CODE",R[R.RSS_14=12]="RSS_14",R[R.RSS_EXPANDED=13]="RSS_EXPANDED",R[R.UPC_A=14]="UPC_A",R[R.UPC_E=15]="UPC_E",R[R.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ke||(ke={}));var ve=ke,Oe;(function(R){R[R.OTHER=0]="OTHER",R[R.ORIENTATION=1]="ORIENTATION",R[R.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",R[R.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",R[R.ISSUE_NUMBER=4]="ISSUE_NUMBER",R[R.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",R[R.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",R[R.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",R[R.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",R[R.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",R[R.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Oe||(Oe={}));var fe=Oe;class De{constructor(e,n,i,o,l=-1,c=-1){this.rawBytes=e,this.text=n,this.byteSegments=i,this.ecLevel=o,this.structuredAppendSequenceNumber=l,this.structuredAppendParity=c,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class $e{exp(e){return this.expTable[e]}log(e){if(e===0)throw new k;return this.logTable[e]}static addOrSubtract(e,n){return e^n}}class Ge{constructor(e,n){if(n.length===0)throw new k;this.field=e;const i=n.length;if(i>1&&n[0]===0){let o=1;for(;o<i&&n[o]===0;)o++;o===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-o),W.arraycopy(n,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const n=this.coefficients;let i;if(e===1){i=0;for(let c=0,f=n.length;c!==f;c++){const m=n[c];i=$e.addOrSubtract(i,m)}return i}i=n[0];const o=n.length,l=this.field;for(let c=1;c<o;c++)i=$e.addOrSubtract(l.multiply(e,i),n[c]);return i}addOrSubtract(e){if(!this.field.equals(e.field))throw new k("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){const c=n;n=i,i=c}let o=new Int32Array(i.length);const l=i.length-n.length;W.arraycopy(i,0,o,0,l);for(let c=l;c<i.length;c++)o[c]=$e.addOrSubtract(n[c-l],i[c]);return new Ge(this.field,o)}multiply(e){if(!this.field.equals(e.field))throw new k("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const n=this.coefficients,i=n.length,o=e.coefficients,l=o.length,c=new Int32Array(i+l-1),f=this.field;for(let m=0;m<i;m++){const w=n[m];for(let j=0;j<l;j++)c[m+j]=$e.addOrSubtract(c[m+j],f.multiply(w,o[j]))}return new Ge(f,c)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const n=this.coefficients.length,i=this.field,o=new Int32Array(n),l=this.coefficients;for(let c=0;c<n;c++)o[c]=i.multiply(l[c],e);return new Ge(i,o)}multiplyByMonomial(e,n){if(e<0)throw new k;if(n===0)return this.field.getZero();const i=this.coefficients,o=i.length,l=new Int32Array(o+e),c=this.field;for(let f=0;f<o;f++)l[f]=c.multiply(i[f],n);return new Ge(c,l)}divide(e){if(!this.field.equals(e.field))throw new k("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new k("Divide by 0");const n=this.field;let i=n.getZero(),o=this;const l=e.getCoefficient(e.getDegree()),c=n.inverse(l);for(;o.getDegree()>=e.getDegree()&&!o.isZero();){const f=o.getDegree()-e.getDegree(),m=n.multiply(o.getCoefficient(o.getDegree()),c),w=e.multiplyByMonomial(f,m),j=n.buildMonomial(f,m);i=i.addOrSubtract(j),o=o.addOrSubtract(w)}return[i,o]}toString(){let e="";for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);if(i!==0){if(i<0?(e+=" - ",i=-i):e.length>0&&(e+=" + "),n===0||i!==1){const o=this.field.log(i);o===0?e+="1":o===1?e+="a":(e+="a^",e+=o)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e}}class st extends v{}st.kind="ArithmeticException";class We extends $e{constructor(e,n,i){super(),this.primitive=e,this.size=n,this.generatorBase=i;const o=new Int32Array(n);let l=1;for(let f=0;f<n;f++)o[f]=l,l*=2,l>=n&&(l^=e,l&=n-1);this.expTable=o;const c=new Int32Array(n);for(let f=0;f<n-1;f++)c[o[f]]=f;this.logTable=c,this.zero=new Ge(this,Int32Array.from([0])),this.one=new Ge(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new k;if(n===0)return this.zero;const i=new Int32Array(e+1);return i[0]=n,new Ge(this,i)}inverse(e){if(e===0)throw new st;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+N.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}We.AZTEC_DATA_12=new We(4201,4096,1),We.AZTEC_DATA_10=new We(1033,1024,1),We.AZTEC_DATA_6=new We(67,64,1),We.AZTEC_PARAM=new We(19,16,1),We.QR_CODE_FIELD_256=new We(285,256,0),We.DATA_MATRIX_FIELD_256=new We(301,256,1),We.AZTEC_DATA_8=We.DATA_MATRIX_FIELD_256,We.MAXICODE_FIELD_64=We.AZTEC_DATA_6;class Qe extends v{}Qe.kind="ReedSolomonException";class St extends v{}St.kind="IllegalStateException";class ln{constructor(e){this.field=e}decode(e,n){const i=this.field,o=new Ge(i,e),l=new Int32Array(n);let c=!0;for(let Z=0;Z<n;Z++){const ee=o.evaluateAt(i.exp(Z+i.getGeneratorBase()));l[l.length-1-Z]=ee,ee!==0&&(c=!1)}if(c)return;const f=new Ge(i,l),m=this.runEuclideanAlgorithm(i.buildMonomial(n,1),f,n),w=m[0],j=m[1],O=this.findErrorLocations(w),L=this.findErrorMagnitudes(j,O);for(let Z=0;Z<O.length;Z++){const ee=e.length-1-i.log(O[Z]);if(ee<0)throw new Qe("Bad error location");e[ee]=We.addOrSubtract(e[ee],L[Z])}}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){const Z=e;e=n,n=Z}const o=this.field;let l=e,c=n,f=o.getZero(),m=o.getOne();for(;c.getDegree()>=(i/2|0);){let Z=l,ee=f;if(l=c,f=m,l.isZero())throw new Qe("r_{i-1} was zero");c=Z;let re=o.getZero();const ae=l.getCoefficient(l.getDegree()),me=o.inverse(ae);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){const Te=c.getDegree()-l.getDegree(),_e=o.multiply(c.getCoefficient(c.getDegree()),me);re=re.addOrSubtract(o.buildMonomial(Te,_e)),c=c.addOrSubtract(l.multiplyByMonomial(Te,_e))}if(m=re.multiply(f).addOrSubtract(ee),c.getDegree()>=l.getDegree())throw new St("Division algorithm failed to reduce polynomial?")}const w=m.getCoefficient(0);if(w===0)throw new Qe("sigmaTilde(0) was zero");const j=o.inverse(w),O=m.multiplyScalar(j),L=c.multiplyScalar(j);return[O,L]}findErrorLocations(e){const n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);const i=new Int32Array(n);let o=0;const l=this.field;for(let c=1;c<l.getSize()&&o<n;c++)e.evaluateAt(c)===0&&(i[o]=l.inverse(c),o++);if(o!==n)throw new Qe("Error locator degree does not match number of roots");return i}findErrorMagnitudes(e,n){const i=n.length,o=new Int32Array(i),l=this.field;for(let c=0;c<i;c++){const f=l.inverse(n[c]);let m=1;for(let w=0;w<i;w++)if(c!==w){const j=l.multiply(n[w],f),O=(j&1)===0?j|1:j&-2;m=l.multiply(m,O)}o[c]=l.multiply(e.evaluateAt(f),l.inverse(m)),l.getGeneratorBase()!==0&&(o[c]=l.multiply(o[c],f))}return o}}var xt;(function(R){R[R.UPPER=0]="UPPER",R[R.LOWER=1]="LOWER",R[R.MIXED=2]="MIXED",R[R.DIGIT=3]="DIGIT",R[R.PUNCT=4]="PUNCT",R[R.BINARY=5]="BINARY"})(xt||(xt={}));class dt{decode(e){this.ddata=e;let n=e.getBits(),i=this.extractBits(n),o=this.correctBits(i),l=dt.convertBoolArrayToByteArray(o),c=dt.getEncodedData(o),f=new De(l,c,null,null);return f.setNumBits(o.length),f}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let n=e.length,i=xt.UPPER,o=xt.UPPER,l="",c=0;for(;c<n;)if(o===xt.BINARY){if(n-c<5)break;let f=dt.readCode(e,c,5);if(c+=5,f===0){if(n-c<11)break;f=dt.readCode(e,c,11)+31,c+=11}for(let m=0;m<f;m++){if(n-c<8){c=n;break}const w=dt.readCode(e,c,8);l+=we.castAsNonUtf8Char(w),c+=8}o=i}else{let f=o===xt.DIGIT?4:5;if(n-c<f)break;let m=dt.readCode(e,c,f);c+=f;let w=dt.getCharacter(o,m);w.startsWith("CTRL_")?(i=o,o=dt.getTable(w.charAt(5)),w.charAt(6)==="L"&&(i=o)):(l+=w,o=i)}return l}static getTable(e){switch(e){case"L":return xt.LOWER;case"P":return xt.PUNCT;case"M":return xt.MIXED;case"D":return xt.DIGIT;case"B":return xt.BINARY;default:return xt.UPPER}}static getCharacter(e,n){switch(e){case xt.UPPER:return dt.UPPER_TABLE[n];case xt.LOWER:return dt.LOWER_TABLE[n];case xt.MIXED:return dt.MIXED_TABLE[n];case xt.PUNCT:return dt.PUNCT_TABLE[n];case xt.DIGIT:return dt.DIGIT_TABLE[n];default:throw new St("Bad table")}}correctBits(e){let n,i;this.ddata.getNbLayers()<=2?(i=6,n=We.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,n=We.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,n=We.AZTEC_DATA_10):(i=12,n=We.AZTEC_DATA_12);let o=this.ddata.getNbDatablocks(),l=e.length/i;if(l<o)throw new F;let c=e.length%i,f=new Int32Array(l);for(let L=0;L<l;L++,c+=i)f[L]=dt.readCode(e,c,i);try{new ln(n).decode(f,l-o)}catch(L){throw new F(L)}let m=(1<<i)-1,w=0;for(let L=0;L<o;L++){let Z=f[L];if(Z===0||Z===m)throw new F;(Z===1||Z===m-1)&&w++}let j=new Array(o*i-w),O=0;for(let L=0;L<o;L++){let Z=f[L];if(Z===1||Z===m-1)j.fill(Z>1,O,O+i-1),O+=i-1;else for(let ee=i-1;ee>=0;--ee)j[O++]=(Z&1<<ee)!==0}return j}extractBits(e){let n=this.ddata.isCompact(),i=this.ddata.getNbLayers(),o=(n?11:14)+i*4,l=new Int32Array(o),c=new Array(this.totalBitsInLayer(i,n));if(n)for(let f=0;f<l.length;f++)l[f]=f;else{let f=o+1+2*N.truncDivision(N.truncDivision(o,2)-1,15),m=o/2,w=N.truncDivision(f,2);for(let j=0;j<m;j++){let O=j+N.truncDivision(j,15);l[m-j-1]=w-O-1,l[m+j]=w+O+1}}for(let f=0,m=0;f<i;f++){let w=(i-f)*4+(n?9:12),j=f*2,O=o-1-j;for(let L=0;L<w;L++){let Z=L*2;for(let ee=0;ee<2;ee++)c[m+Z+ee]=e.get(l[j+ee],l[j+L]),c[m+2*w+Z+ee]=e.get(l[j+L],l[O-ee]),c[m+4*w+Z+ee]=e.get(l[O-ee],l[O-L]),c[m+6*w+Z+ee]=e.get(l[O-L],l[j+ee])}m+=w*8}return c}static readCode(e,n,i){let o=0;for(let l=n;l<n+i;l++)o<<=1,e[l]&&(o|=1);return o}static readByte(e,n){let i=e.length-n;return i>=8?dt.readCode(e,n,8):dt.readCode(e,n,i)<<8-i}static convertBoolArrayToByteArray(e){let n=new Uint8Array((e.length+7)/8);for(let i=0;i<n.length;i++)n[i]=dt.readByte(e,8*i);return n}totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}dt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],dt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],dt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],dt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],dt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ot{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,n,i,o){const l=e-i,c=n-o;return Math.sqrt(l*l+c*c)}static sum(e){let n=0;for(let i=0,o=e.length;i!==o;i++){const l=e[i];n+=l}return n}}class Jt{static floatToIntBits(e){return e}}Jt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Le{constructor(e,n){this.x=e,this.y=n}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Le){const n=e;return this.x===n.x&&this.y===n.y}return!1}hashCode(){return 31*Jt.floatToIntBits(this.x)+Jt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const n=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),o=this.distance(e[0],e[2]);let l,c,f;if(i>=n&&i>=o?(c=e[0],l=e[1],f=e[2]):o>=i&&o>=n?(c=e[1],l=e[0],f=e[2]):(c=e[2],l=e[0],f=e[1]),this.crossProductZ(l,c,f)<0){const m=l;l=f,f=m}e[0]=l,e[1]=c,e[2]=f}static distance(e,n){return ot.distance(e.x,e.y,n.x,n.y)}static crossProductZ(e,n,i){const o=n.x,l=n.y;return(i.x-o)*(e.y-l)-(i.y-l)*(e.x-o)}}class Ur{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class Qi extends Ur{constructor(e,n,i,o,l){super(e,n),this.compact=i,this.nbDatablocks=o,this.nbLayers=l}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Un{constructor(e,n,i,o){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=Un.INIT_SIZE),i==null&&(i=e.getWidth()/2|0),o==null&&(o=e.getHeight()/2|0);const l=n/2|0;if(this.leftInit=i-l,this.rightInit=i+l,this.upInit=o-l,this.downInit=o+l,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Y}detect(){let e=this.leftInit,n=this.rightInit,i=this.upInit,o=this.downInit,l=!1,c=!0,f=!1,m=!1,w=!1,j=!1,O=!1;const L=this.width,Z=this.height;for(;c;){c=!1;let ee=!0;for(;(ee||!m)&&n<L;)ee=this.containsBlackPoint(i,o,n,!1),ee?(n++,c=!0,m=!0):m||n++;if(n>=L){l=!0;break}let re=!0;for(;(re||!w)&&o<Z;)re=this.containsBlackPoint(e,n,o,!0),re?(o++,c=!0,w=!0):w||o++;if(o>=Z){l=!0;break}let ae=!0;for(;(ae||!j)&&e>=0;)ae=this.containsBlackPoint(i,o,e,!1),ae?(e--,c=!0,j=!0):j||e--;if(e<0){l=!0;break}let me=!0;for(;(me||!O)&&i>=0;)me=this.containsBlackPoint(e,n,i,!0),me?(i--,c=!0,O=!0):O||i--;if(i<0){l=!0;break}c&&(f=!0)}if(!l&&f){const ee=n-e;let re=null;for(let _e=1;re===null&&_e<ee;_e++)re=this.getBlackPointOnSegment(e,o-_e,e+_e,o);if(re==null)throw new Y;let ae=null;for(let _e=1;ae===null&&_e<ee;_e++)ae=this.getBlackPointOnSegment(e,i+_e,e+_e,i);if(ae==null)throw new Y;let me=null;for(let _e=1;me===null&&_e<ee;_e++)me=this.getBlackPointOnSegment(n,i+_e,n-_e,i);if(me==null)throw new Y;let Te=null;for(let _e=1;Te===null&&_e<ee;_e++)Te=this.getBlackPointOnSegment(n,o-_e,n-_e,o);if(Te==null)throw new Y;return this.centerEdges(Te,re,me,ae)}else throw new Y}getBlackPointOnSegment(e,n,i,o){const l=ot.round(ot.distance(e,n,i,o)),c=(i-e)/l,f=(o-n)/l,m=this.image;for(let w=0;w<l;w++){const j=ot.round(e+w*c),O=ot.round(n+w*f);if(m.get(j,O))return new Le(j,O)}return null}centerEdges(e,n,i,o){const l=e.getX(),c=e.getY(),f=n.getX(),m=n.getY(),w=i.getX(),j=i.getY(),O=o.getX(),L=o.getY(),Z=Un.CORR;return l<this.width/2?[new Le(O-Z,L+Z),new Le(f+Z,m+Z),new Le(w-Z,j-Z),new Le(l+Z,c-Z)]:[new Le(O+Z,L+Z),new Le(f+Z,m-Z),new Le(w-Z,j+Z),new Le(l-Z,c-Z)]}containsBlackPoint(e,n,i,o){const l=this.image;if(o){for(let c=e;c<=n;c++)if(l.get(c,i))return!0}else for(let c=e;c<=n;c++)if(l.get(i,c))return!0;return!1}}Un.INIT_SIZE=10,Un.CORR=1;class yi{static checkAndNudgePoints(e,n){const i=e.getWidth(),o=e.getHeight();let l=!0;for(let c=0;c<n.length&&l;c+=2){const f=Math.floor(n[c]),m=Math.floor(n[c+1]);if(f<-1||f>i||m<-1||m>o)throw new Y;l=!1,f===-1?(n[c]=0,l=!0):f===i&&(n[c]=i-1,l=!0),m===-1?(n[c+1]=0,l=!0):m===o&&(n[c+1]=o-1,l=!0)}l=!0;for(let c=n.length-2;c>=0&&l;c-=2){const f=Math.floor(n[c]),m=Math.floor(n[c+1]);if(f<-1||f>i||m<-1||m>o)throw new Y;l=!1,f===-1?(n[c]=0,l=!0):f===i&&(n[c]=i-1,l=!0),m===-1?(n[c+1]=0,l=!0):m===o&&(n[c+1]=o-1,l=!0)}}}class An{constructor(e,n,i,o,l,c,f,m,w){this.a11=e,this.a21=n,this.a31=i,this.a12=o,this.a22=l,this.a32=c,this.a13=f,this.a23=m,this.a33=w}static quadrilateralToQuadrilateral(e,n,i,o,l,c,f,m,w,j,O,L,Z,ee,re,ae){const me=An.quadrilateralToSquare(e,n,i,o,l,c,f,m);return An.squareToQuadrilateral(w,j,O,L,Z,ee,re,ae).times(me)}transformPoints(e){const n=e.length,i=this.a11,o=this.a12,l=this.a13,c=this.a21,f=this.a22,m=this.a23,w=this.a31,j=this.a32,O=this.a33;for(let L=0;L<n;L+=2){const Z=e[L],ee=e[L+1],re=l*Z+m*ee+O;e[L]=(i*Z+c*ee+w)/re,e[L+1]=(o*Z+f*ee+j)/re}}transformPointsWithValues(e,n){const i=this.a11,o=this.a12,l=this.a13,c=this.a21,f=this.a22,m=this.a23,w=this.a31,j=this.a32,O=this.a33,L=e.length;for(let Z=0;Z<L;Z++){const ee=e[Z],re=n[Z],ae=l*ee+m*re+O;e[Z]=(i*ee+c*re+w)/ae,n[Z]=(o*ee+f*re+j)/ae}}static squareToQuadrilateral(e,n,i,o,l,c,f,m){const w=e-i+l-f,j=n-o+c-m;if(w===0&&j===0)return new An(i-e,l-i,e,o-n,c-o,n,0,0,1);{const O=i-l,L=f-l,Z=o-c,ee=m-c,re=O*ee-L*Z,ae=(w*ee-L*j)/re,me=(O*j-w*Z)/re;return new An(i-e+ae*i,f-e+me*f,e,o-n+ae*o,m-n+me*m,n,ae,me,1)}}static quadrilateralToSquare(e,n,i,o,l,c,f,m){return An.squareToQuadrilateral(e,n,i,o,l,c,f,m).buildAdjoint()}buildAdjoint(){return new An(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new An(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class vi extends yi{sampleGrid(e,n,i,o,l,c,f,m,w,j,O,L,Z,ee,re,ae,me,Te,_e){const Ie=An.quadrilateralToQuadrilateral(o,l,c,f,m,w,j,O,L,Z,ee,re,ae,me,Te,_e);return this.sampleGridWithTransform(e,n,i,Ie)}sampleGridWithTransform(e,n,i,o){if(n<=0||i<=0)throw new Y;const l=new te(n,i),c=new Float32Array(2*n);for(let f=0;f<i;f++){const m=c.length,w=f+.5;for(let j=0;j<m;j+=2)c[j]=j/2+.5,c[j+1]=w;o.transformPoints(c),yi.checkAndNudgePoints(e,c);try{for(let j=0;j<m;j+=2)e.get(Math.floor(c[j]),Math.floor(c[j+1]))&&l.set(j/2,f)}catch{throw new Y}}return l}}class Vn{static setGridSampler(e){Vn.gridSampler=e}static getInstance(){return Vn.gridSampler}}Vn.gridSampler=new vi;class en{constructor(e,n){this.x=e,this.y=n}toResultPoint(){return new Le(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class _r{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let n=this.getMatrixCenter(),i=this.getBullsEyeCorners(n);if(e){let c=i[0];i[0]=i[2],i[2]=c}this.extractParameters(i);let o=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),l=this.getMatrixCornerPoints(i);return new Qi(o,l,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Y;let n=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(i,n);let o=0;for(let c=0;c<4;c++){let f=i[(this.shift+c)%4];this.compact?(o<<=7,o+=f>>1&127):(o<<=10,o+=(f>>2&992)+(f>>1&31))}let l=this.getCorrectedParameterData(o,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)}getRotation(e,n){let i=0;e.forEach((o,l,c)=>{let f=(o>>n-2<<1)+(o&1);i=(i<<3)+f}),i=((i&1)<<11)+(i>>1);for(let o=0;o<4;o++)if(N.bitCount(i^this.EXPECTED_CORNER_BITS[o])<=2)return o;throw new Y}getCorrectedParameterData(e,n){let i,o;n?(i=7,o=2):(i=10,o=4);let l=i-o,c=new Int32Array(i);for(let m=i-1;m>=0;--m)c[m]=e&15,e>>=4;try{new ln(We.AZTEC_PARAM).decode(c,l)}catch{throw new Y}let f=0;for(let m=0;m<o;m++)f=(f<<4)+c[m];return f}getBullsEyeCorners(e){let n=e,i=e,o=e,l=e,c=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let O=this.getFirstDifferent(n,c,1,-1),L=this.getFirstDifferent(i,c,1,1),Z=this.getFirstDifferent(o,c,-1,1),ee=this.getFirstDifferent(l,c,-1,-1);if(this.nbCenterLayers>2){let re=this.distancePoint(ee,O)*this.nbCenterLayers/(this.distancePoint(l,n)*(this.nbCenterLayers+2));if(re<.75||re>1.25||!this.isWhiteOrBlackRectangle(O,L,Z,ee))break}n=O,i=L,o=Z,l=ee,c=!c}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Y;this.compact=this.nbCenterLayers===5;let f=new Le(n.getX()+.5,n.getY()-.5),m=new Le(i.getX()+.5,i.getY()+.5),w=new Le(o.getX()-.5,o.getY()+.5),j=new Le(l.getX()-.5,l.getY()-.5);return this.expandSquare([f,m,w,j],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,n,i,o;try{let f=new Un(this.image).detect();e=f[0],n=f[1],i=f[2],o=f[3]}catch{let m=this.image.getWidth()/2,w=this.image.getHeight()/2;e=this.getFirstDifferent(new en(m+7,w-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new en(m+7,w+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new en(m-7,w+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new en(m-7,w-7),!1,-1,-1).toResultPoint()}let l=ot.round((e.getX()+o.getX()+n.getX()+i.getX())/4),c=ot.round((e.getY()+o.getY()+n.getY()+i.getY())/4);try{let f=new Un(this.image,15,l,c).detect();e=f[0],n=f[1],i=f[2],o=f[3]}catch{e=this.getFirstDifferent(new en(l+7,c-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new en(l+7,c+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new en(l-7,c+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new en(l-7,c-7),!1,-1,-1).toResultPoint()}return l=ot.round((e.getX()+o.getX()+n.getX()+i.getX())/4),c=ot.round((e.getY()+o.getY()+n.getY()+i.getY())/4),new en(l,c)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,n,i,o,l){let c=Vn.getInstance(),f=this.getDimension(),m=f/2-this.nbCenterLayers,w=f/2+this.nbCenterLayers;return c.sampleGrid(e,f,f,m,m,w,m,w,w,m,w,n.getX(),n.getY(),i.getX(),i.getY(),o.getX(),o.getY(),l.getX(),l.getY())}sampleLine(e,n,i){let o=0,l=this.distanceResultPoint(e,n),c=l/i,f=e.getX(),m=e.getY(),w=c*(n.getX()-e.getX())/l,j=c*(n.getY()-e.getY())/l;for(let O=0;O<i;O++)this.image.get(ot.round(f+O*w),ot.round(m+O*j))&&(o|=1<<i-O-1);return o}isWhiteOrBlackRectangle(e,n,i,o){let l=3;e=new en(e.getX()-l,e.getY()+l),n=new en(n.getX()-l,n.getY()-l),i=new en(i.getX()+l,i.getY()-l),o=new en(o.getX()+l,o.getY()+l);let c=this.getColor(o,e);if(c===0)return!1;let f=this.getColor(e,n);return f!==c||(f=this.getColor(n,i),f!==c)?!1:(f=this.getColor(i,o),f===c)}getColor(e,n){let i=this.distancePoint(e,n),o=(n.getX()-e.getX())/i,l=(n.getY()-e.getY())/i,c=0,f=e.getX(),m=e.getY(),w=this.image.get(e.getX(),e.getY()),j=Math.ceil(i);for(let L=0;L<j;L++)f+=o,m+=l,this.image.get(ot.round(f),ot.round(m))!==w&&c++;let O=c/i;return O>.1&&O<.9?0:O<=.1===w?1:-1}getFirstDifferent(e,n,i,o){let l=e.getX()+i,c=e.getY()+o;for(;this.isValid(l,c)&&this.image.get(l,c)===n;)l+=i,c+=o;for(l-=i,c-=o;this.isValid(l,c)&&this.image.get(l,c)===n;)l+=i;for(l-=i;this.isValid(l,c)&&this.image.get(l,c)===n;)c+=o;return c-=o,new en(l,c)}expandSquare(e,n,i){let o=i/(2*n),l=e[0].getX()-e[2].getX(),c=e[0].getY()-e[2].getY(),f=(e[0].getX()+e[2].getX())/2,m=(e[0].getY()+e[2].getY())/2,w=new Le(f+o*l,m+o*c),j=new Le(f-o*l,m-o*c);l=e[1].getX()-e[3].getX(),c=e[1].getY()-e[3].getY(),f=(e[1].getX()+e[3].getX())/2,m=(e[1].getY()+e[3].getY())/2;let O=new Le(f+o*l,m+o*c),L=new Le(f-o*l,m-o*c);return[w,O,j,L]}isValid(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()}isValidPoint(e){let n=ot.round(e.getX()),i=ot.round(e.getY());return this.isValid(n,i)}distancePoint(e,n){return ot.distance(e.getX(),e.getY(),n.getX(),n.getY())}distanceResultPoint(e,n){return ot.distance(e.getX(),e.getY(),n.getX(),n.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(N.truncDivision(this.nbLayers-4,8)+1)+15}}class qn{decode(e,n=null){let i=null,o=new _r(e.getBlackMatrix()),l=null,c=null;try{let j=o.detectMirror(!1);l=j.getPoints(),this.reportFoundResultPoints(n,l),c=new dt().decode(j)}catch(j){i=j}if(c==null)try{let j=o.detectMirror(!0);l=j.getPoints(),this.reportFoundResultPoints(n,l),c=new dt().decode(j)}catch(j){throw i??j}let f=new le(c.getText(),c.getRawBytes(),c.getNumBits(),l,ve.AZTEC,W.currentTimeMillis()),m=c.getByteSegments();m!=null&&f.putMetadata(fe.BYTE_SEGMENTS,m);let w=c.getECLevel();return w!=null&&f.putMetadata(fe.ERROR_CORRECTION_LEVEL,w),f}reportFoundResultPoints(e,n){if(e!=null){let i=e.get(q.NEED_RESULT_POINT_CALLBACK);i!=null&&n.forEach((o,l,c)=>{i.foundPossibleResultPoint(o)})}}reset(){}}class yo extends Ee{constructor(e=500){super(new qn,e)}}class Bt{decode(e,n){try{return this.doDecode(e,n)}catch{if(n&&n.get(q.TRY_HARDER)===!0&&e.isRotateSupported()){const l=e.rotateCounterClockwise(),c=this.doDecode(l,n),f=c.getResultMetadata();let m=270;f!==null&&f.get(fe.ORIENTATION)===!0&&(m=m+f.get(fe.ORIENTATION)%360),c.putMetadata(fe.ORIENTATION,m);const w=c.getResultPoints();if(w!==null){const j=l.getHeight();for(let O=0;O<w.length;O++)w[O]=new Le(j-w[O].getY()-1,w[O].getX())}return c}else throw new Y}}reset(){}doDecode(e,n){const i=e.getWidth(),o=e.getHeight();let l=new P(i);const c=n&&n.get(q.TRY_HARDER)===!0,f=Math.max(1,o>>(c?8:5));let m;c?m=o:m=15;const w=Math.trunc(o/2);for(let j=0;j<m;j++){const O=Math.trunc((j+1)/2),L=(j&1)===0,Z=w+f*(L?O:-O);if(Z<0||Z>=o)break;try{l=e.getBlackRow(Z,l)}catch{continue}for(let ee=0;ee<2;ee++){if(ee===1&&(l.reverse(),n&&n.get(q.NEED_RESULT_POINT_CALLBACK)===!0)){const re=new Map;n.forEach((ae,me)=>re.set(me,ae)),re.delete(q.NEED_RESULT_POINT_CALLBACK),n=re}try{const re=this.decodeRow(Z,l,n);if(ee===1){re.putMetadata(fe.ORIENTATION,180);const ae=re.getResultPoints();ae!==null&&(ae[0]=new Le(i-ae[0].getX()-1,ae[0].getY()),ae[1]=new Le(i-ae[1].getX()-1,ae[1].getY()))}return re}catch{}}}throw new Y}static recordPattern(e,n,i){const o=i.length;for(let w=0;w<o;w++)i[w]=0;const l=e.getSize();if(n>=l)throw new Y;let c=!e.get(n),f=0,m=n;for(;m<l;){if(e.get(m)!==c)i[f]++;else{if(++f===o)break;i[f]=1,c=!c}m++}if(!(f===o||f===o-1&&m===l))throw new Y}static recordPatternInReverse(e,n,i){let o=i.length,l=e.get(n);for(;n>0&&o>=0;)e.get(--n)!==l&&(o--,l=!l);if(o>=0)throw new Y;Bt.recordPattern(e,n+1,i)}static patternMatchVariance(e,n,i){const o=e.length;let l=0,c=0;for(let w=0;w<o;w++)l+=e[w],c+=n[w];if(l<c)return Number.POSITIVE_INFINITY;const f=l/c;i*=f;let m=0;for(let w=0;w<o;w++){const j=e[w],O=n[w]*f,L=j>O?j-O:O-j;if(L>i)return Number.POSITIVE_INFINITY;m+=L}return m/l}}class Pe extends Bt{static findStartPattern(e){const n=e.getSize(),i=e.getNextSet(0);let o=0,l=Int32Array.from([0,0,0,0,0,0]),c=i,f=!1;const m=6;for(let w=i;w<n;w++)if(e.get(w)!==f)l[o]++;else{if(o===m-1){let j=Pe.MAX_AVG_VARIANCE,O=-1;for(let L=Pe.CODE_START_A;L<=Pe.CODE_START_C;L++){const Z=Bt.patternMatchVariance(l,Pe.CODE_PATTERNS[L],Pe.MAX_INDIVIDUAL_VARIANCE);Z<j&&(j=Z,O=L)}if(O>=0&&e.isRange(Math.max(0,c-(w-c)/2),c,!1))return Int32Array.from([c,w,O]);c+=l[0]+l[1],l=l.slice(2,l.length-1),l[o-1]=0,l[o]=0,o--}else o++;l[o]=1,f=!f}throw new Y}static decodeCode(e,n,i){Bt.recordPattern(e,i,n);let o=Pe.MAX_AVG_VARIANCE,l=-1;for(let c=0;c<Pe.CODE_PATTERNS.length;c++){const f=Pe.CODE_PATTERNS[c],m=this.patternMatchVariance(n,f,Pe.MAX_INDIVIDUAL_VARIANCE);m<o&&(o=m,l=c)}if(l>=0)return l;throw new Y}decodeRow(e,n,i){const o=i&&i.get(q.ASSUME_GS1)===!0,l=Pe.findStartPattern(n),c=l[2];let f=0;const m=new Uint8Array(20);m[f++]=c;let w;switch(c){case Pe.CODE_START_A:w=Pe.CODE_CODE_A;break;case Pe.CODE_START_B:w=Pe.CODE_CODE_B;break;case Pe.CODE_START_C:w=Pe.CODE_CODE_C;break;default:throw new F}let j=!1,O=!1,L="",Z=l[0],ee=l[1];const re=Int32Array.from([0,0,0,0,0,0]);let ae=0,me=0,Te=c,_e=0,Ie=!0,ut=!1,it=!1;for(;!j;){const Pr=O;switch(O=!1,ae=me,me=Pe.decodeCode(n,re,ee),m[f++]=me,me!==Pe.CODE_STOP&&(Ie=!0),me!==Pe.CODE_STOP&&(_e++,Te+=_e*me),Z=ee,ee+=re.reduce((Ti,zo)=>Ti+zo,0),me){case Pe.CODE_START_A:case Pe.CODE_START_B:case Pe.CODE_START_C:throw new F}switch(w){case Pe.CODE_CODE_A:if(me<64)it===ut?L+=String.fromCharCode(32+me):L+=String.fromCharCode(32+me+128),it=!1;else if(me<96)it===ut?L+=String.fromCharCode(me-64):L+=String.fromCharCode(me+64),it=!1;else switch(me!==Pe.CODE_STOP&&(Ie=!1),me){case Pe.CODE_FNC_1:o&&(L.length===0?L+="]C1":L+="");break;case Pe.CODE_FNC_2:case Pe.CODE_FNC_3:break;case Pe.CODE_FNC_4_A:!ut&&it?(ut=!0,it=!1):ut&&it?(ut=!1,it=!1):it=!0;break;case Pe.CODE_SHIFT:O=!0,w=Pe.CODE_CODE_B;break;case Pe.CODE_CODE_B:w=Pe.CODE_CODE_B;break;case Pe.CODE_CODE_C:w=Pe.CODE_CODE_C;break;case Pe.CODE_STOP:j=!0;break}break;case Pe.CODE_CODE_B:if(me<96)it===ut?L+=String.fromCharCode(32+me):L+=String.fromCharCode(32+me+128),it=!1;else switch(me!==Pe.CODE_STOP&&(Ie=!1),me){case Pe.CODE_FNC_1:o&&(L.length===0?L+="]C1":L+="");break;case Pe.CODE_FNC_2:case Pe.CODE_FNC_3:break;case Pe.CODE_FNC_4_B:!ut&&it?(ut=!0,it=!1):ut&&it?(ut=!1,it=!1):it=!0;break;case Pe.CODE_SHIFT:O=!0,w=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_A:w=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_C:w=Pe.CODE_CODE_C;break;case Pe.CODE_STOP:j=!0;break}break;case Pe.CODE_CODE_C:if(me<100)me<10&&(L+="0"),L+=me;else switch(me!==Pe.CODE_STOP&&(Ie=!1),me){case Pe.CODE_FNC_1:o&&(L.length===0?L+="]C1":L+="");break;case Pe.CODE_CODE_A:w=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_B:w=Pe.CODE_CODE_B;break;case Pe.CODE_STOP:j=!0;break}break}Pr&&(w=w===Pe.CODE_CODE_A?Pe.CODE_CODE_B:Pe.CODE_CODE_A)}const Mn=ee-Z;if(ee=n.getNextUnset(ee),!n.isRange(ee,Math.min(n.getSize(),ee+(ee-Z)/2),!1))throw new Y;if(Te-=_e*ae,Te%103!==ae)throw new V;const hr=L.length;if(hr===0)throw new Y;hr>0&&Ie&&(w===Pe.CODE_CODE_C?L=L.substring(0,hr-2):L=L.substring(0,hr-1));const sn=(l[1]+l[0])/2,Ct=Z+Mn/2,Ht=m.length,Nn=new Uint8Array(Ht);for(let Pr=0;Pr<Ht;Pr++)Nn[Pr]=m[Pr];const ri=[new Le(sn,e),new Le(Ct,e)];return new le(L,Nn,0,ri,ve.CODE_128,new Date().getTime())}}Pe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Pe.MAX_AVG_VARIANCE=.25,Pe.MAX_INDIVIDUAL_VARIANCE=.7,Pe.CODE_SHIFT=98,Pe.CODE_CODE_C=99,Pe.CODE_CODE_B=100,Pe.CODE_CODE_A=101,Pe.CODE_FNC_1=102,Pe.CODE_FNC_2=97,Pe.CODE_FNC_3=96,Pe.CODE_FNC_4_A=101,Pe.CODE_FNC_4_B=100,Pe.CODE_START_A=103,Pe.CODE_START_B=104,Pe.CODE_START_C=105,Pe.CODE_STOP=106;class tn extends Bt{constructor(e=!1,n=!1){super(),this.usingCheckDigit=e,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,n,i){let o=this.counters;o.fill(0),this.decodeRowResult="";let l=tn.findAsteriskPattern(n,o),c=n.getNextSet(l[1]),f=n.getSize(),m,w;do{tn.recordPattern(n,c,o);let re=tn.toNarrowWidePattern(o);if(re<0)throw new Y;m=tn.patternToChar(re),this.decodeRowResult+=m,w=c;for(let ae of o)c+=ae;c=n.getNextSet(c)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let j=0;for(let re of o)j+=re;let O=c-w-j;if(c!==f&&O*2<j)throw new Y;if(this.usingCheckDigit){let re=this.decodeRowResult.length-1,ae=0;for(let me=0;me<re;me++)ae+=tn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(me));if(this.decodeRowResult.charAt(re)!==tn.ALPHABET_STRING.charAt(ae%43))throw new V;this.decodeRowResult=this.decodeRowResult.substring(0,re)}if(this.decodeRowResult.length===0)throw new Y;let L;this.extendedMode?L=tn.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;let Z=(l[1]+l[0])/2,ee=w+j/2;return new le(L,null,0,[new Le(Z,e),new Le(ee,e)],ve.CODE_39,new Date().getTime())}static findAsteriskPattern(e,n){let i=e.getSize(),o=e.getNextSet(0),l=0,c=o,f=!1,m=n.length;for(let w=o;w<i;w++)if(e.get(w)!==f)n[l]++;else{if(l===m-1){if(this.toNarrowWidePattern(n)===tn.ASTERISK_ENCODING&&e.isRange(Math.max(0,c-Math.floor((w-c)/2)),c,!1))return[c,w];c+=n[0]+n[1],n.copyWithin(0,2,2+l-1),n[l-1]=0,n[l]=0,l--}else l++;n[l]=1,f=!f}throw new Y}static toNarrowWidePattern(e){let n=e.length,i=0,o;do{let l=2147483647;for(let m of e)m<l&&m>i&&(l=m);i=l,o=0;let c=0,f=0;for(let m=0;m<n;m++){let w=e[m];w>i&&(f|=1<<n-1-m,o++,c+=w)}if(o===3){for(let m=0;m<n&&o>0;m++){let w=e[m];if(w>i&&(o--,w*2>=c))return-1}return f}}while(o>3);return-1}static patternToChar(e){for(let n=0;n<tn.CHARACTER_ENCODINGS.length;n++)if(tn.CHARACTER_ENCODINGS[n]===e)return tn.ALPHABET_STRING.charAt(n);if(e===tn.ASTERISK_ENCODING)return"*";throw new Y}static decodeExtended(e){let n=e.length,i="";for(let o=0;o<n;o++){let l=e.charAt(o);if(l==="+"||l==="$"||l==="%"||l==="/"){let c=e.charAt(o+1),f="\0";switch(l){case"+":if(c>="A"&&c<="Z")f=String.fromCharCode(c.charCodeAt(0)+32);else throw new F;break;case"$":if(c>="A"&&c<="Z")f=String.fromCharCode(c.charCodeAt(0)-64);else throw new F;break;case"%":if(c>="A"&&c<="E")f=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")f=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")f=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")f=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")f="\0";else if(c==="V")f="@";else if(c==="W")f="`";else if(c==="X"||c==="Y"||c==="Z")f="";else throw new F;break;case"/":if(c>="A"&&c<="O")f=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")f=":";else throw new F;break}i+=f,o++}else i+=l}return i}}tn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",tn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],tn.ASTERISK_ENCODING=148;class bt extends Bt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,n,i){let o=this.decodeStart(n),l=this.decodeEnd(n),c=new de;bt.decodeMiddle(n,o[1],l[0],c);let f=c.toString(),m=null;i!=null&&(m=i.get(q.ALLOWED_LENGTHS)),m==null&&(m=bt.DEFAULT_ALLOWED_LENGTHS);let w=f.length,j=!1,O=0;for(let ee of m){if(w===ee){j=!0;break}ee>O&&(O=ee)}if(!j&&w>O&&(j=!0),!j)throw new F;const L=[new Le(o[1],e),new Le(l[0],e)];return new le(f,null,0,L,ve.ITF,new Date().getTime())}static decodeMiddle(e,n,i,o){let l=new Int32Array(10),c=new Int32Array(5),f=new Int32Array(5);for(l.fill(0),c.fill(0),f.fill(0);n<i;){Bt.recordPattern(e,n,l);for(let w=0;w<5;w++){let j=2*w;c[w]=l[j],f[w]=l[j+1]}let m=bt.decodeDigit(c);o.append(m.toString()),m=this.decodeDigit(f),o.append(m.toString()),l.forEach(function(w){n+=w})}}decodeStart(e){let n=bt.skipWhiteSpace(e),i=bt.findGuardPattern(e,n,bt.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i}validateQuietZone(e,n){let i=this.narrowLineWidth*10;i=i<n?i:n;for(let o=n-1;i>0&&o>=0&&!e.get(o);o--)i--;if(i!==0)throw new Y}static skipWhiteSpace(e){const n=e.getSize(),i=e.getNextSet(0);if(i===n)throw new Y;return i}decodeEnd(e){e.reverse();try{let n=bt.skipWhiteSpace(e),i;try{i=bt.findGuardPattern(e,n,bt.END_PATTERN_REVERSED[0])}catch(l){l instanceof Y&&(i=bt.findGuardPattern(e,n,bt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);let o=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-o,i}finally{e.reverse()}}static findGuardPattern(e,n,i){let o=i.length,l=new Int32Array(o),c=e.getSize(),f=!1,m=0,w=n;l.fill(0);for(let j=n;j<c;j++)if(e.get(j)!==f)l[m]++;else{if(m===o-1){if(Bt.patternMatchVariance(l,i,bt.MAX_INDIVIDUAL_VARIANCE)<bt.MAX_AVG_VARIANCE)return[w,j];w+=l[0]+l[1],W.arraycopy(l,2,l,0,m-1),l[m-1]=0,l[m]=0,m--}else m++;l[m]=1,f=!f}throw new Y}static decodeDigit(e){let n=bt.MAX_AVG_VARIANCE,i=-1,o=bt.PATTERNS.length;for(let l=0;l<o;l++){let c=bt.PATTERNS[l],f=Bt.patternMatchVariance(e,c,bt.MAX_INDIVIDUAL_VARIANCE);f<n?(n=f,i=l):f===n&&(i=-1)}if(i>=0)return i%10;throw new Y}}bt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],bt.MAX_AVG_VARIANCE=.38,bt.MAX_INDIVIDUAL_VARIANCE=.5,bt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],bt.START_PATTERN=Int32Array.from([1,1,1,1]),bt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class _t extends Bt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let n=!1,i,o=0,l=Int32Array.from([0,0,0]);for(;!n;){l=Int32Array.from([0,0,0]),i=_t.findGuardPattern(e,o,!1,this.START_END_PATTERN,l);let c=i[0];o=i[1];let f=c-(o-c);f>=0&&(n=e.isRange(f,c,!1))}return i}static checkChecksum(e){return _t.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return _t.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let o=n-1;o>=0;o-=2){let l=e.charAt(o).charCodeAt(0)-48;if(l<0||l>9)throw new F;i+=l}i*=3;for(let o=n-2;o>=0;o-=2){let l=e.charAt(o).charCodeAt(0)-48;if(l<0||l>9)throw new F;i+=l}return(1e3-i)%10}static decodeEnd(e,n){return _t.findGuardPattern(e,n,!1,_t.START_END_PATTERN,new Int32Array(_t.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,n,i,o){return this.findGuardPattern(e,n,i,o,new Int32Array(o.length))}static findGuardPattern(e,n,i,o,l){let c=e.getSize();n=i?e.getNextUnset(n):e.getNextSet(n);let f=0,m=n,w=o.length,j=i;for(let O=n;O<c;O++)if(e.get(O)!==j)l[f]++;else{if(f===w-1){if(Bt.patternMatchVariance(l,o,_t.MAX_INDIVIDUAL_VARIANCE)<_t.MAX_AVG_VARIANCE)return Int32Array.from([m,O]);m+=l[0]+l[1];let L=l.slice(2,l.length-1);for(let Z=0;Z<f-1;Z++)l[Z]=L[Z];l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,j=!j}throw new Y}static decodeDigit(e,n,i,o){this.recordPattern(e,i,n);let l=this.MAX_AVG_VARIANCE,c=-1,f=o.length;for(let m=0;m<f;m++){let w=o[m],j=Bt.patternMatchVariance(n,w,_t.MAX_INDIVIDUAL_VARIANCE);j<l&&(l=j,c=m)}if(c>=0)return c;throw new Y}}_t.MAX_AVG_VARIANCE=.48,_t.MAX_INDIVIDUAL_VARIANCE=.7,_t.START_END_PATTERN=Int32Array.from([1,1,1]),_t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),_t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),_t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Qr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let o=this.decodeRowStringBuffer,l=this.decodeMiddle(n,i,o),c=o.toString(),f=Qr.parseExtensionString(c),m=[new Le((i[0]+i[1])/2,e),new Le(l,e)],w=new le(c,null,0,m,ve.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&w.putAllMetadata(f),w}decodeMiddle(e,n,i){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let l=e.getSize(),c=n[1],f=0;for(let w=0;w<5&&c<l;w++){let j=_t.decodeDigit(e,o,c,_t.L_AND_G_PATTERNS);i+=String.fromCharCode(48+j%10);for(let O of o)c+=O;j>=10&&(f|=1<<4-w),w!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(i.length!==5)throw new Y;let m=this.determineCheckDigit(f);if(Qr.extensionChecksum(i.toString())!==m)throw new Y;return c}static extensionChecksum(e){let n=e.length,i=0;for(let o=n-2;o>=0;o-=2)i+=e.charAt(o).charCodeAt(0)-48;i*=3;for(let o=n-1;o>=0;o-=2)i+=e.charAt(o).charCodeAt(0)-48;return i*=3,i%10}determineCheckDigit(e){for(let n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new Y}static parseExtensionString(e){if(e.length!==5)return null;let n=Qr.parseExtension5String(e);return n==null?null:new Map([[fe.SUGGESTED_PRICE,n]])}static parseExtension5String(e){let n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}let i=parseInt(e.substring(1)),o=(i/100).toString(),l=i%100,c=l<10?"0"+l:l.toString();return n+o+"."+c}}class Ji{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,i){let o=this.decodeRowStringBuffer,l=this.decodeMiddle(n,i,o),c=o.toString(),f=Ji.parseExtensionString(c),m=[new Le((i[0]+i[1])/2,e),new Le(l,e)],w=new le(c,null,0,m,ve.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&w.putAllMetadata(f),w}decodeMiddle(e,n,i){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let l=e.getSize(),c=n[1],f=0;for(let m=0;m<2&&c<l;m++){let w=_t.decodeDigit(e,o,c,_t.L_AND_G_PATTERNS);i+=String.fromCharCode(48+w%10);for(let j of o)c+=j;w>=10&&(f|=1<<1-m),m!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(i.length!==2)throw new Y;if(parseInt(i.toString())%4!==f)throw new Y;return c}static parseExtensionString(e){return e.length!==2?null:new Map([[fe.ISSUE_NUMBER,parseInt(e)]])}}class _s{static decodeRow(e,n,i){let o=_t.findGuardPattern(n,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Qr().decodeRow(e,n,o)}catch{return new Ji().decodeRow(e,n,o)}}}_s.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ht extends _t{constructor(){super(),this.decodeRowStringBuffer="",ht.L_AND_G_PATTERNS=ht.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let n=ht.L_PATTERNS[e-10],i=new Int32Array(n.length);for(let o=0;o<n.length;o++)i[o]=n[n.length-o-1];ht.L_AND_G_PATTERNS[e]=i}}decodeRow(e,n,i){let o=ht.findStartGuardPattern(n),l=i==null?null:i.get(q.NEED_RESULT_POINT_CALLBACK);if(l!=null){const Ie=new Le((o[0]+o[1])/2,e);l.foundPossibleResultPoint(Ie)}let c=this.decodeMiddle(n,o,this.decodeRowStringBuffer),f=c.rowOffset,m=c.resultString;if(l!=null){const Ie=new Le(f,e);l.foundPossibleResultPoint(Ie)}let w=this.decodeEnd(n,f);if(l!=null){const Ie=new Le((w[0]+w[1])/2,e);l.foundPossibleResultPoint(Ie)}let j=w[1],O=j+(j-w[0]);if(O>=n.getSize()||!n.isRange(j,O,!1))throw new Y;let L=m.toString();if(L.length<8)throw new F;if(!ht.checkChecksum(L))throw new V;let Z=(o[1]+o[0])/2,ee=(w[1]+w[0])/2,re=this.getBarcodeFormat(),ae=[new Le(Z,e),new Le(ee,e)],me=new le(L,null,0,ae,re,new Date().getTime()),Te=0;try{let Ie=_s.decodeRow(e,n,w[1]);me.putMetadata(fe.UPC_EAN_EXTENSION,Ie.getText()),me.putAllMetadata(Ie.getResultMetadata()),me.addResultPoints(Ie.getResultPoints()),Te=Ie.getText().length}catch{}let _e=i==null?null:i.get(q.ALLOWED_EAN_EXTENSIONS);if(_e!=null){let Ie=!1;for(let ut in _e)if(Te.toString()===ut){Ie=!0;break}if(!Ie)throw new Y}return me}decodeEnd(e,n){return ht.findGuardPattern(e,n,!1,ht.START_END_PATTERN,new Int32Array(ht.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return ht.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let i=parseInt(e.charAt(n-1),10);return ht.getStandardUPCEANChecksum(e.substring(0,n-1))===i}static getStandardUPCEANChecksum(e){let n=e.length,i=0;for(let o=n-1;o>=0;o-=2){let l=e.charAt(o).charCodeAt(0)-48;if(l<0||l>9)throw new F;i+=l}i*=3;for(let o=n-2;o>=0;o-=2){let l=e.charAt(o).charCodeAt(0)-48;if(l<0||l>9)throw new F;i+=l}return(1e3-i)%10}}class $n extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let l=e.getSize(),c=n[1],f=0;for(let w=0;w<6&&c<l;w++){let j=ht.decodeDigit(e,o,c,ht.L_AND_G_PATTERNS);i+=String.fromCharCode(48+j%10);for(let O of o)c+=O;j>=10&&(f|=1<<5-w)}i=$n.determineFirstDigit(i,f),c=ht.findGuardPattern(e,c,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<6&&c<l;w++){let j=ht.decodeDigit(e,o,c,ht.L_PATTERNS);i+=String.fromCharCode(48+j);for(let O of o)c+=O}return{rowOffset:c,resultString:i}}getBarcodeFormat(){return ve.EAN_13}static determineFirstDigit(e,n){for(let i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new Y}}$n.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class vo extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,i){const o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let l=e.getSize(),c=n[1];for(let m=0;m<4&&c<l;m++){let w=ht.decodeDigit(e,o,c,ht.L_PATTERNS);i+=String.fromCharCode(48+w);for(let j of o)c+=j}c=ht.findGuardPattern(e,c,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&c<l;m++){let w=ht.decodeDigit(e,o,c,ht.L_PATTERNS);i+=String.fromCharCode(48+w);for(let j of o)c+=j}return{rowOffset:c,resultString:i}}getBarcodeFormat(){return ve.EAN_8}}class wo extends ht{constructor(){super(...arguments),this.ean13Reader=new $n}getBarcodeFormat(){return ve.UPC_A}decode(e,n){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,n,i))}decodeMiddle(e,n,i){return this.ean13Reader.decodeMiddle(e,n,i)}maybeReturnResult(e){let n=e.getText();if(n.charAt(0)==="0"){let i=new le(n.substring(1),null,null,e.getResultPoints(),ve.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new Y}reset(){this.ean13Reader.reset()}}class Kn extends ht{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,n,i){const o=this.decodeMiddleCounters.map(w=>w);o[0]=0,o[1]=0,o[2]=0,o[3]=0;const l=e.getSize();let c=n[1],f=0;for(let w=0;w<6&&c<l;w++){const j=Kn.decodeDigit(e,o,c,Kn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+j%10);for(let O of o)c+=O;j>=10&&(f|=1<<5-w)}let m=Kn.determineNumSysAndCheckDigit(i,f);return{rowOffset:c,resultString:m}}decodeEnd(e,n){return Kn.findGuardPatternWithoutCounters(e,n,!0,Kn.MIDDLE_END_PATTERN)}checkChecksum(e){return ht.checkChecksum(Kn.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,n){for(let i=0;i<=1;i++)for(let o=0;o<10;o++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){let l=String.fromCharCode(48+i),c=String.fromCharCode(48+o);return l+e+c}throw Y.getNotFoundInstance()}getBarcodeFormat(){return ve.UPC_E}static convertUPCEtoUPCA(e){const n=e.slice(1,7).split("").map(l=>l.charCodeAt(0)),i=new de;i.append(e.charAt(0));let o=n[5];switch(o){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(o),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(o);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()}}Kn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Kn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Rs extends Bt{constructor(e){super();let n=e==null?null:e.get(q.POSSIBLE_FORMATS),i=[];g(n)?(i.push(new $n),i.push(new wo),i.push(new vo),i.push(new Kn)):(n.indexOf(ve.EAN_13)>-1&&i.push(new $n),n.indexOf(ve.UPC_A)>-1&&i.push(new wo),n.indexOf(ve.EAN_8)>-1&&i.push(new vo),n.indexOf(ve.UPC_E)>-1&&i.push(new Kn)),this.readers=i}decodeRow(e,n,i){for(let o of this.readers)try{const l=o.decodeRow(e,n,i),c=l.getBarcodeFormat()===ve.EAN_13&&l.getText().charAt(0)==="0",f=i==null?null:i.get(q.POSSIBLE_FORMATS),m=f==null||f.includes(ve.UPC_A);if(c&&m){const w=l.getRawBytes(),j=new le(l.getText().substring(1),w,w?w.length:null,l.getResultPoints(),ve.UPC_A);return j.putAllMetadata(l.getResultMetadata()),j}return l}catch{}throw new Y}reset(){for(let e of this.readers)e.reset()}}class un extends Bt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,n){for(let i=0;i<n.length;i++)if(Bt.patternMatchVariance(e,n[i],un.MAX_INDIVIDUAL_VARIANCE)<un.MAX_AVG_VARIANCE)return i;throw new Y}static count(e){return ot.sum(new Int32Array(e))}static increment(e,n){let i=0,o=n[0];for(let l=1;l<e.length;l++)n[l]>o&&(o=n[l],i=l);e[i]++}static decrement(e,n){let i=0,o=n[0];for(let l=1;l<e.length;l++)n[l]<o&&(o=n[l],i=l);e[i]--}static isFinderPattern(e){let n=e[0]+e[1],i=n+e[2]+e[3],o=n/i;if(o>=un.MIN_FINDER_PATTERN_RATIO&&o<=un.MAX_FINDER_PATTERN_RATIO){let l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;for(let f of e)f>c&&(c=f),f<l&&(l=f);return c<10*l}return!1}}un.MAX_AVG_VARIANCE=.2,un.MAX_INDIVIDUAL_VARIANCE=.45,un.MIN_FINDER_PATTERN_RATIO=9.5/12,un.MAX_FINDER_PATTERN_RATIO=12.5/14;class Vr{constructor(e,n){this.value=e,this.checksumPortion=n}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Vr))return!1;const n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class es{constructor(e,n,i,o,l){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new Le(i,l)),this.resultPoints.push(new Le(o,l))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof es))return!1;const n=e;return this.value===n.value}hashCode(){return this.value}}class On{constructor(){}static getRSSvalue(e,n,i){let o=0;for(let m of e)o+=m;let l=0,c=0,f=e.length;for(let m=0;m<f-1;m++){let w;for(w=1,c|=1<<m;w<e[m];w++,c&=~(1<<m)){let j=On.combins(o-w-1,f-m-2);if(i&&c===0&&o-w-(f-m-1)>=f-m-1&&(j-=On.combins(o-w-(f-m),f-m-2)),f-m-1>1){let O=0;for(let L=o-w-(f-m-2);L>n;L--)O+=On.combins(o-w-L-1,f-m-3);j-=O*(f-1-m)}else o-w>n&&j--;l+=j}o-=w}return l}static combins(e,n){let i,o;e-n>n?(o=n,i=e-n):(o=e-n,i=n);let l=1,c=1;for(let f=e;f>i;f--)l*=f,c<=o&&(l/=c,c++);for(;c<=o;)l/=c,c++;return l}}class bo{static buildBitArray(e){let n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);let i=12*n,o=new P(i),l=0,f=e[0].getRightChar().getValue();for(let m=11;m>=0;--m)(f&1<<m)!=0&&o.set(l),l++;for(let m=1;m<e.length;++m){let w=e[m],j=w.getLeftChar().getValue();for(let O=11;O>=0;--O)(j&1<<O)!=0&&o.set(l),l++;if(w.getRightChar()!=null){let O=w.getRightChar().getValue();for(let L=11;L>=0;--L)(O&1<<L)!=0&&o.set(l),l++}}return o}}class or{constructor(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Co{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class cn extends Co{constructor(e,n){super(e),this.value=n}getValue(){return this.value}isFNC1(){return this.value===cn.FNC1}}cn.FNC1="$";class xr extends Co{constructor(e,n,i){super(e),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=n}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class In extends Co{constructor(e,n,i){if(super(e),n<0||n>10||i<0||i>10)throw new F;this.firstDigit=n,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===In.FNC1}isSecondDigitFNC1(){return this.secondDigit===In.FNC1}isAnyFNC1(){return this.firstDigit===In.FNC1||this.secondDigit===In.FNC1}}In.FNC1=10;class Be{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new Y;let n=e.substring(0,2);for(let l of Be.TWO_DIGIT_DATA_LENGTH)if(l[0]===n)return l[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(2,l[2],e):Be.processFixedAI(2,l[1],e);if(e.length<3)throw new Y;let i=e.substring(0,3);for(let l of Be.THREE_DIGIT_DATA_LENGTH)if(l[0]===i)return l[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(3,l[2],e):Be.processFixedAI(3,l[1],e);for(let l of Be.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(l[0]===i)return l[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(4,l[2],e):Be.processFixedAI(4,l[1],e);if(e.length<4)throw new Y;let o=e.substring(0,4);for(let l of Be.FOUR_DIGIT_DATA_LENGTH)if(l[0]===o)return l[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(4,l[2],e):Be.processFixedAI(4,l[1],e);throw new Y}static processFixedAI(e,n,i){if(i.length<e)throw new Y;let o=i.substring(0,e);if(i.length<e+n)throw new Y;let l=i.substring(e,e+n),c=i.substring(e+n),f="("+o+")"+l,m=Be.parseFieldsInGeneralPurpose(c);return m==null?f:f+m}static processVariableAI(e,n,i){let o=i.substring(0,e),l;i.length<e+n?l=i.length:l=e+n;let c=i.substring(e,l),f=i.substring(l),m="("+o+")"+c,w=Be.parseFieldsInGeneralPurpose(f);return w==null?m:m+w}}Be.VARIABLE_LENGTH=[],Be.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Be.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Be.VARIABLE_LENGTH,20],["22",Be.VARIABLE_LENGTH,29],["30",Be.VARIABLE_LENGTH,8],["37",Be.VARIABLE_LENGTH,8],["90",Be.VARIABLE_LENGTH,30],["91",Be.VARIABLE_LENGTH,30],["92",Be.VARIABLE_LENGTH,30],["93",Be.VARIABLE_LENGTH,30],["94",Be.VARIABLE_LENGTH,30],["95",Be.VARIABLE_LENGTH,30],["96",Be.VARIABLE_LENGTH,30],["97",Be.VARIABLE_LENGTH,3],["98",Be.VARIABLE_LENGTH,30],["99",Be.VARIABLE_LENGTH,30]],Be.THREE_DIGIT_DATA_LENGTH=[["240",Be.VARIABLE_LENGTH,30],["241",Be.VARIABLE_LENGTH,30],["242",Be.VARIABLE_LENGTH,6],["250",Be.VARIABLE_LENGTH,30],["251",Be.VARIABLE_LENGTH,30],["253",Be.VARIABLE_LENGTH,17],["254",Be.VARIABLE_LENGTH,20],["400",Be.VARIABLE_LENGTH,30],["401",Be.VARIABLE_LENGTH,30],["402",17],["403",Be.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Be.VARIABLE_LENGTH,20],["421",Be.VARIABLE_LENGTH,15],["422",3],["423",Be.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Be.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Be.VARIABLE_LENGTH,15],["391",Be.VARIABLE_LENGTH,18],["392",Be.VARIABLE_LENGTH,15],["393",Be.VARIABLE_LENGTH,18],["703",Be.VARIABLE_LENGTH,30]],Be.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Be.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Be.VARIABLE_LENGTH,20],["8003",Be.VARIABLE_LENGTH,30],["8004",Be.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Be.VARIABLE_LENGTH,30],["8008",Be.VARIABLE_LENGTH,12],["8018",18],["8020",Be.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Be.VARIABLE_LENGTH,70],["8200",Be.VARIABLE_LENGTH,70]];class wi{constructor(e){this.buffer=new de,this.information=e}decodeAllCodes(e,n){let i=n,o=null;do{let l=this.decodeGeneralPurposeField(i,o),c=Be.parseFieldsInGeneralPurpose(l.getNewString());if(c!=null&&e.append(c),l.isRemaining()?o=""+l.getRemainingValue():o=null,i===l.getNewPosition())break;i=l.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let l=this.extractNumericValueFromBitArray(e,4);return l===0?new In(this.information.getSize(),In.FNC1,In.FNC1):new In(this.information.getSize(),l-1,In.FNC1)}let n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,o=(n-8)%11;return new In(e+7,i,o)}extractNumericValueFromBitArray(e,n){return wi.extractNumericValueFromBitArray(this.information,e,n)}static extractNumericValueFromBitArray(e,n,i){let o=0;for(let l=0;l<i;++l)e.get(n+l)&&(o|=1<<i-l-1);return o}decodeGeneralPurposeField(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new xr(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new xr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,n;do{let i=this.current.getPosition();if(this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished()),!(i!==this.current.getPosition())&&!e)break}while(!e);return n.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let n;return e.isSecondDigitFNC1()?n=new xr(this.current.getPosition(),this.buffer.toString()):n=new xr(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new or(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let n=new xr(this.current.getPosition(),this.buffer.toString());return new or(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new or(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new xr(this.current.getPosition(),this.buffer.toString());return new or(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new or(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new xr(this.current.getPosition(),this.buffer.toString());return new or(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new or(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<116)return!0;if(e+8>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(e,8);return o>=232&&o<253}decodeIsoIec646(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new cn(e+5,cn.FNC1);if(n>=5&&n<15)return new cn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new cn(e+7,""+(i+1));if(i>=90&&i<116)return new cn(e+7,""+(i+7));let o=this.extractNumericValueFromBitArray(e,8),l;switch(o){case 232:l="!";break;case 233:l='"';break;case 234:l="%";break;case 235:l="&";break;case 236:l="'";break;case 237:l="(";break;case 238:l=")";break;case 239:l="*";break;case 240:l="+";break;case 241:l=",";break;case 242:l="-";break;case 243:l=".";break;case 244:l="/";break;case 245:l=":";break;case 246:l=";";break;case 247:l="<";break;case 248:l="=";break;case 249:l=">";break;case 250:l="?";break;case 251:l="_";break;case 252:l=" ";break;default:throw new F}return new cn(e+8,l)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,6);return i>=16&&i<63}decodeAlphanumeric(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new cn(e+5,cn.FNC1);if(n>=5&&n<15)return new cn(e+5,"0"+(n-5));let i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new cn(e+6,""+(i+33));let o;switch(i){case 58:o="*";break;case 59:o=",";break;case 60:o="-";break;case 61:o=".";break;case 62:o="/";break;default:throw new St("Decoding invalid alphanumeric value: "+i)}return new cn(e+6,o)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0}}class So{constructor(e){this.information=e,this.generalDecoder=new wi(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Dn extends So{constructor(e){super(e)}encodeCompressedGtin(e,n){e.append("(01)");let i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,n,i)}encodeCompressedGtinWithoutAI(e,n,i){for(let o=0;o<4;++o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*o,10);l/100===0&&e.append("0"),l/10===0&&e.append("0"),e.append(l)}Dn.appendCheckDigit(e,i)}static appendCheckDigit(e,n){let i=0;for(let o=0;o<13;o++){let l=e.charAt(o+n).charCodeAt(0)-48;i+=(o&1)===0?3*l:l}i=10-i%10,i===10&&(i=0),e.append(i)}}Dn.GTIN_SIZE=40;class Qn extends Dn{constructor(e){super(e)}parseInformation(){let e=new de;e.append("(01)");let n=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(Qn.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,Qn.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,Qn.HEADER_SIZE+44)}}Qn.HEADER_SIZE=4;class ts extends So{constructor(e){super(e)}parseInformation(){let e=new de;return this.getGeneralDecoder().decodeAllCodes(e,ts.HEADER_SIZE)}}ts.HEADER_SIZE=5;class ns extends Dn{constructor(e){super(e)}encodeCompressedWeight(e,n,i){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(e,o);let l=this.checkWeight(o),c=1e5;for(let f=0;f<5;++f)l/c===0&&e.append("0"),c/=10;e.append(l)}}class yr extends ns{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=yr.HEADER_SIZE+ns.GTIN_SIZE+yr.WEIGHT_SIZE)throw new Y;let e=new de;return this.encodeCompressedGtin(e,yr.HEADER_SIZE),this.encodeCompressedWeight(e,yr.HEADER_SIZE+ns.GTIN_SIZE,yr.WEIGHT_SIZE),e.toString()}}yr.HEADER_SIZE=5,yr.WEIGHT_SIZE=15;class ma extends yr{constructor(e){super(e)}addWeightCode(e,n){e.append("(3103)")}checkWeight(e){return e}}class xa extends yr{constructor(e){super(e)}addWeightCode(e,n){n<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class ar extends Dn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<ar.HEADER_SIZE+Dn.GTIN_SIZE)throw new Y;let e=new de;this.encodeCompressedGtin(e,ar.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(ar.HEADER_SIZE+Dn.GTIN_SIZE,ar.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(ar.HEADER_SIZE+Dn.GTIN_SIZE+ar.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()}}ar.HEADER_SIZE=8,ar.LAST_DIGIT_SIZE=2;class yn extends Dn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<yn.HEADER_SIZE+Dn.GTIN_SIZE)throw new Y;let e=new de;this.encodeCompressedGtin(e,yn.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(yn.HEADER_SIZE+Dn.GTIN_SIZE,yn.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(yn.HEADER_SIZE+Dn.GTIN_SIZE+yn.LAST_DIGIT_SIZE,yn.FIRST_THREE_DIGITS_SIZE);i/100==0&&e.append("0"),i/10==0&&e.append("0"),e.append(i);let o=this.getGeneralDecoder().decodeGeneralPurposeField(yn.HEADER_SIZE+Dn.GTIN_SIZE+yn.LAST_DIGIT_SIZE+yn.FIRST_THREE_DIGITS_SIZE,null);return e.append(o.getNewString()),e.toString()}}yn.HEADER_SIZE=8,yn.LAST_DIGIT_SIZE=2,yn.FIRST_THREE_DIGITS_SIZE=10;class Rt extends ns{constructor(e,n,i){super(e),this.dateCode=i,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=Rt.HEADER_SIZE+Rt.GTIN_SIZE+Rt.WEIGHT_SIZE+Rt.DATE_SIZE)throw new Y;let e=new de;return this.encodeCompressedGtin(e,Rt.HEADER_SIZE),this.encodeCompressedWeight(e,Rt.HEADER_SIZE+Rt.GTIN_SIZE,Rt.WEIGHT_SIZE),this.encodeCompressedDate(e,Rt.HEADER_SIZE+Rt.GTIN_SIZE+Rt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,n){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,Rt.DATE_SIZE);if(i==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let o=i%32;i/=32;let l=i%12+1;i/=12;let c=i;c/10==0&&e.append("0"),e.append(c),l/10==0&&e.append("0"),e.append(l),o/10==0&&e.append("0"),e.append(o)}addWeightCode(e,n){e.append("("),e.append(this.firstAIdigits),e.append(n/1e5),e.append(")")}checkWeight(e){return e%1e5}}Rt.HEADER_SIZE=8,Rt.WEIGHT_SIZE=20,Rt.DATE_SIZE=16;function ya(R){try{if(R.get(1))return new Qn(R);if(!R.get(2))return new ts(R);switch(wi.extractNumericValueFromBitArray(R,1,4)){case 4:return new ma(R);case 5:return new xa(R)}switch(wi.extractNumericValueFromBitArray(R,1,5)){case 12:return new ar(R);case 13:return new yn(R)}switch(wi.extractNumericValueFromBitArray(R,1,7)){case 56:return new Rt(R,"310","11");case 57:return new Rt(R,"320","11");case 58:return new Rt(R,"310","13");case 59:return new Rt(R,"320","13");case 60:return new Rt(R,"310","15");case 61:return new Rt(R,"320","15");case 62:return new Rt(R,"310","17");case 63:return new Rt(R,"320","17")}}catch(e){throw console.log(e),new St("unknown decoder: "+R)}}class Et{constructor(e,n,i,o){this.leftchar=e,this.rightchar=n,this.finderpattern=i,this.maybeLast=o}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,n){return e instanceof Et?Et.equalsOrNull(e.leftchar,n.leftchar)&&Et.equalsOrNull(e.rightchar,n.rightchar)&&Et.equalsOrNull(e.finderpattern,n.finderpattern):!1}static equalsOrNull(e,n){return e===null?n===null:Et.equals(e,n)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Eo{constructor(e,n,i){this.pairs=e,this.rowNumber=n,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,n){return e instanceof Eo?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1}checkEqualitity(e,n){if(!e||!n)return;let i;return e.forEach((o,l)=>{n.forEach(c=>{o.getLeftChar().getValue()===c.getLeftChar().getValue()&&o.getRightChar().getValue()===c.getRightChar().getValue()&&o.getFinderPatter().getValue()===c.getFinderPatter().getValue()&&(i=!0)})}),i}}class Se extends un{constructor(e){super(...arguments),this.pairs=new Array(Se.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,n,i){this.pairs.length=0,this.startFromEven=!1;try{return Se.constructResult(this.decodeRow2pairs(e,n))}catch(o){this.verbose&&console.log(o)}return this.pairs.length=0,this.startFromEven=!0,Se.constructResult(this.decodeRow2pairs(e,n))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,n){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,e))}catch(l){if(l instanceof Y){if(!this.pairs.length)throw new Y;i=!0}}if(this.checkChecksum())return this.pairs;let o;if(this.rows.length?o=!0:o=!1,this.storeRow(e,!1),o){let l=this.checkRowsBoolean(!1);if(l!=null||(l=this.checkRowsBoolean(!0),l!=null))return l}throw new Y}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let n=null;try{n=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return e&&(this.rows=this.rows.reverse()),n}checkRows(e,n){for(let i=n;i<this.rows.length;i++){let o=this.rows[i];this.pairs.length=0;for(let c of e)this.pairs.push(c.getPairs());if(this.pairs.push(o.getPairs()),!Se.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let l=new Array(e);l.push(o);try{return this.checkRows(l,i+1)}catch(c){this.verbose&&console.log(c)}}throw new Y}static isValidSequence(e){for(let n of Se.FINDER_PATTERN_SEQUENCES){if(e.length>n.length)continue;let i=!0;for(let o=0;o<e.length;o++)if(e[o].getFinderPattern().getValue()!=n[o]){i=!1;break}if(i)return!0}return!1}storeRow(e,n){let i=0,o=!1,l=!1;for(;i<this.rows.length;){let c=this.rows[i];if(c.getRowNumber()>e){l=c.isEquivalent(this.pairs);break}o=c.isEquivalent(this.pairs),i++}l||o||Se.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new Eo(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,n){for(let i of n)if(i.getPairs().length!==e.length){for(let o of i.getPairs())for(let l of e)if(Et.equals(o,l))break}}static isPartialRow(e,n){for(let i of n){let o=!0;for(let l of e){let c=!1;for(let f of i.getPairs())if(l.equals(f)){c=!0;break}if(!c){o=!1;break}}if(o)return!0}return!1}getRows(){return this.rows}static constructResult(e){let n=bo.buildBitArray(e),o=ya(n).parseInformation(),l=e[0].getFinderPattern().getResultPoints(),c=e[e.length-1].getFinderPattern().getResultPoints(),f=[l[0],l[1],c[0],c[1]];return new le(o,null,null,f,ve.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),n=e.getLeftChar(),i=e.getRightChar();if(i==null)return!1;let o=i.getChecksumPortion(),l=2;for(let f=1;f<this.pairs.size();++f){let m=this.pairs.get(f);o+=m.getLeftChar().getChecksumPortion(),l++;let w=m.getRightChar();w!=null&&(o+=w.getChecksumPortion(),l++)}return o%=211,211*(l-4)+o==n.getValue()}static getNextSecondBar(e,n){let i;return e.get(n)?(i=e.getNextUnset(n),i=e.getNextSet(i)):(i=e.getNextSet(n),i=e.getNextUnset(i)),i}retrieveNextPair(e,n,i){let o=n.length%2==0;this.startFromEven&&(o=!o);let l,c=!0,f=-1;do this.findNextPair(e,n,f),l=this.parseFoundFinderPattern(e,i,o),l==null?f=Se.getNextSecondBar(e,this.startEnd[0]):c=!1;while(c);let m=this.decodeDataCharacter(e,l,o,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new Y;let w;try{w=this.decodeDataCharacter(e,l,o,!1)}catch(j){w=null,this.verbose&&console.log(j)}return new Et(m,w,l,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,n,i){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let l=e.getSize(),c;i>=0?c=i:this.isEmptyPair(n)?c=0:c=n[n.length-1].getFinderPattern().getStartEnd()[1];let f=n.length%2!=0;this.startFromEven&&(f=!f);let m=!1;for(;c<l&&(m=!e.get(c),!!m);)c++;let w=0,j=c;for(let O=c;O<l;O++)if(e.get(O)!=m)o[w]++;else{if(w==3){if(f&&Se.reverseCounters(o),Se.isFinderPattern(o)){this.startEnd[0]=j,this.startEnd[1]=O;return}f&&Se.reverseCounters(o),j+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,w--}else w++;o[w]=1,m=!m}throw new Y}static reverseCounters(e){let n=e.length;for(let i=0;i<n/2;++i){let o=e[i];e[i]=e[n-i-1],e[n-i-1]=o}}parseFoundFinderPattern(e,n,i){let o,l,c;if(i){let w=this.startEnd[0]-1;for(;w>=0&&!e.get(w);)w--;w++,o=this.startEnd[0]-w,l=w,c=this.startEnd[1]}else l=this.startEnd[0],c=e.getNextUnset(this.startEnd[1]+1),o=c-this.startEnd[1];let f=this.getDecodeFinderCounters();W.arraycopy(f,0,f,1,f.length-1),f[0]=o;let m;try{m=this.parseFinderValue(f,Se.FINDER_PATTERNS)}catch{return null}return new es(m,[l,c],l,c,n)}decodeDataCharacter(e,n,i,o){let l=this.getDataCharacterCounters();for(let Ct=0;Ct<l.length;Ct++)l[Ct]=0;if(o)Se.recordPatternInReverse(e,n.getStartEnd()[0],l);else{Se.recordPattern(e,n.getStartEnd()[1],l);for(let Ct=0,Ht=l.length-1;Ct<Ht;Ct++,Ht--){let Nn=l[Ct];l[Ct]=l[Ht],l[Ht]=Nn}}let c=17,f=ot.sum(new Int32Array(l))/c,m=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(f-m)/m>.3)throw new Y;let w=this.getOddCounts(),j=this.getEvenCounts(),O=this.getOddRoundingErrors(),L=this.getEvenRoundingErrors();for(let Ct=0;Ct<l.length;Ct++){let Ht=1*l[Ct]/f,Nn=Ht+.5;if(Nn<1){if(Ht<.3)throw new Y;Nn=1}else if(Nn>8){if(Ht>8.7)throw new Y;Nn=8}let ri=Ct/2;(Ct&1)==0?(w[ri]=Nn,O[ri]=Ht-Nn):(j[ri]=Nn,L[ri]=Ht-Nn)}this.adjustOddEvenCounts(c);let Z=4*n.getValue()+(i?0:2)+(o?0:1)-1,ee=0,re=0;for(let Ct=w.length-1;Ct>=0;Ct--){if(Se.isNotA1left(n,i,o)){let Ht=Se.WEIGHTS[Z][2*Ct];re+=w[Ct]*Ht}ee+=w[Ct]}let ae=0;for(let Ct=j.length-1;Ct>=0;Ct--)if(Se.isNotA1left(n,i,o)){let Ht=Se.WEIGHTS[Z][2*Ct+1];ae+=j[Ct]*Ht}let me=re+ae;if((ee&1)!=0||ee>13||ee<4)throw new Y;let Te=(13-ee)/2,_e=Se.SYMBOL_WIDEST[Te],Ie=9-_e,ut=On.getRSSvalue(w,_e,!0),it=On.getRSSvalue(j,Ie,!1),Mn=Se.EVEN_TOTAL_SUBSET[Te],hr=Se.GSUM[Te],sn=ut*Mn+it+hr;return new Vr(sn,me)}static isNotA1left(e,n,i){return!(e.getValue()==0&&n&&i)}adjustOddEvenCounts(e){let n=ot.sum(new Int32Array(this.getOddCounts())),i=ot.sum(new Int32Array(this.getEvenCounts())),o=!1,l=!1;n>13?l=!0:n<4&&(o=!0);let c=!1,f=!1;i>13?f=!0:i<4&&(c=!0);let m=n+i-e,w=(n&1)==1,j=(i&1)==0;if(m==1)if(w){if(j)throw new Y;l=!0}else{if(!j)throw new Y;f=!0}else if(m==-1)if(w){if(j)throw new Y;o=!0}else{if(!j)throw new Y;c=!0}else if(m==0){if(w){if(!j)throw new Y;n<i?(o=!0,f=!0):(l=!0,c=!0)}else if(j)throw new Y}else throw new Y;if(o){if(l)throw new Y;Se.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&Se.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new Y;Se.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&Se.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Se.SYMBOL_WIDEST=[7,5,4,3,1],Se.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Se.GSUM=[0,348,1388,2948,3988],Se.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Se.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Se.FINDER_PAT_A=0,Se.FINDER_PAT_B=1,Se.FINDER_PAT_C=2,Se.FINDER_PAT_D=3,Se.FINDER_PAT_E=4,Se.FINDER_PAT_F=5,Se.FINDER_PATTERN_SEQUENCES=[[Se.FINDER_PAT_A,Se.FINDER_PAT_A],[Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B],[Se.FINDER_PAT_A,Se.FINDER_PAT_C,Se.FINDER_PAT_B,Se.FINDER_PAT_D],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_C],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_D,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_D],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_E],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F]],Se.MAX_PAIRS=11;class va extends Vr{constructor(e,n,i){super(e,n),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Nt extends un{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,n,i){const o=this.decodePair(n,!1,e,i);Nt.addOrTally(this.possibleLeftPairs,o),n.reverse();let l=this.decodePair(n,!0,e,i);Nt.addOrTally(this.possibleRightPairs,l),n.reverse();for(let c of this.possibleLeftPairs)if(c.getCount()>1){for(let f of this.possibleRightPairs)if(f.getCount()>1&&Nt.checkChecksum(c,f))return Nt.constructResult(c,f)}throw new Y}static addOrTally(e,n){if(n==null)return;let i=!1;for(let o of e)if(o.getValue()===n.getValue()){o.incrementCount(),i=!0;break}i||e.push(n)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,n){let i=4537077*e.getValue()+n.getValue(),o=new String(i).toString(),l=new de;for(let w=13-o.length;w>0;w--)l.append("0");l.append(o);let c=0;for(let w=0;w<13;w++){let j=l.charAt(w).charCodeAt(0)-48;c+=(w&1)===0?3*j:j}c=10-c%10,c===10&&(c=0),l.append(c.toString());let f=e.getFinderPattern().getResultPoints(),m=n.getFinderPattern().getResultPoints();return new le(l.toString(),null,0,[f[0],f[1],m[0],m[1]],ve.RSS_14,new Date().getTime())}static checkChecksum(e,n){let i=(e.getChecksumPortion()+16*n.getChecksumPortion())%79,o=9*e.getFinderPattern().getValue()+n.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o}decodePair(e,n,i,o){try{let l=this.findFinderPattern(e,n),c=this.parseFoundFinderPattern(e,i,n,l),f=o==null?null:o.get(q.NEED_RESULT_POINT_CALLBACK);if(f!=null){let j=(l[0]+l[1])/2;n&&(j=e.getSize()-1-j),f.foundPossibleResultPoint(new Le(j,i))}let m=this.decodeDataCharacter(e,c,!0),w=this.decodeDataCharacter(e,c,!1);return new va(1597*m.getValue()+w.getValue(),m.getChecksumPortion()+4*w.getChecksumPortion(),c)}catch{return null}}decodeDataCharacter(e,n,i){let o=this.getDataCharacterCounters();for(let ae=0;ae<o.length;ae++)o[ae]=0;if(i)Bt.recordPatternInReverse(e,n.getStartEnd()[0],o);else{Bt.recordPattern(e,n.getStartEnd()[1]+1,o);for(let ae=0,me=o.length-1;ae<me;ae++,me--){let Te=o[ae];o[ae]=o[me],o[me]=Te}}let l=i?16:15,c=ot.sum(new Int32Array(o))/l,f=this.getOddCounts(),m=this.getEvenCounts(),w=this.getOddRoundingErrors(),j=this.getEvenRoundingErrors();for(let ae=0;ae<o.length;ae++){let me=o[ae]/c,Te=Math.floor(me+.5);Te<1?Te=1:Te>8&&(Te=8);let _e=Math.floor(ae/2);(ae&1)===0?(f[_e]=Te,w[_e]=me-Te):(m[_e]=Te,j[_e]=me-Te)}this.adjustOddEvenCounts(i,l);let O=0,L=0;for(let ae=f.length-1;ae>=0;ae--)L*=9,L+=f[ae],O+=f[ae];let Z=0,ee=0;for(let ae=m.length-1;ae>=0;ae--)Z*=9,Z+=m[ae],ee+=m[ae];let re=L+3*Z;if(i){if((O&1)!==0||O>12||O<4)throw new Y;let ae=(12-O)/2,me=Nt.OUTSIDE_ODD_WIDEST[ae],Te=9-me,_e=On.getRSSvalue(f,me,!1),Ie=On.getRSSvalue(m,Te,!0),ut=Nt.OUTSIDE_EVEN_TOTAL_SUBSET[ae],it=Nt.OUTSIDE_GSUM[ae];return new Vr(_e*ut+Ie+it,re)}else{if((ee&1)!==0||ee>10||ee<4)throw new Y;let ae=(10-ee)/2,me=Nt.INSIDE_ODD_WIDEST[ae],Te=9-me,_e=On.getRSSvalue(f,me,!0),Ie=On.getRSSvalue(m,Te,!1),ut=Nt.INSIDE_ODD_TOTAL_SUBSET[ae],it=Nt.INSIDE_GSUM[ae];return new Vr(Ie*ut+_e+it,re)}}findFinderPattern(e,n){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let o=e.getSize(),l=!1,c=0;for(;c<o&&(l=!e.get(c),n!==l);)c++;let f=0,m=c;for(let w=c;w<o;w++)if(e.get(w)!==l)i[f]++;else{if(f===3){if(un.isFinderPattern(i))return[m,w];m+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,f--}else f++;i[f]=1,l=!l}throw new Y}parseFoundFinderPattern(e,n,i,o){let l=e.get(o[0]),c=o[0]-1;for(;c>=0&&l!==e.get(c);)c--;c++;const f=o[0]-c,m=this.getDecodeFinderCounters(),w=new Int32Array(m.length);W.arraycopy(m,0,w,1,m.length-1),w[0]=f;const j=this.parseFinderValue(w,Nt.FINDER_PATTERNS);let O=c,L=o[1];return i&&(O=e.getSize()-1-O,L=e.getSize()-1-L),new es(j,[c,o[1]],O,L,n)}adjustOddEvenCounts(e,n){let i=ot.sum(new Int32Array(this.getOddCounts())),o=ot.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1,f=!1,m=!1;e?(i>12?c=!0:i<4&&(l=!0),o>12?m=!0:o<4&&(f=!0)):(i>11?c=!0:i<5&&(l=!0),o>10?m=!0:o<4&&(f=!0));let w=i+o-n,j=(i&1)===(e?1:0),O=(o&1)===1;if(w===1)if(j){if(O)throw new Y;c=!0}else{if(!O)throw new Y;m=!0}else if(w===-1)if(j){if(O)throw new Y;l=!0}else{if(!O)throw new Y;f=!0}else if(w===0){if(j){if(!O)throw new Y;i<o?(l=!0,m=!0):(c=!0,f=!0)}else if(O)throw new Y}else throw new Y;if(l){if(c)throw new Y;un.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&un.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(m)throw new Y;un.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&un.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Nt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Nt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Nt.OUTSIDE_GSUM=[0,161,961,2015,2715],Nt.INSIDE_GSUM=[0,336,1036,1516],Nt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Nt.INSIDE_ODD_WIDEST=[2,4,6,8],Nt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class bi extends Bt{constructor(e,n){super(),this.readers=[],this.verbose=n===!0;const i=e?e.get(q.POSSIBLE_FORMATS):null,o=e&&e.get(q.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(ve.EAN_13)||i.includes(ve.UPC_A)||i.includes(ve.EAN_8)||i.includes(ve.UPC_E))&&this.readers.push(new Rs(e)),i.includes(ve.CODE_39)&&this.readers.push(new tn(o)),i.includes(ve.CODE_128)&&this.readers.push(new Pe),i.includes(ve.ITF)&&this.readers.push(new bt),i.includes(ve.RSS_14)&&this.readers.push(new Nt),i.includes(ve.RSS_EXPANDED)&&this.readers.push(new Se(this.verbose))):(this.readers.push(new Rs(e)),this.readers.push(new tn),this.readers.push(new Rs(e)),this.readers.push(new Pe),this.readers.push(new bt),this.readers.push(new Nt),this.readers.push(new Se(this.verbose)))}decodeRow(e,n,i){for(let o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(e,n,i)}catch{}throw new Y}reset(){this.readers.forEach(e=>e.reset())}}class wa extends Ee{constructor(e=500,n){super(new bi(n),e,n)}}class mt{constructor(e,n,i){this.ecCodewords=e,this.ecBlocks=[n],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class lt{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class pt{constructor(e,n,i,o,l,c){this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=i,this.dataRegionSizeRows=o,this.dataRegionSizeColumns=l,this.ecBlocks=c;let f=0;const m=c.getECCodewords(),w=c.getECBlocks();for(let j of w)f+=j.getCount()*(j.getDataCodewords()+m);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,n){if((e&1)!==0||(n&1)!==0)throw new F;for(let i of pt.VERSIONS)if(i.symbolSizeRows===e&&i.symbolSizeColumns===n)return i;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new pt(1,10,10,8,8,new mt(5,new lt(1,3))),new pt(2,12,12,10,10,new mt(7,new lt(1,5))),new pt(3,14,14,12,12,new mt(10,new lt(1,8))),new pt(4,16,16,14,14,new mt(12,new lt(1,12))),new pt(5,18,18,16,16,new mt(14,new lt(1,18))),new pt(6,20,20,18,18,new mt(18,new lt(1,22))),new pt(7,22,22,20,20,new mt(20,new lt(1,30))),new pt(8,24,24,22,22,new mt(24,new lt(1,36))),new pt(9,26,26,24,24,new mt(28,new lt(1,44))),new pt(10,32,32,14,14,new mt(36,new lt(1,62))),new pt(11,36,36,16,16,new mt(42,new lt(1,86))),new pt(12,40,40,18,18,new mt(48,new lt(1,114))),new pt(13,44,44,20,20,new mt(56,new lt(1,144))),new pt(14,48,48,22,22,new mt(68,new lt(1,174))),new pt(15,52,52,24,24,new mt(42,new lt(2,102))),new pt(16,64,64,14,14,new mt(56,new lt(2,140))),new pt(17,72,72,16,16,new mt(36,new lt(4,92))),new pt(18,80,80,18,18,new mt(48,new lt(4,114))),new pt(19,88,88,20,20,new mt(56,new lt(4,144))),new pt(20,96,96,22,22,new mt(68,new lt(4,174))),new pt(21,104,104,24,24,new mt(56,new lt(6,136))),new pt(22,120,120,18,18,new mt(68,new lt(6,175))),new pt(23,132,132,20,20,new mt(62,new lt(8,163))),new pt(24,144,144,22,22,new mt(62,new lt(8,156),new lt(2,155))),new pt(25,8,18,6,16,new mt(7,new lt(1,5))),new pt(26,8,32,6,14,new mt(11,new lt(1,10))),new pt(27,12,26,10,24,new mt(14,new lt(1,16))),new pt(28,12,36,10,16,new mt(18,new lt(1,22))),new pt(29,16,36,14,16,new mt(24,new lt(1,32))),new pt(30,16,48,14,22,new mt(28,new lt(1,49)))]}}pt.VERSIONS=pt.buildVersions();class Hn{constructor(e){const n=e.getHeight();if(n<8||n>144||(n&1)!==0)throw new F;this.version=Hn.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new te(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const n=e.getHeight(),i=e.getWidth();return pt.getVersionForDimensions(n,i)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let n=0,i=4,o=0;const l=this.mappingBitMatrix.getHeight(),c=this.mappingBitMatrix.getWidth();let f=!1,m=!1,w=!1,j=!1;do if(i===l&&o===0&&!f)e[n++]=this.readCorner1(l,c)&255,i-=2,o+=2,f=!0;else if(i===l-2&&o===0&&(c&3)!==0&&!m)e[n++]=this.readCorner2(l,c)&255,i-=2,o+=2,m=!0;else if(i===l+4&&o===2&&(c&7)===0&&!w)e[n++]=this.readCorner3(l,c)&255,i-=2,o+=2,w=!0;else if(i===l-2&&o===0&&(c&7)===4&&!j)e[n++]=this.readCorner4(l,c)&255,i-=2,o+=2,j=!0;else{do i<l&&o>=0&&!this.readMappingMatrix.get(o,i)&&(e[n++]=this.readUtah(i,o,l,c)&255),i-=2,o+=2;while(i>=0&&o<c);i+=1,o+=3;do i>=0&&o<c&&!this.readMappingMatrix.get(o,i)&&(e[n++]=this.readUtah(i,o,l,c)&255),i+=2,o-=2;while(i<l&&o>=0);i+=3,o+=1}while(i<l||o<c);if(n!==this.version.getTotalCodewords())throw new F;return e}readModule(e,n,i,o){return e<0&&(e+=i,n+=4-(i+4&7)),n<0&&(n+=o,e+=4-(o+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)}readUtah(e,n,i,o){let l=0;return this.readModule(e-2,n-2,i,o)&&(l|=1),l<<=1,this.readModule(e-2,n-1,i,o)&&(l|=1),l<<=1,this.readModule(e-1,n-2,i,o)&&(l|=1),l<<=1,this.readModule(e-1,n-1,i,o)&&(l|=1),l<<=1,this.readModule(e-1,n,i,o)&&(l|=1),l<<=1,this.readModule(e,n-2,i,o)&&(l|=1),l<<=1,this.readModule(e,n-1,i,o)&&(l|=1),l<<=1,this.readModule(e,n,i,o)&&(l|=1),l}readCorner1(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,1,e,n)&&(i|=1),i<<=1,this.readModule(e-1,2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}readCorner2(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-4,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner3(e,n){let i=0;return this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(0,n-3,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-3,e,n)&&(i|=1),i<<=1,this.readModule(1,n-2,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i}readCorner4(e,n){let i=0;return this.readModule(e-3,0,e,n)&&(i|=1),i<<=1,this.readModule(e-2,0,e,n)&&(i|=1),i<<=1,this.readModule(e-1,0,e,n)&&(i|=1),i<<=1,this.readModule(0,n-2,e,n)&&(i|=1),i<<=1,this.readModule(0,n-1,e,n)&&(i|=1),i<<=1,this.readModule(1,n-1,e,n)&&(i|=1),i<<=1,this.readModule(2,n-1,e,n)&&(i|=1),i<<=1,this.readModule(3,n-1,e,n)&&(i|=1),i}extractDataRegion(e){const n=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new k("Dimension of bitMatrix must match the version size");const o=this.version.getDataRegionSizeRows(),l=this.version.getDataRegionSizeColumns(),c=n/o|0,f=i/l|0,m=c*o,w=f*l,j=new te(w,m);for(let O=0;O<c;++O){const L=O*o;for(let Z=0;Z<f;++Z){const ee=Z*l;for(let re=0;re<o;++re){const ae=O*(o+2)+1+re,me=L+re;for(let Te=0;Te<l;++Te){const _e=Z*(l+2)+1+Te;if(e.get(_e,ae)){const Ie=ee+Te;j.set(Ie,me)}}}}}return j}}class Ao{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n){const i=n.getECBlocks();let o=0;const l=i.getECBlocks();for(let re of l)o+=re.getCount();const c=new Array(o);let f=0;for(let re of l)for(let ae=0;ae<re.getCount();ae++){const me=re.getDataCodewords(),Te=i.getECCodewords()+me;c[f++]=new Ao(me,new Uint8Array(Te))}const w=c[0].codewords.length-i.getECCodewords(),j=w-1;let O=0;for(let re=0;re<j;re++)for(let ae=0;ae<f;ae++)c[ae].codewords[re]=e[O++];const L=n.getVersionNumber()===24,Z=L?8:f;for(let re=0;re<Z;re++)c[re].codewords[w-1]=e[O++];const ee=c[0].codewords.length;for(let re=w;re<ee;re++)for(let ae=0;ae<f;ae++){const me=L?(ae+8)%f:ae,Te=L&&me>7?re-1:re;c[me].codewords[Te]=e[O++]}if(O!==e.length)throw new k;return c}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Io{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new k(""+e);let n=0,i=this.bitOffset,o=this.byteOffset;const l=this.bytes;if(i>0){const c=8-i,f=e<c?e:c,m=c-f,w=255>>8-f<<m;n=(l[o]&w)>>m,e-=f,i+=f,i===8&&(i=0,o++)}if(e>0){for(;e>=8;)n=n<<8|l[o]&255,o++,e-=8;if(e>0){const c=8-e,f=255>>c<<c;n=n<<e|(l[o]&f)>>c,i+=e}}return this.bitOffset=i,this.byteOffset=o,n}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var nn;(function(R){R[R.PAD_ENCODE=0]="PAD_ENCODE",R[R.ASCII_ENCODE=1]="ASCII_ENCODE",R[R.C40_ENCODE=2]="C40_ENCODE",R[R.TEXT_ENCODE=3]="TEXT_ENCODE",R[R.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",R[R.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",R[R.BASE256_ENCODE=6]="BASE256_ENCODE"})(nn||(nn={}));class lr{static decode(e){const n=new Io(e),i=new de,o=new de,l=new Array;let c=nn.ASCII_ENCODE;do if(c===nn.ASCII_ENCODE)c=this.decodeAsciiSegment(n,i,o);else{switch(c){case nn.C40_ENCODE:this.decodeC40Segment(n,i);break;case nn.TEXT_ENCODE:this.decodeTextSegment(n,i);break;case nn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,i);break;case nn.EDIFACT_ENCODE:this.decodeEdifactSegment(n,i);break;case nn.BASE256_ENCODE:this.decodeBase256Segment(n,i,l);break;default:throw new F}c=nn.ASCII_ENCODE}while(c!==nn.PAD_ENCODE&&n.available()>0);return o.length()>0&&i.append(o.toString()),new De(e,i.toString(),l.length===0?null:l,null)}static decodeAsciiSegment(e,n,i){let o=!1;do{let l=e.readBits(8);if(l===0)throw new F;if(l<=128)return o&&(l+=128),n.append(String.fromCharCode(l-1)),nn.ASCII_ENCODE;if(l===129)return nn.PAD_ENCODE;if(l<=229){const c=l-130;c<10&&n.append("0"),n.append(""+c)}else switch(l){case 230:return nn.C40_ENCODE;case 231:return nn.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:o=!0;break;case 236:n.append("[)>05"),i.insert(0,"");break;case 237:n.append("[)>06"),i.insert(0,"");break;case 238:return nn.ANSIX12_ENCODE;case 239:return nn.TEXT_ENCODE;case 240:return nn.EDIFACT_ENCODE;case 241:break;default:if(l!==254||e.available()!==0)throw new F;break}}while(e.available()>0);return nn.ASCII_ENCODE}static decodeC40Segment(e,n){let i=!1;const o=[];let l=0;do{if(e.available()===8)return;const c=e.readBits(8);if(c===254)return;this.parseTwoBytes(c,e.readBits(8),o);for(let f=0;f<3;f++){const m=o[f];switch(l){case 0:if(m<3)l=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const w=this.C40_BASIC_SET_CHARS[m];i?(n.append(String.fromCharCode(w.charCodeAt(0)+128)),i=!1):n.append(w)}else throw new F;break;case 1:i?(n.append(String.fromCharCode(m+128)),i=!1):n.append(String.fromCharCode(m)),l=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const w=this.C40_SHIFT2_SET_CHARS[m];i?(n.append(String.fromCharCode(w.charCodeAt(0)+128)),i=!1):n.append(w)}else switch(m){case 27:n.append("");break;case 30:i=!0;break;default:throw new F}l=0;break;case 3:i?(n.append(String.fromCharCode(m+224)),i=!1):n.append(String.fromCharCode(m+96)),l=0;break;default:throw new F}}}while(e.available()>0)}static decodeTextSegment(e,n){let i=!1,o=[],l=0;do{if(e.available()===8)return;const c=e.readBits(8);if(c===254)return;this.parseTwoBytes(c,e.readBits(8),o);for(let f=0;f<3;f++){const m=o[f];switch(l){case 0:if(m<3)l=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const w=this.TEXT_BASIC_SET_CHARS[m];i?(n.append(String.fromCharCode(w.charCodeAt(0)+128)),i=!1):n.append(w)}else throw new F;break;case 1:i?(n.append(String.fromCharCode(m+128)),i=!1):n.append(String.fromCharCode(m)),l=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const w=this.TEXT_SHIFT2_SET_CHARS[m];i?(n.append(String.fromCharCode(w.charCodeAt(0)+128)),i=!1):n.append(w)}else switch(m){case 27:n.append("");break;case 30:i=!0;break;default:throw new F}l=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const w=this.TEXT_SHIFT3_SET_CHARS[m];i?(n.append(String.fromCharCode(w.charCodeAt(0)+128)),i=!1):n.append(w),l=0}else throw new F;break;default:throw new F}}}while(e.available()>0)}static decodeAnsiX12Segment(e,n){const i=[];do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(let l=0;l<3;l++){const c=i[l];switch(c){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(c<14)n.append(String.fromCharCode(c+44));else if(c<40)n.append(String.fromCharCode(c+51));else throw new F;break}}}while(e.available()>0)}static parseTwoBytes(e,n,i){let o=(e<<8)+n-1,l=Math.floor(o/1600);i[0]=l,o-=l*1600,l=Math.floor(o/40),i[1]=l,i[2]=o-l*40}static decodeEdifactSegment(e,n){do{if(e.available()<=16)return;for(let i=0;i<4;i++){let o=e.readBits(6);if(o===31){const l=8-e.getBitOffset();l!==8&&e.readBits(l);return}(o&32)===0&&(o|=64),n.append(String.fromCharCode(o))}}while(e.available()>0)}static decodeBase256Segment(e,n,i){let o=1+e.getByteOffset();const l=this.unrandomize255State(e.readBits(8),o++);let c;if(l===0?c=e.available()/8|0:l<250?c=l:c=250*(l-249)+this.unrandomize255State(e.readBits(8),o++),c<0)throw new F;const f=new Uint8Array(c);for(let m=0;m<c;m++){if(e.available()<8)throw new F;f[m]=this.unrandomize255State(e.readBits(8),o++)}i.push(f);try{n.append(be.decode(f,we.ISO88591))}catch(m){throw new St("Platform does not support required encoding: "+m.message)}}static unrandomize255State(e,n){const i=149*n%255+1,o=e-i;return o>=0?o:o+256}}lr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],lr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],lr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],lr.TEXT_SHIFT2_SET_CHARS=lr.C40_SHIFT2_SET_CHARS,lr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Os{constructor(){this.rsDecoder=new ln(We.DATA_MATRIX_FIELD_256)}decode(e){const n=new Hn(e),i=n.getVersion(),o=n.readCodewords(),l=Ao.getDataBlocks(o,i);let c=0;for(let w of l)c+=w.getNumDataCodewords();const f=new Uint8Array(c),m=l.length;for(let w=0;w<m;w++){const j=l[w],O=j.getCodewords(),L=j.getNumDataCodewords();this.correctErrors(O,L);for(let Z=0;Z<L;Z++)f[Z*m+w]=O[Z]}return lr.decode(f)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new V}for(let o=0;o<n;o++)e[o]=i[o]}}class Tt{constructor(e){this.image=e,this.rectangleDetector=new Un(this.image)}detect(){const e=this.rectangleDetector.detect();let n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new Y;n=this.shiftToModuleCenter(n);const i=n[0],o=n[1],l=n[2],c=n[3];let f=this.transitionsBetween(i,c)+1,m=this.transitionsBetween(l,c)+1;(f&1)===1&&(f+=1),(m&1)===1&&(m+=1),4*f<7*m&&4*m<7*f&&(f=m=Math.max(f,m));let w=Tt.sampleGrid(this.image,i,o,l,c,f,m);return new Ur(w,[i,o,l,c])}static shiftPoint(e,n,i){let o=(n.getX()-e.getX())/(i+1),l=(n.getY()-e.getY())/(i+1);return new Le(e.getX()+o,e.getY()+l)}static moveAway(e,n,i){let o=e.getX(),l=e.getY();return o<n?o-=1:o+=1,l<i?l-=1:l+=1,new Le(o,l)}detectSolid1(e){let n=e[0],i=e[1],o=e[3],l=e[2],c=this.transitionsBetween(n,i),f=this.transitionsBetween(i,o),m=this.transitionsBetween(o,l),w=this.transitionsBetween(l,n),j=c,O=[l,n,i,o];return j>f&&(j=f,O[0]=n,O[1]=i,O[2]=o,O[3]=l),j>m&&(j=m,O[0]=i,O[1]=o,O[2]=l,O[3]=n),j>w&&(O[0]=o,O[1]=l,O[2]=n,O[3]=i),O}detectSolid2(e){let n=e[0],i=e[1],o=e[2],l=e[3],c=this.transitionsBetween(n,l),f=Tt.shiftPoint(i,o,(c+1)*4),m=Tt.shiftPoint(o,i,(c+1)*4),w=this.transitionsBetween(f,n),j=this.transitionsBetween(m,l);return w<j?(e[0]=n,e[1]=i,e[2]=o,e[3]=l):(e[0]=i,e[1]=o,e[2]=l,e[3]=n),e}correctTopRight(e){let n=e[0],i=e[1],o=e[2],l=e[3],c=this.transitionsBetween(n,l),f=this.transitionsBetween(i,l),m=Tt.shiftPoint(n,i,(f+1)*4),w=Tt.shiftPoint(o,i,(c+1)*4);c=this.transitionsBetween(m,l),f=this.transitionsBetween(w,l);let j=new Le(l.getX()+(o.getX()-i.getX())/(c+1),l.getY()+(o.getY()-i.getY())/(c+1)),O=new Le(l.getX()+(n.getX()-i.getX())/(f+1),l.getY()+(n.getY()-i.getY())/(f+1));if(!this.isValid(j))return this.isValid(O)?O:null;if(!this.isValid(O))return j;let L=this.transitionsBetween(m,j)+this.transitionsBetween(w,j),Z=this.transitionsBetween(m,O)+this.transitionsBetween(w,O);return L>Z?j:O}shiftToModuleCenter(e){let n=e[0],i=e[1],o=e[2],l=e[3],c=this.transitionsBetween(n,l)+1,f=this.transitionsBetween(o,l)+1,m=Tt.shiftPoint(n,i,f*4),w=Tt.shiftPoint(o,i,c*4);c=this.transitionsBetween(m,l)+1,f=this.transitionsBetween(w,l)+1,(c&1)===1&&(c+=1),(f&1)===1&&(f+=1);let j=(n.getX()+i.getX()+o.getX()+l.getX())/4,O=(n.getY()+i.getY()+o.getY()+l.getY())/4;n=Tt.moveAway(n,j,O),i=Tt.moveAway(i,j,O),o=Tt.moveAway(o,j,O),l=Tt.moveAway(l,j,O);let L,Z;return m=Tt.shiftPoint(n,i,f*4),m=Tt.shiftPoint(m,l,c*4),L=Tt.shiftPoint(i,n,f*4),L=Tt.shiftPoint(L,o,c*4),w=Tt.shiftPoint(o,l,f*4),w=Tt.shiftPoint(w,i,c*4),Z=Tt.shiftPoint(l,o,f*4),Z=Tt.shiftPoint(Z,n,c*4),[m,L,w,Z]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,n,i,o,l,c,f){return Vn.getInstance().sampleGrid(e,c,f,.5,.5,c-.5,.5,c-.5,f-.5,.5,f-.5,n.getX(),n.getY(),l.getX(),l.getY(),o.getX(),o.getY(),i.getX(),i.getY())}transitionsBetween(e,n){let i=Math.trunc(e.getX()),o=Math.trunc(e.getY()),l=Math.trunc(n.getX()),c=Math.trunc(n.getY()),f=Math.abs(c-o)>Math.abs(l-i);if(f){let re=i;i=o,o=re,re=l,l=c,c=re}let m=Math.abs(l-i),w=Math.abs(c-o),j=-m/2,O=o<c?1:-1,L=i<l?1:-1,Z=0,ee=this.image.get(f?o:i,f?i:o);for(let re=i,ae=o;re!==l;re+=L){let me=this.image.get(f?ae:re,f?re:ae);if(me!==ee&&(Z++,ee=me),j+=w,j>0){if(ae===c)break;ae+=O,j-=m}}return Z}}class cr{constructor(){this.decoder=new Os}decode(e,n=null){let i,o;if(n!=null&&n.has(q.PURE_BARCODE)){const w=cr.extractPureBits(e.getBlackMatrix());i=this.decoder.decode(w),o=cr.NO_POINTS}else{const w=new Tt(e.getBlackMatrix()).detect();i=this.decoder.decode(w.getBits()),o=w.getPoints()}const l=i.getRawBytes(),c=new le(i.getText(),l,8*l.length,o,ve.DATA_MATRIX,W.currentTimeMillis()),f=i.getByteSegments();f!=null&&c.putMetadata(fe.BYTE_SEGMENTS,f);const m=i.getECLevel();return m!=null&&c.putMetadata(fe.ERROR_CORRECTION_LEVEL,m),c}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n==null||i==null)throw new Y;const o=this.moduleSize(n,e);let l=n[1];const c=i[1];let f=n[0];const w=(i[0]-f+1)/o,j=(c-l+1)/o;if(w<=0||j<=0)throw new Y;const O=o/2;l+=O,f+=O;const L=new te(w,j);for(let Z=0;Z<j;Z++){const ee=l+Z*o;for(let re=0;re<w;re++)e.get(f+re*o,ee)&&L.set(re,Z)}return L}static moduleSize(e,n){const i=n.getWidth();let o=e[0];const l=e[1];for(;o<i&&n.get(o,l);)o++;if(o===i)throw new Y;const c=o-e[0];if(c===0)throw new Y;return c}}cr.NO_POINTS=[];class Wl extends Ee{constructor(e=500){super(new cr,e)}}var Ci;(function(R){R[R.L=0]="L",R[R.M=1]="M",R[R.Q=2]="Q",R[R.H=3]="H"})(Ci||(Ci={}));class At{constructor(e,n,i){this.value=e,this.stringValue=n,this.bits=i,At.FOR_BITS.set(i,this),At.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return At.L;case"M":return At.M;case"Q":return At.Q;case"H":return At.H;default:throw new A(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof At))return!1;const n=e;return this.value===n.value}static forBits(e){if(e<0||e>=At.FOR_BITS.size)throw new k;return At.FOR_BITS.get(e)}}At.FOR_BITS=new Map,At.FOR_VALUE=new Map,At.L=new At(Ci.L,"L",1),At.M=new At(Ci.M,"M",0),At.Q=new At(Ci.Q,"Q",3),At.H=new At(Ci.H,"H",2);class hn{constructor(e){this.errorCorrectionLevel=At.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,n){return N.bitCount(e^n)}static decodeFormatInformation(e,n){const i=hn.doDecodeFormatInformation(e,n);return i!==null?i:hn.doDecodeFormatInformation(e^hn.FORMAT_INFO_MASK_QR,n^hn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,n){let i=Number.MAX_SAFE_INTEGER,o=0;for(const l of hn.FORMAT_INFO_DECODE_LOOKUP){const c=l[0];if(c===e||c===n)return new hn(l[1]);let f=hn.numBitsDiffering(e,c);f<i&&(o=l[1],i=f),e!==n&&(f=hn.numBitsDiffering(n,c),f<i&&(o=l[1],i=f))}return i<=3?new hn(o):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof hn))return!1;const n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask}}hn.FORMAT_INFO_MASK_QR=21522,hn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ue{constructor(e,...n){this.ecCodewordsPerBlock=e,this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const n=this.ecBlocks;for(const i of n)e+=i.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class G{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ze{constructor(e,n,...i){this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=i;let o=0;const l=i[0].getECCodewordsPerBlock(),c=i[0].getECBlocks();for(const f of c)o+=f.getCount()*(f.getDataCodewords()+l);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new F;try{return this.getVersionForNumber((e-17)/4)}catch{throw new F}}static getVersionForNumber(e){if(e<1||e>40)throw new k;return Ze.VERSIONS[e-1]}static decodeVersionInformation(e){let n=Number.MAX_SAFE_INTEGER,i=0;for(let o=0;o<Ze.VERSION_DECODE_INFO.length;o++){const l=Ze.VERSION_DECODE_INFO[o];if(l===e)return Ze.getVersionForNumber(o+7);const c=hn.numBitsDiffering(e,l);c<n&&(i=o+7,n=c)}return n<=3?Ze.getVersionForNumber(i):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),n=new te(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);const i=this.alignmentPatternCenters.length;for(let o=0;o<i;o++){const l=this.alignmentPatternCenters[o]-2;for(let c=0;c<i;c++)o===0&&(c===0||c===i-1)||o===i-1&&c===0||n.setRegion(this.alignmentPatternCenters[c]-2,l,5,5)}return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n}toString(){return""+this.versionNumber}}Ze.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ze.VERSIONS=[new Ze(1,new Int32Array(0),new ue(7,new G(1,19)),new ue(10,new G(1,16)),new ue(13,new G(1,13)),new ue(17,new G(1,9))),new Ze(2,Int32Array.from([6,18]),new ue(10,new G(1,34)),new ue(16,new G(1,28)),new ue(22,new G(1,22)),new ue(28,new G(1,16))),new Ze(3,Int32Array.from([6,22]),new ue(15,new G(1,55)),new ue(26,new G(1,44)),new ue(18,new G(2,17)),new ue(22,new G(2,13))),new Ze(4,Int32Array.from([6,26]),new ue(20,new G(1,80)),new ue(18,new G(2,32)),new ue(26,new G(2,24)),new ue(16,new G(4,9))),new Ze(5,Int32Array.from([6,30]),new ue(26,new G(1,108)),new ue(24,new G(2,43)),new ue(18,new G(2,15),new G(2,16)),new ue(22,new G(2,11),new G(2,12))),new Ze(6,Int32Array.from([6,34]),new ue(18,new G(2,68)),new ue(16,new G(4,27)),new ue(24,new G(4,19)),new ue(28,new G(4,15))),new Ze(7,Int32Array.from([6,22,38]),new ue(20,new G(2,78)),new ue(18,new G(4,31)),new ue(18,new G(2,14),new G(4,15)),new ue(26,new G(4,13),new G(1,14))),new Ze(8,Int32Array.from([6,24,42]),new ue(24,new G(2,97)),new ue(22,new G(2,38),new G(2,39)),new ue(22,new G(4,18),new G(2,19)),new ue(26,new G(4,14),new G(2,15))),new Ze(9,Int32Array.from([6,26,46]),new ue(30,new G(2,116)),new ue(22,new G(3,36),new G(2,37)),new ue(20,new G(4,16),new G(4,17)),new ue(24,new G(4,12),new G(4,13))),new Ze(10,Int32Array.from([6,28,50]),new ue(18,new G(2,68),new G(2,69)),new ue(26,new G(4,43),new G(1,44)),new ue(24,new G(6,19),new G(2,20)),new ue(28,new G(6,15),new G(2,16))),new Ze(11,Int32Array.from([6,30,54]),new ue(20,new G(4,81)),new ue(30,new G(1,50),new G(4,51)),new ue(28,new G(4,22),new G(4,23)),new ue(24,new G(3,12),new G(8,13))),new Ze(12,Int32Array.from([6,32,58]),new ue(24,new G(2,92),new G(2,93)),new ue(22,new G(6,36),new G(2,37)),new ue(26,new G(4,20),new G(6,21)),new ue(28,new G(7,14),new G(4,15))),new Ze(13,Int32Array.from([6,34,62]),new ue(26,new G(4,107)),new ue(22,new G(8,37),new G(1,38)),new ue(24,new G(8,20),new G(4,21)),new ue(22,new G(12,11),new G(4,12))),new Ze(14,Int32Array.from([6,26,46,66]),new ue(30,new G(3,115),new G(1,116)),new ue(24,new G(4,40),new G(5,41)),new ue(20,new G(11,16),new G(5,17)),new ue(24,new G(11,12),new G(5,13))),new Ze(15,Int32Array.from([6,26,48,70]),new ue(22,new G(5,87),new G(1,88)),new ue(24,new G(5,41),new G(5,42)),new ue(30,new G(5,24),new G(7,25)),new ue(24,new G(11,12),new G(7,13))),new Ze(16,Int32Array.from([6,26,50,74]),new ue(24,new G(5,98),new G(1,99)),new ue(28,new G(7,45),new G(3,46)),new ue(24,new G(15,19),new G(2,20)),new ue(30,new G(3,15),new G(13,16))),new Ze(17,Int32Array.from([6,30,54,78]),new ue(28,new G(1,107),new G(5,108)),new ue(28,new G(10,46),new G(1,47)),new ue(28,new G(1,22),new G(15,23)),new ue(28,new G(2,14),new G(17,15))),new Ze(18,Int32Array.from([6,30,56,82]),new ue(30,new G(5,120),new G(1,121)),new ue(26,new G(9,43),new G(4,44)),new ue(28,new G(17,22),new G(1,23)),new ue(28,new G(2,14),new G(19,15))),new Ze(19,Int32Array.from([6,30,58,86]),new ue(28,new G(3,113),new G(4,114)),new ue(26,new G(3,44),new G(11,45)),new ue(26,new G(17,21),new G(4,22)),new ue(26,new G(9,13),new G(16,14))),new Ze(20,Int32Array.from([6,34,62,90]),new ue(28,new G(3,107),new G(5,108)),new ue(26,new G(3,41),new G(13,42)),new ue(30,new G(15,24),new G(5,25)),new ue(28,new G(15,15),new G(10,16))),new Ze(21,Int32Array.from([6,28,50,72,94]),new ue(28,new G(4,116),new G(4,117)),new ue(26,new G(17,42)),new ue(28,new G(17,22),new G(6,23)),new ue(30,new G(19,16),new G(6,17))),new Ze(22,Int32Array.from([6,26,50,74,98]),new ue(28,new G(2,111),new G(7,112)),new ue(28,new G(17,46)),new ue(30,new G(7,24),new G(16,25)),new ue(24,new G(34,13))),new Ze(23,Int32Array.from([6,30,54,78,102]),new ue(30,new G(4,121),new G(5,122)),new ue(28,new G(4,47),new G(14,48)),new ue(30,new G(11,24),new G(14,25)),new ue(30,new G(16,15),new G(14,16))),new Ze(24,Int32Array.from([6,28,54,80,106]),new ue(30,new G(6,117),new G(4,118)),new ue(28,new G(6,45),new G(14,46)),new ue(30,new G(11,24),new G(16,25)),new ue(30,new G(30,16),new G(2,17))),new Ze(25,Int32Array.from([6,32,58,84,110]),new ue(26,new G(8,106),new G(4,107)),new ue(28,new G(8,47),new G(13,48)),new ue(30,new G(7,24),new G(22,25)),new ue(30,new G(22,15),new G(13,16))),new Ze(26,Int32Array.from([6,30,58,86,114]),new ue(28,new G(10,114),new G(2,115)),new ue(28,new G(19,46),new G(4,47)),new ue(28,new G(28,22),new G(6,23)),new ue(30,new G(33,16),new G(4,17))),new Ze(27,Int32Array.from([6,34,62,90,118]),new ue(30,new G(8,122),new G(4,123)),new ue(28,new G(22,45),new G(3,46)),new ue(30,new G(8,23),new G(26,24)),new ue(30,new G(12,15),new G(28,16))),new Ze(28,Int32Array.from([6,26,50,74,98,122]),new ue(30,new G(3,117),new G(10,118)),new ue(28,new G(3,45),new G(23,46)),new ue(30,new G(4,24),new G(31,25)),new ue(30,new G(11,15),new G(31,16))),new Ze(29,Int32Array.from([6,30,54,78,102,126]),new ue(30,new G(7,116),new G(7,117)),new ue(28,new G(21,45),new G(7,46)),new ue(30,new G(1,23),new G(37,24)),new ue(30,new G(19,15),new G(26,16))),new Ze(30,Int32Array.from([6,26,52,78,104,130]),new ue(30,new G(5,115),new G(10,116)),new ue(28,new G(19,47),new G(10,48)),new ue(30,new G(15,24),new G(25,25)),new ue(30,new G(23,15),new G(25,16))),new Ze(31,Int32Array.from([6,30,56,82,108,134]),new ue(30,new G(13,115),new G(3,116)),new ue(28,new G(2,46),new G(29,47)),new ue(30,new G(42,24),new G(1,25)),new ue(30,new G(23,15),new G(28,16))),new Ze(32,Int32Array.from([6,34,60,86,112,138]),new ue(30,new G(17,115)),new ue(28,new G(10,46),new G(23,47)),new ue(30,new G(10,24),new G(35,25)),new ue(30,new G(19,15),new G(35,16))),new Ze(33,Int32Array.from([6,30,58,86,114,142]),new ue(30,new G(17,115),new G(1,116)),new ue(28,new G(14,46),new G(21,47)),new ue(30,new G(29,24),new G(19,25)),new ue(30,new G(11,15),new G(46,16))),new Ze(34,Int32Array.from([6,34,62,90,118,146]),new ue(30,new G(13,115),new G(6,116)),new ue(28,new G(14,46),new G(23,47)),new ue(30,new G(44,24),new G(7,25)),new ue(30,new G(59,16),new G(1,17))),new Ze(35,Int32Array.from([6,30,54,78,102,126,150]),new ue(30,new G(12,121),new G(7,122)),new ue(28,new G(12,47),new G(26,48)),new ue(30,new G(39,24),new G(14,25)),new ue(30,new G(22,15),new G(41,16))),new Ze(36,Int32Array.from([6,24,50,76,102,128,154]),new ue(30,new G(6,121),new G(14,122)),new ue(28,new G(6,47),new G(34,48)),new ue(30,new G(46,24),new G(10,25)),new ue(30,new G(2,15),new G(64,16))),new Ze(37,Int32Array.from([6,28,54,80,106,132,158]),new ue(30,new G(17,122),new G(4,123)),new ue(28,new G(29,46),new G(14,47)),new ue(30,new G(49,24),new G(10,25)),new ue(30,new G(24,15),new G(46,16))),new Ze(38,Int32Array.from([6,32,58,84,110,136,162]),new ue(30,new G(4,122),new G(18,123)),new ue(28,new G(13,46),new G(32,47)),new ue(30,new G(48,24),new G(14,25)),new ue(30,new G(42,15),new G(32,16))),new Ze(39,Int32Array.from([6,26,54,82,110,138,166]),new ue(30,new G(20,117),new G(4,118)),new ue(28,new G(40,47),new G(7,48)),new ue(30,new G(43,24),new G(22,25)),new ue(30,new G(10,15),new G(67,16))),new Ze(40,Int32Array.from([6,30,58,86,114,142,170]),new ue(30,new G(19,118),new G(6,119)),new ue(28,new G(18,47),new G(31,48)),new ue(30,new G(34,24),new G(34,25)),new ue(30,new G(20,15),new G(61,16)))];var Zt;(function(R){R[R.DATA_MASK_000=0]="DATA_MASK_000",R[R.DATA_MASK_001=1]="DATA_MASK_001",R[R.DATA_MASK_010=2]="DATA_MASK_010",R[R.DATA_MASK_011=3]="DATA_MASK_011",R[R.DATA_MASK_100=4]="DATA_MASK_100",R[R.DATA_MASK_101=5]="DATA_MASK_101",R[R.DATA_MASK_110=6]="DATA_MASK_110",R[R.DATA_MASK_111=7]="DATA_MASK_111"})(Zt||(Zt={}));class ct{constructor(e,n){this.value=e,this.isMasked=n}unmaskBitMatrix(e,n){for(let i=0;i<n;i++)for(let o=0;o<n;o++)this.isMasked(i,o)&&e.flip(o,i)}}ct.values=new Map([[Zt.DATA_MASK_000,new ct(Zt.DATA_MASK_000,(R,e)=>(R+e&1)===0)],[Zt.DATA_MASK_001,new ct(Zt.DATA_MASK_001,(R,e)=>(R&1)===0)],[Zt.DATA_MASK_010,new ct(Zt.DATA_MASK_010,(R,e)=>e%3===0)],[Zt.DATA_MASK_011,new ct(Zt.DATA_MASK_011,(R,e)=>(R+e)%3===0)],[Zt.DATA_MASK_100,new ct(Zt.DATA_MASK_100,(R,e)=>(Math.floor(R/2)+Math.floor(e/3)&1)===0)],[Zt.DATA_MASK_101,new ct(Zt.DATA_MASK_101,(R,e)=>R*e%6===0)],[Zt.DATA_MASK_110,new ct(Zt.DATA_MASK_110,(R,e)=>R*e%6<3)],[Zt.DATA_MASK_111,new ct(Zt.DATA_MASK_111,(R,e)=>(R+e+R*e%3&1)===0)]]);class ba{constructor(e){const n=e.getHeight();if(n<21||(n&3)!==1)throw new F;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let l=0;l<6;l++)e=this.copyBit(l,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let l=5;l>=0;l--)e=this.copyBit(8,l,e);const n=this.bitMatrix.getHeight();let i=0;const o=n-7;for(let l=n-1;l>=o;l--)i=this.copyBit(8,l,i);for(let l=n-8;l<n;l++)i=this.copyBit(l,8,i);if(this.parsedFormatInfo=hn.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return Ze.getVersionForNumber(n);let i=0;const o=e-11;for(let c=5;c>=0;c--)for(let f=e-9;f>=o;f--)i=this.copyBit(f,c,i);let l=Ze.decodeVersionInformation(i);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;i=0;for(let c=5;c>=0;c--)for(let f=e-9;f>=o;f--)i=this.copyBit(c,f,i);if(l=Ze.decodeVersionInformation(i),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new F}copyBit(e,n,i){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?i<<1|1:i<<1}readCodewords(){const e=this.readFormatInformation(),n=this.readVersion(),i=ct.values.get(e.getDataMask()),o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o);const l=n.buildFunctionPattern();let c=!0;const f=new Uint8Array(n.getTotalCodewords());let m=0,w=0,j=0;for(let O=o-1;O>0;O-=2){O===6&&O--;for(let L=0;L<o;L++){const Z=c?o-1-L:L;for(let ee=0;ee<2;ee++)l.get(O-ee,Z)||(j++,w<<=1,this.bitMatrix.get(O-ee,Z)&&(w|=1),j===8&&(f[m++]=w,j=0,w=0))}c=!c}if(m!==n.getTotalCodewords())throw new F;return f}remask(){if(this.parsedFormatInfo===null)return;const e=ct.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let n=0,i=e.getWidth();n<i;n++)for(let o=n+1,l=e.getHeight();o<l;o++)e.get(n,o)!==e.get(o,n)&&(e.flip(o,n),e.flip(n,o))}}class Ds{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n,i){if(e.length!==n.getTotalCodewords())throw new k;const o=n.getECBlocksForLevel(i);let l=0;const c=o.getECBlocks();for(const ee of c)l+=ee.getCount();const f=new Array(l);let m=0;for(const ee of c)for(let re=0;re<ee.getCount();re++){const ae=ee.getDataCodewords(),me=o.getECCodewordsPerBlock()+ae;f[m++]=new Ds(ae,new Uint8Array(me))}const w=f[0].codewords.length;let j=f.length-1;for(;j>=0&&f[j].codewords.length!==w;)j--;j++;const O=w-o.getECCodewordsPerBlock();let L=0;for(let ee=0;ee<O;ee++)for(let re=0;re<m;re++)f[re].codewords[ee]=e[L++];for(let ee=j;ee<m;ee++)f[ee].codewords[O]=e[L++];const Z=f[0].codewords.length;for(let ee=O;ee<Z;ee++)for(let re=0;re<m;re++){const ae=re<j?ee:ee+1;f[re].codewords[ae]=e[L++]}return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Pn;(function(R){R[R.TERMINATOR=0]="TERMINATOR",R[R.NUMERIC=1]="NUMERIC",R[R.ALPHANUMERIC=2]="ALPHANUMERIC",R[R.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",R[R.BYTE=4]="BYTE",R[R.ECI=5]="ECI",R[R.KANJI=6]="KANJI",R[R.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",R[R.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",R[R.HANZI=9]="HANZI"})(Pn||(Pn={}));class qe{constructor(e,n,i,o){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=i,this.bits=o,qe.FOR_BITS.set(o,this),qe.FOR_VALUE.set(e,this)}static forBits(e){const n=qe.FOR_BITS.get(e);if(n===void 0)throw new k;return n}getCharacterCountBits(e){const n=e.getVersionNumber();let i;return n<=9?i=0:n<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof qe))return!1;const n=e;return this.value===n.value}toString(){return this.stringValue}}qe.FOR_BITS=new Map,qe.FOR_VALUE=new Map,qe.TERMINATOR=new qe(Pn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),qe.NUMERIC=new qe(Pn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),qe.ALPHANUMERIC=new qe(Pn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),qe.STRUCTURED_APPEND=new qe(Pn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),qe.BYTE=new qe(Pn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),qe.ECI=new qe(Pn.ECI,"ECI",Int32Array.from([0,0,0]),7),qe.KANJI=new qe(Pn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),qe.FNC1_FIRST_POSITION=new qe(Pn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),qe.FNC1_SECOND_POSITION=new qe(Pn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),qe.HANZI=new qe(Pn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ot{static decode(e,n,i,o){const l=new Io(e);let c=new de;const f=new Array;let m=-1,w=-1;try{let j=null,O=!1,L;do{if(l.available()<4)L=qe.TERMINATOR;else{const Z=l.readBits(4);L=qe.forBits(Z)}switch(L){case qe.TERMINATOR:break;case qe.FNC1_FIRST_POSITION:case qe.FNC1_SECOND_POSITION:O=!0;break;case qe.STRUCTURED_APPEND:if(l.available()<16)throw new F;m=l.readBits(8),w=l.readBits(8);break;case qe.ECI:const Z=Ot.parseECIValue(l);if(j=pe.getCharacterSetECIByValue(Z),j===null)throw new F;break;case qe.HANZI:const ee=l.readBits(4),re=l.readBits(L.getCharacterCountBits(n));ee===Ot.GB2312_SUBSET&&Ot.decodeHanziSegment(l,c,re);break;default:const ae=l.readBits(L.getCharacterCountBits(n));switch(L){case qe.NUMERIC:Ot.decodeNumericSegment(l,c,ae);break;case qe.ALPHANUMERIC:Ot.decodeAlphanumericSegment(l,c,ae,O);break;case qe.BYTE:Ot.decodeByteSegment(l,c,ae,j,f,o);break;case qe.KANJI:Ot.decodeKanjiSegment(l,c,ae);break;default:throw new F}break}}while(L!==qe.TERMINATOR)}catch{throw new F}return new De(e,c.toString(),f.length===0?null:f,i===null?null:i.toString(),m,w)}static decodeHanziSegment(e,n,i){if(i*13>e.available())throw new F;const o=new Uint8Array(2*i);let l=0;for(;i>0;){const c=e.readBits(13);let f=c/96<<8&4294967295|c%96;f<959?f+=41377:f+=42657,o[l]=f>>8&255,o[l+1]=f&255,l+=2,i--}try{n.append(be.decode(o,we.GB2312))}catch(c){throw new F(c)}}static decodeKanjiSegment(e,n,i){if(i*13>e.available())throw new F;const o=new Uint8Array(2*i);let l=0;for(;i>0;){const c=e.readBits(13);let f=c/192<<8&4294967295|c%192;f<7936?f+=33088:f+=49472,o[l]=f>>8,o[l+1]=f,l+=2,i--}try{n.append(be.decode(o,we.SHIFT_JIS))}catch(c){throw new F(c)}}static decodeByteSegment(e,n,i,o,l,c){if(8*i>e.available())throw new F;const f=new Uint8Array(i);for(let w=0;w<i;w++)f[w]=e.readBits(8);let m;o===null?m=we.guessEncoding(f,c):m=o.getName();try{n.append(be.decode(f,m))}catch(w){throw new F(w)}l.push(f)}static toAlphaNumericChar(e){if(e>=Ot.ALPHANUMERIC_CHARS.length)throw new F;return Ot.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,n,i,o){const l=n.length();for(;i>1;){if(e.available()<11)throw new F;const c=e.readBits(11);n.append(Ot.toAlphaNumericChar(Math.floor(c/45))),n.append(Ot.toAlphaNumericChar(c%45)),i-=2}if(i===1){if(e.available()<6)throw new F;n.append(Ot.toAlphaNumericChar(e.readBits(6)))}if(o)for(let c=l;c<n.length();c++)n.charAt(c)==="%"&&(c<n.length()-1&&n.charAt(c+1)==="%"?n.deleteCharAt(c+1):n.setCharAt(c,""))}static decodeNumericSegment(e,n,i){for(;i>=3;){if(e.available()<10)throw new F;const o=e.readBits(10);if(o>=1e3)throw new F;n.append(Ot.toAlphaNumericChar(Math.floor(o/100))),n.append(Ot.toAlphaNumericChar(Math.floor(o/10)%10)),n.append(Ot.toAlphaNumericChar(o%10)),i-=3}if(i===2){if(e.available()<7)throw new F;const o=e.readBits(7);if(o>=100)throw new F;n.append(Ot.toAlphaNumericChar(Math.floor(o/10))),n.append(Ot.toAlphaNumericChar(o%10))}else if(i===1){if(e.available()<4)throw new F;const o=e.readBits(4);if(o>=10)throw new F;n.append(Ot.toAlphaNumericChar(o))}}static parseECIValue(e){const n=e.readBits(8);if((n&128)===0)return n&127;if((n&192)===128){const i=e.readBits(8);return(n&63)<<8&4294967295|i}if((n&224)===192){const i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new F}}Ot.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ot.GB2312_SUBSET=1;class jo{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const n=e[0];e[0]=e[2],e[2]=n}}class ko{constructor(){this.rsDecoder=new ln(We.QR_CODE_FIELD_256)}decodeBooleanArray(e,n){return this.decodeBitMatrix(te.parseFromBooleanArray(e),n)}decodeBitMatrix(e,n){const i=new ba(e);let o=null;try{return this.decodeBitMatrixParser(i,n)}catch(l){o=l}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const l=this.decodeBitMatrixParser(i,n);return l.setOther(new jo(!0)),l}catch(l){throw o!==null?o:l}}decodeBitMatrixParser(e,n){const i=e.readVersion(),o=e.readFormatInformation().getErrorCorrectionLevel(),l=e.readCodewords(),c=Ds.getDataBlocks(l,i,o);let f=0;for(const j of c)f+=j.getNumDataCodewords();const m=new Uint8Array(f);let w=0;for(const j of c){const O=j.getCodewords(),L=j.getNumDataCodewords();this.correctErrors(O,L);for(let Z=0;Z<L;Z++)m[w++]=O[Z]}return Ot.decode(m,i,o,n)}correctErrors(e,n){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-n)}catch{throw new V}for(let o=0;o<n;o++)e[o]=i[o]}}class Si extends Le{constructor(e,n,i){super(e,n),this.estimatedModuleSize=i}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const o=Math.abs(e-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const o=(this.getX()+n)/2,l=(this.getY()+e)/2,c=(this.estimatedModuleSize+i)/2;return new Si(o,l,c)}}class dr{constructor(e,n,i,o,l,c,f){this.image=e,this.startX=n,this.startY=i,this.width=o,this.height=l,this.moduleSize=c,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,n=this.height,i=this.width,o=e+i,l=this.startY+n/2,c=new Int32Array(3),f=this.image;for(let m=0;m<n;m++){const w=l+((m&1)===0?Math.floor((m+1)/2):-Math.floor((m+1)/2));c[0]=0,c[1]=0,c[2]=0;let j=e;for(;j<o&&!f.get(j,w);)j++;let O=0;for(;j<o;){if(f.get(j,w))if(O===1)c[1]++;else if(O===2){if(this.foundPatternCross(c)){const L=this.handlePossibleCenter(c,w,j);if(L!==null)return L}c[0]=c[2],c[1]=1,c[2]=0,O=1}else c[++O]++;else O===1&&O++,c[O]++;j++}if(this.foundPatternCross(c)){const L=this.handlePossibleCenter(c,w,o);if(L!==null)return L}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Y}static centerFromEnd(e,n){return n-e[2]-e[1]/2}foundPatternCross(e){const n=this.moduleSize,i=n/2;for(let o=0;o<3;o++)if(Math.abs(n-e[o])>=i)return!1;return!0}crossCheckVertical(e,n,i,o){const l=this.image,c=l.getHeight(),f=this.crossCheckStateCount;f[0]=0,f[1]=0,f[2]=0;let m=e;for(;m>=0&&l.get(n,m)&&f[1]<=i;)f[1]++,m--;if(m<0||f[1]>i)return NaN;for(;m>=0&&!l.get(n,m)&&f[0]<=i;)f[0]++,m--;if(f[0]>i)return NaN;for(m=e+1;m<c&&l.get(n,m)&&f[1]<=i;)f[1]++,m++;if(m===c||f[1]>i)return NaN;for(;m<c&&!l.get(n,m)&&f[2]<=i;)f[2]++,m++;if(f[2]>i)return NaN;const w=f[0]+f[1]+f[2];return 5*Math.abs(w-o)>=2*o?NaN:this.foundPatternCross(f)?dr.centerFromEnd(f,m):NaN}handlePossibleCenter(e,n,i){const o=e[0]+e[1]+e[2],l=dr.centerFromEnd(e,i),c=this.crossCheckVertical(n,l,2*e[1],o);if(!isNaN(c)){const f=(e[0]+e[1]+e[2])/3;for(const w of this.possibleCenters)if(w.aboutEquals(f,c,l))return w.combineEstimate(c,l,f);const m=new Si(l,c,f);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class vr extends Le{constructor(e,n,i,o){super(e,n),this.estimatedModuleSize=i,this.count=o,o===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,n,i){if(Math.abs(n-this.getY())<=e&&Math.abs(i-this.getX())<=e){const o=Math.abs(e-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(e,n,i){const o=this.count+1,l=(this.count*this.getX()+n)/o,c=(this.count*this.getY()+e)/o,f=(this.count*this.estimatedModuleSize+i)/o;return new vr(l,c,f,o)}}class Hr{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ut{constructor(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const n=e!=null&&e.get(q.TRY_HARDER)!==void 0,i=e!=null&&e.get(q.PURE_BARCODE)!==void 0,o=this.image,l=o.getHeight(),c=o.getWidth();let f=Math.floor(3*l/(4*Ut.MAX_MODULES));(f<Ut.MIN_SKIP||n)&&(f=Ut.MIN_SKIP);let m=!1;const w=new Int32Array(5);for(let O=f-1;O<l&&!m;O+=f){w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0;let L=0;for(let Z=0;Z<c;Z++)if(o.get(Z,O))(L&1)===1&&L++,w[L]++;else if((L&1)===0)if(L===4)if(Ut.foundPatternCross(w)){if(this.handlePossibleCenter(w,O,Z,i)===!0)if(f=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const re=this.findRowSkip();re>w[2]&&(O+=re-w[2]-f,Z=c-1)}else{w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,L=3;continue}L=0,w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0}else w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,L=3;else w[++L]++;else w[L]++;Ut.foundPatternCross(w)&&this.handlePossibleCenter(w,O,c,i)===!0&&(f=w[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const j=this.selectBestPatterns();return Le.orderBestPatterns(j),new Hr(j)}static centerFromEnd(e,n){return n-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let n=0;for(let l=0;l<5;l++){const c=e[l];if(c===0)return!1;n+=c}if(n<7)return!1;const i=n/7,o=i/2;return Math.abs(i-e[0])<o&&Math.abs(i-e[1])<o&&Math.abs(3*i-e[2])<3*o&&Math.abs(i-e[3])<o&&Math.abs(i-e[4])<o}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,n,i,o){const l=this.getCrossCheckStateCount();let c=0;const f=this.image;for(;e>=c&&n>=c&&f.get(n-c,e-c);)l[2]++,c++;if(e<c||n<c)return!1;for(;e>=c&&n>=c&&!f.get(n-c,e-c)&&l[1]<=i;)l[1]++,c++;if(e<c||n<c||l[1]>i)return!1;for(;e>=c&&n>=c&&f.get(n-c,e-c)&&l[0]<=i;)l[0]++,c++;if(l[0]>i)return!1;const m=f.getHeight(),w=f.getWidth();for(c=1;e+c<m&&n+c<w&&f.get(n+c,e+c);)l[2]++,c++;if(e+c>=m||n+c>=w)return!1;for(;e+c<m&&n+c<w&&!f.get(n+c,e+c)&&l[3]<i;)l[3]++,c++;if(e+c>=m||n+c>=w||l[3]>=i)return!1;for(;e+c<m&&n+c<w&&f.get(n+c,e+c)&&l[4]<i;)l[4]++,c++;if(l[4]>=i)return!1;const j=l[0]+l[1]+l[2]+l[3]+l[4];return Math.abs(j-o)<2*o&&Ut.foundPatternCross(l)}crossCheckVertical(e,n,i,o){const l=this.image,c=l.getHeight(),f=this.getCrossCheckStateCount();let m=e;for(;m>=0&&l.get(n,m);)f[2]++,m--;if(m<0)return NaN;for(;m>=0&&!l.get(n,m)&&f[1]<=i;)f[1]++,m--;if(m<0||f[1]>i)return NaN;for(;m>=0&&l.get(n,m)&&f[0]<=i;)f[0]++,m--;if(f[0]>i)return NaN;for(m=e+1;m<c&&l.get(n,m);)f[2]++,m++;if(m===c)return NaN;for(;m<c&&!l.get(n,m)&&f[3]<i;)f[3]++,m++;if(m===c||f[3]>=i)return NaN;for(;m<c&&l.get(n,m)&&f[4]<i;)f[4]++,m++;if(f[4]>=i)return NaN;const w=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(w-o)>=2*o?NaN:Ut.foundPatternCross(f)?Ut.centerFromEnd(f,m):NaN}crossCheckHorizontal(e,n,i,o){const l=this.image,c=l.getWidth(),f=this.getCrossCheckStateCount();let m=e;for(;m>=0&&l.get(m,n);)f[2]++,m--;if(m<0)return NaN;for(;m>=0&&!l.get(m,n)&&f[1]<=i;)f[1]++,m--;if(m<0||f[1]>i)return NaN;for(;m>=0&&l.get(m,n)&&f[0]<=i;)f[0]++,m--;if(f[0]>i)return NaN;for(m=e+1;m<c&&l.get(m,n);)f[2]++,m++;if(m===c)return NaN;for(;m<c&&!l.get(m,n)&&f[3]<i;)f[3]++,m++;if(m===c||f[3]>=i)return NaN;for(;m<c&&l.get(m,n)&&f[4]<i;)f[4]++,m++;if(f[4]>=i)return NaN;const w=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(w-o)>=o?NaN:Ut.foundPatternCross(f)?Ut.centerFromEnd(f,m):NaN}handlePossibleCenter(e,n,i,o){const l=e[0]+e[1]+e[2]+e[3]+e[4];let c=Ut.centerFromEnd(e,i),f=this.crossCheckVertical(n,Math.floor(c),e[2],l);if(!isNaN(f)&&(c=this.crossCheckHorizontal(Math.floor(c),Math.floor(f),e[2],l),!isNaN(c)&&(!o||this.crossCheckDiagonal(Math.floor(f),Math.floor(c),e[2],l)))){const m=l/7;let w=!1;const j=this.possibleCenters;for(let O=0,L=j.length;O<L;O++){const Z=j[O];if(Z.aboutEquals(m,f,c)){j[O]=Z.combineEstimate(f,c,m),w=!0;break}}if(!w){const O=new vr(c,f,m);j.push(O),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(O)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(const i of this.possibleCenters)if(i.getCount()>=Ut.CENTER_QUORUM)if(n==null)n=i;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-i.getX())-Math.abs(n.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,n=0;const i=this.possibleCenters.length;for(const c of this.possibleCenters)c.getCount()>=Ut.CENTER_QUORUM&&(e++,n+=c.getEstimatedModuleSize());if(e<3)return!1;const o=n/i;let l=0;for(const c of this.possibleCenters)l+=Math.abs(c.getEstimatedModuleSize()-o);return l<=.05*n}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new Y;const n=this.possibleCenters;let i;if(e>3){let o=0,l=0;for(const m of this.possibleCenters){const w=m.getEstimatedModuleSize();o+=w,l+=w*w}i=o/e;let c=Math.sqrt(l/e-i*i);n.sort((m,w)=>{const j=Math.abs(w.getEstimatedModuleSize()-i),O=Math.abs(m.getEstimatedModuleSize()-i);return j<O?-1:j>O?1:0});const f=Math.max(.2*i,c);for(let m=0;m<n.length&&n.length>3;m++){const w=n[m];Math.abs(w.getEstimatedModuleSize()-i)>f&&(n.splice(m,1),m--)}}if(n.length>3){let o=0;for(const l of n)o+=l.getEstimatedModuleSize();i=o/n.length,n.sort((l,c)=>{if(c.getCount()===l.getCount()){const f=Math.abs(c.getEstimatedModuleSize()-i),m=Math.abs(l.getEstimatedModuleSize()-i);return f<m?1:f>m?-1:0}else return c.getCount()-l.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}Ut.CENTER_QUORUM=2,Ut.MIN_SKIP=3,Ut.MAX_MODULES=57;class Rr{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(q.NEED_RESULT_POINT_CALLBACK);const i=new Ut(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(i)}processFinderPatternInfo(e){const n=e.getTopLeft(),i=e.getTopRight(),o=e.getBottomLeft(),l=this.calculateModuleSize(n,i,o);if(l<1)throw new Y("No pattern found in proccess finder.");const c=Rr.computeDimension(n,i,o,l),f=Ze.getProvisionalVersionForDimension(c),m=f.getDimensionForVersion()-7;let w=null;if(f.getAlignmentPatternCenters().length>0){const Z=i.getX()-n.getX()+o.getX(),ee=i.getY()-n.getY()+o.getY(),re=1-3/m,ae=Math.floor(n.getX()+re*(Z-n.getX())),me=Math.floor(n.getY()+re*(ee-n.getY()));for(let Te=4;Te<=16;Te<<=1)try{w=this.findAlignmentInRegion(l,ae,me,Te);break}catch(_e){if(!(_e instanceof Y))throw _e}}const j=Rr.createTransform(n,i,o,w,c),O=Rr.sampleGrid(this.image,j,c);let L;return w===null?L=[o,n,i]:L=[o,n,i,w],new Ur(O,L)}static createTransform(e,n,i,o,l){const c=l-3.5;let f,m,w,j;return o!==null?(f=o.getX(),m=o.getY(),w=c-3,j=w):(f=n.getX()-e.getX()+i.getX(),m=n.getY()-e.getY()+i.getY(),w=c,j=c),An.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,w,j,3.5,c,e.getX(),e.getY(),n.getX(),n.getY(),f,m,i.getX(),i.getY())}static sampleGrid(e,n,i){return Vn.getInstance().sampleGridWithTransform(e,i,i,n)}static computeDimension(e,n,i,o){const l=ot.round(Le.distance(e,n)/o),c=ot.round(Le.distance(e,i)/o);let f=Math.floor((l+c)/2)+7;switch(f&3){case 0:f++;break;case 2:f--;break;case 3:throw new Y("Dimensions could be not found.")}return f}calculateModuleSize(e,n,i){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,i))/2}calculateModuleSizeOneWay(e,n){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(i)?o/7:isNaN(o)?i/7:(i+o)/14}sizeOfBlackWhiteBlackRunBothWays(e,n,i,o){let l=this.sizeOfBlackWhiteBlackRun(e,n,i,o),c=1,f=e-(i-e);f<0?(c=e/(e-f),f=0):f>=this.image.getWidth()&&(c=(this.image.getWidth()-1-e)/(f-e),f=this.image.getWidth()-1);let m=Math.floor(n-(o-n)*c);return c=1,m<0?(c=n/(n-m),m=0):m>=this.image.getHeight()&&(c=(this.image.getHeight()-1-n)/(m-n),m=this.image.getHeight()-1),f=Math.floor(e+(f-e)*c),l+=this.sizeOfBlackWhiteBlackRun(e,n,f,m),l-1}sizeOfBlackWhiteBlackRun(e,n,i,o){const l=Math.abs(o-n)>Math.abs(i-e);if(l){let Z=e;e=n,n=Z,Z=i,i=o,o=Z}const c=Math.abs(i-e),f=Math.abs(o-n);let m=-c/2;const w=e<i?1:-1,j=n<o?1:-1;let O=0;const L=i+w;for(let Z=e,ee=n;Z!==L;Z+=w){const re=l?ee:Z,ae=l?Z:ee;if(O===1===this.image.get(re,ae)){if(O===2)return ot.distance(Z,ee,e,n);O++}if(m+=f,m>0){if(ee===o)break;ee+=j,m-=c}}return O===2?ot.distance(i+w,o,e,n):NaN}findAlignmentInRegion(e,n,i,o){const l=Math.floor(o*e),c=Math.max(0,n-l),f=Math.min(this.image.getWidth()-1,n+l);if(f-c<e*3)throw new Y("Alignment top exceeds estimated module size.");const m=Math.max(0,i-l),w=Math.min(this.image.getHeight()-1,i+l);if(w-m<e*3)throw new Y("Alignment bottom exceeds estimated module size.");return new dr(this.image,c,m,f-c,w-m,e,this.resultPointCallback).find()}}class jn{constructor(){this.decoder=new ko}getDecoder(){return this.decoder}decode(e,n){let i,o;if(n!=null&&n.get(q.PURE_BARCODE)!==void 0){const m=jn.extractPureBits(e.getBlackMatrix());i=this.decoder.decodeBitMatrix(m,n),o=jn.NO_POINTS}else{const m=new Rr(e.getBlackMatrix()).detect(n);i=this.decoder.decodeBitMatrix(m.getBits(),n),o=m.getPoints()}i.getOther()instanceof jo&&i.getOther().applyMirroredCorrection(o);const l=new le(i.getText(),i.getRawBytes(),void 0,o,ve.QR_CODE,void 0),c=i.getByteSegments();c!==null&&l.putMetadata(fe.BYTE_SEGMENTS,c);const f=i.getECLevel();return f!==null&&l.putMetadata(fe.ERROR_CORRECTION_LEVEL,f),i.hasStructuredAppend()&&(l.putMetadata(fe.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),l.putMetadata(fe.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),l}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(n===null||i===null)throw new Y;const o=this.moduleSize(n,e);let l=n[1],c=i[1],f=n[0],m=i[0];if(f>=m||l>=c)throw new Y;if(c-l!==m-f&&(m=f+(c-l),m>=e.getWidth()))throw new Y;const w=Math.round((m-f+1)/o),j=Math.round((c-l+1)/o);if(w<=0||j<=0)throw new Y;if(j!==w)throw new Y;const O=Math.floor(o/2);l+=O,f+=O;const L=f+Math.floor((w-1)*o)-m;if(L>0){if(L>O)throw new Y;f-=L}const Z=l+Math.floor((j-1)*o)-c;if(Z>0){if(Z>O)throw new Y;l-=Z}const ee=new te(w,j);for(let re=0;re<j;re++){const ae=l+Math.floor(re*o);for(let me=0;me<w;me++)e.get(f+Math.floor(me*o),ae)&&ee.set(me,re)}return ee}static moduleSize(e,n){const i=n.getHeight(),o=n.getWidth();let l=e[0],c=e[1],f=!0,m=0;for(;l<o&&c<i;){if(f!==n.get(l,c)){if(++m===5)break;f=!f}l++,c++}if(l===o||c===i)throw new Y;return(l-e[0])/7}}jn.NO_POINTS=new Array;class tt{PDF417Common(){}static getBitCountSum(e){return ot.sum(e)}static toIntArray(e){if(e==null||!e.length)return tt.EMPTY_INT_ARRAY;const n=new Int32Array(e.length);let i=0;for(const o of e)n[i++]=o;return n}static getCodeword(e){const n=T.binarySearch(tt.SYMBOL_TABLE,e&262143);return n<0?-1:(tt.CODEWORD_TABLE[n]-1)%tt.NUMBER_OF_CODEWORDS}}tt.NUMBER_OF_CODEWORDS=929,tt.MAX_CODEWORDS_IN_BARCODE=tt.NUMBER_OF_CODEWORDS-1,tt.MIN_ROWS_IN_BARCODE=3,tt.MAX_ROWS_IN_BARCODE=90,tt.MODULES_IN_CODEWORD=17,tt.MODULES_IN_STOP_PATTERN=18,tt.BARS_IN_MODULE=8,tt.EMPTY_INT_ARRAY=new Int32Array([]),tt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),tt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ca{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class rt{static detectMultiple(e,n,i){let o=e.getBlackMatrix(),l=rt.detect(i,o);return l.length||(o=o.clone(),o.rotate180(),l=rt.detect(i,o)),new Ca(o,l)}static detect(e,n){const i=new Array;let o=0,l=0,c=!1;for(;o<n.getHeight();){const f=rt.findVertices(n,o,l);if(f[0]==null&&f[3]==null){if(!c)break;c=!1,l=0;for(const m of i)m[1]!=null&&(o=Math.trunc(Math.max(o,m[1].getY()))),m[3]!=null&&(o=Math.max(o,Math.trunc(m[3].getY())));o+=rt.ROW_STEP;continue}if(c=!0,i.push(f),!e)break;f[2]!=null?(l=Math.trunc(f[2].getX()),o=Math.trunc(f[2].getY())):(l=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY()))}return i}static findVertices(e,n,i){const o=e.getHeight(),l=e.getWidth(),c=new Array(8);return rt.copyToResult(c,rt.findRowsWithPattern(e,o,l,n,i,rt.START_PATTERN),rt.INDEXES_START_PATTERN),c[4]!=null&&(i=Math.trunc(c[4].getX()),n=Math.trunc(c[4].getY())),rt.copyToResult(c,rt.findRowsWithPattern(e,o,l,n,i,rt.STOP_PATTERN),rt.INDEXES_STOP_PATTERN),c}static copyToResult(e,n,i){for(let o=0;o<i.length;o++)e[i[o]]=n[o]}static findRowsWithPattern(e,n,i,o,l,c){const f=new Array(4);let m=!1;const w=new Int32Array(c.length);for(;o<n;o+=rt.ROW_STEP){let O=rt.findGuardPattern(e,l,o,i,!1,c,w);if(O!=null){for(;o>0;){const L=rt.findGuardPattern(e,l,--o,i,!1,c,w);if(L!=null)O=L;else{o++;break}}f[0]=new Le(O[0],o),f[1]=new Le(O[1],o),m=!0;break}}let j=o+1;if(m){let O=0,L=Int32Array.from([Math.trunc(f[0].getX()),Math.trunc(f[1].getX())]);for(;j<n;j++){const Z=rt.findGuardPattern(e,L[0],j,i,!1,c,w);if(Z!=null&&Math.abs(L[0]-Z[0])<rt.MAX_PATTERN_DRIFT&&Math.abs(L[1]-Z[1])<rt.MAX_PATTERN_DRIFT)L=Z,O=0;else{if(O>rt.SKIPPED_ROW_COUNT_MAX)break;O++}}j-=O+1,f[2]=new Le(L[0],j),f[3]=new Le(L[1],j)}return j-o<rt.BARCODE_MIN_HEIGHT&&T.fill(f,null),f}static findGuardPattern(e,n,i,o,l,c,f){T.fillWithin(f,0,f.length,0);let m=n,w=0;for(;e.get(m,i)&&m>0&&w++<rt.MAX_PIXEL_DRIFT;)m--;let j=m,O=0,L=c.length;for(let Z=l;j<o;j++)if(e.get(j,i)!==Z)f[O]++;else{if(O===L-1){if(rt.patternMatchVariance(f,c,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return new Int32Array([m,j]);m+=f[0]+f[1],W.arraycopy(f,2,f,0,O-1),f[O-1]=0,f[O]=0,O--}else O++;f[O]=1,Z=!Z}return O===L-1&&rt.patternMatchVariance(f,c,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE?new Int32Array([m,j-1]):null}static patternMatchVariance(e,n,i){let o=e.length,l=0,c=0;for(let w=0;w<o;w++)l+=e[w],c+=n[w];if(l<c)return 1/0;let f=l/c;i*=f;let m=0;for(let w=0;w<o;w++){let j=e[w],O=n[w]*f,L=j>O?j-O:O-j;if(L>i)return 1/0;m+=L}return m/l}}rt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),rt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),rt.MAX_AVG_VARIANCE=.42,rt.MAX_INDIVIDUAL_VARIANCE=.8,rt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),rt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),rt.MAX_PIXEL_DRIFT=3,rt.MAX_PATTERN_DRIFT=5,rt.SKIPPED_ROW_COUNT_MAX=25,rt.ROW_STEP=5,rt.BARCODE_MIN_HEIGHT=10;class fn{constructor(e,n){if(n.length===0)throw new k;this.field=e;let i=n.length;if(i>1&&n[0]===0){let o=1;for(;o<i&&n[o]===0;)o++;o===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-o),W.arraycopy(n,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let o=0;for(let l of this.coefficients)o=this.field.add(o,l);return o}let n=this.coefficients[0],i=this.coefficients.length;for(let o=1;o<i;o++)n=this.field.add(this.field.multiply(e,n),this.coefficients[o]);return n}add(e){if(!this.field.equals(e.field))throw new k("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,i=e.coefficients;if(n.length>i.length){let c=n;n=i,i=c}let o=new Int32Array(i.length),l=i.length-n.length;W.arraycopy(i,0,o,0,l);for(let c=l;c<i.length;c++)o[c]=this.field.add(n[c-l],i[c]);return new fn(this.field,o)}subtract(e){if(!this.field.equals(e.field))throw new k("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof fn?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new k("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new fn(this.field,new Int32Array([0]));let n=this.coefficients,i=n.length,o=e.coefficients,l=o.length,c=new Int32Array(i+l-1);for(let f=0;f<i;f++){let m=n[f];for(let w=0;w<l;w++)c[f+w]=this.field.add(c[f+w],this.field.multiply(m,o[w]))}return new fn(this.field,c)}negative(){let e=this.coefficients.length,n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=this.field.subtract(0,this.coefficients[i]);return new fn(this.field,n)}multiplyScalar(e){if(e===0)return new fn(this.field,new Int32Array([0]));if(e===1)return this;let n=this.coefficients.length,i=new Int32Array(n);for(let o=0;o<n;o++)i[o]=this.field.multiply(this.coefficients[o],e);return new fn(this.field,i)}multiplyByMonomial(e,n){if(e<0)throw new k;if(n===0)return new fn(this.field,new Int32Array([0]));let i=this.coefficients.length,o=new Int32Array(i+e);for(let l=0;l<i;l++)o[l]=this.field.multiply(this.coefficients[l],n);return new fn(this.field,o)}toString(){let e=new de;for(let n=this.getDegree();n>=0;n--){let i=this.getCoefficient(n);i!==0&&(i<0?(e.append(" - "),i=-i):e.length()>0&&e.append(" + "),(n===0||i!==1)&&e.append(i),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()}}class Sa{add(e,n){return(e+n)%this.modulus}subtract(e,n){return(this.modulus+e-n)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new k;return this.logTable[e]}inverse(e){if(e===0)throw new st;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Ei extends Sa{constructor(e,n){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let i=1;for(let o=0;o<e;o++)this.expTable[o]=i,i=i*n%e;for(let o=0;o<e-1;o++)this.logTable[this.expTable[o]]=o;this.zero=new fn(this,new Int32Array([0])),this.one=new fn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new k;if(n===0)return this.zero;let i=new Int32Array(e+1);return i[0]=n,new fn(this,i)}}Ei.PDF417_GF=new Ei(tt.NUMBER_OF_CODEWORDS,3);class No{constructor(){this.field=Ei.PDF417_GF}decode(e,n,i){let o=new fn(this.field,e),l=new Int32Array(n),c=!1;for(let ee=n;ee>0;ee--){let re=o.evaluateAt(this.field.exp(ee));l[n-ee]=re,re!==0&&(c=!0)}if(!c)return 0;let f=this.field.getOne();if(i!=null)for(const ee of i){let re=this.field.exp(e.length-1-ee),ae=new fn(this.field,new Int32Array([this.field.subtract(0,re),1]));f=f.multiply(ae)}let m=new fn(this.field,l),w=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),m,n),j=w[0],O=w[1],L=this.findErrorLocations(j),Z=this.findErrorMagnitudes(O,j,L);for(let ee=0;ee<L.length;ee++){let re=e.length-1-this.field.log(L[ee]);if(re<0)throw V.getChecksumInstance();e[re]=this.field.subtract(e[re],Z[ee])}return L.length}runEuclideanAlgorithm(e,n,i){if(e.getDegree()<n.getDegree()){let L=e;e=n,n=L}let o=e,l=n,c=this.field.getZero(),f=this.field.getOne();for(;l.getDegree()>=Math.round(i/2);){let L=o,Z=c;if(o=l,c=f,o.isZero())throw V.getChecksumInstance();l=L;let ee=this.field.getZero(),re=o.getCoefficient(o.getDegree()),ae=this.field.inverse(re);for(;l.getDegree()>=o.getDegree()&&!l.isZero();){let me=l.getDegree()-o.getDegree(),Te=this.field.multiply(l.getCoefficient(l.getDegree()),ae);ee=ee.add(this.field.buildMonomial(me,Te)),l=l.subtract(o.multiplyByMonomial(me,Te))}f=ee.multiply(c).subtract(Z).negative()}let m=f.getCoefficient(0);if(m===0)throw V.getChecksumInstance();let w=this.field.inverse(m),j=f.multiply(w),O=l.multiply(w);return[j,O]}findErrorLocations(e){let n=e.getDegree(),i=new Int32Array(n),o=0;for(let l=1;l<this.field.getSize()&&o<n;l++)e.evaluateAt(l)===0&&(i[o]=this.field.inverse(l),o++);if(o!==n)throw V.getChecksumInstance();return i}findErrorMagnitudes(e,n,i){let o=n.getDegree(),l=new Int32Array(o);for(let w=1;w<=o;w++)l[o-w]=this.field.multiply(w,n.getCoefficient(w));let c=new fn(this.field,l),f=i.length,m=new Int32Array(f);for(let w=0;w<f;w++){let j=this.field.inverse(i[w]),O=this.field.subtract(0,e.evaluateAt(j)),L=this.field.inverse(c.evaluateAt(j));m[w]=this.field.multiply(O,L)}return m}}class Jr{constructor(e,n,i,o,l){e instanceof Jr?this.constructor_2(e):this.constructor_1(e,n,i,o,l)}constructor_1(e,n,i,o,l){const c=n==null||i==null,f=o==null||l==null;if(c&&f)throw new Y;c?(n=new Le(0,o.getY()),i=new Le(0,l.getY())):f&&(o=new Le(e.getWidth()-1,n.getY()),l=new Le(e.getWidth()-1,i.getY())),this.image=e,this.topLeft=n,this.bottomLeft=i,this.topRight=o,this.bottomRight=l,this.minX=Math.trunc(Math.min(n.getX(),i.getX())),this.maxX=Math.trunc(Math.max(o.getX(),l.getX())),this.minY=Math.trunc(Math.min(n.getY(),o.getY())),this.maxY=Math.trunc(Math.max(i.getY(),l.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,n){return e==null?n:n==null?e:new Jr(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)}addMissingRows(e,n,i){let o=this.topLeft,l=this.bottomLeft,c=this.topRight,f=this.bottomRight;if(e>0){let m=i?this.topLeft:this.topRight,w=Math.trunc(m.getY()-e);w<0&&(w=0);let j=new Le(m.getX(),w);i?o=j:c=j}if(n>0){let m=i?this.bottomLeft:this.bottomRight,w=Math.trunc(m.getY()+n);w>=this.image.getHeight()&&(w=this.image.getHeight()-1);let j=new Le(m.getX(),w);i?l=j:f=j}return new Jr(this.image,o,l,c,f)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class rs{constructor(e,n,i,o){this.columnCount=e,this.errorCorrectionLevel=o,this.rowCountUpperPart=n,this.rowCountLowerPart=i,this.rowCount=n+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Or{constructor(){this.buffer=""}static form(e,n){let i=-1;function o(c,f,m,w,j,O){if(c==="%%")return"%";if(n[++i]===void 0)return;c=w?parseInt(w.substr(1)):void 0;let L=j?parseInt(j.substr(1)):void 0,Z;switch(O){case"s":Z=n[i];break;case"c":Z=n[i][0];break;case"f":Z=parseFloat(n[i]).toFixed(c);break;case"p":Z=parseFloat(n[i]).toPrecision(c);break;case"e":Z=parseFloat(n[i]).toExponential(c);break;case"x":Z=parseInt(n[i]).toString(L||16);break;case"d":Z=parseFloat(parseInt(n[i],L||10).toPrecision(c)).toFixed(0);break}Z=typeof Z=="object"?JSON.stringify(Z):(+Z).toString(L);let ee=parseInt(m),re=m&&m[0]+""=="0"?"0":" ";for(;Z.length<ee;)Z=f!==void 0?Z+re:re+Z;return Z}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(l,o)}format(e,...n){this.buffer+=Or.form(e,n)}toString(){return this.buffer}}class wr{constructor(e){this.boundingBox=new Jr(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let n=this.getCodeword(e);if(n!=null)return n;for(let i=1;i<wr.MAX_NEARBY_DISTANCE;i++){let o=this.imageRowToCodewordIndex(e)-i;if(o>=0&&(n=this.codewords[o],n!=null)||(o=this.imageRowToCodewordIndex(e)+i,o<this.codewords.length&&(n=this.codewords[o],n!=null)))return n}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Or;let n=0;for(const i of this.codewords){if(i==null){e.format("%3d:    |   %n",n++);continue}e.format("%3d: %3d|%3d%n",n++,i.getRowNumber(),i.getValue())}return e.toString()}}wr.MAX_NEARBY_DISTANCE=5;class Gr{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)}getValue(){let e=-1,n=new Array;for(const[i,o]of this.values.entries()){const l={getKey:()=>i,getValue:()=>o};l.getValue()>e?(e=l.getValue(),n=[],n.push(l.getKey())):l.getValue()===e&&n.push(l.getKey())}return tt.toIntArray(n)}getConfidence(e){return this.values.get(e)}}class Ea extends wr{constructor(e,n){super(e),this._isLeft=n}setRowNumbers(){for(let e of this.getCodewords())e?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,e);let i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),l=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=-1,w=1,j=0;for(let O=c;O<f;O++){if(n[O]==null)continue;let L=n[O],Z=L.getRowNumber()-m;if(Z===0)j++;else if(Z===1)w=Math.max(w,j),j=1,m=L.getRowNumber();else if(Z<0||L.getRowNumber()>=e.getRowCount()||Z>O)n[O]=null;else{let ee;w>2?ee=(w-2)*Z:ee=Z;let re=ee>=O;for(let ae=1;ae<=ee&&!re;ae++)re=n[O-ae]!=null;re?n[O]=null:(m=L.getRowNumber(),j=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let n=new Int32Array(e.getRowCount());for(let i of this.getCodewords())if(i!=null){let o=i.getRowNumber();if(o>=n.length)continue;n[o]++}return n}adjustIncompleteIndicatorColumnRowNumbers(e){let n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),o=this._isLeft?n.getBottomLeft():n.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=this.getCodewords(),m=-1;for(let w=l;w<c;w++){if(f[w]==null)continue;let j=f[w];j.setRowNumberAsRowIndicatorColumn();let O=j.getRowNumber()-m;O===0||(O===1?m=j.getRowNumber():j.getRowNumber()>=e.getRowCount()?f[w]=null:m=j.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),n=new Gr,i=new Gr,o=new Gr,l=new Gr;for(let f of e){if(f==null)continue;f.setRowNumberAsRowIndicatorColumn();let m=f.getValue()%30,w=f.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:i.setValue(m*3+1);break;case 1:l.setValue(m/3),o.setValue(m%3);break;case 2:n.setValue(m+1);break}}if(n.getValue().length===0||i.getValue().length===0||o.getValue().length===0||l.getValue().length===0||n.getValue()[0]<1||i.getValue()[0]+o.getValue()[0]<tt.MIN_ROWS_IN_BARCODE||i.getValue()[0]+o.getValue()[0]>tt.MAX_ROWS_IN_BARCODE)return null;let c=new rs(n.getValue()[0],i.getValue()[0],o.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(e,c),c}removeIncorrectCodewords(e,n){for(let i=0;i<e.length;i++){let o=e[i];if(e[i]==null)continue;let l=o.getValue()%30,c=o.getRowNumber();if(c>n.getRowCount()){e[i]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:l*3+1!==n.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(l/3)!==n.getErrorCorrectionLevel()||l%3!==n.getRowCountLowerPart())&&(e[i]=null);break;case 2:l+1!==n.getColumnCount()&&(e[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class is{constructor(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=tt.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let n=1;n<this.barcodeColumnCount+1;n++){let i=this.detectionResultColumns[n].getCodewords();for(let o=0;o<i.length;o++)i[o]!=null&&(i[o].hasValidRowNumber()||this.adjustRowNumbers(n,o,i))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<e.length;i++)if(e[i]!=null&&n[i]!=null&&e[i].getRowNumber()===n[i].getRowNumber())for(let o=1;o<=this.barcodeColumnCount;o++){let l=this.detectionResultColumns[o].getCodewords()[i];l!=null&&(l.setRowNumber(e[i].getRowNumber()),l.hasValidRowNumber()||(this.detectionResultColumns[o].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let o=n[i].getRowNumber(),l=0;for(let c=this.barcodeColumnCount+1;c>0&&l<this.ADJUST_ROW_NUMBER_SKIP;c--){let f=this.detectionResultColumns[c].getCodewords()[i];f!=null&&(l=is.adjustRowNumberIfValid(o,l,f),f.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,n=this.detectionResultColumns[0].getCodewords();for(let i=0;i<n.length;i++){if(n[i]==null)continue;let o=n[i].getRowNumber(),l=0;for(let c=1;c<this.barcodeColumnCount+1&&l<this.ADJUST_ROW_NUMBER_SKIP;c++){let f=this.detectionResultColumns[c].getCodewords()[i];f!=null&&(l=is.adjustRowNumberIfValid(o,l,f),f.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,n,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(e)?(i.setRowNumber(e),n=0):++n),n}adjustRowNumbers(e,n,i){if(!this.detectionResultColumns[e-1])return;let o=i[n],l=this.detectionResultColumns[e-1].getCodewords(),c=l;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());let f=new Array(14);f[2]=l[n],f[3]=c[n],n>0&&(f[0]=i[n-1],f[4]=l[n-1],f[5]=c[n-1]),n>1&&(f[8]=i[n-2],f[10]=l[n-2],f[11]=c[n-2]),n<i.length-1&&(f[1]=i[n+1],f[6]=l[n+1],f[7]=c[n+1]),n<i.length-2&&(f[9]=i[n+2],f[12]=l[n+2],f[13]=c[n+2]);for(let m of f)if(is.adjustRowNumber(o,m))return}static adjustRowNumber(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,n){this.detectionResultColumns[e]=n}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let n=new Or;for(let i=0;i<e.getCodewords().length;i++){n.format("CW %3d:",i);for(let o=0;o<this.barcodeColumnCount+2;o++){if(this.detectionResultColumns[o]==null){n.format("    |   ");continue}let l=this.detectionResultColumns[o].getCodewords()[i];if(l==null){n.format("    |   ");continue}n.format(" %3d|%3d",l.getRowNumber(),l.getValue())}n.format("%n")}return n.toString()}}class ei{constructor(e,n,i,o){this.rowNumber=ei.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(i),this.value=Math.trunc(o)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==ei.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}ei.BARCODE_ROW_UNKNOWN=-1;class pn{static initialize(){for(let e=0;e<tt.SYMBOL_TABLE.length;e++){let n=tt.SYMBOL_TABLE[e],i=n&1;for(let o=0;o<tt.BARS_IN_MODULE;o++){let l=0;for(;(n&1)===i;)l+=1,n>>=1;i=n&1,pn.RATIOS_TABLE[e]||(pn.RATIOS_TABLE[e]=new Array(tt.BARS_IN_MODULE)),pn.RATIOS_TABLE[e][tt.BARS_IN_MODULE-o-1]=Math.fround(l/tt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let n=pn.getDecodedCodewordValue(pn.sampleBitCounts(e));return n!==-1?n:pn.getClosestDecodedValue(e)}static sampleBitCounts(e){let n=ot.sum(e),i=new Int32Array(tt.BARS_IN_MODULE),o=0,l=0;for(let c=0;c<tt.MODULES_IN_CODEWORD;c++){let f=n/(2*tt.MODULES_IN_CODEWORD)+c*n/tt.MODULES_IN_CODEWORD;l+e[o]<=f&&(l+=e[o],o++),i[o]++}return i}static getDecodedCodewordValue(e){let n=pn.getBitValue(e);return tt.getCodeword(n)===-1?-1:n}static getBitValue(e){let n=0;for(let i=0;i<e.length;i++)for(let o=0;o<e[i];o++)n=n<<1|(i%2===0?1:0);return Math.trunc(n)}static getClosestDecodedValue(e){let n=ot.sum(e),i=new Array(tt.BARS_IN_MODULE);if(n>1)for(let c=0;c<i.length;c++)i[c]=Math.fround(e[c]/n);let o=Jt.MAX_VALUE,l=-1;this.bSymbolTableReady||pn.initialize();for(let c=0;c<pn.RATIOS_TABLE.length;c++){let f=0,m=pn.RATIOS_TABLE[c];for(let w=0;w<tt.BARS_IN_MODULE;w++){let j=Math.fround(m[w]-i[w]);if(f+=Math.fround(j*j),f>=o)break}f<o&&(o=f,l=tt.SYMBOL_TABLE[c])}return l}}pn.bSymbolTableReady=!1,pn.RATIOS_TABLE=new Array(tt.SYMBOL_TABLE.length).map(R=>new Array(tt.BARS_IN_MODULE));class Ps{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class To{static parseLong(e,n=void 0){return parseInt(e,n)}}class Dr extends v{}Dr.kind="NullPointerException";class _o{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,n,i){if(e==null)throw new Dr;if(n<0||n>e.length||i<0||n+i>e.length||n+i<0)throw new z;if(i===0)return;for(let o=0;o<i;o++)this.write(e[n+o])}flush(){}close(){}}class Ms extends v{}class Aa extends _o{constructor(e=32){if(super(),this.count=0,e<0)throw new k("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let i=this.buf.length<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new Ms;i=N.MAX_VALUE}this.buf=T.copyOfUint8Array(this.buf,i)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,n,i){if(n<0||n>e.length||i<0||n+i-e.length>0)throw new z;this.ensureCapacity(this.count+i),W.arraycopy(e,n,this.buf,this.count,i),this.count+=i}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return T.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var yt;(function(R){R[R.ALPHA=0]="ALPHA",R[R.LOWER=1]="LOWER",R[R.MIXED=2]="MIXED",R[R.PUNCT=3]="PUNCT",R[R.ALPHA_SHIFT=4]="ALPHA_SHIFT",R[R.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(yt||(yt={}));function ss(){if(typeof window<"u")return window.BigInt||null;if(typeof Cl<"u")return Cl.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let os;function qt(R){if(typeof os>"u"&&(os=ss()),os===null)throw new Error("BigInt is not supported!");return os(R)}function Ai(){let R=[];R[0]=qt(1);let e=qt(900);R[1]=e;for(let n=2;n<16;n++)R[n]=R[n-1]*e;return R}class xe{static decode(e,n){let i=new de(""),o=pe.ISO8859_1;i.enableDecoding(o);let l=1,c=e[l++],f=new Ps;for(;l<e[0];){switch(c){case xe.TEXT_COMPACTION_MODE_LATCH:l=xe.textCompaction(e,l,i);break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:l=xe.byteCompaction(c,e,o,l,i);break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l++]);break;case xe.NUMERIC_COMPACTION_MODE_LATCH:l=xe.numericCompaction(e,l,i);break;case xe.ECI_CHARSET:pe.getCharacterSetECIByValue(e[l++]);break;case xe.ECI_GENERAL_PURPOSE:l+=2;break;case xe.ECI_USER_DEFINED:l++;break;case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:l=xe.decodeMacroBlock(e,l,f);break;case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:throw new F;default:l--,l=xe.textCompaction(e,l,i);break}if(l<e.length)c=e[l++];else throw F.getFormatInstance()}if(i.length()===0)throw F.getFormatInstance();let m=new De(null,i.toString(),null,n);return m.setOther(f),m}static decodeMacroBlock(e,n,i){if(n+xe.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw F.getFormatInstance();let o=new Int32Array(xe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let f=0;f<xe.NUMBER_OF_SEQUENCE_CODEWORDS;f++,n++)o[f]=e[n];i.setSegmentIndex(N.parseInt(xe.decodeBase900toBase10(o,xe.NUMBER_OF_SEQUENCE_CODEWORDS)));let l=new de;n=xe.textCompaction(e,n,l),i.setFileId(l.toString());let c=-1;for(e[n]===xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=n+1);n<e[0];)switch(e[n]){case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let f=new de;n=xe.textCompaction(e,n+1,f),i.setFileName(f.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new de;n=xe.textCompaction(e,n+1,m),i.setSender(m.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let w=new de;n=xe.textCompaction(e,n+1,w),i.setAddressee(w.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let j=new de;n=xe.numericCompaction(e,n+1,j),i.setSegmentCount(N.parseInt(j.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let O=new de;n=xe.numericCompaction(e,n+1,O),i.setTimestamp(To.parseLong(O.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let L=new de;n=xe.numericCompaction(e,n+1,L),i.setChecksum(N.parseInt(L.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Z=new de;n=xe.numericCompaction(e,n+1,Z),i.setFileSize(To.parseLong(Z.toString()));break;default:throw F.getFormatInstance()}break;case xe.MACRO_PDF417_TERMINATOR:n++,i.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(c!==-1){let f=n-c;i.isLastSegment()&&f--,i.setOptionalData(T.copyOfRange(e,c,c+f))}return n}static textCompaction(e,n,i){let o=new Int32Array((e[0]-n)*2),l=new Int32Array((e[0]-n)*2),c=0,f=!1;for(;n<e[0]&&!f;){let m=e[n++];if(m<xe.TEXT_COMPACTION_MODE_LATCH)o[c]=m/30,o[c+1]=m%30,c+=2;else switch(m){case xe.TEXT_COMPACTION_MODE_LATCH:o[c++]=xe.TEXT_COMPACTION_MODE_LATCH;break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:n--,f=!0;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[c]=xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=e[n++],l[c]=m,c++;break}}return xe.decodeTextCompaction(o,l,c,i),n}static decodeTextCompaction(e,n,i,o){let l=yt.ALPHA,c=yt.ALPHA,f=0;for(;f<i;){let m=e[f],w="";switch(l){case yt.ALPHA:if(m<26)w=String.fromCharCode(65+m);else switch(m){case 26:w=" ";break;case xe.LL:l=yt.LOWER;break;case xe.ML:l=yt.MIXED;break;case xe.PS:c=l,l=yt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[f]);break;case xe.TEXT_COMPACTION_MODE_LATCH:l=yt.ALPHA;break}break;case yt.LOWER:if(m<26)w=String.fromCharCode(97+m);else switch(m){case 26:w=" ";break;case xe.AS:c=l,l=yt.ALPHA_SHIFT;break;case xe.ML:l=yt.MIXED;break;case xe.PS:c=l,l=yt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[f]);break;case xe.TEXT_COMPACTION_MODE_LATCH:l=yt.ALPHA;break}break;case yt.MIXED:if(m<xe.PL)w=xe.MIXED_CHARS[m];else switch(m){case xe.PL:l=yt.PUNCT;break;case 26:w=" ";break;case xe.LL:l=yt.LOWER;break;case xe.AL:l=yt.ALPHA;break;case xe.PS:c=l,l=yt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[f]);break;case xe.TEXT_COMPACTION_MODE_LATCH:l=yt.ALPHA;break}break;case yt.PUNCT:if(m<xe.PAL)w=xe.PUNCT_CHARS[m];else switch(m){case xe.PAL:l=yt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[f]);break;case xe.TEXT_COMPACTION_MODE_LATCH:l=yt.ALPHA;break}break;case yt.ALPHA_SHIFT:if(l=c,m<26)w=String.fromCharCode(65+m);else switch(m){case 26:w=" ";break;case xe.TEXT_COMPACTION_MODE_LATCH:l=yt.ALPHA;break}break;case yt.PUNCT_SHIFT:if(l=c,m<xe.PAL)w=xe.PUNCT_CHARS[m];else switch(m){case xe.PAL:l=yt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[f]);break;case xe.TEXT_COMPACTION_MODE_LATCH:l=yt.ALPHA;break}break}w!==""&&o.append(w),f++}}static byteCompaction(e,n,i,o,l){let c=new Aa,f=0,m=0,w=!1;switch(e){case xe.BYTE_COMPACTION_MODE_LATCH:let j=new Int32Array(6),O=n[o++];for(;o<n[0]&&!w;)switch(j[f++]=O,m=900*m+O,O=n[o++],O){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:o--,w=!0;break;default:if(f%5===0&&f>0){for(let L=0;L<6;++L)c.write(Number(qt(m)>>qt(8*(5-L))));m=0,f=0}break}o===n[0]&&O<xe.TEXT_COMPACTION_MODE_LATCH&&(j[f++]=O);for(let L=0;L<f;L++)c.write(j[L]);break;case xe.BYTE_COMPACTION_MODE_LATCH_6:for(;o<n[0]&&!w;){let L=n[o++];if(L<xe.TEXT_COMPACTION_MODE_LATCH)f++,m=900*m+L;else switch(L){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:o--,w=!0;break}if(f%5===0&&f>0){for(let Z=0;Z<6;++Z)c.write(Number(qt(m)>>qt(8*(5-Z))));m=0,f=0}}break}return l.append(be.decode(c.toByteArray(),i)),o}static numericCompaction(e,n,i){let o=0,l=!1,c=new Int32Array(xe.MAX_NUMERIC_CODEWORDS);for(;n<e[0]&&!l;){let f=e[n++];if(n===e[0]&&(l=!0),f<xe.TEXT_COMPACTION_MODE_LATCH)c[o]=f,o++;else switch(f){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:n--,l=!0;break}(o%xe.MAX_NUMERIC_CODEWORDS===0||f===xe.NUMERIC_COMPACTION_MODE_LATCH||l)&&o>0&&(i.append(xe.decodeBase900toBase10(c,o)),o=0)}return n}static decodeBase900toBase10(e,n){let i=qt(0);for(let l=0;l<n;l++)i+=xe.EXP900[n-l-1]*qt(e[l]);let o=i.toString();if(o.charAt(0)!=="1")throw new F;return o.substring(1)}}xe.TEXT_COMPACTION_MODE_LATCH=900,xe.BYTE_COMPACTION_MODE_LATCH=901,xe.NUMERIC_COMPACTION_MODE_LATCH=902,xe.BYTE_COMPACTION_MODE_LATCH_6=924,xe.ECI_USER_DEFINED=925,xe.ECI_GENERAL_PURPOSE=926,xe.ECI_CHARSET=927,xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,xe.MACRO_PDF417_TERMINATOR=922,xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,xe.MAX_NUMERIC_CODEWORDS=15,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,xe.PL=25,xe.LL=27,xe.AS=27,xe.ML=28,xe.AL=28,xe.PS=29,xe.PAL=29,xe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,xe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",xe.EXP900=ss()?Ai():[],xe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class at{constructor(){}static decode(e,n,i,o,l,c,f){let m=new Jr(e,n,i,o,l),w=null,j=null,O;for(let ee=!0;;ee=!1){if(n!=null&&(w=at.getRowIndicatorColumn(e,m,n,!0,c,f)),o!=null&&(j=at.getRowIndicatorColumn(e,m,o,!1,c,f)),O=at.merge(w,j),O==null)throw Y.getNotFoundInstance();let re=O.getBoundingBox();if(ee&&re!=null&&(re.getMinY()<m.getMinY()||re.getMaxY()>m.getMaxY()))m=re;else break}O.setBoundingBox(m);let L=O.getBarcodeColumnCount()+1;O.setDetectionResultColumn(0,w),O.setDetectionResultColumn(L,j);let Z=w!=null;for(let ee=1;ee<=L;ee++){let re=Z?ee:L-ee;if(O.getDetectionResultColumn(re)!==void 0)continue;let ae;re===0||re===L?ae=new Ea(m,re===0):ae=new wr(m),O.setDetectionResultColumn(re,ae);let me=-1,Te=me;for(let _e=m.getMinY();_e<=m.getMaxY();_e++){if(me=at.getStartColumn(O,re,_e,Z),me<0||me>m.getMaxX()){if(Te===-1)continue;me=Te}let Ie=at.detectCodeword(e,m.getMinX(),m.getMaxX(),Z,me,_e,c,f);Ie!=null&&(ae.setCodeword(_e,Ie),Te=me,c=Math.min(c,Ie.getWidth()),f=Math.max(f,Ie.getWidth()))}}return at.createDecoderResult(O)}static merge(e,n){if(e==null&&n==null)return null;let i=at.getBarcodeMetadata(e,n);if(i==null)return null;let o=Jr.merge(at.adjustBoundingBox(e),at.adjustBoundingBox(n));return new is(i,o)}static adjustBoundingBox(e){if(e==null)return null;let n=e.getRowHeights();if(n==null)return null;let i=at.getMax(n),o=0;for(let f of n)if(o+=i-f,f>0)break;let l=e.getCodewords();for(let f=0;o>0&&l[f]==null;f++)o--;let c=0;for(let f=n.length-1;f>=0&&(c+=i-n[f],!(n[f]>0));f--);for(let f=l.length-1;c>0&&l[f]==null;f--)c--;return e.getBoundingBox().addMissingRows(o,c,e.isLeft())}static getMax(e){let n=-1;for(let i of e)n=Math.max(n,i);return n}static getBarcodeMetadata(e,n){let i;if(e==null||(i=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();let o;return n==null||(o=n.getBarcodeMetadata())==null?i:i.getColumnCount()!==o.getColumnCount()&&i.getErrorCorrectionLevel()!==o.getErrorCorrectionLevel()&&i.getRowCount()!==o.getRowCount()?null:i}static getRowIndicatorColumn(e,n,i,o,l,c){let f=new Ea(n,o);for(let m=0;m<2;m++){let w=m===0?1:-1,j=Math.trunc(Math.trunc(i.getX()));for(let O=Math.trunc(Math.trunc(i.getY()));O<=n.getMaxY()&&O>=n.getMinY();O+=w){let L=at.detectCodeword(e,0,e.getWidth(),o,j,O,l,c);L!=null&&(f.setCodeword(O,L),o?j=L.getStartX():j=L.getEndX())}}return f}static adjustCodewordCount(e,n){let i=n[0][1],o=i.getValue(),l=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-at.getNumberOfECCodeWords(e.getBarcodeECLevel());if(o.length===0){if(l<1||l>tt.MAX_CODEWORDS_IN_BARCODE)throw Y.getNotFoundInstance();i.setValue(l)}else o[0]!==l&&i.setValue(l)}static createDecoderResult(e){let n=at.createBarcodeMatrix(e);at.adjustCodewordCount(e,n);let i=new Array,o=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),l=[],c=new Array;for(let m=0;m<e.getBarcodeRowCount();m++)for(let w=0;w<e.getBarcodeColumnCount();w++){let j=n[m][w+1].getValue(),O=m*e.getBarcodeColumnCount()+w;j.length===0?i.push(O):j.length===1?o[O]=j[0]:(c.push(O),l.push(j))}let f=new Array(l.length);for(let m=0;m<f.length;m++)f[m]=l[m];return at.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),o,tt.toIntArray(i),tt.toIntArray(c),f)}static createDecoderResultFromAmbiguousValues(e,n,i,o,l){let c=new Int32Array(o.length),f=100;for(;f-- >0;){for(let m=0;m<c.length;m++)n[o[m]]=l[m][c[m]];try{return at.decodeCodewords(n,e,i)}catch(m){if(!(m instanceof V))throw m}if(c.length===0)throw V.getChecksumInstance();for(let m=0;m<c.length;m++)if(c[m]<l[m].length-1){c[m]++;break}else if(c[m]=0,m===c.length-1)throw V.getChecksumInstance()}throw V.getChecksumInstance()}static createBarcodeMatrix(e){let n=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let o=0;o<n.length;o++)for(let l=0;l<n[o].length;l++)n[o][l]=new Gr;let i=0;for(let o of e.getDetectionResultColumns()){if(o!=null){for(let l of o.getCodewords())if(l!=null){let c=l.getRowNumber();if(c>=0){if(c>=n.length)continue;n[c][i].setValue(l.getValue())}}}i++}return n}static isValidBarcodeColumn(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1}static getStartColumn(e,n,i,o){let l=o?1:-1,c=null;if(at.isValidBarcodeColumn(e,n-l)&&(c=e.getDetectionResultColumn(n-l).getCodeword(i)),c!=null)return o?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(n).getCodewordNearby(i),c!=null)return o?c.getStartX():c.getEndX();if(at.isValidBarcodeColumn(e,n-l)&&(c=e.getDetectionResultColumn(n-l).getCodewordNearby(i)),c!=null)return o?c.getEndX():c.getStartX();let f=0;for(;at.isValidBarcodeColumn(e,n-l);){n-=l;for(let m of e.getDetectionResultColumn(n).getCodewords())if(m!=null)return(o?m.getEndX():m.getStartX())+l*f*(m.getEndX()-m.getStartX());f++}return o?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,n,i,o,l,c,f,m){l=at.adjustCodewordStartColumn(e,n,i,o,l,c);let w=at.getModuleBitCount(e,n,i,o,l,c);if(w==null)return null;let j,O=ot.sum(w);if(o)j=l+O;else{for(let ee=0;ee<w.length/2;ee++){let re=w[ee];w[ee]=w[w.length-1-ee],w[w.length-1-ee]=re}j=l,l=j-O}if(!at.checkCodewordSkew(O,f,m))return null;let L=pn.getDecodedValue(w),Z=tt.getCodeword(L);return Z===-1?null:new ei(l,j,at.getCodewordBucketNumber(L),Z)}static getModuleBitCount(e,n,i,o,l,c){let f=l,m=new Int32Array(8),w=0,j=o?1:-1,O=o;for(;(o?f<i:f>=n)&&w<m.length;)e.get(f,c)===O?(m[w]++,f+=j):(w++,O=!O);return w===m.length||f===(o?i:n)&&w===m.length-1?m:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,n,i,o,l,c){let f=l,m=o?-1:1;for(let w=0;w<2;w++){for(;(o?f>=n:f<i)&&o===e.get(f,c);){if(Math.abs(l-f)>at.CODEWORD_SKEW_SIZE)return l;f+=m}m=-m,o=!o}return f}static checkCodewordSkew(e,n,i){return n-at.CODEWORD_SKEW_SIZE<=e&&e<=i+at.CODEWORD_SKEW_SIZE}static decodeCodewords(e,n,i){if(e.length===0)throw F.getFormatInstance();let o=1<<n+1,l=at.correctErrors(e,i,o);at.verifyCodewordCount(e,o);let c=xe.decode(e,""+n);return c.setErrorsCorrected(l),c.setErasures(i.length),c}static correctErrors(e,n,i){if(n!=null&&n.length>i/2+at.MAX_ERRORS||i<0||i>at.MAX_EC_CODEWORDS)throw V.getChecksumInstance();return at.errorCorrection.decode(e,i,n)}static verifyCodewordCount(e,n){if(e.length<4)throw F.getFormatInstance();let i=e[0];if(i>e.length)throw F.getFormatInstance();if(i===0)if(n<e.length)e[0]=e.length-n;else throw F.getFormatInstance()}static getBitCountForCodeword(e){let n=new Int32Array(8),i=0,o=n.length-1;for(;!((e&1)!==i&&(i=e&1,o--,o<0));)n[o]++,e>>=1;return n}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return at.getCodewordBucketNumber(at.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let n=new Or;for(let i=0;i<e.length;i++){n.format("Row %2d: ",i);for(let o=0;o<e[i].length;o++){let l=e[i][o];l.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",l.getValue()[0],l.getConfidence(l.getValue()[0]))}n.format("%n")}return n.toString()}}at.CODEWORD_SKEW_SIZE=2,at.MAX_ERRORS=3,at.MAX_EC_CODEWORDS=512,at.errorCorrection=new No;class gn{decode(e,n=null){let i=gn.decode(e,n,!1);if(i==null||i.length===0||i[0]==null)throw Y.getNotFoundInstance();return i[0]}decodeMultiple(e,n=null){try{return gn.decode(e,n,!0)}catch(i){throw i instanceof F||i instanceof V?Y.getNotFoundInstance():i}}static decode(e,n,i){const o=new Array,l=rt.detectMultiple(e,n,i);for(const c of l.getPoints()){const f=at.decode(l.getBits(),c[4],c[5],c[6],c[7],gn.getMinCodewordWidth(c),gn.getMaxCodewordWidth(c)),m=new le(f.getText(),f.getRawBytes(),void 0,c,ve.PDF_417);m.putMetadata(fe.ERROR_CORRECTION_LEVEL,f.getECLevel());const w=f.getOther();w!=null&&m.putMetadata(fe.PDF417_EXTRA_METADATA,w),o.push(m)}return o.map(c=>c)}static getMaxWidth(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMinWidth(e,n){return e==null||n==null?N.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(gn.getMaxWidth(e[0],e[4]),gn.getMaxWidth(e[6],e[2])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN),Math.max(gn.getMaxWidth(e[1],e[5]),gn.getMaxWidth(e[7],e[3])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(gn.getMinWidth(e[0],e[4]),gn.getMinWidth(e[6],e[2])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN),Math.min(gn.getMinWidth(e[1],e[5]),gn.getMinWidth(e[7],e[3])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ii extends v{}Ii.kind="ReaderException";class Bs{constructor(e,n){this.verbose=e===!0,n&&this.setHints(n)}decode(e,n){return n&&this.setHints(n),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!g(e)&&e.get(q.TRY_HARDER)===!0,i=g(e)?null:e.get(q.POSSIBLE_FORMATS),o=new Array;if(!g(i)){const l=i.some(c=>c===ve.UPC_A||c===ve.UPC_E||c===ve.EAN_13||c===ve.EAN_8||c===ve.CODABAR||c===ve.CODE_39||c===ve.CODE_93||c===ve.CODE_128||c===ve.ITF||c===ve.RSS_14||c===ve.RSS_EXPANDED);l&&!n&&o.push(new bi(e,this.verbose)),i.includes(ve.QR_CODE)&&o.push(new jn),i.includes(ve.DATA_MATRIX)&&o.push(new cr),i.includes(ve.AZTEC)&&o.push(new qn),i.includes(ve.PDF_417)&&o.push(new gn),l&&n&&o.push(new bi(e,this.verbose))}o.length===0&&(n||o.push(new bi(e,this.verbose)),o.push(new jn),o.push(new cr),o.push(new qn),o.push(new gn),n&&o.push(new bi(e,this.verbose))),this.readers=o}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Ii("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(i){if(i instanceof Ii)continue}throw new Y("No MultiFormat Readers were able to detect the code.")}}class as extends Ee{constructor(e=null,n=500){const i=new Bs;i.setHints(e),super(i,n)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class Ls extends Ee{constructor(e=500){super(new gn,e)}}class Ia extends Ee{constructor(e=500){super(new jn,e)}}var Ro;(function(R){R[R.ERROR_CORRECTION=0]="ERROR_CORRECTION",R[R.CHARACTER_SET=1]="CHARACTER_SET",R[R.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",R[R.MIN_SIZE=3]="MIN_SIZE",R[R.MAX_SIZE=4]="MAX_SIZE",R[R.MARGIN=5]="MARGIN",R[R.PDF417_COMPACT=6]="PDF417_COMPACT",R[R.PDF417_COMPACTION=7]="PDF417_COMPACTION",R[R.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",R[R.AZTEC_LAYERS=9]="AZTEC_LAYERS",R[R.QR_VERSION=10]="QR_VERSION"})(Ro||(Ro={}));var rn=Ro;class Oo{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Ge(e,Int32Array.from([1])))}buildGenerator(e){const n=this.cachedGenerators;if(e>=n.length){let i=n[n.length-1];const o=this.field;for(let l=n.length;l<=e;l++){const c=i.multiply(new Ge(o,Int32Array.from([1,o.exp(l-1+o.getGeneratorBase())])));n.push(c),i=c}}return n[e]}encode(e,n){if(n===0)throw new k("No error correction bytes");const i=e.length-n;if(i<=0)throw new k("No data bytes provided");const o=this.buildGenerator(n),l=new Int32Array(i);W.arraycopy(e,0,l,0,i);let c=new Ge(this.field,l);c=c.multiplyByMonomial(n,1);const m=c.divide(o)[1].getCoefficients(),w=n-m.length;for(let j=0;j<w;j++)e[i+j]=0;W.arraycopy(m,0,e,i+w,m.length)}}class Dt{constructor(){}static applyMaskPenaltyRule1(e){return Dt.applyMaskPenaltyRule1Internal(e,!0)+Dt.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let n=0;const i=e.getArray(),o=e.getWidth(),l=e.getHeight();for(let c=0;c<l-1;c++){const f=i[c];for(let m=0;m<o-1;m++){const w=f[m];w===f[m+1]&&w===i[c+1][m]&&w===i[c+1][m+1]&&n++}}return Dt.N2*n}static applyMaskPenaltyRule3(e){let n=0;const i=e.getArray(),o=e.getWidth(),l=e.getHeight();for(let c=0;c<l;c++)for(let f=0;f<o;f++){const m=i[c];f+6<o&&m[f]===1&&m[f+1]===0&&m[f+2]===1&&m[f+3]===1&&m[f+4]===1&&m[f+5]===0&&m[f+6]===1&&(Dt.isWhiteHorizontal(m,f-4,f)||Dt.isWhiteHorizontal(m,f+7,f+11))&&n++,c+6<l&&i[c][f]===1&&i[c+1][f]===0&&i[c+2][f]===1&&i[c+3][f]===1&&i[c+4][f]===1&&i[c+5][f]===0&&i[c+6][f]===1&&(Dt.isWhiteVertical(i,f,c-4,c)||Dt.isWhiteVertical(i,f,c+7,c+11))&&n++}return n*Dt.N3}static isWhiteHorizontal(e,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(let o=n;o<i;o++)if(e[o]===1)return!1;return!0}static isWhiteVertical(e,n,i,o){i=Math.max(i,0),o=Math.min(o,e.length);for(let l=i;l<o;l++)if(e[l][n]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let n=0;const i=e.getArray(),o=e.getWidth(),l=e.getHeight();for(let m=0;m<l;m++){const w=i[m];for(let j=0;j<o;j++)w[j]===1&&n++}const c=e.getHeight()*e.getWidth();return Math.floor(Math.abs(n*2-c)*10/c)*Dt.N4}static getDataMaskBit(e,n,i){let o,l;switch(e){case 0:o=i+n&1;break;case 1:o=i&1;break;case 2:o=n%3;break;case 3:o=(i+n)%3;break;case 4:o=Math.floor(i/2)+Math.floor(n/3)&1;break;case 5:l=i*n,o=(l&1)+l%3;break;case 6:l=i*n,o=(l&1)+l%3&1;break;case 7:l=i*n,o=l%3+(i+n&1)&1;break;default:throw new k("Invalid mask pattern: "+e)}return o===0}static applyMaskPenaltyRule1Internal(e,n){let i=0;const o=n?e.getHeight():e.getWidth(),l=n?e.getWidth():e.getHeight(),c=e.getArray();for(let f=0;f<o;f++){let m=0,w=-1;for(let j=0;j<l;j++){const O=n?c[f][j]:c[j][f];O===w?m++:(m>=5&&(i+=Dt.N1+(m-5)),m=1,w=O)}m>=5&&(i+=Dt.N1+(m-5))}return i}}Dt.N1=3,Dt.N2=3,Dt.N3=40,Dt.N4=10;class zs{constructor(e,n){this.width=e,this.height=n;const i=new Array(n);for(let o=0;o!==n;o++)i[o]=new Uint8Array(e);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(e,n){return this.bytes[n][e]}getArray(){return this.bytes}setNumber(e,n,i){this.bytes[n][e]=i}setBoolean(e,n,i){this.bytes[n][e]=i?1:0}clear(e){for(const n of this.bytes)T.fill(n,e)}equals(e){if(!(e instanceof zs))return!1;const n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(let i=0,o=this.height;i<o;++i){const l=this.bytes[i],c=n.bytes[i];for(let f=0,m=this.width;f<m;++f)if(l[f]!==c[f])return!1}return!0}toString(){const e=new de;for(let n=0,i=this.height;n<i;++n){const o=this.bytes[n];for(let l=0,c=this.width;l<c;++l)switch(o[l]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class ti{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new de;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<ti.NUM_MASK_PATTERNS}}ti.NUM_MASK_PATTERNS=8;class jt extends v{}jt.kind="WriterException";class Ke{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,n,i,o,l){Ke.clearMatrix(l),Ke.embedBasicPatterns(i,l),Ke.embedTypeInfo(n,o,l),Ke.maybeEmbedVersionInfo(i,l),Ke.embedDataBits(e,o,l)}static embedBasicPatterns(e,n){Ke.embedPositionDetectionPatternsAndSeparators(n),Ke.embedDarkDotAtLeftBottomCorner(n),Ke.maybeEmbedPositionAdjustmentPatterns(e,n),Ke.embedTimingPatterns(n)}static embedTypeInfo(e,n,i){const o=new P;Ke.makeTypeInfoBits(e,n,o);for(let l=0,c=o.getSize();l<c;++l){const f=o.get(o.getSize()-1-l),m=Ke.TYPE_INFO_COORDINATES[l],w=m[0],j=m[1];if(i.setBoolean(w,j,f),l<8){const O=i.getWidth()-l-1;i.setBoolean(O,8,f)}else{const L=i.getHeight()-7+(l-8);i.setBoolean(8,L,f)}}}static maybeEmbedVersionInfo(e,n){if(e.getVersionNumber()<7)return;const i=new P;Ke.makeVersionInfoBits(e,i);let o=17;for(let l=0;l<6;++l)for(let c=0;c<3;++c){const f=i.get(o);o--,n.setBoolean(l,n.getHeight()-11+c,f),n.setBoolean(n.getHeight()-11+c,l,f)}}static embedDataBits(e,n,i){let o=0,l=-1,c=i.getWidth()-1,f=i.getHeight()-1;for(;c>0;){for(c===6&&(c-=1);f>=0&&f<i.getHeight();){for(let m=0;m<2;++m){const w=c-m;if(!Ke.isEmpty(i.get(w,f)))continue;let j;o<e.getSize()?(j=e.get(o),++o):j=!1,n!==255&&Dt.getDataMaskBit(n,w,f)&&(j=!j),i.setBoolean(w,f,j)}f+=l}l=-l,f+=l,c-=2}if(o!==e.getSize())throw new jt("Not all bits consumed: "+o+"/"+e.getSize())}static findMSBSet(e){return 32-N.numberOfLeadingZeros(e)}static calculateBCHCode(e,n){if(n===0)throw new k("0 polynomial");const i=Ke.findMSBSet(n);for(e<<=i-1;Ke.findMSBSet(e)>=i;)e^=n<<Ke.findMSBSet(e)-i;return e}static makeTypeInfoBits(e,n,i){if(!ti.isValidMaskPattern(n))throw new jt("Invalid mask pattern");const o=e.getBits()<<3|n;i.appendBits(o,5);const l=Ke.calculateBCHCode(o,Ke.TYPE_INFO_POLY);i.appendBits(l,10);const c=new P;if(c.appendBits(Ke.TYPE_INFO_MASK_PATTERN,15),i.xor(c),i.getSize()!==15)throw new jt("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(e,n){n.appendBits(e.getVersionNumber(),6);const i=Ke.calculateBCHCode(e.getVersionNumber(),Ke.VERSION_INFO_POLY);if(n.appendBits(i,12),n.getSize()!==18)throw new jt("should not happen but we got: "+n.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let n=8;n<e.getWidth()-8;++n){const i=(n+1)%2;Ke.isEmpty(e.get(n,6))&&e.setNumber(n,6,i),Ke.isEmpty(e.get(6,n))&&e.setNumber(6,n,i)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new jt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,n,i){for(let o=0;o<8;++o){if(!Ke.isEmpty(i.get(e+o,n)))throw new jt;i.setNumber(e+o,n,0)}}static embedVerticalSeparationPattern(e,n,i){for(let o=0;o<7;++o){if(!Ke.isEmpty(i.get(e,n+o)))throw new jt;i.setNumber(e,n+o,0)}}static embedPositionAdjustmentPattern(e,n,i){for(let o=0;o<5;++o){const l=Ke.POSITION_ADJUSTMENT_PATTERN[o];for(let c=0;c<5;++c)i.setNumber(e+c,n+o,l[c])}}static embedPositionDetectionPattern(e,n,i){for(let o=0;o<7;++o){const l=Ke.POSITION_DETECTION_PATTERN[o];for(let c=0;c<7;++c)i.setNumber(e+c,n+o,l[c])}}static embedPositionDetectionPatternsAndSeparators(e){const n=Ke.POSITION_DETECTION_PATTERN[0].length;Ke.embedPositionDetectionPattern(0,0,e),Ke.embedPositionDetectionPattern(e.getWidth()-n,0,e),Ke.embedPositionDetectionPattern(0,e.getWidth()-n,e);const i=8;Ke.embedHorizontalSeparationPattern(0,i-1,e),Ke.embedHorizontalSeparationPattern(e.getWidth()-i,i-1,e),Ke.embedHorizontalSeparationPattern(0,e.getWidth()-i,e);const o=7;Ke.embedVerticalSeparationPattern(o,0,e),Ke.embedVerticalSeparationPattern(e.getHeight()-o-1,0,e),Ke.embedVerticalSeparationPattern(o,e.getHeight()-o,e)}static maybeEmbedPositionAdjustmentPatterns(e,n){if(e.getVersionNumber()<2)return;const i=e.getVersionNumber()-1,o=Ke.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let l=0,c=o.length;l!==c;l++){const f=o[l];if(f>=0)for(let m=0;m!==c;m++){const w=o[m];w>=0&&Ke.isEmpty(n.get(w,f))&&Ke.embedPositionAdjustmentPattern(w-2,f-2,n)}}}}Ke.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ke.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ke.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ke.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ke.VERSION_INFO_POLY=7973,Ke.TYPE_INFO_POLY=1335,Ke.TYPE_INFO_MASK_PATTERN=21522;class Ul{constructor(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class kt{constructor(){}static calculateMaskPenalty(e){return Dt.applyMaskPenaltyRule1(e)+Dt.applyMaskPenaltyRule2(e)+Dt.applyMaskPenaltyRule3(e)+Dt.applyMaskPenaltyRule4(e)}static encode(e,n,i=null){let o=kt.DEFAULT_BYTE_MODE_ENCODING;const l=i!==null&&i.get(rn.CHARACTER_SET)!==void 0;l&&(o=i.get(rn.CHARACTER_SET).toString());const c=this.chooseMode(e,o),f=new P;if(c===qe.BYTE&&(l||kt.DEFAULT_BYTE_MODE_ENCODING!==o)){const _e=pe.getCharacterSetECIByName(o);_e!==void 0&&this.appendECI(_e,f)}this.appendModeInfo(c,f);const m=new P;this.appendBytes(e,c,m,o);let w;if(i!==null&&i.get(rn.QR_VERSION)!==void 0){const _e=Number.parseInt(i.get(rn.QR_VERSION).toString(),10);w=Ze.getVersionForNumber(_e);const Ie=this.calculateBitsNeeded(c,f,m,w);if(!this.willFit(Ie,w,n))throw new jt("Data too big for requested version")}else w=this.recommendVersion(n,c,f,m);const j=new P;j.appendBitArray(f);const O=c===qe.BYTE?m.getSizeInBytes():e.length;this.appendLengthInfo(O,w,c,j),j.appendBitArray(m);const L=w.getECBlocksForLevel(n),Z=w.getTotalCodewords()-L.getTotalECCodewords();this.terminateBits(Z,j);const ee=this.interleaveWithECBytes(j,w.getTotalCodewords(),Z,L.getNumBlocks()),re=new ti;re.setECLevel(n),re.setMode(c),re.setVersion(w);const ae=w.getDimensionForVersion(),me=new zs(ae,ae),Te=this.chooseMaskPattern(ee,n,w,me);return re.setMaskPattern(Te),Ke.buildMatrix(ee,n,w,Te,me),re.setMatrix(me),re}static recommendVersion(e,n,i,o){const l=this.calculateBitsNeeded(n,i,o,Ze.getVersionForNumber(1)),c=this.chooseVersion(l,e),f=this.calculateBitsNeeded(n,i,o,c);return this.chooseVersion(f,e)}static calculateBitsNeeded(e,n,i,o){return n.getSize()+e.getCharacterCountBits(o)+i.getSize()}static getAlphanumericCode(e){return e<kt.ALPHANUMERIC_TABLE.length?kt.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,n=null){if(pe.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return qe.KANJI;let i=!1,o=!1;for(let l=0,c=e.length;l<c;++l){const f=e.charAt(l);if(kt.isDigit(f))i=!0;else if(this.getAlphanumericCode(f.charCodeAt(0))!==-1)o=!0;else return qe.BYTE}return o?qe.ALPHANUMERIC:i?qe.NUMERIC:qe.BYTE}static isOnlyDoubleByteKanji(e){let n;try{n=be.encode(e,pe.SJIS)}catch{return!1}const i=n.length;if(i%2!==0)return!1;for(let o=0;o<i;o+=2){const l=n[o]&255;if((l<129||l>159)&&(l<224||l>235))return!1}return!0}static chooseMaskPattern(e,n,i,o){let l=Number.MAX_SAFE_INTEGER,c=-1;for(let f=0;f<ti.NUM_MASK_PATTERNS;f++){Ke.buildMatrix(e,n,i,f,o);let m=this.calculateMaskPenalty(o);m<l&&(l=m,c=f)}return c}static chooseVersion(e,n){for(let i=1;i<=40;i++){const o=Ze.getVersionForNumber(i);if(kt.willFit(e,o,n))return o}throw new jt("Data too big")}static willFit(e,n,i){const o=n.getTotalCodewords(),c=n.getECBlocksForLevel(i).getTotalECCodewords(),f=o-c,m=(e+7)/8;return f>=m}static terminateBits(e,n){const i=e*8;if(n.getSize()>i)throw new jt("data bits cannot fit in the QR Code"+n.getSize()+" > "+i);for(let c=0;c<4&&n.getSize()<i;++c)n.appendBit(!1);const o=n.getSize()&7;if(o>0)for(let c=o;c<8;c++)n.appendBit(!1);const l=e-n.getSizeInBytes();for(let c=0;c<l;++c)n.appendBits((c&1)===0?236:17,8);if(n.getSize()!==i)throw new jt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,n,i,o,l,c){if(o>=i)throw new jt("Block ID too large");const f=e%i,m=i-f,w=Math.floor(e/i),j=w+1,O=Math.floor(n/i),L=O+1,Z=w-O,ee=j-L;if(Z!==ee)throw new jt("EC bytes mismatch");if(i!==m+f)throw new jt("RS blocks mismatch");if(e!==(O+Z)*m+(L+ee)*f)throw new jt("Total bytes mismatch");o<m?(l[0]=O,c[0]=Z):(l[0]=L,c[0]=ee)}static interleaveWithECBytes(e,n,i,o){if(e.getSizeInBytes()!==i)throw new jt("Number of bits and data bytes does not match");let l=0,c=0,f=0;const m=new Array;for(let j=0;j<o;++j){const O=new Int32Array(1),L=new Int32Array(1);kt.getNumDataBytesAndNumECBytesForBlockID(n,i,o,j,O,L);const Z=O[0],ee=new Uint8Array(Z);e.toBytes(8*l,ee,0,Z);const re=kt.generateECBytes(ee,L[0]);m.push(new Ul(ee,re)),c=Math.max(c,Z),f=Math.max(f,re.length),l+=O[0]}if(i!==l)throw new jt("Data bytes does not match offset");const w=new P;for(let j=0;j<c;++j)for(const O of m){const L=O.getDataBytes();j<L.length&&w.appendBits(L[j],8)}for(let j=0;j<f;++j)for(const O of m){const L=O.getErrorCorrectionBytes();j<L.length&&w.appendBits(L[j],8)}if(n!==w.getSizeInBytes())throw new jt("Interleaving error: "+n+" and "+w.getSizeInBytes()+" differ.");return w}static generateECBytes(e,n){const i=e.length,o=new Int32Array(i+n);for(let c=0;c<i;c++)o[c]=e[c]&255;new Oo(We.QR_CODE_FIELD_256).encode(o,n);const l=new Uint8Array(n);for(let c=0;c<n;c++)l[c]=o[i+c];return l}static appendModeInfo(e,n){n.appendBits(e.getBits(),4)}static appendLengthInfo(e,n,i,o){const l=i.getCharacterCountBits(n);if(e>=1<<l)throw new jt(e+" is bigger than "+((1<<l)-1));o.appendBits(e,l)}static appendBytes(e,n,i,o){switch(n){case qe.NUMERIC:kt.appendNumericBytes(e,i);break;case qe.ALPHANUMERIC:kt.appendAlphanumericBytes(e,i);break;case qe.BYTE:kt.append8BitBytes(e,i,o);break;case qe.KANJI:kt.appendKanjiBytes(e,i);break;default:throw new jt("Invalid mode: "+n)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const n=kt.getDigit(e);return n>=0&&n<=9}static appendNumericBytes(e,n){const i=e.length;let o=0;for(;o<i;){const l=kt.getDigit(e.charAt(o));if(o+2<i){const c=kt.getDigit(e.charAt(o+1)),f=kt.getDigit(e.charAt(o+2));n.appendBits(l*100+c*10+f,10),o+=3}else if(o+1<i){const c=kt.getDigit(e.charAt(o+1));n.appendBits(l*10+c,7),o+=2}else n.appendBits(l,4),o++}}static appendAlphanumericBytes(e,n){const i=e.length;let o=0;for(;o<i;){const l=kt.getAlphanumericCode(e.charCodeAt(o));if(l===-1)throw new jt;if(o+1<i){const c=kt.getAlphanumericCode(e.charCodeAt(o+1));if(c===-1)throw new jt;n.appendBits(l*45+c,11),o+=2}else n.appendBits(l,6),o++}}static append8BitBytes(e,n,i){let o;try{o=be.encode(e,i)}catch(l){throw new jt(l)}for(let l=0,c=o.length;l!==c;l++){const f=o[l];n.appendBits(f,8)}}static appendKanjiBytes(e,n){let i;try{i=be.encode(e,pe.SJIS)}catch(l){throw new jt(l)}const o=i.length;for(let l=0;l<o;l+=2){const c=i[l]&255,f=i[l+1]&255,m=c<<8&4294967295|f;let w=-1;if(m>=33088&&m<=40956?w=m-33088:m>=57408&&m<=60351&&(w=m-49472),w===-1)throw new jt("Invalid byte sequence");const j=(w>>8)*192+(w&255);n.appendBits(j,13)}}static appendECI(e,n){n.appendBits(qe.ECI.getBits(),4),n.appendBits(e.getValue(),8)}}kt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),kt.DEFAULT_BYTE_MODE_ENCODING=pe.UTF8.getName();class ni{write(e,n,i,o=null){if(e.length===0)throw new k("Found empty contents");if(n<0||i<0)throw new k("Requested dimensions are too small: "+n+"x"+i);let l=At.L,c=ni.QUIET_ZONE_SIZE;o!==null&&(o.get(rn.ERROR_CORRECTION)!==void 0&&(l=At.fromString(o.get(rn.ERROR_CORRECTION).toString())),o.get(rn.MARGIN)!==void 0&&(c=Number.parseInt(o.get(rn.MARGIN).toString(),10)));const f=kt.encode(e,l,o);return this.renderResult(f,n,i,c)}writeToDom(e,n,i,o,l=null){typeof e=="string"&&(e=document.querySelector(e));const c=this.write(n,i,o,l);e&&e.appendChild(c)}renderResult(e,n,i,o){const l=e.getMatrix();if(l===null)throw new St;const c=l.getWidth(),f=l.getHeight(),m=c+o*2,w=f+o*2,j=Math.max(n,m),O=Math.max(i,w),L=Math.min(Math.floor(j/m),Math.floor(O/w)),Z=Math.floor((j-c*L)/2),ee=Math.floor((O-f*L)/2),re=this.createSVGElement(j,O);for(let ae=0,me=ee;ae<f;ae++,me+=L)for(let Te=0,_e=Z;Te<c;Te++,_e+=L)if(l.get(Te,ae)===1){const Ie=this.createSvgRectElement(_e,me,L,L);re.appendChild(Ie)}return re}createSVGElement(e,n){const i=document.createElementNS(ni.SVG_NS,"svg");return i.setAttributeNS(null,"height",e.toString()),i.setAttributeNS(null,"width",n.toString()),i}createSvgRectElement(e,n,i,o){const l=document.createElementNS(ni.SVG_NS,"rect");return l.setAttributeNS(null,"x",e.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",o.toString()),l.setAttributeNS(null,"fill","#000000"),l}}ni.QUIET_ZONE_SIZE=4,ni.SVG_NS="http://www.w3.org/2000/svg";class ji{encode(e,n,i,o,l){if(e.length===0)throw new k("Found empty contents");if(n!==ve.QR_CODE)throw new k("Can only encode QR_CODE, but got "+n);if(i<0||o<0)throw new k(`Requested dimensions are too small: ${i}x${o}`);let c=At.L,f=ji.QUIET_ZONE_SIZE;l!==null&&(l.get(rn.ERROR_CORRECTION)!==void 0&&(c=At.fromString(l.get(rn.ERROR_CORRECTION).toString())),l.get(rn.MARGIN)!==void 0&&(f=Number.parseInt(l.get(rn.MARGIN).toString(),10)));const m=kt.encode(e,c,l);return ji.renderResult(m,i,o,f)}static renderResult(e,n,i,o){const l=e.getMatrix();if(l===null)throw new St;const c=l.getWidth(),f=l.getHeight(),m=c+o*2,w=f+o*2,j=Math.max(n,m),O=Math.max(i,w),L=Math.min(Math.floor(j/m),Math.floor(O/w)),Z=Math.floor((j-c*L)/2),ee=Math.floor((O-f*L)/2),re=new te(j,O);for(let ae=0,me=ee;ae<f;ae++,me+=L)for(let Te=0,_e=Z;Te<c;Te++,_e+=L)l.get(Te,ae)===1&&re.setRegion(_e,me,L,L);return re}}ji.QUIET_ZONE_SIZE=4;class Vl{encode(e,n,i,o,l){let c;if(n===ve.QR_CODE)c=new ji;else throw new k("No encoder available for format "+n);return c.encode(e,n,i,o,l)}}class br extends ce{constructor(e,n,i,o,l,c,f,m){if(super(c,f),this.yuvData=e,this.dataWidth=n,this.dataHeight=i,this.left=o,this.top=l,o+c>n||l+f>i)throw new k("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(c,f)}getRow(e,n){if(e<0||e>=this.getHeight())throw new k("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const o=(e+this.top)*this.dataWidth+this.left;return W.arraycopy(this.yuvData,o,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.yuvData;const i=e*n,o=new Uint8ClampedArray(i);let l=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return W.arraycopy(this.yuvData,l,o,0,i),o;for(let c=0;c<n;c++){const f=c*e;W.arraycopy(this.yuvData,l,o,f,e),l+=this.dataWidth}return o}isCropSupported(){return!0}crop(e,n,i,o){return new br(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,i,o,!1)}renderThumbnail(){const e=this.getWidth()/br.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/br.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*n),o=this.yuvData;let l=this.top*this.dataWidth+this.left;for(let c=0;c<n;c++){const f=c*e;for(let m=0;m<e;m++){const w=o[l+m*br.THUMBNAIL_SCALE_FACTOR]&255;i[f+m]=4278190080|w*65793}l+=this.dataWidth*br.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/br.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/br.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,n){const i=this.yuvData;for(let o=0,l=this.top*this.dataWidth+this.left;o<n;o++,l+=this.dataWidth){const c=l+e/2;for(let f=l,m=l+e-1;f<c;f++,m--){const w=i[f];i[f]=i[m],i[m]=w}}}invert(){return new Ce(this)}}br.THUMBNAIL_SCALE_FACTOR=2;class ls extends ce{constructor(e,n,i,o,l,c,f){if(super(n,i),this.dataWidth=o,this.dataHeight=l,this.left=c,this.top=f,e.BYTES_PER_ELEMENT===4){const m=n*i,w=new Uint8ClampedArray(m);for(let j=0;j<m;j++){const O=e[j],L=O>>16&255,Z=O>>7&510,ee=O&255;w[j]=(L+Z+ee)/4&255}this.luminances=w}else this.luminances=e;if(o===void 0&&(this.dataWidth=n),l===void 0&&(this.dataHeight=i),c===void 0&&(this.left=0),f===void 0&&(this.top=0),this.left+n>this.dataWidth||this.top+i>this.dataHeight)throw new k("Crop rectangle does not fit within image data.")}getRow(e,n){if(e<0||e>=this.getHeight())throw new k("Requested row is outside the image: "+e);const i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));const o=(e+this.top)*this.dataWidth+this.left;return W.arraycopy(this.luminances,o,n,0,i),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.luminances;const i=e*n,o=new Uint8ClampedArray(i);let l=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return W.arraycopy(this.luminances,l,o,0,i),o;for(let c=0;c<n;c++){const f=c*e;W.arraycopy(this.luminances,l,o,f,e),l+=this.dataWidth}return o}isCropSupported(){return!0}crop(e,n,i,o){return new ls(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+e,this.top+n)}invert(){return new Ce(this)}}class ja extends pe{static forName(e){return this.getCharacterSetECIByName(e)}}class Do{}Do.ISO_8859_1=pe.ISO8859_1;class ka{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Po{static singletonList(e){return[e]}static min(e,n){return e.sort(n)[0]}}class Hl{constructor(e){this.previous=e}getPrevious(){return this.previous}}class ki extends Hl{constructor(e,n,i){super(e),this.value=n,this.bitCount=i}appendTo(e,n){e.appendBits(this.value,this.bitCount)}add(e,n){return new ki(this,e,n)}addBinaryShift(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ki(this,e,n)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+N.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Mo extends ki{constructor(e,n,i){super(e,0,0),this.binaryShiftStart=n,this.binaryShiftByteCount=i}appendTo(e,n){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(n[this.binaryShiftStart+i],8)}addBinaryShift(e,n){return new Mo(this,e,n)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Gl(R,e,n){return new Mo(R,e,n)}function cs(R,e,n){return new ki(R,e,n)}const Xl=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Xr=0,Ni=1,vn=2,Na=3,ur=4,Ta=new ki(null,0,0),Fs=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function _a(R){for(let e of R)T.fill(e,-1);return R[Xr][ur]=0,R[Ni][ur]=0,R[Ni][Xr]=28,R[Na][ur]=0,R[vn][ur]=0,R[vn][Xr]=15,R}const Bo=_a(T.createInt32Array(6,6));class kn{constructor(e,n,i,o){this.token=e,this.mode=n,this.binaryShiftByteCount=i,this.bitCount=o}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,n){let i=this.bitCount,o=this.token;if(e!==this.mode){let c=Fs[this.mode][e];o=cs(o,c&65535,c>>16),i+=c>>16}let l=e===vn?4:5;return o=cs(o,n,l),new kn(o,e,0,i+l)}shiftAndAppend(e,n){let i=this.token,o=this.mode===vn?4:5;return i=cs(i,Bo[this.mode][e],o),i=cs(i,n,5),new kn(i,this.mode,0,this.bitCount+o+5)}addBinaryShiftChar(e){let n=this.token,i=this.mode,o=this.bitCount;if(this.mode===ur||this.mode===vn){let f=Fs[i][Xr];n=cs(n,f&65535,f>>16),o+=f>>16,i=Xr}let l=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new kn(n,i,this.binaryShiftByteCount+1,o+l);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(e+1)),c}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let n=this.token;return n=Gl(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new kn(n,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let n=this.bitCount+(Fs[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=kn.calculateBinaryShiftCost(e)-kn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount}toBitArray(e){let n=[];for(let o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())n.unshift(o);let i=new P;for(const o of n)o.appendTo(i,e);return i}toString(){return we.format("%s bits=%d bytes=%d",Xl[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}kn.INITIAL_STATE=new kn(Ta,Xr,0,0);function Yl(R){const e=we.getCharCode(" "),n=we.getCharCode("."),i=we.getCharCode(",");R[Xr][e]=1;const o=we.getCharCode("Z"),l=we.getCharCode("A");for(let L=l;L<=o;L++)R[Xr][L]=L-l+2;R[Ni][e]=1;const c=we.getCharCode("z"),f=we.getCharCode("a");for(let L=f;L<=c;L++)R[Ni][L]=L-f+2;R[vn][e]=1;const m=we.getCharCode("9"),w=we.getCharCode("0");for(let L=w;L<=m;L++)R[vn][L]=L-w+2;R[vn][i]=12,R[vn][n]=13;const j=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let L=0;L<j.length;L++)R[Na][we.getCharCode(j[L])]=L;const O=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let L=0;L<O.length;L++)we.getCharCode(O[L])>0&&(R[ur][we.getCharCode(O[L])]=L);return R}const Lo=Yl(T.createInt32Array(5,256));class ds{constructor(e){this.text=e}encode(){const e=we.getCharCode(" "),n=we.getCharCode(`
`);let i=Po.singletonList(kn.INITIAL_STATE);for(let l=0;l<this.text.length;l++){let c,f=l+1<this.text.length?this.text[l+1]:0;switch(this.text[l]){case we.getCharCode("\r"):c=f===n?2:0;break;case we.getCharCode("."):c=f===e?3:0;break;case we.getCharCode(","):c=f===e?4:0;break;case we.getCharCode(":"):c=f===e?5:0;break;default:c=0}c>0?(i=ds.updateStateListForPair(i,l,c),l++):i=this.updateStateListForChar(i,l)}return Po.min(i,(l,c)=>l.getBitCount()-c.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,n){const i=[];for(let o of e)this.updateStateForChar(o,n,i);return ds.simplifyStates(i)}updateStateForChar(e,n,i){let o=this.text[n]&255,l=Lo[e.getMode()][o]>0,c=null;for(let f=0;f<=ur;f++){let m=Lo[f][o];if(m>0){if(c==null&&(c=e.endBinaryShift(n)),!l||f===e.getMode()||f===vn){const w=c.latchAndAppend(f,m);i.push(w)}if(!l&&Bo[e.getMode()][f]>=0){const w=c.shiftAndAppend(f,m);i.push(w)}}}if(e.getBinaryShiftByteCount()>0||Lo[e.getMode()][o]===0){let f=e.addBinaryShiftChar(n);i.push(f)}}static updateStateListForPair(e,n,i){const o=[];for(let l of e)this.updateStateForPair(l,n,i,o);return this.simplifyStates(o)}static updateStateForPair(e,n,i,o){let l=e.endBinaryShift(n);if(o.push(l.latchAndAppend(ur,i)),e.getMode()!==ur&&o.push(l.shiftAndAppend(ur,i)),i===3||i===4){let c=l.latchAndAppend(vn,16-i).latchAndAppend(vn,1);o.push(c)}if(e.getBinaryShiftByteCount()>0){let c=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);o.push(c)}}static simplifyStates(e){let n=[];for(const i of e){let o=!0;for(const l of n){if(l.isBetterThanOrEqualTo(i)){o=!1;break}i.isBetterThanOrEqualTo(l)&&(n=n.filter(c=>c!==l))}o&&n.push(i)}return n}}class gt{constructor(){}static encodeBytes(e){return gt.encode(e,gt.DEFAULT_EC_PERCENT,gt.DEFAULT_AZTEC_LAYERS)}static encode(e,n,i){let o=new ds(e).encode(),l=N.truncDivision(o.getSize()*n,100)+11,c=o.getSize()+l,f,m,w,j,O;if(i!==gt.DEFAULT_AZTEC_LAYERS){if(f=i<0,m=Math.abs(i),m>(f?gt.MAX_NB_BITS_COMPACT:gt.MAX_NB_BITS))throw new k(we.format("Illegal value %s for layers",i));w=gt.totalBitsInLayer(m,f),j=gt.WORD_SIZE[m];let Ie=w-w%j;if(O=gt.stuffBits(o,j),O.getSize()+l>Ie)throw new k("Data to large for user specified layer");if(f&&O.getSize()>j*64)throw new k("Data to large for user specified layer")}else{j=0,O=null;for(let Ie=0;;Ie++){if(Ie>gt.MAX_NB_BITS)throw new k("Data too large for an Aztec code");if(f=Ie<=3,m=f?Ie+1:Ie,w=gt.totalBitsInLayer(m,f),c>w)continue;(O==null||j!==gt.WORD_SIZE[m])&&(j=gt.WORD_SIZE[m],O=gt.stuffBits(o,j));let ut=w-w%j;if(!(f&&O.getSize()>j*64)&&O.getSize()+l<=ut)break}}let L=gt.generateCheckWords(O,w,j),Z=O.getSize()/j,ee=gt.generateModeMessage(f,m,Z),re=(f?11:14)+m*4,ae=new Int32Array(re),me;if(f){me=re;for(let Ie=0;Ie<ae.length;Ie++)ae[Ie]=Ie}else{me=re+1+2*N.truncDivision(N.truncDivision(re,2)-1,15);let Ie=N.truncDivision(re,2),ut=N.truncDivision(me,2);for(let it=0;it<Ie;it++){let Mn=it+N.truncDivision(it,15);ae[Ie-it-1]=ut-Mn-1,ae[Ie+it]=ut+Mn+1}}let Te=new te(me);for(let Ie=0,ut=0;Ie<m;Ie++){let it=(m-Ie)*4+(f?9:12);for(let Mn=0;Mn<it;Mn++){let hr=Mn*2;for(let sn=0;sn<2;sn++)L.get(ut+hr+sn)&&Te.set(ae[Ie*2+sn],ae[Ie*2+Mn]),L.get(ut+it*2+hr+sn)&&Te.set(ae[Ie*2+Mn],ae[re-1-Ie*2-sn]),L.get(ut+it*4+hr+sn)&&Te.set(ae[re-1-Ie*2-sn],ae[re-1-Ie*2-Mn]),L.get(ut+it*6+hr+sn)&&Te.set(ae[re-1-Ie*2-Mn],ae[Ie*2+sn])}ut+=it*8}if(gt.drawModeMessage(Te,f,me,ee),f)gt.drawBullsEye(Te,N.truncDivision(me,2),5);else{gt.drawBullsEye(Te,N.truncDivision(me,2),7);for(let Ie=0,ut=0;Ie<N.truncDivision(re,2)-1;Ie+=15,ut+=16)for(let it=N.truncDivision(me,2)&1;it<me;it+=2)Te.set(N.truncDivision(me,2)-ut,it),Te.set(N.truncDivision(me,2)+ut,it),Te.set(it,N.truncDivision(me,2)-ut),Te.set(it,N.truncDivision(me,2)+ut)}let _e=new ka;return _e.setCompact(f),_e.setSize(me),_e.setLayers(m),_e.setCodeWords(Z),_e.setMatrix(Te),_e}static drawBullsEye(e,n,i){for(let o=0;o<i;o+=2)for(let l=n-o;l<=n+o;l++)e.set(l,n-o),e.set(l,n+o),e.set(n-o,l),e.set(n+o,l);e.set(n-i,n-i),e.set(n-i+1,n-i),e.set(n-i,n-i+1),e.set(n+i,n-i),e.set(n+i,n-i+1),e.set(n+i,n+i-1)}static generateModeMessage(e,n,i){let o=new P;return e?(o.appendBits(n-1,2),o.appendBits(i-1,6),o=gt.generateCheckWords(o,28,4)):(o.appendBits(n-1,5),o.appendBits(i-1,11),o=gt.generateCheckWords(o,40,4)),o}static drawModeMessage(e,n,i,o){let l=N.truncDivision(i,2);if(n)for(let c=0;c<7;c++){let f=l-3+c;o.get(c)&&e.set(f,l-5),o.get(c+7)&&e.set(l+5,f),o.get(20-c)&&e.set(f,l+5),o.get(27-c)&&e.set(l-5,f)}else for(let c=0;c<10;c++){let f=l-5+c+N.truncDivision(c,5);o.get(c)&&e.set(f,l-7),o.get(c+10)&&e.set(l+7,f),o.get(29-c)&&e.set(f,l+7),o.get(39-c)&&e.set(l-7,f)}}static generateCheckWords(e,n,i){let o=e.getSize()/i,l=new Oo(gt.getGF(i)),c=N.truncDivision(n,i),f=gt.bitsToWords(e,i,c);l.encode(f,c-o);let m=n%i,w=new P;w.appendBits(0,m);for(const j of Array.from(f))w.appendBits(j,i);return w}static bitsToWords(e,n,i){let o=new Int32Array(i),l,c;for(l=0,c=e.getSize()/n;l<c;l++){let f=0;for(let m=0;m<n;m++)f|=e.get(l*n+m)?1<<n-m-1:0;o[l]=f}return o}static getGF(e){switch(e){case 4:return We.AZTEC_PARAM;case 6:return We.AZTEC_DATA_6;case 8:return We.AZTEC_DATA_8;case 10:return We.AZTEC_DATA_10;case 12:return We.AZTEC_DATA_12;default:throw new k("Unsupported word size "+e)}}static stuffBits(e,n){let i=new P,o=e.getSize(),l=(1<<n)-2;for(let c=0;c<o;c+=n){let f=0;for(let m=0;m<n;m++)(c+m>=o||e.get(c+m))&&(f|=1<<n-1-m);(f&l)===l?(i.appendBits(f&l,n),c--):(f&l)===0?(i.appendBits(f|1,n),c--):i.appendBits(f,n)}return i}static totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}gt.DEFAULT_EC_PERCENT=33,gt.DEFAULT_AZTEC_LAYERS=0,gt.MAX_NB_BITS=32,gt.MAX_NB_BITS_COMPACT=4,gt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class us{encode(e,n,i,o){return this.encodeWithHints(e,n,i,o,null)}encodeWithHints(e,n,i,o,l){let c=Do.ISO_8859_1,f=gt.DEFAULT_EC_PERCENT,m=gt.DEFAULT_AZTEC_LAYERS;return l!=null&&(l.has(rn.CHARACTER_SET)&&(c=ja.forName(l.get(rn.CHARACTER_SET).toString())),l.has(rn.ERROR_CORRECTION)&&(f=N.parseInt(l.get(rn.ERROR_CORRECTION).toString())),l.has(rn.AZTEC_LAYERS)&&(m=N.parseInt(l.get(rn.AZTEC_LAYERS).toString()))),us.encodeLayers(e,n,i,o,c,f,m)}static encodeLayers(e,n,i,o,l,c,f){if(n!==ve.AZTEC)throw new k("Can only encode AZTEC, but got "+n);let m=gt.encode(we.getBytes(e,l),c,f);return us.renderResult(m,i,o)}static renderResult(e,n,i){let o=e.getMatrix();if(o==null)throw new St;let l=o.getWidth(),c=o.getHeight(),f=Math.max(n,l),m=Math.max(i,c),w=Math.min(f/l,m/c),j=(f-l*w)/2,O=(m-c*w)/2,L=new te(f,m);for(let Z=0,ee=O;Z<c;Z++,ee+=w)for(let re=0,ae=j;re<l;re++,ae+=w)o.get(re,Z)&&L.setRegion(ae,ee,w,w);return L}}a.AbstractExpandedDecoder=So,a.ArgumentException=A,a.ArithmeticException=st,a.AztecCode=ka,a.AztecCodeReader=qn,a.AztecCodeWriter=us,a.AztecDecoder=dt,a.AztecDetector=_r,a.AztecDetectorResult=Qi,a.AztecEncoder=gt,a.AztecHighLevelEncoder=ds,a.AztecPoint=en,a.BarcodeFormat=ve,a.Binarizer=X,a.BinaryBitmap=_,a.BitArray=P,a.BitMatrix=te,a.BitSource=Io,a.BrowserAztecCodeReader=yo,a.BrowserBarcodeReader=wa,a.BrowserCodeReader=Ee,a.BrowserDatamatrixCodeReader=Wl,a.BrowserMultiFormatReader=as,a.BrowserPDF417Reader=Ls,a.BrowserQRCodeReader=Ia,a.BrowserQRCodeSvgWriter=ni,a.CharacterSetECI=pe,a.ChecksumException=V,a.Code128Reader=Pe,a.Code39Reader=tn,a.DataMatrixDecodedBitStreamParser=lr,a.DataMatrixReader=cr,a.DecodeHintType=q,a.DecoderResult=De,a.DefaultGridSampler=vi,a.DetectorResult=Ur,a.EAN13Reader=$n,a.EncodeHintType=rn,a.Exception=v,a.FormatException=F,a.GenericGF=We,a.GenericGFPoly=Ge,a.GlobalHistogramBinarizer=J,a.GridSampler=yi,a.GridSamplerInstance=Vn,a.HTMLCanvasElementLuminanceSource=$,a.HybridBinarizer=se,a.ITFReader=bt,a.IllegalArgumentException=k,a.IllegalStateException=St,a.InvertedLuminanceSource=Ce,a.LuminanceSource=ce,a.MathUtils=ot,a.MultiFormatOneDReader=bi,a.MultiFormatReader=Bs,a.MultiFormatWriter=Vl,a.NotFoundException=Y,a.OneDReader=Bt,a.PDF417DecodedBitStreamParser=xe,a.PDF417DecoderErrorCorrection=No,a.PDF417Reader=gn,a.PDF417ResultMetadata=Ps,a.PerspectiveTransform=An,a.PlanarYUVLuminanceSource=br,a.QRCodeByteMatrix=zs,a.QRCodeDataMask=ct,a.QRCodeDecodedBitStreamParser=Ot,a.QRCodeDecoderErrorCorrectionLevel=At,a.QRCodeDecoderFormatInformation=hn,a.QRCodeEncoder=kt,a.QRCodeEncoderQRCode=ti,a.QRCodeMaskUtil=Dt,a.QRCodeMatrixUtil=Ke,a.QRCodeMode=qe,a.QRCodeReader=jn,a.QRCodeVersion=Ze,a.QRCodeWriter=ji,a.RGBLuminanceSource=ls,a.RSS14Reader=Nt,a.RSSExpandedReader=Se,a.ReaderException=Ii,a.ReedSolomonDecoder=ln,a.ReedSolomonEncoder=Oo,a.ReedSolomonException=Qe,a.Result=le,a.ResultMetadataType=fe,a.ResultPoint=Le,a.StringUtils=we,a.UnsupportedOperationException=Me,a.VideoInputDevice=B,a.WhiteRectangleDetector=Un,a.WriterException=jt,a.ZXingArrays=T,a.ZXingCharset=ja,a.ZXingInteger=N,a.ZXingStandardCharsets=Do,a.ZXingStringBuilder=de,a.ZXingStringEncoding=be,a.ZXingSystem=W,a.createAbstractExpandedDecoder=ya,Object.defineProperty(a,"__esModule",{value:!0})}))})(la,la.exports)),la.exports}var Ft=bm();const Cm=Ll(Ft),Sm=U0({__proto__:null,default:Cm},[Ft]);var E0=(function(){function u(h,a,g){if(this.formatMap=new Map([[Fe.QR_CODE,Ft.BarcodeFormat.QR_CODE],[Fe.AZTEC,Ft.BarcodeFormat.AZTEC],[Fe.CODABAR,Ft.BarcodeFormat.CODABAR],[Fe.CODE_39,Ft.BarcodeFormat.CODE_39],[Fe.CODE_93,Ft.BarcodeFormat.CODE_93],[Fe.CODE_128,Ft.BarcodeFormat.CODE_128],[Fe.DATA_MATRIX,Ft.BarcodeFormat.DATA_MATRIX],[Fe.MAXICODE,Ft.BarcodeFormat.MAXICODE],[Fe.ITF,Ft.BarcodeFormat.ITF],[Fe.EAN_13,Ft.BarcodeFormat.EAN_13],[Fe.EAN_8,Ft.BarcodeFormat.EAN_8],[Fe.PDF_417,Ft.BarcodeFormat.PDF_417],[Fe.RSS_14,Ft.BarcodeFormat.RSS_14],[Fe.RSS_EXPANDED,Ft.BarcodeFormat.RSS_EXPANDED],[Fe.UPC_A,Ft.BarcodeFormat.UPC_A],[Fe.UPC_E,Ft.BarcodeFormat.UPC_E],[Fe.UPC_EAN_EXTENSION,Ft.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Sm)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=a,this.logger=g;var y=this.createZXingFormats(h),x=new Map;x.set(Ft.DecodeHintType.POSSIBLE_FORMATS,y),x.set(Ft.DecodeHintType.TRY_HARDER,!1),this.hints=x}return u.prototype.decodeAsync=function(h){var a=this;return new Promise(function(g,y){try{g(a.decode(h))}catch(x){y(x)}})},u.prototype.decode=function(h){var a=new Ft.MultiFormatReader(this.verbose,this.hints),g=new Ft.HTMLCanvasElementLuminanceSource(h),y=new Ft.BinaryBitmap(new Ft.HybridBinarizer(g)),x=a.decode(y);return{text:x.text,format:kf.create(this.toHtml5QrcodeSupportedFormats(x.format)),debugData:this.createDebugData()}},u.prototype.createReverseFormatMap=function(){var h=new Map;return this.formatMap.forEach(function(a,g,y){h.set(a,g)}),h},u.prototype.toHtml5QrcodeSupportedFormats=function(h){if(!this.reverseFormatMap.has(h))throw"reverseFormatMap doesn't have ".concat(h);return this.reverseFormatMap.get(h)},u.prototype.createZXingFormats=function(h){for(var a=[],g=0,y=h;g<y.length;g++){var x=y[g];this.formatMap.has(x)?a.push(this.formatMap.get(x)):this.logger.logError("".concat(x," is not supported by")+"ZXingHtml5QrcodeShim")}return a},u.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},u})(),Em=function(u,h,a,g){function y(x){return x instanceof a?x:new a(function(C){C(x)})}return new(a||(a=Promise))(function(x,C){function I(A){try{v(g.next(A))}catch(k){C(k)}}function S(A){try{v(g.throw(A))}catch(k){C(k)}}function v(A){A.done?x(A.value):y(A.value).then(I,S)}v((g=g.apply(u,h||[])).next())})},Am=function(u,h){var a={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},g,y,x,C;return C={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function I(v){return function(A){return S([v,A])}}function S(v){if(g)throw new TypeError("Generator is already executing.");for(;C&&(C=0,v[0]&&(a=0)),a;)try{if(g=1,y&&(x=v[0]&2?y.return:v[0]?y.throw||((x=y.return)&&x.call(y),0):y.next)&&!(x=x.call(y,v[1])).done)return x;switch(y=0,x&&(v=[v[0]&2,x.value]),v[0]){case 0:case 1:x=v;break;case 4:return a.label++,{value:v[1],done:!1};case 5:a.label++,y=v[1],v=[0];continue;case 7:v=a.ops.pop(),a.trys.pop();continue;default:if(x=a.trys,!(x=x.length>0&&x[x.length-1])&&(v[0]===6||v[0]===2)){a=0;continue}if(v[0]===3&&(!x||v[1]>x[0]&&v[1]<x[3])){a.label=v[1];break}if(v[0]===6&&a.label<x[1]){a.label=x[1],x=v;break}if(x&&a.label<x[2]){a.label=x[2],a.ops.push(v);break}x[2]&&a.ops.pop(),a.trys.pop();continue}v=h.call(u,a)}catch(A){v=[6,A],y=0}finally{g=x=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},A0=(function(){function u(h,a,g){if(this.formatMap=new Map([[Fe.QR_CODE,"qr_code"],[Fe.AZTEC,"aztec"],[Fe.CODABAR,"codabar"],[Fe.CODE_39,"code_39"],[Fe.CODE_93,"code_93"],[Fe.CODE_128,"code_128"],[Fe.DATA_MATRIX,"data_matrix"],[Fe.ITF,"itf"],[Fe.EAN_13,"ean_13"],[Fe.EAN_8,"ean_8"],[Fe.PDF_417,"pdf417"],[Fe.UPC_A,"upc_a"],[Fe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!u.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=a,this.logger=g;var y=this.createBarcodeDetectorFormats(h);if(this.detector=new BarcodeDetector(y),!this.detector)throw"BarcodeDetector detector not supported"}return u.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var h=new BarcodeDetector({formats:["qr_code"]});return typeof h<"u"},u.prototype.decodeAsync=function(h){return Em(this,void 0,void 0,function(){var a,g;return Am(this,function(y){switch(y.label){case 0:return[4,this.detector.detect(h)];case 1:if(a=y.sent(),!a||a.length===0)throw"No barcode or QR code detected.";return g=this.selectLargestBarcode(a),[2,{text:g.rawValue,format:kf.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}]}})})},u.prototype.selectLargestBarcode=function(h){for(var a=null,g=0,y=0,x=h;y<x.length;y++){var C=x[y],I=C.boundingBox.width*C.boundingBox.height;I>g&&(g=I,a=C)}if(!a)throw"No largest barcode found";return a},u.prototype.createBarcodeDetectorFormats=function(h){for(var a=[],g=0,y=h;g<y.length;g++){var x=y[g];this.formatMap.has(x)?a.push(this.formatMap.get(x)):this.logger.warn("".concat(x," is not supported by")+"BarcodeDetectorDelegate")}return{formats:a}},u.prototype.toHtml5QrcodeSupportedFormats=function(h){if(!this.reverseFormatMap.has(h))throw"reverseFormatMap doesn't have ".concat(h);return this.reverseFormatMap.get(h)},u.prototype.createReverseFormatMap=function(){var h=new Map;return this.formatMap.forEach(function(a,g,y){h.set(a,g)}),h},u.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},u})(),I0=function(u,h,a,g){function y(x){return x instanceof a?x:new a(function(C){C(x)})}return new(a||(a=Promise))(function(x,C){function I(A){try{v(g.next(A))}catch(k){C(k)}}function S(A){try{v(g.throw(A))}catch(k){C(k)}}function v(A){A.done?x(A.value):y(A.value).then(I,S)}v((g=g.apply(u,h||[])).next())})},j0=function(u,h){var a={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},g,y,x,C;return C={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function I(v){return function(A){return S([v,A])}}function S(v){if(g)throw new TypeError("Generator is already executing.");for(;C&&(C=0,v[0]&&(a=0)),a;)try{if(g=1,y&&(x=v[0]&2?y.return:v[0]?y.throw||((x=y.return)&&x.call(y),0):y.next)&&!(x=x.call(y,v[1])).done)return x;switch(y=0,x&&(v=[v[0]&2,x.value]),v[0]){case 0:case 1:x=v;break;case 4:return a.label++,{value:v[1],done:!1};case 5:a.label++,y=v[1],v=[0];continue;case 7:v=a.ops.pop(),a.trys.pop();continue;default:if(x=a.trys,!(x=x.length>0&&x[x.length-1])&&(v[0]===6||v[0]===2)){a=0;continue}if(v[0]===3&&(!x||v[1]>x[0]&&v[1]<x[3])){a.label=v[1];break}if(v[0]===6&&a.label<x[1]){a.label=x[1],x=v;break}if(x&&a.label<x[2]){a.label=x[2],a.ops.push(v);break}x[2]&&a.ops.pop(),a.trys.pop();continue}v=h.call(u,a)}catch(A){v=[6,A],y=0}finally{g=x=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Im=(function(){function u(h,a,g,y){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=g,a&&A0.isSupported()?(this.primaryDecoder=new A0(h,g,y),this.secondaryDecoder=new E0(h,g,y)):this.primaryDecoder=new E0(h,g,y)}return u.prototype.decodeAsync=function(h){return I0(this,void 0,void 0,function(){var a;return j0(this,function(g){switch(g.label){case 0:a=performance.now(),g.label=1;case 1:return g.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(h)];case 2:return[2,g.sent()];case 3:return this.possiblyLogPerformance(a),[7];case 4:return[2]}})})},u.prototype.decodeRobustlyAsync=function(h){return I0(this,void 0,void 0,function(){var a,g;return j0(this,function(y){switch(y.label){case 0:a=performance.now(),y.label=1;case 1:return y.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(h)];case 2:return[2,y.sent()];case 3:if(g=y.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(h)];throw g;case 4:return this.possiblyLogPerformance(a),[7];case 5:return[2]}})})},u.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},u.prototype.possiblyLogPerformance=function(h){if(this.verbose){var a=performance.now()-h;this.executionResults.push(a),this.executions++,this.possiblyFlushPerformanceReport()}},u.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var h=0,a=0,g=this.executionResults;a<g.length;a++){var y=g[a];h+=y}var x=h/this.executionResults.length;console.log("".concat(x," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},u})(),Vd=(function(){var u=function(h,a){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(g[x]=y[x])},u(h,a)};return function(h,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");u(h,a);function g(){this.constructor=h}h.prototype=a===null?Object.create(a):(g.prototype=a.prototype,new g)}})(),Ml=function(u,h,a,g){function y(x){return x instanceof a?x:new a(function(C){C(x)})}return new(a||(a=Promise))(function(x,C){function I(A){try{v(g.next(A))}catch(k){C(k)}}function S(A){try{v(g.throw(A))}catch(k){C(k)}}function v(A){A.done?x(A.value):y(A.value).then(I,S)}v((g=g.apply(u,h||[])).next())})},Bl=function(u,h){var a={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},g,y,x,C;return C={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function I(v){return function(A){return S([v,A])}}function S(v){if(g)throw new TypeError("Generator is already executing.");for(;C&&(C=0,v[0]&&(a=0)),a;)try{if(g=1,y&&(x=v[0]&2?y.return:v[0]?y.throw||((x=y.return)&&x.call(y),0):y.next)&&!(x=x.call(y,v[1])).done)return x;switch(y=0,x&&(v=[v[0]&2,x.value]),v[0]){case 0:case 1:x=v;break;case 4:return a.label++,{value:v[1],done:!1};case 5:a.label++,y=v[1],v=[0];continue;case 7:v=a.ops.pop(),a.trys.pop();continue;default:if(x=a.trys,!(x=x.length>0&&x[x.length-1])&&(v[0]===6||v[0]===2)){a=0;continue}if(v[0]===3&&(!x||v[1]>x[0]&&v[1]<x[3])){a.label=v[1];break}if(v[0]===6&&a.label<x[1]){a.label=x[1],x=v;break}if(x&&a.label<x[2]){a.label=x[2],a.ops.push(v);break}x[2]&&a.ops.pop(),a.trys.pop();continue}v=h.call(u,a)}catch(A){v=[6,A],y=0}finally{g=x=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Tf=(function(){function u(h,a){this.name=h,this.track=a}return u.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},u.prototype.apply=function(h){var a={};a[this.name]=h;var g={advanced:[a]};return this.track.applyConstraints(g)},u.prototype.value=function(){var h=this.track.getSettings();if(this.name in h){var a=h[this.name];return a}return null},u})(),jm=(function(u){Vd(h,u);function h(a,g){return u.call(this,a,g)||this}return h.prototype.min=function(){return this.getCapabilities().min},h.prototype.max=function(){return this.getCapabilities().max},h.prototype.step=function(){return this.getCapabilities().step},h.prototype.apply=function(a){var g={};g[this.name]=a;var y={advanced:[g]};return this.track.applyConstraints(y)},h.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),g=a[this.name];return{min:g.min,max:g.max,step:g.step}},h.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},h})(Tf),km=(function(u){Vd(h,u);function h(a){return u.call(this,"zoom",a)||this}return h})(jm),Nm=(function(u){Vd(h,u);function h(a){return u.call(this,"torch",a)||this}return h})(Tf),Tm=(function(){function u(h){this.track=h}return u.prototype.zoomFeature=function(){return new km(this.track)},u.prototype.torchFeature=function(){return new Nm(this.track)},u})(),_m=(function(){function u(h,a,g){this.isClosed=!1,this.parentElement=h,this.mediaStream=a,this.callbacks=g,this.surface=this.createVideoElement(this.parentElement.clientWidth),h.append(this.surface)}return u.prototype.createVideoElement=function(h){var a=document.createElement("video");return a.style.width="".concat(h,"px"),a.style.display="block",a.muted=!0,a.setAttribute("muted","true"),a.playsInline=!0,a},u.prototype.setupSurface=function(){var h=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var a=function(){var g=h.surface.clientWidth,y=h.surface.clientHeight;h.callbacks.onRenderSurfaceReady(g,y),h.surface.removeEventListener("playing",a)};this.surface.addEventListener("playing",a),this.surface.srcObject=this.mediaStream,this.surface.play()},u.create=function(h,a,g,y){return Ml(this,void 0,void 0,function(){var x,C;return Bl(this,function(I){switch(I.label){case 0:return x=new u(h,a,y),g.aspectRatio?(C={aspectRatio:g.aspectRatio},[4,x.getFirstTrackOrFail().applyConstraints(C)]):[3,2];case 1:I.sent(),I.label=2;case 2:return x.setupSurface(),[2,x]}})})},u.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},u.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},u.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},u.prototype.resume=function(h){this.failIfClosed();var a=this,g=function(){setTimeout(h,200),a.surface.removeEventListener("playing",g)};this.surface.addEventListener("playing",g),this.surface.play()},u.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},u.prototype.getSurface=function(){return this.failIfClosed(),this.surface},u.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},u.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},u.prototype.applyVideoConstraints=function(h){return Ml(this,void 0,void 0,function(){return Bl(this,function(a){if("aspectRatio"in h)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(h)]})})},u.prototype.close=function(){if(this.isClosed)return Promise.resolve();var h=this;return new Promise(function(a,g){var y=h.mediaStream.getVideoTracks(),x=y.length,C=0;h.mediaStream.getVideoTracks().forEach(function(I){h.mediaStream.removeTrack(I),I.stop(),++C,C>=x&&(h.isClosed=!0,h.parentElement.removeChild(h.surface),a())})})},u.prototype.getCapabilities=function(){return new Tm(this.getFirstTrackOrFail())},u})(),Rm=(function(){function u(h){this.mediaStream=h}return u.prototype.render=function(h,a,g){return Ml(this,void 0,void 0,function(){return Bl(this,function(y){return[2,_m.create(h,this.mediaStream,a,g)]})})},u.create=function(h){return Ml(this,void 0,void 0,function(){var a,g;return Bl(this,function(y){switch(y.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return a={audio:!1,video:h},[4,navigator.mediaDevices.getUserMedia(a)];case 1:return g=y.sent(),[2,new u(g)]}})})},u})(),k0=function(u,h,a,g){function y(x){return x instanceof a?x:new a(function(C){C(x)})}return new(a||(a=Promise))(function(x,C){function I(A){try{v(g.next(A))}catch(k){C(k)}}function S(A){try{v(g.throw(A))}catch(k){C(k)}}function v(A){A.done?x(A.value):y(A.value).then(I,S)}v((g=g.apply(u,h||[])).next())})},N0=function(u,h){var a={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},g,y,x,C;return C={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function I(v){return function(A){return S([v,A])}}function S(v){if(g)throw new TypeError("Generator is already executing.");for(;C&&(C=0,v[0]&&(a=0)),a;)try{if(g=1,y&&(x=v[0]&2?y.return:v[0]?y.throw||((x=y.return)&&x.call(y),0):y.next)&&!(x=x.call(y,v[1])).done)return x;switch(y=0,x&&(v=[v[0]&2,x.value]),v[0]){case 0:case 1:x=v;break;case 4:return a.label++,{value:v[1],done:!1};case 5:a.label++,y=v[1],v=[0];continue;case 7:v=a.ops.pop(),a.trys.pop();continue;default:if(x=a.trys,!(x=x.length>0&&x[x.length-1])&&(v[0]===6||v[0]===2)){a=0;continue}if(v[0]===3&&(!x||v[1]>x[0]&&v[1]<x[3])){a.label=v[1];break}if(v[0]===6&&a.label<x[1]){a.label=x[1],x=v;break}if(x&&a.label<x[2]){a.label=x[2],a.ops.push(v);break}x[2]&&a.ops.pop(),a.trys.pop();continue}v=h.call(u,a)}catch(A){v=[6,A],y=0}finally{g=x=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Om=(function(){function u(){}return u.failIfNotSupported=function(){return k0(this,void 0,void 0,function(){return N0(this,function(h){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new u]})})},u.prototype.create=function(h){return k0(this,void 0,void 0,function(){return N0(this,function(a){return[2,Rm.create(h)]})})},u})(),Dm=function(u,h,a,g){function y(x){return x instanceof a?x:new a(function(C){C(x)})}return new(a||(a=Promise))(function(x,C){function I(A){try{v(g.next(A))}catch(k){C(k)}}function S(A){try{v(g.throw(A))}catch(k){C(k)}}function v(A){A.done?x(A.value):y(A.value).then(I,S)}v((g=g.apply(u,h||[])).next())})},Pm=function(u,h){var a={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},g,y,x,C;return C={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function I(v){return function(A){return S([v,A])}}function S(v){if(g)throw new TypeError("Generator is already executing.");for(;C&&(C=0,v[0]&&(a=0)),a;)try{if(g=1,y&&(x=v[0]&2?y.return:v[0]?y.throw||((x=y.return)&&x.call(y),0):y.next)&&!(x=x.call(y,v[1])).done)return x;switch(y=0,x&&(v=[v[0]&2,x.value]),v[0]){case 0:case 1:x=v;break;case 4:return a.label++,{value:v[1],done:!1};case 5:a.label++,y=v[1],v=[0];continue;case 7:v=a.ops.pop(),a.trys.pop();continue;default:if(x=a.trys,!(x=x.length>0&&x[x.length-1])&&(v[0]===6||v[0]===2)){a=0;continue}if(v[0]===3&&(!x||v[1]>x[0]&&v[1]<x[3])){a.label=v[1];break}if(v[0]===6&&a.label<x[1]){a.label=x[1],x=v;break}if(x&&a.label<x[2]){a.label=x[2],a.ops.push(v);break}x[2]&&a.ops.pop(),a.trys.pop();continue}v=h.call(u,a)}catch(A){v=[6,A],y=0}finally{g=x=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Mm=(function(){function u(){}return u.retrieve=function(){if(navigator.mediaDevices)return u.getCamerasFromMediaDevices();var h=MediaStreamTrack;return MediaStreamTrack&&h.getSources?u.getCamerasFromMediaStreamTrack():u.rejectWithError()},u.rejectWithError=function(){var h=ao.unableToQuerySupportedDevices();return u.isHttpsOrLocalhost()||(h=ao.insecureContextCameraQueryError()),Promise.reject(h)},u.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var h=location.host.split(":")[0];return h==="127.0.0.1"||h==="localhost"},u.getCamerasFromMediaDevices=function(){return Dm(this,void 0,void 0,function(){var h,a,g,y,x,C,I;return Pm(this,function(S){switch(S.label){case 0:return h=function(v){for(var A=v.getVideoTracks(),k=0,_=A;k<_.length;k++){var V=_[k];V.enabled=!1,V.stop(),v.removeTrack(V)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return a=S.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(g=S.sent(),y=[],x=0,C=g;x<C.length;x++)I=C[x],I.kind==="videoinput"&&y.push({id:I.deviceId,label:I.label});return h(a),[2,y]}})})},u.getCamerasFromMediaStreamTrack=function(){return new Promise(function(h,a){var g=function(x){for(var C=[],I=0,S=x;I<S.length;I++){var v=S[I];v.kind==="video"&&C.push({id:v.id,label:v.label})}h(C)},y=MediaStreamTrack;y.getSources(g)})},u})(),Kt;(function(u){u[u.UNKNOWN=0]="UNKNOWN",u[u.NOT_STARTED=1]="NOT_STARTED",u[u.SCANNING=2]="SCANNING",u[u.PAUSED=3]="PAUSED"})(Kt||(Kt={}));var Bm=(function(){function u(){this.state=Kt.NOT_STARTED,this.onGoingTransactionNewState=Kt.UNKNOWN}return u.prototype.directTransition=function(h){this.failIfTransitionOngoing(),this.validateTransition(h),this.state=h},u.prototype.startTransition=function(h){return this.failIfTransitionOngoing(),this.validateTransition(h),this.onGoingTransactionNewState=h,this},u.prototype.execute=function(){if(this.onGoingTransactionNewState===Kt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var h=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Kt.UNKNOWN,this.directTransition(h)},u.prototype.cancel=function(){if(this.onGoingTransactionNewState===Kt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Kt.UNKNOWN},u.prototype.getState=function(){return this.state},u.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Kt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},u.prototype.validateTransition=function(h){switch(this.state){case Kt.UNKNOWN:throw"Transition from unknown is not allowed";case Kt.NOT_STARTED:this.failIfNewStateIs(h,[Kt.PAUSED]);break;case Kt.SCANNING:break;case Kt.PAUSED:break}},u.prototype.failIfNewStateIs=function(h,a){for(var g=0,y=a;g<y.length;g++){var x=y[g];if(h===x)throw"Cannot transition from ".concat(this.state," to ").concat(h)}},u})(),Lm=(function(){function u(h){this.stateManager=h}return u.prototype.startTransition=function(h){return this.stateManager.startTransition(h)},u.prototype.directTransition=function(h){this.stateManager.directTransition(h)},u.prototype.getState=function(){return this.stateManager.getState()},u.prototype.canScanFile=function(){return this.stateManager.getState()===Kt.NOT_STARTED},u.prototype.isScanning=function(){return this.stateManager.getState()!==Kt.NOT_STARTED},u.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Kt.SCANNING},u.prototype.isPaused=function(){return this.stateManager.getState()===Kt.PAUSED},u})(),zm=(function(){function u(){}return u.create=function(){return new Lm(new Bm)},u})(),Fm=(function(){var u=function(h,a){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(g[x]=y[x])},u(h,a)};return function(h,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");u(h,a);function g(){this.constructor=h}h.prototype=a===null?Object.create(a):(g.prototype=a.prototype,new g)}})(),mr=(function(u){Fm(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.DEFAULT_WIDTH=300,h.DEFAULT_WIDTH_OFFSET=2,h.FILE_SCAN_MIN_HEIGHT=300,h.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,h.MIN_QR_BOX_SIZE=50,h.SHADED_LEFT=1,h.SHADED_RIGHT=2,h.SHADED_TOP=3,h.SHADED_BOTTOM=4,h.SHADED_REGION_ELEMENT_ID="qr-shaded-region",h.VERBOSE=!1,h.BORDER_SHADER_DEFAULT_COLOR="#ffffff",h.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",h})(xm),Wm=(function(){function u(h,a){this.logger=a,this.fps=mr.SCAN_DEFAULT_FPS,h?(h.fps&&(this.fps=h.fps),this.disableFlip=h.disableFlip===!0,this.qrbox=h.qrbox,this.aspectRatio=h.aspectRatio,this.videoConstraints=h.videoConstraints):this.disableFlip=mr.DEFAULT_DISABLE_FLIP}return u.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Nf.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},u.prototype.isShadedBoxEnabled=function(){return!pi(this.qrbox)},u.create=function(h,a){return new u(h,a)},u})(),T0=(function(){function u(h,a){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(h))throw"HTML Element with id=".concat(h," not found");this.elementId=h,this.verbose=!1;var g;typeof a=="boolean"?this.verbose=a===!0:a&&(g=a,this.verbose=g.verbose===!0,g.experimentalFeatures),this.logger=new vm(this.verbose),this.qrcode=new Im(this.getSupportedFormats(a),this.getUseBarCodeDetectorIfSupported(g),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=zm.create()}return u.prototype.start=function(h,a,g,y){var x=this;if(!h)throw"cameraIdOrConfig is required";if(!g||typeof g!="function")throw"qrCodeSuccessCallback is required and should be a function.";var C;y?C=y:C=this.verbose?this.logger.log:function(){};var I=Wm.create(a,this.logger);this.clearElement();var S=!1;I.videoConstraints&&(I.isMediaStreamConstraintsValid()?S=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var v=S,A=document.getElementById(this.elementId);A.clientWidth?A.clientWidth:mr.DEFAULT_WIDTH,A.style.position="relative",this.shouldScan=!0,this.element=A;var k=this,_=this.stateManagerProxy.startTransition(Kt.SCANNING);return new Promise(function(V,X){var W=v?I.videoConstraints:k.createVideoConstraints(h);if(!W){_.cancel(),X("videoConstraints should be defined");return}var z={};(!v||I.aspectRatio)&&(z.aspectRatio=I.aspectRatio);var H={onRenderSurfaceReady:function(T,N){k.setupUi(T,N,I),k.isScanning=!0,k.foreverScan(I,g,C)}};Om.failIfNotSupported().then(function(T){T.create(W).then(function(N){return N.render(x.element,z,H).then(function(P){k.renderedCamera=P,_.execute(),V(null)}).catch(function(P){_.cancel(),X(P)})}).catch(function(N){_.cancel(),X(ao.errorGettingUserMedia(N))})}).catch(function(T){_.cancel(),X(ao.cameraStreamingNotSupported())})})},u.prototype.pause=function(h){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Kt.PAUSED),this.showPausedState(),(pi(h)||h!==!0)&&(h=!1),h&&this.renderedCamera&&this.renderedCamera.pause()},u.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var h=this,a=function(){h.stateManagerProxy.directTransition(Kt.SCANNING),h.hidePausedState()};if(!this.renderedCamera.isPaused()){a();return}this.renderedCamera.resume(function(){a()})},u.prototype.getState=function(){return this.stateManagerProxy.getState()},u.prototype.stop=function(){var h=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var a=this.stateManagerProxy.startTransition(Kt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var g=function(){if(h.element){var x=document.getElementById(mr.SHADED_REGION_ELEMENT_ID);x&&h.element.removeChild(x)}},y=this;return this.renderedCamera.close().then(function(){return y.renderedCamera=null,y.element&&(y.element.removeChild(y.canvasElement),y.canvasElement=null),g(),y.qrRegion&&(y.qrRegion=null),y.context&&(y.context=null),a.execute(),y.hidePausedState(),y.isScanning=!1,Promise.resolve()})},u.prototype.scanFile=function(h,a){return this.scanFileV2(h,a).then(function(g){return g.decodedText})},u.prototype.scanFileV2=function(h,a){var g=this;if(!h||!(h instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(pi(a)&&(a=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(y,x){g.possiblyCloseLastScanImageFile(),g.clearElement(),g.lastScanImageFile=URL.createObjectURL(h);var C=new Image;C.onload=function(){var I=C.width,S=C.height,v=document.getElementById(g.elementId),A=v.clientWidth?v.clientWidth:mr.DEFAULT_WIDTH,k=Math.max(v.clientHeight?v.clientHeight:S,mr.FILE_SCAN_MIN_HEIGHT),_=g.computeCanvasDrawConfig(I,S,A,k);if(a){var V=g.createCanvasElement(A,k,"qr-canvas-visible");V.style.display="inline-block",v.appendChild(V);var X=V.getContext("2d");if(!X)throw"Unable to get 2d context from canvas";X.canvas.width=A,X.canvas.height=k,X.drawImage(C,0,0,I,S,_.x,_.y,_.width,_.height)}var W=mr.FILE_SCAN_HIDDEN_CANVAS_PADDING,z=Math.max(C.width,_.width),H=Math.max(C.height,_.height),T=z+2*W,N=H+2*W,P=g.createCanvasElement(T,N);v.appendChild(P);var D=P.getContext("2d");if(!D)throw"Unable to get 2d context from canvas";D.canvas.width=T,D.canvas.height=N,D.drawImage(C,0,0,I,S,W,W,z,H);try{g.qrcode.decodeRobustlyAsync(P).then(function(q){y(C0.createFromQrcodeResult(q))}).catch(x)}catch(q){x("QR code parse error, error = ".concat(q))}},C.onerror=x,C.onabort=x,C.onstalled=x,C.onsuspend=x,C.src=URL.createObjectURL(h)})},u.prototype.clear=function(){this.clearElement()},u.getCameras=function(){return Mm.retrieve()},u.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},u.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},u.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},u.prototype.applyVideoConstraints=function(h){if(h){if(!Nf.isMediaStreamConstraintsValid(h,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(h)},u.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},u.prototype.getSupportedFormats=function(h){var a=[Fe.QR_CODE,Fe.AZTEC,Fe.CODABAR,Fe.CODE_39,Fe.CODE_93,Fe.CODE_128,Fe.DATA_MATRIX,Fe.MAXICODE,Fe.ITF,Fe.EAN_13,Fe.EAN_8,Fe.PDF_417,Fe.RSS_14,Fe.RSS_EXPANDED,Fe.UPC_A,Fe.UPC_E,Fe.UPC_EAN_EXTENSION];if(!h||typeof h=="boolean"||!h.formatsToSupport)return a;if(!Array.isArray(h.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(h.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var g=[],y=0,x=h.formatsToSupport;y<x.length;y++){var C=x[y];mm(C)?g.push(C):this.logger.warn("Invalid format: ".concat(C," passed in config, ignoring."))}if(g.length===0)throw"None of formatsToSupport match supported values.";return g},u.prototype.getUseBarCodeDetectorIfSupported=function(h){if(pi(h))return!0;if(!pi(h.useBarCodeDetectorIfSupported))return h.useBarCodeDetectorIfSupported!==!1;if(pi(h.experimentalFeatures))return!0;var a=h.experimentalFeatures;return pi(a.useBarCodeDetectorIfSupported)?!0:a.useBarCodeDetectorIfSupported!==!1},u.prototype.validateQrboxSize=function(h,a,g){var y=this,x=g.qrbox;this.validateQrboxConfig(x);var C=this.toQrdimensions(h,a,x),I=function(v){if(v<mr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(mr.MIN_QR_BOX_SIZE,"px.")},S=function(v){return v>h&&(y.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),v=h),v};I(C.width),I(C.height),C.width=S(C.width)},u.prototype.validateQrboxConfig=function(h){if(typeof h!="number"&&typeof h!="function"&&(h.width===void 0||h.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},u.prototype.toQrdimensions=function(h,a,g){if(typeof g=="number")return{width:g,height:g};if(typeof g=="function")try{return g(h,a)}catch(y){throw new Error("qrbox config was passed as a function but it failed with unknown error"+y)}return g},u.prototype.setupUi=function(h,a,g){g.isShadedBoxEnabled()&&this.validateQrboxSize(h,a,g);var y=pi(g.qrbox)?{width:h,height:a}:g.qrbox;this.validateQrboxConfig(y);var x=this.toQrdimensions(h,a,y);x.height>a&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var C=g.isShadedBoxEnabled()&&x.height<=a,I={x:0,y:0,width:h,height:a},S=C?this.getShadedRegionBounds(h,a,x):I,v=this.createCanvasElement(S.width,S.height),A={willReadFrequently:!0},k=v.getContext("2d",A);k.canvas.width=S.width,k.canvas.height=S.height,this.element.append(v),C&&this.possiblyInsertShadingElement(this.element,h,a,x),this.createScannerPausedUiElement(this.element),this.qrRegion=S,this.context=k,this.canvasElement=v},u.prototype.createScannerPausedUiElement=function(h){var a=document.createElement("div");a.innerText=ao.scannerPaused(),a.style.display="none",a.style.position="absolute",a.style.top="0px",a.style.zIndex="1",a.style.background="rgba(9, 9, 9, 0.46)",a.style.color="#FFECEC",a.style.textAlign="center",a.style.width="100%",h.appendChild(a),this.scannerPausedUiElement=a},u.prototype.scanContext=function(h,a){var g=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(y){return h(y.text,C0.createFromQrcodeResult(y)),g.possiblyUpdateShaders(!0),!0}).catch(function(y){g.possiblyUpdateShaders(!1);var x=ao.codeParseError(y);return a(x,ym.createFrom(x)),!1})},u.prototype.foreverScan=function(h,a,g){var y=this;if(this.shouldScan&&this.renderedCamera){var x=this.renderedCamera.getSurface(),C=x.videoWidth/x.clientWidth,I=x.videoHeight/x.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var S=this.qrRegion.width*C,v=this.qrRegion.height*I,A=this.qrRegion.x*C,k=this.qrRegion.y*I;this.context.drawImage(x,A,k,S,v,0,0,this.qrRegion.width,this.qrRegion.height);var _=function(){y.foreverScanTimeout=setTimeout(function(){y.foreverScan(h,a,g)},y.getTimeoutFps(h.fps))};this.scanContext(a,g).then(function(V){!V&&h.disableFlip!==!0?(y.context.translate(y.context.canvas.width,0),y.context.scale(-1,1),y.scanContext(a,g).finally(function(){_()})):_()}).catch(function(V){y.logger.logError("Error happend while scanning context",V),_()})}},u.prototype.createVideoConstraints=function(h){if(typeof h=="string")return{deviceId:{exact:h}};if(typeof h=="object"){var a="facingMode",g="deviceId",y={user:!0,environment:!0},x="exact",C=function(X){if(X in y)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(X,"'")},I=Object.keys(h);if(I.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(I.length," keys");var S=Object.keys(h)[0];if(S!==a&&S!==g)throw"Only '".concat(a,"' and '").concat(g,"' ")+" are supported for 'cameraIdOrConfig'";if(S===a){var v=h.facingMode;if(typeof v=="string"){if(C(v))return{facingMode:v}}else if(typeof v=="object")if(x in v){if(C(v["".concat(x)]))return{facingMode:{exact:v["".concat(x)]}}}else throw"'facingMode' should be string or object with"+" ".concat(x," as key.");else{var A=typeof v;throw"Invalid type of 'facingMode' = ".concat(A)}}else{var k=h.deviceId;if(typeof k=="string")return{deviceId:k};if(typeof k=="object"){if(x in k)return{deviceId:{exact:k["".concat(x)]}};throw"'deviceId' should be string or object with"+" ".concat(x," as key.")}else{var _=typeof k;throw"Invalid type of 'deviceId' = ".concat(_)}}}var V=typeof h;throw"Invalid type of 'cameraIdOrConfig' = ".concat(V)},u.prototype.computeCanvasDrawConfig=function(h,a,g,y){if(h<=g&&a<=y){var x=(g-h)/2,C=(y-a)/2;return{x,y:C,width:h,height:a}}else{var I=h,S=a;return h>g&&(a=g/h*a,h=g),a>y&&(h=y/a*h,a=y),this.logger.log("Image downsampled from "+"".concat(I,"X").concat(S)+" to ".concat(h,"X").concat(a,".")),this.computeCanvasDrawConfig(h,a,g,y)}},u.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var h=document.getElementById(this.elementId);h&&(h.innerHTML="")},u.prototype.possiblyUpdateShaders=function(h){this.qrMatch!==h&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(a){a.style.backgroundColor=h?mr.BORDER_SHADER_MATCH_COLOR:mr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=h)},u.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},u.prototype.createCanvasElement=function(h,a,g){var y=h,x=a,C=document.createElement("canvas");return C.style.width="".concat(y,"px"),C.style.height="".concat(x,"px"),C.style.display="none",C.id=pi(g)?"qr-canvas":g,C},u.prototype.getShadedRegionBounds=function(h,a,g){if(g.width>h||g.height>a)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(h-g.width)/2,y:(a-g.height)/2,width:g.width,height:g.height}},u.prototype.possiblyInsertShadingElement=function(h,a,g,y){if(!(a-y.width<1||g-y.height<1)){var x=document.createElement("div");x.style.position="absolute";var C=(a-y.width)/2,I=(g-y.height)/2;if(x.style.borderLeft="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),x.style.borderRight="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),x.style.borderTop="".concat(I,"px solid rgba(0, 0, 0, 0.48)"),x.style.borderBottom="".concat(I,"px solid rgba(0, 0, 0, 0.48)"),x.style.boxSizing="border-box",x.style.top="0px",x.style.bottom="0px",x.style.left="0px",x.style.right="0px",x.id="".concat(mr.SHADED_REGION_ELEMENT_ID),a-y.width<11||g-y.height<11)this.hasBorderShaders=!1;else{var S=5,v=40;this.insertShaderBorders(x,v,S,-S,null,0,!0),this.insertShaderBorders(x,v,S,-S,null,0,!1),this.insertShaderBorders(x,v,S,null,-S,0,!0),this.insertShaderBorders(x,v,S,null,-S,0,!1),this.insertShaderBorders(x,S,v+S,-S,null,-S,!0),this.insertShaderBorders(x,S,v+S,null,-S,-S,!0),this.insertShaderBorders(x,S,v+S,-S,null,-S,!1),this.insertShaderBorders(x,S,v+S,null,-S,-S,!1),this.hasBorderShaders=!0}h.append(x)}},u.prototype.insertShaderBorders=function(h,a,g,y,x,C,I){var S=document.createElement("div");S.style.position="absolute",S.style.backgroundColor=mr.BORDER_SHADER_DEFAULT_COLOR,S.style.width="".concat(a,"px"),S.style.height="".concat(g,"px"),y!==null&&(S.style.top="".concat(y,"px")),x!==null&&(S.style.bottom="".concat(x,"px")),I?S.style.left="".concat(C,"px"):S.style.right="".concat(C,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(S),h.appendChild(S)},u.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},u.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},u.prototype.getTimeoutFps=function(h){return 1e3/h},u})(),_0;(function(u){u[u.STATUS_DEFAULT=0]="STATUS_DEFAULT",u[u.STATUS_SUCCESS=1]="STATUS_SUCCESS",u[u.STATUS_WARNING=2]="STATUS_WARNING",u[u.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(_0||(_0={}));const Um=({onScan:u,onError:h,onClose:a})=>{const[g,y]=U.useState(""),[x,C]=U.useState(null),[I,S]=U.useState(!1),v=U.useRef(null),A=U.useRef(!1),k=U.useRef(u),_=Wn();U.useEffect(()=>{k.current=u},[u]),U.useEffect(()=>{const X="reader",z=setTimeout(async()=>{try{const H=await T0.getCameras();if(!H||H.length===0){y("No camera found on this device.");return}v.current||(v.current=new T0(X));const T={fps:30,qrbox:function(N,P){const D=Math.min(N,P),q=Math.floor(D*.7);return{width:q,height:q}},aspectRatio:1,formatsToSupport:[Fe.QR_CODE],disableFlip:!1,experimentalFeatures:{useBarCodeDetectorIfSupported:!0},videoConstraints:{facingMode:"environment",focusMode:"continuous",advanced:[{zoom:1}]}};A.current||(await v.current.start({facingMode:"environment",advanced:[{focusMode:"continuous",zoom:1}]},T,N=>{try{const P=JSON.parse(N);k.current(P)}catch(P){console.warn("Non-JSON QR Code",P)}},N=>{}),A.current=!0,C(!0))}catch(H){console.error("Camera start failed",H),C(!1),H.name==="NotAllowedError"?y("Camera permission denied. Please allow camera access in your browser settings."):location.protocol!=="https:"&&location.hostname!=="localhost"?y("Camera access requires a secure HTTPS connection."):y(`Camera error: ${H.message||H}`)}},100);return()=>{clearTimeout(z),v.current&&A.current&&v.current.stop().then(()=>{v.current.clear(),A.current=!1}).catch(H=>console.error("Failed to stop scanner",H))}},[]);const V=async()=>{if(v.current&&A.current)try{const X=v.current.getRunningTrackCapabilities();X&&X.torch&&(await v.current.applyVideoConstraints({advanced:[{torch:!I}]}),S(!I))}catch(X){console.warn("Torch not supported",X)}};return r.jsxs("div",{style:{position:"fixed",inset:0,zIndex:50,backgroundColor:"black",paddingTop:"env(safe-area-inset-top)"},children:[r.jsx("div",{id:"reader",style:{width:"100%",height:"100%",position:"absolute",inset:0}}),r.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,zIndex:50,background:"linear-gradient(to bottom, rgba(0,0,0,0.8), rgba(0,0,0,0.4), transparent)"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px"},children:[r.jsx("button",{onClick:()=>{a?a():_(-1)},style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.3)",backdropFilter:"blur(4px)",border:"1px solid rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",cursor:"pointer"},children:r.jsx(xi,{size:20})}),r.jsxs("div",{style:{flex:1,margin:"0 16px"},children:[r.jsx("h1",{style:{color:"white",fontSize:"18px",fontWeight:600,margin:0},children:"Scan Guest Pass"}),r.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"12px",marginTop:"2px"},children:"Quick & Secure Check-in"})]}),r.jsx("button",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.3)",backdropFilter:"blur(4px)",border:"1px solid rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",cursor:"pointer"},children:r.jsx(dg,{size:20})})]})}),x&&!g&&r.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:20},children:[r.jsx("div",{style:{position:"absolute",inset:0,background:"radial-gradient(circle at center, transparent 40%, rgba(0,0,0,0.7) 80%)"}}),r.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",marginTop:"200px",padding:"16px 24px",background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(12px)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.15)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",maxWidth:"280px",textAlign:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"8px"},children:[r.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#10b981",boxShadow:"0 0 12px rgba(16, 185, 129, 0.8)",animation:"pulse 2s infinite"}}),r.jsx("span",{style:{fontSize:"14px",fontWeight:700,color:"#ffffff",letterSpacing:"0.5px"},children:"READY TO SCAN"})]}),r.jsx("p",{style:{fontSize:"13px",color:"rgba(255, 255, 255, 0.8)",margin:0,lineHeight:"1.5",fontWeight:500},children:"Point camera at guest QR code to check them in"})]})]}),x&&!g&&r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,zIndex:40,paddingBottom:"env(safe-area-inset-bottom)"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"32px",paddingBottom:"48px"},children:[r.jsxs("button",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",color:"rgba(255,255,255,0.8)",cursor:"pointer",background:"none",border:"none"},children:[r.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"50%",background:"rgba(255,255,255,0.1)",backdropFilter:"blur(4px)",border:"1px solid rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:r.jsx(uf,{size:24})}),r.jsx("span",{style:{fontSize:"12px",fontWeight:500},children:"Upload QR"})]}),r.jsxs("button",{onClick:V,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",color:"rgba(255,255,255,0.8)",cursor:"pointer",background:"none",border:"none"},children:[r.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"50%",backdropFilter:"blur(4px)",border:`1px solid ${I?"rgba(234,179,8,0.5)":"rgba(255,255,255,0.2)"}`,display:"flex",alignItems:"center",justifyContent:"center",background:I?"rgba(234,179,8,0.3)":"rgba(255,255,255,0.1)",color:I?"#fde047":"white",transition:"all 0.3s"},children:r.jsx(cg,{size:24})}),r.jsx("span",{style:{fontSize:"12px",fontWeight:500},children:"Torch"})]})]})}),!x&&!g&&r.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",zIndex:30},children:r.jsxs("div",{style:{color:"white",display:"flex",flexDirection:"column",alignItems:"center"},children:[r.jsx(af,{size:64,style:{marginBottom:"16px",animation:"pulse 2s ease-in-out infinite"}}),r.jsx("p",{style:{fontSize:"18px",fontWeight:500},children:"Starting Camera..."})]})}),g&&r.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",zIndex:30,padding:"16px"},children:r.jsxs("div",{style:{textAlign:"center",padding:"32px",maxWidth:"28rem",background:"rgba(15,23,42,0.95)",backdropFilter:"blur(8px)",borderRadius:"16px",border:"1px solid rgba(239,68,68,0.5)",color:"#f87171"},children:[r.jsx(mo,{size:48,style:{margin:"0 auto 16px"}}),r.jsx("p",{style:{fontSize:"16px",fontWeight:500,marginBottom:"16px"},children:g}),x===!1&&r.jsx("p",{style:{fontSize:"12px",color:"#94a3b8",marginTop:"16px"},children:"If you are on iOS, make sure you are using Safari. Chrome on iOS may have permission issues."})]})})]})},Vm=()=>{const u=Wn(),{user:h}=Wr(),{events:a,markGuestAttended:g}=Tr(),[y,x]=U.useState(null),[C,I]=U.useState(1),[S,v]=U.useState("");if(!(a&&a.length>0&&!h?.isGuest))return r.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(to bottom, #0a0b1e, #101127, #0a0b1e)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:r.jsxs("div",{style:{maxWidth:"400px",textAlign:"center",background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"24px",padding:"3rem 2rem"},children:[r.jsx("div",{style:{display:"inline-flex",padding:"20px",borderRadius:"50%",background:"rgba(239, 68, 68, 0.1)",marginBottom:"1.5rem"},children:r.jsx(fa,{size:48,color:"#ef4444"})}),r.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:"white",marginBottom:"1rem"},children:"Unauthorized Access"}),r.jsx("p",{style:{fontSize:"16px",color:"rgba(255, 255, 255, 0.7)",marginBottom:"2rem",lineHeight:"1.6"},children:"Only event organizers can access the QR code scanner. Please create an event to use this feature."}),r.jsx("button",{onClick:()=>u("/"),className:"btn btn-primary",style:{width:"100%",padding:"0.875rem"},children:"Go to Events"})]})});const k=()=>{x(null),I(1)},_=X=>{if(y)return;if(!X.eventId||!X.guestId){x({status:"invalid",message:"Invalid QR Code structure"});return}const W=a.find(H=>H.id===X.eventId);if(!W){x({status:"invalid",message:"Event not found. You can only check in guests for your own events."});return}if(W.user_id!==h?.id){x({status:"invalid",message:"Unauthorized. You can only check in guests for your own events."});return}const z=W.guests?.find(H=>H.id===X.guestId);if(!z){x({status:"invalid",message:"Guest not found in guest list"});return}x({status:"valid",data:{event:W,guest:z},message:"Guest Verified"})},V=()=>{if(y?.status!=="valid")return;const{event:X,guest:W}=y.data;g(X.id,W.id,C),x({...y,status:"checked-in"})};return r.jsxs(r.Fragment,{children:[!y&&r.jsx(Um,{onScan:_,onClose:k}),y&&r.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(to bottom, #0a0b1e, #101127, #0a0b1e)",display:"flex",flexDirection:"column"},children:[r.jsxs("div",{style:{padding:"32px 24px",position:"relative",overflow:"hidden"},children:[r.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(135deg, rgba(99,102,241,0.1), rgba(168,85,247,0.05))",opacity:.5}}),r.jsxs("div",{style:{position:"relative",zIndex:10,textAlign:"center"},children:[r.jsx("div",{style:{display:"inline-flex",padding:"16px",borderRadius:"24px",background:"linear-gradient(135deg, rgba(99,102,241,0.2), rgba(168,85,247,0.2))",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 8px 32px rgba(99,102,241,0.2)",marginBottom:"12px"},children:r.jsx(gf,{size:40,color:"#a5b4fc",strokeWidth:2.5})}),r.jsx("h1",{style:{fontSize:"40px",fontWeight:900,background:"linear-gradient(to right, #ffffff, #c7d2fe, #ffffff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",margin:"12px 0",letterSpacing:"-0.5px"},children:"Gatekeeper"}),r.jsx("p",{style:{fontSize:"12px",fontWeight:600,color:"rgba(196,181,253,0.6)",textTransform:"uppercase",letterSpacing:"2px",margin:0},children:"Guest Check-In"})]})]}),r.jsxs("div",{style:{flex:1,padding:"0 16px 24px"},children:[y.status==="valid"&&r.jsx("div",{style:{maxWidth:"448px",margin:"0 auto"},children:r.jsxs("div",{style:{position:"relative",overflow:"hidden",borderRadius:"24px",background:"linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05))",backdropFilter:"blur(20px)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 20px 40px rgba(99,102,241,0.1)",padding:"32px"},children:[r.jsx("div",{style:{position:"absolute",top:"-80px",right:"-80px",width:"160px",height:"160px",background:"rgba(99,102,241,0.2)",borderRadius:"50%",filter:"blur(60px)"}}),r.jsx("div",{style:{position:"absolute",bottom:"-80px",left:"-80px",width:"160px",height:"160px",background:"rgba(168,85,247,0.2)",borderRadius:"50%",filter:"blur(60px)"}}),r.jsxs("div",{style:{position:"relative",zIndex:10},children:[r.jsxs("div",{style:{position:"relative",width:"fit-content",margin:"0 auto 32px"},children:[r.jsxs("div",{style:{width:"128px",height:"128px",background:"linear-gradient(135deg, #6366f1, #a855f7, #ec4899)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 20px 40px rgba(99,102,241,0.3)",border:"4px solid rgba(255,255,255,0.1)",position:"relative",overflow:"hidden"},children:[r.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)",animation:"shimmer 2s infinite"}}),r.jsx(Wt,{size:56,color:"#ffffff",strokeWidth:2,style:{position:"relative",zIndex:10}})]}),y.data.guest.attended&&r.jsxs("div",{style:{position:"absolute",bottom:"-8px",left:"50%",transform:"translateX(-50%)",whiteSpace:"nowrap",background:"linear-gradient(to right, #fbbf24, #f97316)",color:"#000",padding:"6px 16px",borderRadius:"20px",fontSize:"11px",fontWeight:900,boxShadow:"0 8px 16px rgba(251,191,36,0.4)",border:"2px solid rgba(255,255,255,0.5)",animation:"bounce 1s infinite"},children:[" CHECKED IN ",y.data.guest.attendedCount||1,""]})]}),r.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[r.jsx("h2",{style:{fontSize:"36px",fontWeight:900,color:"#ffffff",margin:"0 0 16px 0",textShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:y.data.guest.name}),r.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderRadius:"20px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",backdropFilter:"blur(10px)"},children:[r.jsx("span",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#a5b4fc",animation:"pulse 2s infinite",boxShadow:"0 0 10px rgba(165,180,252,0.5)"}}),r.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:"rgba(255,255,255,0.9)"},children:y.data.event.title})]}),y.data.guest.attended&&r.jsxs("div",{style:{marginTop:"16px",padding:"16px",background:"linear-gradient(135deg, rgba(251,191,36,0.1), rgba(249,115,22,0.1))",border:"1px solid rgba(251,191,36,0.3)",borderRadius:"16px",backdropFilter:"blur(10px)"},children:[r.jsx("p",{style:{color:"#fcd34d",fontWeight:700,fontSize:"14px",margin:"0 0 4px 0",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:" Already Checked In"}),r.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"12px",margin:0},children:"Add more guests to their party below"})]})]}),r.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",backdropFilter:"blur(10px)",padding:"24px",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.1)",marginBottom:"24px"},children:[r.jsx("label",{style:{fontSize:"11px",fontWeight:900,color:"rgba(255,255,255,0.5)",textTransform:"uppercase",letterSpacing:"2px",display:"block",textAlign:"center",marginBottom:"16px"},children:y.data.guest.attended?"+ Additional Guests":"Party Size"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"24px"},children:[r.jsx("button",{onClick:()=>I(Math.max(1,C-1)),style:{width:"56px",height:"56px",borderRadius:"16px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"rgba(255,255,255,0.7)",fontSize:"24px",fontWeight:900,cursor:"pointer",boxShadow:"0 4px 8px rgba(0,0,0,0.2)",transition:"all 0.2s"},onMouseDown:X=>X.currentTarget.style.transform="scale(0.95)",onMouseUp:X=>X.currentTarget.style.transform="scale(1)",children:""}),r.jsx("span",{style:{fontSize:"48px",fontWeight:900,width:"64px",textAlign:"center",background:"linear-gradient(135deg, #ffffff, #c7d2fe)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:C}),r.jsx("button",{onClick:()=>I(C+1),style:{width:"56px",height:"56px",borderRadius:"16px",background:"linear-gradient(135deg, #6366f1, #a855f7)",border:"none",color:"#ffffff",fontSize:"24px",fontWeight:900,cursor:"pointer",boxShadow:"0 8px 16px rgba(99,102,241,0.5)",transition:"all 0.2s"},onMouseDown:X=>X.currentTarget.style.transform="scale(0.95)",onMouseUp:X=>X.currentTarget.style.transform="scale(1)",children:"+"})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[r.jsx("button",{onClick:k,style:{height:"56px",borderRadius:"16px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",color:"#ffffff",fontWeight:700,cursor:"pointer",transition:"all 0.2s"},children:"Cancel"}),r.jsxs("button",{onClick:V,style:{height:"56px",borderRadius:"16px",background:"linear-gradient(to right, #10b981, #14b8a6)",border:"none",color:"#ffffff",fontWeight:900,cursor:"pointer",boxShadow:"0 8px 16px rgba(16,185,129,0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s"},children:[y.data.guest.attended?"Add Guests":"Check In",r.jsx(sf,{size:20,strokeWidth:3})]})]})]})]})}),y.status==="invalid"&&r.jsx("div",{style:{maxWidth:"448px",margin:"0 auto"},children:r.jsxs("div",{style:{position:"relative",overflow:"hidden",borderRadius:"24px",background:"linear-gradient(135deg, rgba(239,68,68,0.1), rgba(239,68,68,0.05))",backdropFilter:"blur(20px)",border:"1px solid rgba(239,68,68,0.3)",boxShadow:"0 20px 40px rgba(239,68,68,0.1)",padding:"32px",textAlign:"center"},children:[r.jsx("div",{style:{position:"absolute",top:"-80px",right:"-80px",width:"160px",height:"160px",background:"rgba(239,68,68,0.2)",borderRadius:"50%",filter:"blur(60px)"}}),r.jsxs("div",{style:{position:"relative",zIndex:10},children:[r.jsx("div",{style:{width:"112px",height:"112px",background:"linear-gradient(135deg, rgba(239,68,68,0.2), rgba(239,68,68,0.1))",color:"#f87171",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",animation:"pulse 2s infinite",border:"4px solid rgba(239,68,68,0.2)",boxShadow:"0 20px 40px rgba(239,68,68,0.2)"},children:r.jsx(Wd,{size:64,strokeWidth:2.5})}),r.jsx("h2",{style:{fontSize:"36px",fontWeight:900,color:"#ffffff",margin:"0 0 12px 0",textShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:"Invalid Ticket"}),r.jsx("p",{style:{color:"#fca5a5",fontWeight:600,background:"rgba(0,0,0,0.2)",padding:"12px 20px",borderRadius:"16px",display:"inline-block",border:"1px solid rgba(239,68,68,0.2)",margin:"0 0 24px 0"},children:y.message}),r.jsx("button",{onClick:k,style:{width:"100%",height:"56px",borderRadius:"16px",background:"rgba(255,255,255,0.05)",border:"2px solid rgba(239,68,68,0.5)",color:"#fca5a5",fontWeight:900,cursor:"pointer",transition:"all 0.2s"},children:"Scan Next Ticket"})]})]})}),y.status==="checked-in"&&r.jsx("div",{style:{maxWidth:"448px",margin:"0 auto"},children:r.jsxs("div",{style:{position:"relative",overflow:"hidden",borderRadius:"24px",background:"linear-gradient(135deg, rgba(16,185,129,0.1), rgba(16,185,129,0.05))",backdropFilter:"blur(20px)",border:"1px solid rgba(16,185,129,0.3)",boxShadow:"0 20px 40px rgba(16,185,129,0.2)",padding:"32px",textAlign:"center"},children:[r.jsx("div",{style:{position:"absolute",top:"-80px",right:"-80px",width:"160px",height:"160px",background:"rgba(16,185,129,0.2)",borderRadius:"50%",filter:"blur(60px)"}}),r.jsxs("div",{style:{position:"relative",zIndex:10},children:[r.jsx("div",{style:{width:"112px",height:"112px",background:"linear-gradient(135deg, #10b981, #14b8a6)",color:"#ffffff",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",boxShadow:"0 20px 40px rgba(16,185,129,0.5)",animation:"bounce 1s infinite"},children:r.jsx(js,{size:64,strokeWidth:2.5})}),r.jsx("h2",{style:{fontSize:"36px",fontWeight:900,background:"linear-gradient(to right, #ffffff, #d1fae5)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",margin:"0 0 12px 0",textShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:"Access Granted"}),r.jsxs("p",{style:{color:"#6ee7b7",fontSize:"20px",fontWeight:700,margin:"0 0 12px 0"},children:["Welcome, ",y.data.guest.name,"!"]}),r.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",fontSize:"14px",color:"rgba(255,255,255,0.6)",background:"rgba(0,0,0,0.2)",padding:"8px 16px",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.1)",margin:"0 0 24px 0"},children:["Total Party: ",r.jsx("span",{style:{color:"#ffffff",fontWeight:900,fontSize:"18px"},children:C})]}),r.jsxs("button",{onClick:k,style:{width:"100%",height:"64px",borderRadius:"16px",background:"linear-gradient(to right, #6366f1, #a855f7)",border:"none",color:"#ffffff",fontSize:"18px",fontWeight:900,cursor:"pointer",boxShadow:"0 8px 16px rgba(99,102,241,0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",margin:"0 auto",transition:"all 0.2s"},children:[r.jsx(gg,{size:24,strokeWidth:2.5})," Scan Next Guest"]})]})]})})]})]})]})},Hm=()=>{const{eventId:u,guestId:h}=go(),{getEvent:a,rsvpGuest:g,loading:y}=Tr(),[x,C]=U.useState("loading"),[I,S]=U.useState(null),[v,A]=U.useState(null);U.useEffect(()=>{if(y){C("loading");return}const _=a(u);if(!_){C("error");return}const V=_.guests?.find(X=>X.id===h);if(!V){C("error");return}A(_),S(V),V.rsvp!==void 0&&V.rsvp!==null?C("already-rsvpd"):C("ready")},[u,h,a,y]);const k=async _=>{try{await g(u,h,_),C("success")}catch(V){console.error("RSVP error:",V),C("error")}};if(x==="loading")return r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"var(--bg-secondary)"},children:r.jsx("p",{style:{color:"var(--text-secondary)"},children:"Loading..."})});if(x==="error")return r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"var(--bg-secondary)",padding:"2rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"32rem",textAlign:"center",padding:"3rem 2rem"},children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"1rem"},children:"Invitation Not Found"}),r.jsx("p",{style:{color:"var(--text-secondary)"},children:"This invitation link is invalid or has expired."})]})});if(x==="success")return r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"2rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"32rem",textAlign:"center",padding:"3rem 2rem"},children:[r.jsx("div",{style:{width:"4rem",height:"4rem",backgroundColor:"#d1fae5",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:r.jsx(js,{size:32,style:{color:"var(--success)"}})}),r.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"1rem"},children:"You're All Set!"}),r.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"1.125rem",marginBottom:"0.5rem"},children:["Thanks for confirming, ",r.jsx("strong",{children:I?.name}),"!"]}),r.jsxs("p",{style:{color:"var(--text-secondary)"},children:["We can't wait to see you at ",r.jsx("strong",{children:v?.title})]}),r.jsx("div",{style:{marginTop:"2rem",padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)"},children:r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:"You'll receive your QR code ticket soon. Show it at the door to check in!"})})]})});if(x==="already-rsvpd"){const _=I.rsvp===!0?"attending":"not attending",V=I.rsvp===!0?"var(--success)":"var(--error)";return r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"var(--bg-secondary)",padding:"2rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"32rem",padding:"3rem 2rem"},children:[r.jsx("div",{style:{width:"4rem",height:"4rem",backgroundColor:I.rsvp?"#d1fae5":"#fee2e2",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:r.jsx(js,{size:32,style:{color:V}})}),r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"1rem",textAlign:"center"},children:"RSVP Received"}),r.jsxs("p",{style:{color:"var(--text-secondary)",textAlign:"center",marginBottom:"1.5rem"},children:["You've confirmed you're ",r.jsx("strong",{style:{color:V},children:_})," for ",r.jsx("strong",{children:v?.title})]}),r.jsx("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"1.5rem",marginBottom:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[v?.date&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",color:"var(--text-secondary)"},children:[r.jsx(Zn,{size:18}),r.jsx("span",{children:new Date(v.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),v?.location&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",color:"var(--text-secondary)"},children:[r.jsx(Kr,{size:18}),r.jsx("span",{children:v.location})]})]})}),r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"1rem"},children:"Need to change your response?"}),r.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[r.jsx("button",{onClick:()=>k(!1),className:"btn btn-secondary",style:{flex:1,padding:"0.875rem",backgroundColor:I.rsvp===!1?"var(--error)":"",color:I.rsvp===!1?"white":""},children:"Can't Make It"}),r.jsx("button",{onClick:()=>k(!0),className:"btn btn-primary",style:{flex:1,padding:"0.875rem",backgroundColor:I.rsvp===!0?"var(--success)":""},children:"Yes, I'll Be There!"})]})]})]})})}return r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"2rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"32rem",padding:"3rem 2rem"},children:[r.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[r.jsx("h1",{style:{fontSize:"2.25rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"1rem"},children:"You're Invited!"}),r.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",backgroundColor:"#e0e7ff",borderRadius:"9999px",marginBottom:"1.5rem"},children:r.jsx("span",{style:{color:"var(--primary)",fontWeight:600,fontSize:"0.875rem"},children:I?.name})})]}),r.jsxs("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"1.5rem",marginBottom:"2rem"},children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"1rem"},children:v?.title}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[v?.date&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",color:"var(--text-secondary)"},children:[r.jsx(Zn,{size:18}),r.jsx("span",{children:new Date(v.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),v?.location&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",color:"var(--text-secondary)"},children:[r.jsx(Kr,{size:18}),r.jsx("span",{children:v.location})]})]})]}),r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx("p",{style:{fontSize:"1.125rem",color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Will you be attending?"}),r.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[r.jsx("button",{onClick:()=>k(!1),className:"btn btn-secondary",style:{flex:1,padding:"0.875rem"},children:"Can't Make It"}),r.jsx("button",{onClick:()=>k(!0),className:"btn btn-primary",style:{flex:1,padding:"0.875rem"},children:"Yes, I'll Be There!"})]})]})]})})},Gm=()=>{const{id:u}=go(),h=Wn(),{fetchPublicEvent:a}=Tr(),[g,y]=U.useState(null),[x,C]=U.useState(!0),[I,S]=U.useState(null);U.useEffect(()=>{v()},[u]);const v=async()=>{try{const A=await a(u);y(A)}catch{S("Event not found")}finally{C(!1)}};return x?r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%)"},children:r.jsx(Tl,{size:48,style:{color:"white",animation:"spin 1s linear infinite"}})}):I&&!g?r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"2rem",textAlign:"center"},children:[r.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:700,marginBottom:"1rem"},children:"Oops!"}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:I}),r.jsxs("button",{onClick:()=>h("/"),className:"btn btn-primary",children:[r.jsx(xi,{size:16})," Go Home"]})]}):r.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%)",padding:"2rem 1rem"},children:[r.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[r.jsxs("div",{style:{textAlign:"center",color:"white",marginBottom:"3rem"},children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),r.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:700,marginBottom:"0.5rem"},children:"You're Invited!"}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:600,opacity:.95},children:g.title})]}),r.jsx("div",{className:"card",style:{padding:"2rem",marginBottom:"2rem"},children:r.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[g.date&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"var(--radius-lg)",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Zn,{size:24,style:{color:"var(--primary)"}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Date"}),r.jsx("div",{style:{fontSize:"1.125rem",fontWeight:600},children:new Date(g.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),g.time&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"var(--radius-lg)",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(ha,{size:24,style:{color:"var(--primary)"}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Time"}),r.jsx("div",{style:{fontSize:"1.125rem",fontWeight:600},children:g.time})]})]}),g.venue?.name&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"var(--radius-lg)",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Kr,{size:24,style:{color:"var(--primary)"}})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Venue"}),r.jsx("div",{style:{fontSize:"1.125rem",fontWeight:600},children:g.venue.name}),g.venue.address&&r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:g.venue.address})]})]}),g.description&&r.jsxs("div",{style:{padding:"1rem",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",borderLeft:"4px solid var(--primary)"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.5rem"},children:"About the Event"}),r.jsx("div",{style:{lineHeight:"1.6",color:"var(--text-primary)"},children:g.description})]})]})}),r.jsx("div",{style:{textAlign:"center",color:"white",fontSize:"0.875rem",opacity:.9,marginBottom:"1rem"},children:"We look forward to seeing you there! "}),r.jsxs("div",{style:{textAlign:"center",color:"white",opacity:.7,fontSize:"0.75rem"},children:["Powered by Host",r.jsx("i",{children:"Eze"})," "]})]}),r.jsx("style",{children:`
                @keyframes spin {
                    to { transform: rotate(360deg); }
                }
            `})]})};var lo;(function(u){u.Prompt="PROMPT",u.Camera="CAMERA",u.Photos="PHOTOS"})(lo||(lo={}));var ca;(function(u){u.Rear="REAR",u.Front="FRONT"})(ca||(ca={}));var R0;(function(u){u.Uri="uri",u.Base64="base64",u.DataUrl="dataUrl"})(R0||(R0={}));class Xm extends ga{async getPhoto(h){return new Promise(async(a,g)=>{if(h.webUseInput||h.source===lo.Photos)this.fileInputExperience(h,a,g);else if(h.source===lo.Prompt){let y=document.querySelector("pwa-action-sheet");y||(y=document.createElement("pwa-action-sheet"),document.body.appendChild(y)),y.header=h.promptLabelHeader||"Photo",y.cancelable=!1,y.options=[{title:h.promptLabelPhoto||"From Photos"},{title:h.promptLabelPicture||"Take Picture"}],y.addEventListener("onSelection",async x=>{x.detail===0?this.fileInputExperience(h,a,g):this.cameraExperience(h,a,g)})}else this.cameraExperience(h,a,g)})}async pickImages(h){return new Promise(async(a,g)=>{this.multipleFileInputExperience(a,g)})}async cameraExperience(h,a,g){if(customElements.get("pwa-camera-modal")){const y=document.createElement("pwa-camera-modal");y.facingMode=h.direction===ca.Front?"user":"environment",document.body.appendChild(y);try{await y.componentOnReady(),y.addEventListener("onPhoto",async x=>{const C=x.detail;C===null?g(new As("User cancelled photos app")):C instanceof Error?g(C):a(await this._getCameraPhoto(C,h)),y.dismiss(),document.body.removeChild(y)}),y.present()}catch{this.fileInputExperience(h,a,g)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(h,a,g)}fileInputExperience(h,a,g){let y=document.querySelector("#_capacitor-camera-input");const x=()=>{var C;(C=y.parentNode)===null||C===void 0||C.removeChild(y)};y||(y=document.createElement("input"),y.id="_capacitor-camera-input",y.type="file",y.hidden=!0,document.body.appendChild(y),y.addEventListener("change",C=>{const I=y.files[0];let S="jpeg";if(I.type==="image/png"?S="png":I.type==="image/gif"&&(S="gif"),h.resultType==="dataUrl"||h.resultType==="base64"){const v=new FileReader;v.addEventListener("load",()=>{if(h.resultType==="dataUrl")a({dataUrl:v.result,format:S});else if(h.resultType==="base64"){const A=v.result.split(",")[1];a({base64String:A,format:S})}x()}),v.readAsDataURL(I)}else a({webPath:URL.createObjectURL(I),format:S}),x()}),y.addEventListener("cancel",C=>{g(new As("User cancelled photos app")),x()})),y.accept="image/*",y.capture=!0,h.source===lo.Photos||h.source===lo.Prompt?y.removeAttribute("capture"):h.direction===ca.Front?y.capture="user":h.direction===ca.Rear&&(y.capture="environment"),y.click()}multipleFileInputExperience(h,a){let g=document.querySelector("#_capacitor-camera-input-multiple");const y=()=>{var x;(x=g.parentNode)===null||x===void 0||x.removeChild(g)};g||(g=document.createElement("input"),g.id="_capacitor-camera-input-multiple",g.type="file",g.hidden=!0,g.multiple=!0,document.body.appendChild(g),g.addEventListener("change",x=>{const C=[];for(let I=0;I<g.files.length;I++){const S=g.files[I];let v="jpeg";S.type==="image/png"?v="png":S.type==="image/gif"&&(v="gif"),C.push({webPath:URL.createObjectURL(S),format:v})}h({photos:C}),y()}),g.addEventListener("cancel",x=>{a(new As("User cancelled photos app")),y()})),g.accept="image/*",g.click()}_getCameraPhoto(h,a){return new Promise((g,y)=>{const x=new FileReader,C=h.type.split("/")[1];a.resultType==="uri"?g({webPath:URL.createObjectURL(h),format:C,saved:!1}):(x.readAsDataURL(h),x.onloadend=()=>{const I=x.result;a.resultType==="dataUrl"?g({dataUrl:I,format:C,saved:!1}):g({base64String:I.split(",")[1],format:C,saved:!1})},x.onerror=I=>{y(I)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const _f=Ki("Camera",{web:()=>new Xm}),Gi="https://gatherly-backend-3vmv.onrender.com",Ym=()=>{const{eventId:u}=go(),h=Wn(),[a,g]=U.useState([]),[y,x]=U.useState([]),[C,I]=U.useState(null),[S,v]=U.useState(!0),[A,k]=U.useState(!1),[_,V]=U.useState(""),[X,W]=U.useState(null),[z,H]=U.useState(!1),[T,N]=U.useState(null),[P,D]=U.useState(null);U.useEffect(()=>{q()},[u]);const q=async()=>{try{const be=localStorage.getItem("token"),we=await fetch(`${Gi}/wall/${u}/details`,{headers:{Authorization:`Bearer ${be}`}});if(we.ok){const $=await we.json();N($)}const de=await fetch(`${Gi}/wall/${u}/join`,{method:"POST",headers:{Authorization:`Bearer ${be}`}});if(!de.ok){const $=await de.text();throw console.error("Join failed:",de.status,$.substring(0,200)),new Error(`Failed to join event wall: ${de.status}`)}const te=await fetch(`${Gi}/wall/${u}/posts`,{headers:{Authorization:`Bearer ${be}`}});if(!te.ok){const $=await te.text();throw console.error("Posts fetch failed:",te.status,$.substring(0,200)),new Error(`Failed to load posts: ${te.status}`)}const Y=await te.json();g(Y.posts||[]);const J=await fetch(`${Gi}/wall/${u}/participants`,{headers:{Authorization:`Bearer ${be}`}});if(!J.ok){const $=await J.text();throw console.error("Participants fetch failed:",J.status,$.substring(0,200)),new Error(`Failed to load participants: ${J.status}`)}const ce=(await J.json()).participants||[];x(ce);const Ce=ce.find($=>$.is_current_user);Ce&&I(Ce.id),v(!1)}catch(be){console.error("Error loading event wall:",be),v(!1)}};U.useEffect(()=>{const be=localStorage.getItem("token");if(be)try{const we=JSON.parse(atob(be.split(".")[1]));D(we.id)}catch(we){console.error("Error parsing token:",we)}},[]);const F=async()=>{try{const be=await _f.getPhoto({quality:70,resultType:"base64",source:"photos",saveToGallery:!1}),we=`data:image/${be.format};base64,${be.base64String}`;W(we)}catch(be){console.error("Error picking image:",be)}},Q=async()=>{if(!(!_.trim()&&!X)&&!z)try{H(!0);const be=localStorage.getItem("token");if(!C){alert("Unable to post - no participant found. Please refresh the page."),console.error("No current participant ID found");return}const we=await fetch(`${Gi}/wall/${u}/posts`,{method:"POST",headers:{Authorization:`Bearer ${be}`,"Content-Type":"application/json"},body:JSON.stringify({participantId:C,type:X?"photo":"message",content:_||"",photoUrl:X||null})});console.log("Post creation response status:",we.status);const de=await we.json();console.log("Post creation response data:",de),we.ok?(Cf({particleCount:80,spread:60,origin:{y:.7},colors:["#6366f1","#a855f7","#ec4899"]}),V(""),W(null),k(!1),await q()):alert(`Failed to create post: ${de.error||"Unknown error"}`)}catch(be){console.error("Error creating post:",be),alert("Failed to create post. Check console for details.")}finally{H(!1)}},pe=async be=>{try{const we=localStorage.getItem("token");if(!C){console.error("No current participant ID found");return}const te=a.find(Y=>Y.id===be)?.user_has_liked;g(a.map(Y=>Y.id===be?{...Y,user_has_liked:!te,like_count:(Y.like_count||0)+(te?-1:1)}:Y)),te?await fetch(`${Gi}/wall/${u}/posts/${be}/like/${C}`,{method:"DELETE",headers:{Authorization:`Bearer ${we}`}}):await fetch(`${Gi}/wall/${u}/posts/${be}/like`,{method:"POST",headers:{Authorization:`Bearer ${we}`,"Content-Type":"application/json"},body:JSON.stringify({participantId:C})}),await q()}catch(we){console.error("Error toggling like:",we),await q()}},Me=async be=>{if(window.confirm("Are you sure you want to delete this post? This action cannot be undone."))try{const we=localStorage.getItem("token"),de=await fetch(`${Gi}/wall/${u}/posts/${be}`,{method:"DELETE",headers:{Authorization:`Bearer ${we}`}});if(de.ok)g(a.filter(te=>te.id!==be));else{const te=await de.json();alert(te.error||"Failed to delete post")}}catch(we){console.error("Error deleting post:",we),alert("Failed to delete post")}};return S?r.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(to bottom, #0a0b1e, #101127)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("div",{style:{color:"#a5b4fc",fontSize:"18px",fontWeight:600},children:"Loading event wall..."})}):r.jsxs("div",{style:{minHeight:"100vh",background:"#fff"},children:[r.jsx("div",{style:{background:"#fff",padding:"20px 16px",borderBottom:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},children:[r.jsx("button",{onClick:()=>h(-1),style:{width:"40px",height:"40px",borderRadius:"50%",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#a5b4fc"},children:r.jsx(xi,{size:20})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("h1",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937",margin:0},children:T?.title||"Event Wall"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"4px"},children:[r.jsx(Wt,{size:14,color:"#6b7280"}),r.jsxs("span",{style:{color:"#6b7280",fontSize:"12px",fontWeight:"500"},children:[y.length," participants"]})]})]}),r.jsxs("button",{onClick:()=>k(!0),style:{padding:"10px 16px",borderRadius:"8px",background:"#6366f1",border:"none",color:"#ffffff",fontWeight:"600",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[r.jsx(Mt,{size:16,strokeWidth:3})," Post"]})]})}),A&&r.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.8)",zIndex:1e3,display:"flex",alignItems:"flex-end",justifyContent:"center"},children:r.jsxs("div",{style:{width:"100%",maxWidth:"600px",background:"#fff",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",padding:"24px",paddingBottom:"calc(24px + 60px + env(safe-area-inset-bottom))",boxShadow:"0 -4px 20px rgba(0,0,0,0.1)",maxHeight:"80vh",overflowY:"auto"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[r.jsx("h3",{style:{color:"#1f2937",fontSize:"18px",fontWeight:"600",margin:0},children:"New Post"}),r.jsx("button",{onClick:()=>k(!1),style:{background:"#f3f4f6",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px 16px",color:"#6b7280",cursor:"pointer",fontWeight:"500"},children:"Cancel"})]}),r.jsxs("button",{onClick:F,style:{width:"100%",padding:"12px",borderRadius:"8px",background:"#f3f4f6",border:"1px solid #e5e7eb",color:"#6b7280",fontWeight:"500",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"12px"},children:[r.jsx(uf,{size:18})," Add Photo"]}),X&&r.jsxs("div",{style:{position:"relative",marginBottom:"12px"},children:[r.jsx("img",{src:X,style:{width:"100%",maxHeight:"200px",objectFit:"cover",borderRadius:"8px"},alt:"Selected"}),r.jsx("button",{onClick:()=>W(null),style:{position:"absolute",top:"8px",right:"8px",background:"rgba(0,0,0,0.6)",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff"},children:r.jsx(It,{size:18})})]}),r.jsx("textarea",{value:_,onChange:be=>V(be.target.value),placeholder:"What's on your mind?",style:{width:"100%",minHeight:"120px",padding:"16px",borderRadius:"8px",background:"#fff",border:"1px solid #e5e7eb",color:"#1f2937",fontSize:"15px",resize:"vertical",marginBottom:"16px",fontFamily:"inherit"}}),r.jsxs("button",{onClick:Q,disabled:!_.trim()||z,style:{width:"100%",padding:"12px",borderRadius:"8px",background:_.trim()&&!z?"#6366f1":"#f3f4f6",border:"none",color:_.trim()&&!z?"#ffffff":"#9ca3af",fontWeight:"600",fontSize:"15px",cursor:_.trim()&&!z?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",opacity:z?.6:1},children:[r.jsx(mf,{size:18,strokeWidth:2.5}),z?"Posting...":"Post to Wall"]})]})}),r.jsx("div",{style:{padding:"16px",paddingBottom:"max(80px, env(safe-area-inset-bottom))"},children:a.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[r.jsx(_d,{size:48,color:"#6366f1",style:{marginBottom:"16px"}}),r.jsx("h3",{style:{color:"#1f2937",fontSize:"18px",fontWeight:"600",margin:"0 0 8px 0"},children:"No posts yet"}),r.jsx("p",{style:{color:"#6b7280",fontSize:"14px",margin:0},children:"Be the first to share something!"})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:a.map(be=>r.jsxs("div",{style:{background:"#fff",borderRadius:"12px",padding:"20px",marginBottom:"12px",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0,0,0,0.05)",position:"relative",overflow:"hidden"},children:[be.is_pinned&&r.jsx("div",{style:{position:"absolute",top:"12px",right:"12px",background:"linear-gradient(135deg, #fbbf24, #f59e0b)",color:"#000",padding:"4px 12px",borderRadius:"12px",fontSize:"10px",fontWeight:900,textTransform:"uppercase",letterSpacing:"0.5px"},children:" Pinned"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[be.author_profile_picture?r.jsx("img",{src:be.author_profile_picture,alt:be.author_name,style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover",border:"2px solid #e5e7eb"}}):r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #6366f1, #a855f7)",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff",fontWeight:900,fontSize:"16px"},children:be.author_name?.charAt(0)||"?"}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{color:"#1f2937",fontWeight:"600",fontSize:"15px"},children:be.author_name}),r.jsx("div",{style:{color:"#6b7280",fontSize:"12px"},children:new Date(be.created_at).toLocaleDateString()})]}),(P===T?.user_id||P===be.author_user_id)&&r.jsx("button",{onClick:()=>Me(be.id),style:{padding:"8px",borderRadius:"8px",background:"transparent",border:"1px solid #e5e7eb",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:we=>{we.currentTarget.style.background="#fee2e2",we.currentTarget.style.borderColor="#ef4444"},onMouseLeave:we=>{we.currentTarget.style.background="transparent",we.currentTarget.style.borderColor="#e5e7eb"},title:"Delete post",children:r.jsx(Yt,{size:16})})]}),r.jsx("p",{style:{color:"#1f2937",fontSize:"15px",lineHeight:"1.6",margin:"0 0 16px 0",whiteSpace:"pre-wrap"},children:be.content}),be.photo_url&&r.jsx("img",{src:be.photo_url,style:{width:"100%",maxHeight:"400px",objectFit:"cover",borderRadius:"8px",marginTop:"12px",cursor:"pointer"},onClick:()=>window.open(be.photo_url,"_blank"),alt:"Post image"}),r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"24px",paddingTop:"12px",borderTop:"1px solid #e5e7eb"},children:r.jsxs("button",{onClick:()=>pe(be.id),style:{display:"flex",alignItems:"center",gap:"6px",background:"none",border:"none",color:be.user_has_liked?"#f87171":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:600,transition:"color 0.2s"},children:[r.jsx(Nl,{size:18,fill:be.user_has_liked?"#f87171":"none"})," ",be.like_count||0]})})]},be.id))})})]})};var Dd=function(u,h){return Dd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,g){a.__proto__=g}||function(a,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(a[y]=g[y])},Dd(u,h)};function Zm(u,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");Dd(u,h);function a(){this.constructor=u}u.prototype=h===null?Object.create(h):(a.prototype=h.prototype,new a)}var En=function(){return En=Object.assign||function(h){for(var a,g=1,y=arguments.length;g<y;g++){a=arguments[g];for(var x in a)Object.prototype.hasOwnProperty.call(a,x)&&(h[x]=a[x])}return h},En.apply(this,arguments)};var yd,O0;function qm(){if(O0)return yd;O0=1;var u=!1,h,a,g,y,x,C,I,S,v,A,k,_,V,X,W;function z(){if(!u){u=!0;var T=navigator.userAgent,N=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(T),P=/(Mac OS X)|(Windows)|(Linux)/.exec(T);if(_=/\b(iPhone|iP[ao]d)/.exec(T),V=/\b(iP[ao]d)/.exec(T),A=/Android/i.exec(T),X=/FBAN\/\w+;/i.exec(T),W=/Mobile/i.exec(T),k=!!/Win64/.exec(T),N){h=N[1]?parseFloat(N[1]):N[5]?parseFloat(N[5]):NaN,h&&document&&document.documentMode&&(h=document.documentMode);var D=/(?:Trident\/(\d+.\d+))/.exec(T);C=D?parseFloat(D[1])+4:h,a=N[2]?parseFloat(N[2]):NaN,g=N[3]?parseFloat(N[3]):NaN,y=N[4]?parseFloat(N[4]):NaN,y?(N=/(?:Chrome\/(\d+\.\d+))/.exec(T),x=N&&N[1]?parseFloat(N[1]):NaN):x=NaN}else h=a=g=x=y=NaN;if(P){if(P[1]){var q=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(T);I=q?parseFloat(q[1].replace("_",".")):!0}else I=!1;S=!!P[2],v=!!P[3]}else I=S=v=!1}}var H={ie:function(){return z()||h},ieCompatibilityMode:function(){return z()||C>h},ie64:function(){return H.ie()&&k},firefox:function(){return z()||a},opera:function(){return z()||g},webkit:function(){return z()||y},safari:function(){return H.webkit()},chrome:function(){return z()||x},windows:function(){return z()||S},osx:function(){return z()||I},linux:function(){return z()||v},iphone:function(){return z()||_},mobile:function(){return z()||_||V||A||W},nativeApp:function(){return z()||X},android:function(){return z()||A},ipad:function(){return z()||V}};return yd=H,yd}var vd,D0;function $m(){if(D0)return vd;D0=1;var u=!!(typeof window<"u"&&window.document&&window.document.createElement),h={canUseDOM:u,canUseWorkers:typeof Worker<"u",canUseEventListeners:u&&!!(window.addEventListener||window.attachEvent),canUseViewport:u&&!!window.screen,isInWorker:!u};return vd=h,vd}var wd,P0;function Km(){if(P0)return wd;P0=1;var u=$m(),h;u.canUseDOM&&(h=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function a(g,y){if(!u.canUseDOM||y&&!("addEventListener"in document))return!1;var x="on"+g,C=x in document;if(!C){var I=document.createElement("div");I.setAttribute(x,"return;"),C=typeof I[x]=="function"}return!C&&h&&g==="wheel"&&(C=document.implementation.hasFeature("Events.wheel","3.0")),C}return wd=a,wd}var bd,M0;function Qm(){if(M0)return bd;M0=1;var u=qm(),h=Km(),a=10,g=40,y=800;function x(C){var I=0,S=0,v=0,A=0;return"detail"in C&&(S=C.detail),"wheelDelta"in C&&(S=-C.wheelDelta/120),"wheelDeltaY"in C&&(S=-C.wheelDeltaY/120),"wheelDeltaX"in C&&(I=-C.wheelDeltaX/120),"axis"in C&&C.axis===C.HORIZONTAL_AXIS&&(I=S,S=0),v=I*a,A=S*a,"deltaY"in C&&(A=C.deltaY),"deltaX"in C&&(v=C.deltaX),(v||A)&&C.deltaMode&&(C.deltaMode==1?(v*=g,A*=g):(v*=y,A*=y)),v&&!I&&(I=v<1?-1:1),A&&!S&&(S=A<1?-1:1),{spinX:I,spinY:S,pixelX:v,pixelY:A}}return x.getEventType=function(){return u.firefox()?"DOMMouseScroll":h("wheel")?"wheel":"mousewheel"},bd=x,bd}var Cd,B0;function Jm(){return B0||(B0=1,Cd=Qm()),Cd}var ex=Jm();const tx=Ll(ex);function nx(u,h,a,g,y,x){x===void 0&&(x=0);var C=ho(u,h,x),I=C.width,S=C.height,v=Math.min(I,a),A=Math.min(S,g);return v>A*y?{width:A*y,height:A}:{width:v,height:v/y}}function rx(u){return u.width>u.height?u.width/u.naturalWidth:u.height/u.naturalHeight}function oa(u,h,a,g,y){y===void 0&&(y=0);var x=ho(h.width,h.height,y),C=x.width,I=x.height;return{x:L0(u.x,C,a.width,g),y:L0(u.y,I,a.height,g)}}function L0(u,h,a,g){var y=h*g/2-a/2;return Fl(u,-y,y)}function z0(u,h){return Math.sqrt(Math.pow(u.y-h.y,2)+Math.pow(u.x-h.x,2))}function F0(u,h){return Math.atan2(h.y-u.y,h.x-u.x)*180/Math.PI}function ix(u,h,a,g,y,x,C){x===void 0&&(x=0),C===void 0&&(C=!0);var I=C?sx:ox,S=ho(h.width,h.height,x),v=ho(h.naturalWidth,h.naturalHeight,x),A={x:I(100,((S.width-a.width/y)/2-u.x/y)/S.width*100),y:I(100,((S.height-a.height/y)/2-u.y/y)/S.height*100),width:I(100,a.width/S.width*100/y),height:I(100,a.height/S.height*100/y)},k=Math.round(I(v.width,A.width*v.width/100)),_=Math.round(I(v.height,A.height*v.height/100)),V=v.width>=v.height*g,X=V?{width:Math.round(_*g),height:_}:{width:k,height:Math.round(k/g)},W=En(En({},X),{x:Math.round(I(v.width-X.width,A.x*v.width/100)),y:Math.round(I(v.height-X.height,A.y*v.height/100))});return{croppedAreaPercentages:A,croppedAreaPixels:W}}function sx(u,h){return Math.min(u,Math.max(0,h))}function ox(u,h){return h}function ax(u,h,a,g,y,x){var C=ho(h.width,h.height,a),I=Fl(g.width/C.width*(100/u.width),y,x),S={x:I*C.width/2-g.width/2-C.width*I*(u.x/100),y:I*C.height/2-g.height/2-C.height*I*(u.y/100)};return{crop:S,zoom:I}}function lx(u,h,a){var g=rx(h);return a.height>a.width?a.height/(u.height*g):a.width/(u.width*g)}function cx(u,h,a,g,y,x){a===void 0&&(a=0);var C=ho(h.naturalWidth,h.naturalHeight,a),I=Fl(lx(u,h,g),y,x),S=g.height>g.width?g.height/u.height:g.width/u.width,v={x:((C.width-u.width)/2-u.x)*S,y:((C.height-u.height)/2-u.y)*S};return{crop:v,zoom:I}}function W0(u,h){return{x:(h.x+u.x)/2,y:(h.y+u.y)/2}}function dx(u){return u*Math.PI/180}function ho(u,h,a){var g=dx(a);return{width:Math.abs(Math.cos(g)*u)+Math.abs(Math.sin(g)*h),height:Math.abs(Math.sin(g)*u)+Math.abs(Math.cos(g)*h)}}function Fl(u,h,a){return Math.min(Math.max(u,h),a)}function Il(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];return u.filter(function(a){return typeof a=="string"&&a.length>0}).join(" ").trim()}var ux=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,hx=1,fx=3,px=1,gx=(function(u){Zm(h,u);function h(){var a=u!==null&&u.apply(this,arguments)||this;return a.cropperRef=U.createRef(),a.imageRef=U.createRef(),a.videoRef=U.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc=typeof document<"u"?document:null,a.currentWindow=typeof window<"u"?window:null,a.resizeObserver=null,a.previousCropSize=null,a.isInitialized=!1,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!a.containerRef)){var g=!0;a.resizeObserver=new window.ResizeObserver(function(y){if(g){g=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(g){return g.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturechange",a.onGestureChange),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var g=a.computeSizes();g&&(a.previousCropSize=g,a.emitCropData(),a.setInitialCrop(g),a.isInitialized=!0),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(g){if(a.props.initialCroppedAreaPercentages){var y=ax(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,g,a.props.minZoom,a.props.maxZoom),x=y.crop,C=y.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(C)}else if(a.props.initialCroppedAreaPixels){var I=cx(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,g,a.props.minZoom,a.props.maxZoom),x=I.crop,C=I.zoom;a.props.onCropChange(x),a.props.onZoomChange&&a.props.onZoomChange(C)}},a.computeSizes=function(){var g,y,x,C,I,S,v=a.imageRef.current||a.videoRef.current;if(v&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var A=a.containerRect.width/a.containerRect.height,k=((g=a.imageRef.current)===null||g===void 0?void 0:g.naturalWidth)||((y=a.videoRef.current)===null||y===void 0?void 0:y.videoWidth)||0,_=((x=a.imageRef.current)===null||x===void 0?void 0:x.naturalHeight)||((C=a.videoRef.current)===null||C===void 0?void 0:C.videoHeight)||0,V=v.offsetWidth<k||v.offsetHeight<_,X=k/_,W=void 0;if(V)switch(a.state.mediaObjectFit){default:case"contain":W=A>X?{width:a.containerRect.height*X,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/X};break;case"horizontal-cover":W={width:a.containerRect.width,height:a.containerRect.width/X};break;case"vertical-cover":W={width:a.containerRect.height*X,height:a.containerRect.height};break}else W={width:v.offsetWidth,height:v.offsetHeight};a.mediaSize=En(En({},W),{naturalWidth:k,naturalHeight:_}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var z=a.props.cropSize?a.props.cropSize:nx(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(((I=a.state.cropSize)===null||I===void 0?void 0:I.height)!==z.height||((S=a.state.cropSize)===null||S===void 0?void 0:S.width)!==z.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(z),a.setState({cropSize:z},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(z),z}},a.saveContainerPosition=function(){if(a.containerRef){var g=a.containerRef.getBoundingClientRect();a.containerPosition={x:g.left,y:g.top}}},a.onMouseDown=function(g){a.currentDoc&&(g.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(h.getMousePoint(g)))},a.onMouseMove=function(g){return a.onDrag(h.getMousePoint(g))},a.onScroll=function(g){a.currentDoc&&(g.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(g){a.currentDoc&&(a.isTouching=!0,!(a.props.onTouchRequest&&!a.props.onTouchRequest(g))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),g.touches.length===2?a.onPinchStart(g):g.touches.length===1&&a.onDragStart(h.getTouchPoint(g.touches[0]))))},a.onTouchMove=function(g){g.preventDefault(),g.touches.length===2?a.onPinchMove(g):g.touches.length===1&&a.onDrag(h.getTouchPoint(g.touches[0]))},a.onGestureStart=function(g){a.currentDoc&&(g.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureChange),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureChange=function(g){if(g.preventDefault(),!a.isTouching){var y=h.getMousePoint(g),x=a.gestureZoomStart-1+g.scale;if(a.setNewZoom(x,y,{shouldUpdatePosition:!0}),a.props.onRotationChange){var C=a.gestureRotationStart+g.rotation;a.props.onRotationChange(C)}}},a.onGestureEnd=function(g){a.cleanEvents()},a.onDragStart=function(g){var y,x,C=g.x,I=g.y;a.dragStartPosition={x:C,y:I},a.dragStartCrop=En({},a.props.crop),(x=(y=a.props).onInteractionStart)===null||x===void 0||x.call(y)},a.onDrag=function(g){var y=g.x,x=g.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&!(y===void 0||x===void 0)){var C=y-a.dragStartPosition.x,I=x-a.dragStartPosition.y,S={x:a.dragStartCrop.x+C,y:a.dragStartCrop.y+I},v=a.props.restrictPosition?oa(S,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):S;a.props.onCropChange(v)}}))},a.onDragStopped=function(){var g,y;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),(y=(g=a.props).onInteractionEnd)===null||y===void 0||y.call(g)},a.onWheel=function(g){if(a.currentWindow&&!(a.props.onWheelRequest&&!a.props.onWheelRequest(g))){g.preventDefault();var y=h.getMousePoint(g),x=tx(g).pixelY,C=a.props.zoom-x*a.props.zoomSpeed/200;a.setNewZoom(C,y,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var I,S;return(S=(I=a.props).onInteractionStart)===null||S===void 0?void 0:S.call(I)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var I,S;return(S=(I=a.props).onInteractionEnd)===null||S===void 0?void 0:S.call(I)})},250)}},a.getPointOnContainer=function(g,y){var x=g.x,C=g.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(x-y.x),y:a.containerRect.height/2-(C-y.y)}},a.getPointOnMedia=function(g){var y=g.x,x=g.y,C=a.props,I=C.crop,S=C.zoom;return{x:(y+I.x)/S,y:(x+I.y)/S}},a.setNewZoom=function(g,y,x){var C=x===void 0?{}:x,I=C.shouldUpdatePosition,S=I===void 0?!0:I;if(!(!a.state.cropSize||!a.props.onZoomChange)){var v=Fl(g,a.props.minZoom,a.props.maxZoom);if(S){var A=a.getPointOnContainer(y,a.containerPosition),k=a.getPointOnMedia(A),_={x:k.x*v-A.x,y:k.y*v-A.y},V=a.props.restrictPosition?oa(_,a.mediaSize,a.state.cropSize,v,a.props.rotation):_;a.props.onCropChange(V)}a.props.onZoomChange(v)}},a.getCropData=function(){if(!a.state.cropSize)return null;var g=a.props.restrictPosition?oa(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;return ix(g,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition)},a.emitCropData=function(){var g=a.getCropData();if(g){var y=g.croppedAreaPercentages,x=g.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(y,x),a.props.onCropAreaChange&&a.props.onCropAreaChange(y,x)}},a.emitCropAreaChange=function(){var g=a.getCropData();if(g){var y=g.croppedAreaPercentages,x=g.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(y,x)}},a.recomputeCropPosition=function(){var g,y;if(a.state.cropSize){var x=a.props.crop;if(a.isInitialized&&(!((g=a.previousCropSize)===null||g===void 0)&&g.width)&&(!((y=a.previousCropSize)===null||y===void 0)&&y.height)){var C=Math.abs(a.previousCropSize.width-a.state.cropSize.width)>1e-6||Math.abs(a.previousCropSize.height-a.state.cropSize.height)>1e-6;if(C){var I=a.state.cropSize.width/a.previousCropSize.width,S=a.state.cropSize.height/a.previousCropSize.height;x={x:a.props.crop.x*I,y:a.props.crop.y*S}}}var v=a.props.restrictPosition?oa(x,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):x;a.previousCropSize=a.state.cropSize,a.props.onCropChange(v),a.emitCropData()}},a.onKeyDown=function(g){var y,x,C=a.props,I=C.crop,S=C.onCropChange,v=C.keyboardStep,A=C.zoom,k=C.rotation,_=v;if(a.state.cropSize){g.shiftKey&&(_*=.2);var V=En({},I);switch(g.key){case"ArrowUp":V.y-=_,g.preventDefault();break;case"ArrowDown":V.y+=_,g.preventDefault();break;case"ArrowLeft":V.x-=_,g.preventDefault();break;case"ArrowRight":V.x+=_,g.preventDefault();break;default:return}a.props.restrictPosition&&(V=oa(V,a.mediaSize,a.state.cropSize,A,k)),g.repeat||(x=(y=a.props).onInteractionStart)===null||x===void 0||x.call(y),S(V)}},a.onKeyUp=function(g){var y,x;switch(g.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":g.preventDefault();break;default:return}a.emitCropData(),(x=(y=a.props).onInteractionEnd)===null||x===void 0||x.call(y)},a}return h.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=ux,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},h.prototype.componentWillUnmount=function(){var a,g;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((g=this.styleRef.parentNode)===null||g===void 0||g.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},h.prototype.componentDidUpdate=function(a){var g,y,x,C,I,S,v,A,k;a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect?this.computeSizes():a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():((g=a.cropSize)===null||g===void 0?void 0:g.height)!==((y=this.props.cropSize)===null||y===void 0?void 0:y.height)||((x=a.cropSize)===null||x===void 0?void 0:x.width)!==((C=this.props.cropSize)===null||C===void 0?void 0:C.width)?this.computeSizes():(((I=a.crop)===null||I===void 0?void 0:I.x)!==((S=this.props.crop)===null||S===void 0?void 0:S.x)||((v=a.crop)===null||v===void 0?void 0:v.y)!==((A=this.props.crop)===null||A===void 0?void 0:A.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&((k=this.videoRef.current)===null||k===void 0||k.load());var _=this.getObjectFit();_!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:_},this.computeSizes)},h.prototype.getAspect=function(){var a=this.props,g=a.cropSize,y=a.aspect;return g?g.width/g.height:y},h.prototype.getObjectFit=function(){var a,g,y,x;if(this.props.objectFit==="cover"){var C=this.imageRef.current||this.videoRef.current;if(C&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var I=this.containerRect.width/this.containerRect.height,S=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalWidth)||((g=this.videoRef.current)===null||g===void 0?void 0:g.videoWidth)||0,v=((y=this.imageRef.current)===null||y===void 0?void 0:y.naturalHeight)||((x=this.videoRef.current)===null||x===void 0?void 0:x.videoHeight)||0,A=S/v;return A<I?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},h.prototype.onPinchStart=function(a){var g=h.getTouchPoint(a.touches[0]),y=h.getTouchPoint(a.touches[1]);this.lastPinchDistance=z0(g,y),this.lastPinchRotation=F0(g,y),this.onDragStart(W0(g,y))},h.prototype.onPinchMove=function(a){var g=this;if(!(!this.currentDoc||!this.currentWindow)){var y=h.getTouchPoint(a.touches[0]),x=h.getTouchPoint(a.touches[1]),C=W0(y,x);this.onDrag(C),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var I=z0(y,x),S=g.props.zoom*(I/g.lastPinchDistance);g.setNewZoom(S,C,{shouldUpdatePosition:!1}),g.lastPinchDistance=I;var v=F0(y,x),A=g.props.rotation+(v-g.lastPinchRotation);g.props.onRotationChange&&g.props.onRotationChange(A),g.lastPinchRotation=v})}},h.prototype.render=function(){var a=this,g,y=this.props,x=y.image,C=y.video,I=y.mediaProps,S=y.cropperProps,v=y.transform,A=y.crop,k=A.x,_=A.y,V=y.rotation,X=y.zoom,W=y.cropShape,z=y.showGrid,H=y.roundCropAreaPixels,T=y.style,N=T.containerStyle,P=T.cropAreaStyle,D=T.mediaStyle,q=y.classes,F=q.containerClassName,Q=q.cropAreaClassName,pe=q.mediaClassName,Me=(g=this.state.mediaObjectFit)!==null&&g!==void 0?g:this.getObjectFit();return U.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(we){return a.containerRef=we},"data-testid":"container",style:N,className:Il("reactEasyCrop_Container",F)},x?U.createElement("img",En({alt:"",className:Il("reactEasyCrop_Image",Me==="contain"&&"reactEasyCrop_Contain",Me==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Me==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",pe)},I,{src:x,ref:this.imageRef,style:En(En({},D),{transform:v||"translate(".concat(k,"px, ").concat(_,"px) rotate(").concat(V,"deg) scale(").concat(X,")")}),onLoad:this.onMediaLoad})):C&&U.createElement("video",En({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Il("reactEasyCrop_Video",Me==="contain"&&"reactEasyCrop_Contain",Me==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Me==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",pe)},I,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:En(En({},D),{transform:v||"translate(".concat(k,"px, ").concat(_,"px) rotate(").concat(V,"deg) scale(").concat(X,")")}),controls:!1}),(Array.isArray(C)?C:[{src:C}]).map(function(be){return U.createElement("source",En({key:be.src},be))})),this.state.cropSize&&U.createElement("div",En({ref:this.cropperRef,style:En(En({},P),{width:H?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:H?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Il("reactEasyCrop_CropArea",W==="round"&&"reactEasyCrop_CropAreaRound",z&&"reactEasyCrop_CropAreaGrid",Q)},S)))},h.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:fx,minZoom:hx,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:px},h.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},h.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},h})(U.Component);const mx=u=>new Promise((h,a)=>{const g=new Image;g.addEventListener("load",()=>h(g)),g.addEventListener("error",y=>a(y)),g.setAttribute("crossOrigin","anonymous"),g.src=u});async function xx(u,h){const a=await mx(u),g=document.createElement("canvas"),y=g.getContext("2d");return g.width=h.width,g.height=h.height,y.drawImage(a,h.x,h.y,h.width,h.height,0,0,h.width,h.height),new Promise(x=>{g.toBlob(C=>{const I=new FileReader;I.readAsDataURL(C),I.onloadend=()=>{x(I.result)}},"image/jpeg",.9)})}const jl="https://gatherly-backend-3vmv.onrender.com",yx=()=>{const u=Wn(),{theme:h,toggleTheme:a}=rg(),{refreshUser:g}=Wr(),[y,x]=U.useState(!0),[C,I]=U.useState(!1),[S,v]=U.useState({name:"",email:"",phone:"",bio:"",profilePictureUrl:null}),[A,k]=U.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[_,V]=U.useState({current:!1,new:!1,confirm:!1}),[X,W]=U.useState("+91"),[z,H]=U.useState(""),[T,N]=U.useState(""),[P,D]=U.useState(""),[q,F]=U.useState(null),[Q,pe]=U.useState({x:0,y:0}),[Me,be]=U.useState(1),[we,de]=U.useState(null),[te,Y]=U.useState(!1),[J,se]=U.useState(!1);U.useEffect(()=>{ce()},[]);const ce=async()=>{try{const le=localStorage.getItem("token");console.log("Loading profile with token:",le?"present":"missing");const ke=await fetch(`${jl}/api/users/profile`,{headers:{Authorization:`Bearer ${le}`}});if(console.log("Profile response status:",ke.status),ke.ok){const ve=await ke.json();if(console.log("Profile data received:",ve),v({name:ve.name||"",email:ve.email||"",phone:ve.phone||"",bio:ve.bio||"",profilePictureUrl:ve.profilePictureUrl||null}),ve.phone)if(ve.phone.startsWith("+")){const Oe=ve.phone.match(/^(\+\d{1,3})(\d+)$/);Oe?(W(Oe[1]),H(Oe[2])):H(ve.phone.replace(/\D/g,"").slice(-10))}else H(ve.phone.replace(/\D/g,"").slice(-10))}else{const ve=await ke.text();console.error("Profile load failed:",ke.status,ve),N("Failed to load profile")}x(!1)}catch(le){console.error("Error loading profile:",le),N("Failed to load profile"),x(!1)}},Ce=async()=>{try{const le=await _f.getPhoto({quality:90,resultType:"base64",source:"photos",saveToGallery:!1}),ke=`data:image/${le.format};base64,${le.base64String}`;F(ke),Y(!0)}catch(le){console.error("Error picking image:",le)}},$=U.useCallback((le,ke)=>{de(ke)},[]),B=async()=>{try{const le=await xx(q,we);v({...S,profilePictureUrl:le}),Y(!1),F(null)}catch(le){console.error("Error cropping image:",le)}},oe=async()=>{try{I(!0),N(""),D("");const le=localStorage.getItem("token"),ke=await fetch(`${jl}/api/users/profile`,{method:"PATCH",headers:{Authorization:`Bearer ${le}`,"Content-Type":"application/json"},body:JSON.stringify({name:S.name,phone:z?`${X}${z}`:"",bio:S.bio,profilePictureUrl:S.profilePictureUrl})}),ve=await ke.json();ke.ok?(D("Profile updated successfully!"),setTimeout(()=>D(""),3e3),g&&await g()):N(ve.error||"Failed to update profile")}catch(le){console.error("Error saving profile:",le),N("Failed to save profile")}finally{I(!1)}},Ee=async le=>{if(le.preventDefault(),console.log("=== Change Password Attempt ==="),console.log("Passwords match:",A.newPassword===A.confirmPassword),A.newPassword!==A.confirmPassword){N("New passwords do not match");return}try{I(!0),N(""),D("");const ke=localStorage.getItem("token");console.log("Token present:",ke?"yes":"no"),console.log("Calling API:",`${jl}/users/change-password`);const ve=await fetch(`${jl}/users/change-password`,{method:"POST",headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"},body:JSON.stringify({currentPassword:A.currentPassword,newPassword:A.newPassword})});console.log("Response status:",ve.status);const Oe=await ve.json();if(console.log("Response data:",Oe),ve.ok)D("Password changed successfully!"),k({currentPassword:"",newPassword:"",confirmPassword:""}),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>D(""),5e3);else{const fe=Oe.error||"Failed to change password";console.error("Password change failed:",fe),N(fe),setTimeout(()=>N(""),5e3)}}catch(ke){console.error("Error changing password:",ke),N("Network error: Failed to change password"),setTimeout(()=>N(""),5e3)}finally{I(!1)}};return y?r.jsx("div",{style:{minHeight:"100vh",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("div",{style:{color:"#6366f1",fontSize:"18px",fontWeight:600},children:"Loading profile..."})}):r.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-secondary)",paddingTop:"max(20px, env(safe-area-inset-top))",paddingBottom:"max(20px, env(safe-area-inset-bottom))"},children:[r.jsxs("div",{style:{background:"var(--bg-primary)",padding:"16px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"16px",marginBottom:"20px"},children:[r.jsx("button",{onClick:()=>u(-1),style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--bg-tertiary)",border:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(xi,{size:20})}),r.jsx("h1",{style:{fontSize:"20px",fontWeight:"600",color:"var(--text-primary)",margin:0},children:"My Profile"})]}),r.jsxs("div",{style:{padding:"0 16px",maxWidth:"600px",margin:"0 auto"},children:[P&&r.jsxs("div",{style:{position:"fixed",top:"max(70px, calc(env(safe-area-inset-top) + 70px))",left:"50%",transform:"translateX(-50%)",width:"calc(100% - 32px)",maxWidth:"568px",background:"linear-gradient(135deg, #10b981, #059669)",border:"2px solid #047857",borderRadius:"12px",padding:"16px 20px",color:"#fff",fontSize:"15px",fontWeight:"600",boxShadow:"0 10px 25px rgba(16, 185, 129, 0.3)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",animation:"slideDown 0.3s ease"},children:[" ",P]}),T&&r.jsxs("div",{style:{position:"fixed",top:"max(70px, calc(env(safe-area-inset-top) + 70px))",left:"50%",transform:"translateX(-50%)",width:"calc(100% - 32px)",maxWidth:"568px",background:"linear-gradient(135deg, #ef4444, #dc2626)",border:"2px solid #b91c1c",borderRadius:"12px",padding:"16px 20px",color:"#fff",fontSize:"15px",fontWeight:"600",boxShadow:"0 10px 25px rgba(239, 68, 68, 0.3)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",animation:"slideDown 0.3s ease"},children:[" ",T]}),r.jsx("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",padding:"24px",marginBottom:"20px",border:"1px solid var(--border)"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[r.jsx("div",{onClick:()=>S.profilePictureUrl&&se(!0),style:{width:"120px",height:"120px",borderRadius:"50%",background:S.profilePictureUrl?`url(${S.profilePictureUrl})`:"linear-gradient(135deg, #6366f1, #a855f7)",backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"48px",fontWeight:"900",border:"4px solid #f3f4f6",cursor:S.profilePictureUrl?"pointer":"default",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:le=>{S.profilePictureUrl&&(le.currentTarget.style.transform="scale(1.05)",le.currentTarget.style.boxShadow="0 8px 24px rgba(0,0,0,0.15)")},onMouseLeave:le=>{le.currentTarget.style.transform="scale(1)",le.currentTarget.style.boxShadow="none"},children:!S.profilePictureUrl&&(S.name?.charAt(0).toUpperCase()||"U")}),r.jsxs("button",{onClick:Ce,style:{padding:"10px 20px",borderRadius:"8px",background:"#6366f1",border:"none",color:"#fff",fontWeight:"600",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(af,{size:18}),"Change Photo"]})]})}),r.jsxs("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",padding:"24px",marginBottom:"20px",border:"1px solid var(--border)"},children:[r.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",color:"var(--text-primary)",marginTop:0,marginBottom:"20px"},children:"Personal Information"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[r.jsxs("div",{children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--text-secondary)",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:[r.jsx(wf,{size:16}),"Name"]}),r.jsx("input",{type:"text",value:S.name,onChange:le=>v({...S,name:le.target.value}),className:"input"})]}),r.jsxs("div",{children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--text-secondary)",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:[r.jsx(ks,{size:16}),"Email"]}),r.jsx("input",{type:"email",value:S.email,disabled:!0,className:"input"})]}),r.jsxs("div",{children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--text-secondary)",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:[r.jsx(uo,{size:16}),"Phone"]}),r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsxs("select",{value:X,onChange:le=>W(le.target.value),className:"input",style:{width:"120px"},children:[r.jsx("option",{value:"+91",children:" +91"}),r.jsx("option",{value:"+1",children:" +1"}),r.jsx("option",{value:"+44",children:" +44"}),r.jsx("option",{value:"+61",children:" +61"}),r.jsx("option",{value:"+971",children:" +971"})]}),r.jsx("input",{type:"tel",value:z,onChange:le=>H(le.target.value.replace(/\D/g,"")),placeholder:"9876543210",maxLength:10,className:"input",style:{flex:1}})]})]}),r.jsxs("div",{children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--text-secondary)",fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:[r.jsx(lg,{size:16}),"Bio"]}),r.jsx("textarea",{value:S.bio,onChange:le=>v({...S,bio:le.target.value}),placeholder:"Tell us about yourself...",maxLength:500,className:"input",style:{minHeight:"100px",resize:"vertical"}}),r.jsxs("div",{style:{textAlign:"right",fontSize:"12px",color:"var(--text-tertiary)",marginTop:"4px"},children:[S.bio?.length||0,"/500"]})]})]}),r.jsxs("button",{onClick:oe,disabled:C,style:{width:"100%",marginTop:"20px",padding:"12px",borderRadius:"8px",background:C?"#9ca3af":"#6366f1",border:"none",color:"#fff",fontWeight:"600",fontSize:"15px",cursor:C?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[r.jsx(pf,{size:18}),C?"Saving...":"Save Changes"]})]}),r.jsxs("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",padding:"24px",marginBottom:"20px",border:"1px solid var(--border)"},children:[r.jsxs("h2",{style:{fontSize:"18px",fontWeight:"600",color:"var(--text-primary)",marginTop:0,marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(fa,{size:20}),"Change Password"]}),r.jsxs("form",{onSubmit:Ee,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{color:"var(--text-secondary)",fontSize:"14px",fontWeight:"500",marginBottom:"8px",display:"block"},children:"Current Password"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("input",{type:_.current?"text":"password",value:A.currentPassword,onChange:le=>k({...A,currentPassword:le.target.value}),className:"input",style:{paddingRight:"40px"}}),r.jsx("button",{type:"button",onClick:()=>V({..._,current:!_.current}),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)",padding:0},children:_.current?r.jsx(gd,{size:18}):r.jsx(md,{size:18})})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{color:"var(--text-secondary)",fontSize:"14px",fontWeight:"500",marginBottom:"8px",display:"block"},children:"New Password"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("input",{type:_.new?"text":"password",value:A.newPassword,onChange:le=>k({...A,newPassword:le.target.value}),className:"input",style:{paddingRight:"40px"}}),r.jsx("button",{type:"button",onClick:()=>V({..._,new:!_.new}),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)",padding:0},children:_.new?r.jsx(gd,{size:18}):r.jsx(md,{size:18})})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{color:"var(--text-secondary)",fontSize:"14px",fontWeight:"500",marginBottom:"8px",display:"block"},children:"Confirm New Password"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("input",{type:_.confirm?"text":"password",value:A.confirmPassword,onChange:le=>k({...A,confirmPassword:le.target.value}),className:"input",style:{paddingRight:"40px"}}),r.jsx("button",{type:"button",onClick:()=>V({..._,confirm:!_.confirm}),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)",padding:0},children:_.confirm?r.jsx(gd,{size:18}):r.jsx(md,{size:18})})]})]}),r.jsx("button",{type:"submit",disabled:C||!A.currentPassword||!A.newPassword||!A.confirmPassword,style:{width:"100%",marginTop:"4px",padding:"12px",borderRadius:"8px",background:C||!A.currentPassword||!A.newPassword||!A.confirmPassword?"#9ca3af":"#6366f1",border:"none",color:"#fff",fontWeight:"600",fontSize:"15px",cursor:C||!A.currentPassword||!A.newPassword||!A.confirmPassword?"not-allowed":"pointer"},children:C?"Changing...":"Change Password"})]})]}),r.jsxs("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",padding:"24px",marginBottom:"80px",border:"1px solid var(--border)"},children:[r.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",color:"var(--text-primary)",marginTop:0,marginBottom:"20px"},children:"Appearance"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--primary)"},children:h==="dark"?r.jsx(fg,{size:20}):r.jsx(yg,{size:20})}),r.jsxs("div",{children:[r.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px",color:"var(--text-primary)"},children:"Dark Theme"}),r.jsx("p",{style:{fontSize:"14px",color:"var(--text-secondary)",margin:0},children:h==="dark"?"Enabled":"Disabled"})]})]}),r.jsxs("label",{className:"theme-toggle",children:[r.jsx("input",{type:"checkbox",checked:h==="dark",onChange:a}),r.jsx("span",{className:"slider"})]})]})]})]}),te&&r.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",flexDirection:"column"},children:[r.jsxs("div",{style:{padding:"16px",paddingTop:"calc(16px + env(safe-area-inset-top))",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#000",zIndex:10},children:[r.jsx("button",{onClick:()=>{Y(!1),F(null)},style:{background:"none",border:"none",color:"white",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(It,{size:28})}),r.jsx("h3",{style:{color:"white",margin:0,fontSize:"18px",fontWeight:600},children:"Crop Photo"}),r.jsx("button",{onClick:B,style:{background:"#10b981",border:"none",borderRadius:"50%",width:"44px",height:"44px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.4)"},children:r.jsx(Qt,{size:28,strokeWidth:3})})]}),r.jsxs("div",{style:{position:"relative",flex:1,backgroundColor:"#000"},children:[r.jsx(gx,{image:q,crop:Q,zoom:Me,aspect:1,cropShape:"round",showGrid:!1,onCropChange:pe,onZoomChange:be,onCropComplete:$}),r.jsxs("div",{style:{position:"absolute",bottom:"calc(80px + env(safe-area-inset-bottom))",left:"20px",right:"20px",padding:"16px",backgroundColor:"rgba(0, 0, 0, 0.8)",borderRadius:"12px",backdropFilter:"blur(10px)"},children:[r.jsxs("label",{style:{color:"white",fontSize:"14px",marginBottom:"8px",display:"block",fontWeight:500},children:["Zoom: ",Me.toFixed(1),"x"]}),r.jsx("input",{type:"range",min:1,max:3,step:.1,value:Me,onChange:le=>be(Number(le.target.value)),style:{width:"100%",height:"6px",accentColor:"#10b981"}})]})]})]}),J&&S.profilePictureUrl&&r.jsxs("div",{onClick:()=>se(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:"20px",cursor:"zoom-out"},children:[r.jsx("button",{onClick:le=>{le.stopPropagation(),se(!1)},style:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",backdropFilter:"blur(10px)",transition:"background 0.2s"},onMouseEnter:le=>le.currentTarget.style.background="rgba(255, 255, 255, 0.3)",onMouseLeave:le=>le.currentTarget.style.background="rgba(255, 255, 255, 0.2)",children:r.jsx(It,{size:24,color:"white"})}),r.jsx("img",{src:S.profilePictureUrl,alt:"Profile",onClick:le=>le.stopPropagation(),style:{maxWidth:"90%",maxHeight:"90%",borderRadius:"12px",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",cursor:"default"}})]})]})},vx=()=>{const[u]=U.useState(localStorage.getItem("token")),[h,a]=U.useState([]),[g,y]=U.useState(!0),[x,C]=U.useState("all"),I=Wn(),S=async()=>{y(!0);const W=await Yi.getNotifications(u,{limit:100,unreadOnly:x==="unread"});a(W.notifications||[]),y(!1)};U.useEffect(()=>{u&&S()},[u,x]);const v=async W=>{W.read||(await Yi.markAsRead(W.id,u),S());const z=typeof W.data=="string"?JSON.parse(W.data):W.data;z.eventId&&(W.type==="event_wall_post"?I(`/event/${z.eventId}/wall`):W.type==="guest_added"&&I(`/event/${z.eventId}`))},A=async(W,z)=>{W.stopPropagation(),window.confirm("Delete this notification?")&&(await Yi.deleteNotification(z,u),S())},k=async()=>{await Yi.markAllAsRead(u),S()},_=W=>{const z=new Date(W),H=new Date,T=Math.floor((H-z)/1e3);return T<60?"Just now":T<3600?`${Math.floor(T/60)} minutes ago`:T<86400?`${Math.floor(T/3600)} hours ago`:T<604800?`${Math.floor(T/86400)} days ago`:z.toLocaleDateString("en-US",{month:"short",day:"numeric",year:z.getFullYear()!==H.getFullYear()?"numeric":void 0})},V=W=>{switch(W){case"guest_added":return"";case"event_wall_post":return"";default:return""}},X=h.filter(W=>!W.read).length;return r.jsxs("div",{className:"notification-list-page",children:[r.jsxs("div",{className:"notification-list-header",children:[r.jsx("button",{onClick:()=>I(-1),className:"back-btn",children:r.jsx(xi,{size:24})}),r.jsx("h1",{children:"Notifications"}),r.jsx("div",{className:"notification-list-actions",children:X>0&&r.jsxs("button",{onClick:k,className:"mark-read-btn",children:[r.jsx(Qt,{size:18}),"Mark all read"]})})]}),r.jsxs("div",{className:"notification-filter",children:[r.jsxs("button",{className:x==="all"?"active":"",onClick:()=>C("all"),children:["All (",h.length,")"]}),r.jsxs("button",{className:x==="unread"?"active":"",onClick:()=>C("unread"),children:["Unread (",X,")"]})]}),r.jsx("div",{className:"notification-list-content",children:g?r.jsxs("div",{className:"notification-list-loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Loading notifications..."})]}):h.length===0?r.jsxs("div",{className:"notification-list-empty",children:[r.jsx(co,{size:64,opacity:.2}),r.jsx("h3",{children:"No notifications"}),r.jsx("p",{children:x==="unread"?"You're all caught up!":"You haven't received any notifications yet."})]}):r.jsx("div",{className:"notification-items",children:h.map(W=>r.jsxs("div",{className:`notification-list-item ${W.read?"":"unread"}`,onClick:()=>v(W),children:[r.jsx("div",{className:"notification-list-icon",children:V(W.type)}),r.jsxs("div",{className:"notification-list-content-inner",children:[r.jsx("div",{className:"notification-list-title",children:W.title}),r.jsx("div",{className:"notification-list-body",children:W.body}),r.jsx("div",{className:"notification-list-time",children:_(W.created_at)})]}),r.jsxs("div",{className:"notification-list-actions-inner",children:[!W.read&&r.jsx("div",{className:"notification-list-unread-dot"}),r.jsx("button",{onClick:z=>A(z,W.id),className:"delete-notification-btn","aria-label":"Delete notification",children:r.jsx(Yt,{size:18})})]})]},W.id))})})]})},Sd="https://gatherly-backend-3vmv.onrender.com",wx=({group:u,onClose:h})=>{const{contacts:a}=Tr(),[g,y]=U.useState([]),[x,C]=U.useState(new Set),[I,S]=U.useState(""),[v,A]=U.useState(!0);U.useEffect(()=>{k()},[u.id]);const k=async()=>{try{const W=localStorage.getItem("token"),z=await fetch(`${Sd}/contact-groups/${u.id}/members`,{headers:{Authorization:`Bearer ${W}`}});if(z.ok){const H=await z.json();y(H);const T=new Set(H.map(N=>N.id));C(T)}}catch(W){console.error("Failed to fetch members:",W)}finally{A(!1)}},_=W=>{const z=new Set(x);z.has(W)?z.delete(W):z.add(W),C(z)},V=async()=>{try{const W=localStorage.getItem("token"),z=new Set(g.map(N=>N.id)),H=Array.from(x).filter(N=>!z.has(N)),T=Array.from(z).filter(N=>!x.has(N));H.length>0&&await fetch(`${Sd}/contact-groups/${u.id}/members`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${W}`},body:JSON.stringify({contactIds:H})});for(const N of T)await fetch(`${Sd}/contact-groups/${u.id}/members/${N}`,{method:"DELETE",headers:{Authorization:`Bearer ${W}`}});h()}catch(W){console.error("Failed to update members:",W),alert("Failed to update group members")}},X=a.filter(W=>W.name.toLowerCase().includes(I.toLowerCase())||W.phone&&W.phone.includes(I)||W.email&&W.email.toLowerCase().includes(I.toLowerCase()));return r.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:h,children:r.jsxs("div",{className:"card",style:{maxWidth:"600px",width:"100%",maxHeight:"80vh",display:"flex",flexDirection:"column"},onClick:W=>W.stopPropagation(),children:[r.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border-color)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)"},children:"Manage Members"}),r.jsx("button",{onClick:h,style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(It,{size:24})})]}),r.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",borderRadius:"8px",background:u.color,color:"white",fontSize:"0.875rem",fontWeight:500},children:u.name})]}),r.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid var(--border-color)"},children:r.jsxs("div",{style:{position:"relative"},children:[r.jsx(xo,{size:18,style:{position:"absolute",left:"0.875rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)"}}),r.jsx("input",{type:"text",className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"Search contacts...",value:I,onChange:W=>S(W.target.value)})]})}),r.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem 1.5rem"},children:v?r.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:"Loading..."}):X.length===0?r.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:"No contacts found"}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:X.map(W=>{const z=x.has(W.id);return r.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"0.75rem",borderRadius:"8px",cursor:"pointer",background:z?"var(--primary-light)":"var(--bg-secondary)",border:z?"2px solid var(--primary)":"2px solid transparent",transition:"all 0.2s"},children:[r.jsx("input",{type:"checkbox",checked:z,onChange:()=>_(W.id),style:{marginRight:"0.75rem",cursor:"pointer"}}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontWeight:500,color:"var(--text-primary)",marginBottom:"0.25rem"},children:W.name}),r.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:W.phone||W.email||"No contact info"})]}),z&&r.jsx(wg,{size:18,style:{color:"var(--primary)",marginLeft:"0.5rem"}})]},W.id)})})}),r.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid var(--border-color)",display:"flex",gap:"0.75rem"},children:[r.jsx("button",{onClick:h,className:"btn btn-secondary",style:{flex:1,justifyContent:"center"},children:"Cancel"}),r.jsxs("button",{onClick:V,className:"btn btn-primary",style:{flex:1,justifyContent:"center"},children:[r.jsx(vf,{size:18})," Save (",x.size," members)"]})]})]})})},kl="https://gatherly-backend-3vmv.onrender.com",bx=()=>{const[u,h]=U.useState([]),[a,g]=U.useState(!1),[y,x]=U.useState(null),[C,I]=U.useState(null),[S,v]=U.useState({name:"",description:"",color:"#6B7280"}),[A,k]=U.useState(!0),[_,V]=U.useState(null),X=[{label:"Gray",value:"#6B7280"},{label:"Red",value:"#EF4444"},{label:"Orange",value:"#F97316"},{label:"Yellow",value:"#EAB308"},{label:"Green",value:"#10B981"},{label:"Blue",value:"#3B82F6"},{label:"Purple",value:"#A855F7"},{label:"Pink",value:"#EC4899"}];U.useEffect(()=>{W()},[]);const W=async()=>{try{const P=localStorage.getItem("token"),D=await fetch(`${kl}/contact-groups`,{headers:{Authorization:`Bearer ${P}`}});if(D.ok){const q=await D.json();h(q)}}catch(P){console.error("Failed to fetch groups:",P)}finally{k(!1)}},z=async P=>{P.preventDefault();try{const D=localStorage.getItem("token"),q=y?`${kl}/contact-groups/${y.id}`:`${kl}/contact-groups`;console.log("Creating group with URL:",q),console.log("Request data:",S);const F=await fetch(q,{method:y?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`},body:JSON.stringify(S)});if(console.log("Response status:",F.status),console.log("Response headers:",F.headers.get("content-type")),!F.ok){const pe=F.headers.get("content-type");if(pe&&pe.includes("application/json")){const Me=await F.json();throw new Error(Me.error||"Failed to save group")}else{const Me=await F.text();throw console.error("Non-JSON error response:",Me),new Error(`Server error: ${F.status} ${F.statusText}`)}}const Q=await F.json();console.log("Group created:",Q),await W(),N()}catch(D){console.error("Full error:",D),alert(D.message)}},H=async P=>{try{const D=localStorage.getItem("token");if(!(await fetch(`${kl}/contact-groups/${P}`,{method:"DELETE",headers:{Authorization:`Bearer ${D}`}})).ok)throw new Error("Failed to delete group");await W(),I(null)}catch{alert("Failed to delete group")}},T=P=>{x(P),v({name:P.name,description:P.description||"",color:P.color||"#6B7280"}),g(!0)},N=()=>{g(!1),x(null),v({name:"",description:"",color:"#6B7280"})};return A?r.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:"Loading groups..."}):r.jsxs("div",{children:[r.jsx("div",{style:{marginBottom:"1.5rem"},children:r.jsxs("button",{onClick:()=>g(!0),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Mt,{size:18})," Create Group"]})}),u.length===0?r.jsxs("div",{className:"card",style:{padding:"3rem 2rem",textAlign:"center",backgroundColor:"var(--bg-secondary)"},children:[r.jsx(Wt,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1rem"},children:"No groups created yet."}),r.jsxs("button",{onClick:()=>g(!0),className:"btn btn-primary",children:[r.jsx(Mt,{size:18})," Create Your First Group"]})]}):r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1rem"},children:u.map(P=>r.jsxs("div",{className:"card",style:{padding:"1.5rem",borderLeft:`4px solid ${P.color}`,cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:D=>D.currentTarget.style.transform="translateY(-2px)",onMouseLeave:D=>D.currentTarget.style.transform="translateY(0)",onClick:()=>V(P),children:[r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"0.5rem"},children:P.name}),P.description&&r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:P.description}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"var(--text-tertiary)"},children:[r.jsx(Wt,{size:14}),r.jsxs("span",{children:[P.member_count||0," member",P.member_count!==1?"s":""]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},onClick:D=>D.stopPropagation(),children:[r.jsx("button",{onClick:()=>T(P),className:"btn btn-secondary",style:{padding:"0.5rem",flex:1,justifyContent:"center"},title:"Edit group",children:r.jsx(gi,{size:14})}),r.jsx("button",{onClick:()=>I(P),className:"btn btn-secondary",style:{padding:"0.5rem",flex:1,justifyContent:"center",background:"#ef4444",color:"white",border:"none"},title:"Delete group",children:r.jsx(Yt,{size:14})})]})]},P.id))}),a&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:N,children:r.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"100%",padding:"2rem"},onClick:P=>P.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)"},children:y?"Edit Group":"Create Group"}),r.jsx("button",{onClick:N,style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:z,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Group Name *"}),r.jsx("input",{type:"text",className:"form-input",value:S.name,onChange:P=>v({...S,name:P.target.value}),placeholder:"Family, Friends, Coworkers...",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Description"}),r.jsx("textarea",{className:"form-input",value:S.description,onChange:P=>v({...S,description:P.target.value}),placeholder:"Optional description...",rows:2})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.75rem",fontWeight:500},children:"Color"}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem"},children:X.map(P=>r.jsx("button",{type:"button",onClick:()=>v({...S,color:P.value}),style:{padding:"0.75rem",border:S.color===P.value?"2px solid var(--primary)":"2px solid transparent",borderRadius:"8px",background:P.value,color:"white",cursor:"pointer",fontSize:"0.75rem",fontWeight:500,transition:"all 0.2s"},children:P.label},P.value))})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginTop:"0.5rem"},children:[r.jsx("button",{type:"button",onClick:N,className:"btn btn-secondary",style:{justifyContent:"center"},children:"Cancel"}),r.jsxs("button",{type:"submit",className:"btn btn-primary",style:{justifyContent:"center"},children:[y?"Update":"Create"," Group"]})]})]})]})}),C&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:()=>I(null),children:r.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"2rem"},onClick:P=>P.stopPropagation(),children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"1rem"},children:"Delete Group?"}),r.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:["Are you sure you want to delete ",r.jsx("strong",{children:C.name}),"? Contacts will remain in your library."]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsx("button",{onClick:()=>I(null),className:"btn btn-secondary",style:{justifyContent:"center"},children:"Cancel"}),r.jsxs("button",{onClick:()=>H(C.id),className:"btn btn-primary",style:{justifyContent:"center",background:"#ef4444",border:"none"},children:[r.jsx(Yt,{size:16})," Delete"]})]})]})}),_&&r.jsx(wx,{group:_,onClose:()=>{V(null),W()}})]})},Cx=()=>{const{contacts:u,addContact:h,updateContact:a,deleteContact:g}=Tr(),[y,x]=U.useState("contacts"),[C,I]=U.useState(""),[S,v]=U.useState(!1),[A,k]=U.useState(null),[_,V]=U.useState(null),[X,W]=U.useState({name:"",phone:"",email:"",notes:""}),[z,H]=U.useState(!1),T=u.filter(Q=>Q.name.toLowerCase().includes(C.toLowerCase())||Q.phone&&Q.phone.includes(C)||Q.email&&Q.email.toLowerCase().includes(C.toLowerCase())),N=async Q=>{Q.preventDefault();try{A?await a(A.id,X):await h(X),v(!1),k(null),W({name:"",phone:"",email:"",notes:""})}catch(pe){alert(pe.message||"Failed to save contact")}},P=Q=>{k(Q),W({name:Q.name,phone:Q.phone||"",email:Q.email||"",notes:Q.notes||""}),v(!0)},D=async Q=>{try{await g(Q),V(null)}catch{alert("Failed to delete contact")}},q=()=>{v(!1),k(null),W({name:"",phone:"",email:"",notes:""})},F=async Q=>{try{let pe=0,Me=0;for(const be of Q)try{await h({name:be.name,phone:be.phone||"",email:"",notes:""}),pe++}catch{Me++}pe>0?alert(`Imported ${pe} contact${pe!==1?"s":""}${Me>0?`, skipped ${Me} duplicate${Me!==1?"s":""}`:""}`):Me>0&&alert(`All ${Me} contact${Me!==1?"s were":" was"} already in your library`)}catch(pe){console.error("Import error:",pe),alert("Failed to import contacts")}};return r.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"var(--bg-primary)",paddingBottom:"calc(60px + env(safe-area-inset-bottom))"},children:[r.jsxs("div",{className:"container",style:{padding:"2rem 1rem 1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.875rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"0.5rem"},children:"My Contacts"}),r.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"0.9375rem"},children:[u.length," saved contact",u.length!==1?"s":""]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[r.jsxs("button",{onClick:()=>H(!0),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(pa,{size:18})," Import"]}),r.jsxs("button",{onClick:()=>v(!0),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Mt,{size:18})," Add Contact"]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",borderBottom:"2px solid var(--border-color)"},children:[r.jsxs("button",{onClick:()=>x("contacts"),style:{padding:"0.75rem 1.5rem",background:"none",border:"none",borderBottom:y==="contacts"?"2px solid var(--primary)":"2px solid transparent",color:y==="contacts"?"var(--primary)":"var(--text-secondary)",fontWeight:y==="contacts"?600:400,cursor:"pointer",marginBottom:"-2px",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s"},children:[r.jsx(Wt,{size:18}),"All Contacts"]}),r.jsxs("button",{onClick:()=>x("groups"),style:{padding:"0.75rem 1.5rem",background:"none",border:"none",borderBottom:y==="groups"?"2px solid var(--primary)":"2px solid transparent",color:y==="groups"?"var(--primary)":"var(--text-secondary)",fontWeight:y==="groups"?600:400,cursor:"pointer",marginBottom:"-2px",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s"},children:[r.jsx(Td,{size:18}),"Groups"]})]}),y==="contacts"&&r.jsxs("div",{style:{position:"relative",marginBottom:"1.5rem"},children:[r.jsx(xo,{size:18,style:{position:"absolute",left:"0.875rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)"}}),r.jsx("input",{type:"text",className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"Search contacts...",value:C,onChange:Q=>I(Q.target.value)})]}),y==="contacts"?T.length===0?r.jsxs("div",{className:"card",style:{padding:"3rem 2rem",textAlign:"center",backgroundColor:"var(--bg-secondary)"},children:[r.jsx(Wt,{size:48,style:{color:"var(--text-tertiary)",margin:"0 auto 1rem"}}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1rem"},children:C?"No contacts found matching your search.":"No contacts saved yet."}),!C&&r.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"center",flexWrap:"wrap"},children:[r.jsxs("button",{onClick:()=>H(!0),className:"btn btn-secondary",children:[r.jsx(pa,{size:18})," Import from Phone"]}),r.jsxs("button",{onClick:()=>v(!0),className:"btn btn-primary",children:[r.jsx(Mt,{size:18})," Add Your First Contact"]})]})]}):r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:T.map(Q=>r.jsx("div",{className:"card",style:{padding:"1.25rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"0.5rem"},children:Q.name}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.375rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:[Q.phone&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(uo,{size:14}),r.jsx("a",{href:`tel:${Q.phone}`,style:{color:"var(--primary)",textDecoration:"none"},children:Q.phone})]}),Q.email&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(ks,{size:14}),r.jsx("a",{href:`mailto:${Q.email}`,style:{color:"var(--primary)",textDecoration:"none"},children:Q.email})]}),Q.events_count>0&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.25rem"},children:[r.jsx(Zn,{size:14}),r.jsxs("span",{children:["Used in ",Q.events_count," event",Q.events_count!==1?"s":""]})]})]}),Q.notes&&r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginTop:"0.75rem",fontStyle:"italic"},children:Q.notes})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0},children:[r.jsx("button",{onClick:()=>P(Q),className:"btn btn-secondary",style:{padding:"0.5rem",minWidth:"auto"},title:"Edit contact",children:r.jsx(gi,{size:16})}),r.jsx("button",{onClick:()=>V(Q),className:"btn btn-secondary",style:{padding:"0.5rem",minWidth:"auto",background:"#ef4444",color:"white",border:"none"},title:"Delete contact",children:r.jsx(Yt,{size:16})})]})]})},Q.id))}):r.jsx(bx,{})]}),S&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:q,children:r.jsxs("div",{className:"card",style:{maxWidth:"500px",width:"100%",padding:"2rem"},onClick:Q=>Q.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)"},children:A?"Edit Contact":"Add Contact"}),r.jsx("button",{onClick:q,style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:N,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Name *"}),r.jsx("input",{type:"text",className:"form-input",value:X.name,onChange:Q=>W({...X,name:Q.target.value}),placeholder:"John Doe",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Phone"}),r.jsx("input",{type:"tel",className:"form-input",value:X.phone,onChange:Q=>W({...X,phone:Q.target.value}),placeholder:"+919876543210"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Email"}),r.jsx("input",{type:"email",className:"form-input",value:X.email,onChange:Q=>W({...X,email:Q.target.value}),placeholder:"john@example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted",style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Notes"}),r.jsx("textarea",{className:"form-input",value:X.notes,onChange:Q=>W({...X,notes:Q.target.value}),placeholder:"Optional notes...",rows:3})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginTop:"0.5rem"},children:[r.jsx("button",{type:"button",onClick:q,className:"btn btn-secondary",style:{justifyContent:"center"},children:"Cancel"}),r.jsxs("button",{type:"submit",className:"btn btn-primary",style:{justifyContent:"center"},children:[A?"Update":"Add"," Contact"]})]})]})]})}),_&&r.jsx("div",{style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.75)"},onClick:()=>V(null),children:r.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"2rem"},onClick:Q=>Q.stopPropagation(),children:[r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"1rem"},children:"Delete Contact?"}),r.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:["Are you sure you want to delete ",r.jsx("strong",{children:_.name}),"? This action cannot be undone."]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsx("button",{onClick:()=>V(null),className:"btn btn-secondary",style:{justifyContent:"center"},children:"Cancel"}),r.jsxs("button",{onClick:()=>D(_.id),className:"btn btn-primary",style:{justifyContent:"center",background:"#ef4444",border:"none"},children:[r.jsx(Yt,{size:16})," Delete"]})]})]})}),z&&r.jsx(jf,{onImport:F,onClose:()=>H(!1)})]})},Sx=()=>{const{user:u}=Wr(),h=Wn(),[a,g]=U.useState(null),[y,x]=U.useState([]),[C,I]=U.useState(!0),[S,v]=U.useState(""),[A,k]=U.useState(1),[_,V]=U.useState(null),[X,W]=U.useState(null);U.useEffect(()=>{u?.is_admin||h("/")},[u,h]),U.useEffect(()=>{z()},[]),U.useEffect(()=>{H()},[A,S]);const z=async()=>{try{const N=localStorage.getItem("token"),P=await fetch("https://gatherly-backend-3vmv.onrender.com/admin/stats",{headers:{Authorization:`Bearer ${N}`}});if(P.ok){const D=await P.json();g(D)}}catch(N){console.error("Failed to fetch stats:",N)}},H=async()=>{try{I(!0);const N=localStorage.getItem("token");console.log(" Admin Dashboard: Fetching users...",{page:A,searchTerm:S});const P=`https://gatherly-backend-3vmv.onrender.com/admin/users?page=${A}&limit=20&search=${S}`;console.log(" Admin Dashboard: URL:",P);const D=await fetch(P,{headers:{Authorization:`Bearer ${N}`}});if(console.log(" Admin Dashboard: Response status:",D.status),D.ok){const q=await D.json();console.log(" Admin Dashboard: Received data:",q),x(q.users),V(q.pagination)}else{const q=await D.text();console.error(" Admin Dashboard: Error response:",q)}}catch(N){console.error(" Admin Dashboard: Failed to fetch users:",N)}finally{I(!1)}},T=async N=>{try{const P=localStorage.getItem("token"),D=await fetch(`https://gatherly-backend-3vmv.onrender.com/admin/users/${N}`,{method:"DELETE",headers:{Authorization:`Bearer ${P}`}});if(D.ok)W(null),H(),z();else{const q=await D.json();alert(q.error||"Failed to delete user")}}catch(P){console.error("Failed to delete user:",P),alert("Failed to delete user")}};return u?.is_admin?r.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-secondary)",padding:"2rem 0"},children:[r.jsxs("div",{className:"container",style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem"},children:[r.jsx("button",{onClick:()=>h("/"),style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--bg-primary)",border:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--text-secondary)"},children:r.jsx(xi,{size:20})}),r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[r.jsx(xg,{size:24,color:"var(--primary)"}),r.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--text-primary)",margin:0},children:"Admin Dashboard"})]}),r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",margin:0},children:"Manage users and view platform statistics"})]})]}),a&&r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[r.jsx("div",{className:"card",style:{padding:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #6366f1, #a855f7)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Wt,{size:24,color:"white"})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",fontWeight:600},children:"TOTAL USERS"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--text-primary)"},children:a.users.total}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:["+",a.users.last7Days," this week"]})]})]})}),r.jsx("div",{className:"card",style:{padding:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #10b981, #14b8a6)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Zn,{size:24,color:"white"})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",fontWeight:600},children:"TOTAL EVENTS"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--text-primary)"},children:a.events.total}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:[a.events.active," active"]})]})]})}),r.jsx("div",{className:"card",style:{padding:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #f59e0b, #ef4444)",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(vg,{size:24,color:"white"})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",fontWeight:600},children:"TOTAL GUESTS"}),r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:700,color:"var(--text-primary)"},children:a.guests.total}),r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"All events"})]})]})})]}),r.jsxs("div",{className:"card",style:{padding:"1.5rem"},children:[r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"1rem"},children:"User Management"}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(xo,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),r.jsx("input",{type:"text",value:S,onChange:N=>{v(N.target.value),k(1)},className:"form-input",style:{paddingLeft:"2.75rem"},placeholder:"Search by name, email, or phone..."})]})]}),C?r.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:"Loading users..."}):y.length===0?r.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:"No users found"}):r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{overflowX:"auto"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{borderBottom:"2px solid var(--border)"},children:[r.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.75rem",fontWeight:600,color:"var(--text-secondary)"},children:"NAME"}),r.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.75rem",fontWeight:600,color:"var(--text-secondary)"},children:"EMAIL"}),r.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.75rem",fontWeight:600,color:"var(--text-secondary)"},children:"PHONE"}),r.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.75rem",fontWeight:600,color:"var(--text-secondary)"},children:"JOINED"}),r.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.75rem",fontWeight:600,color:"var(--text-secondary)"},children:"STATUS"}),r.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.75rem",fontWeight:600,color:"var(--text-secondary)"},children:"ACTIONS"})]})}),r.jsx("tbody",{children:y.map(N=>r.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[r.jsxs("td",{style:{padding:"1rem 0.75rem"},children:[r.jsx("div",{style:{fontWeight:600,color:"var(--text-primary)"},children:N.name}),N.is_admin&&r.jsx("span",{style:{fontSize:"0.75rem",color:"var(--primary)",fontWeight:600},children:"ADMIN"})]}),r.jsx("td",{style:{padding:"1rem 0.75rem",color:"var(--text-secondary)",fontSize:"0.875rem"},children:N.email||"-"}),r.jsx("td",{style:{padding:"1rem 0.75rem",color:"var(--text-secondary)",fontSize:"0.875rem"},children:N.phone||"-"}),r.jsx("td",{style:{padding:"1rem 0.75rem",color:"var(--text-secondary)",fontSize:"0.875rem"},children:new Date(N.created_at).toLocaleDateString()}),r.jsx("td",{style:{padding:"1rem 0.75rem"},children:N.email_verified?r.jsx("span",{style:{fontSize:"0.75rem",color:"#10b981",fontWeight:600},children:"VERIFIED"}):r.jsx("span",{style:{fontSize:"0.75rem",color:"#f59e0b",fontWeight:600},children:"PENDING"})}),r.jsx("td",{style:{padding:"1rem 0.75rem",textAlign:"right"},children:N.id!==u.id&&!N.is_admin&&r.jsx("button",{onClick:()=>W(N),"aria-label":`Delete ${N.name}`,style:{padding:"0.5rem",background:"transparent",border:"1px solid #ef4444",borderRadius:"8px",color:"#ef4444",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:r.jsx(Yt,{size:16})})})]},N.id))})]})}),_&&_.pages>1&&r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginTop:"1.5rem"},children:[r.jsx("button",{onClick:()=>k(N=>Math.max(1,N-1)),disabled:A===1,className:"btn",style:{padding:"0.5rem 1rem"},children:"Previous"}),r.jsxs("span",{style:{padding:"0.5rem 1rem",color:"var(--text-secondary)"},children:["Page ",A," of ",_.pages]}),r.jsx("button",{onClick:()=>k(N=>Math.min(_.pages,N+1)),disabled:A===_.pages,className:"btn",style:{padding:"0.5rem 1rem"},children:"Next"})]})]})]})]}),X&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:r.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"2rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[r.jsx(mo,{size:24,color:"#ef4444"}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,color:"var(--text-primary)",margin:0},children:"Delete User"})]}),r.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:["Are you sure you want to delete ",r.jsx("strong",{children:X.name}),"? This will permanently delete their account, events, and all associated data. This action cannot be undone."]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsx("button",{onClick:()=>W(null),className:"btn",style:{flex:1,padding:"0.75rem"},children:"Cancel"}),r.jsx("button",{onClick:()=>T(X.id),style:{flex:1,padding:"0.75rem",background:"#ef4444",color:"white",border:"none",borderRadius:"8px",fontWeight:600,cursor:"pointer"},children:"Delete"})]})]})})]}):null};function Ex(){const u=Wn(),h=Ts();return U.useEffect(()=>{const a=r0.addListener("backButton",({canGoBack:g})=>{h.pathname==="/"||h.pathname==="/manager"?r0.exitApp():u(g?-1:"/")});return()=>{a.remove()}},[u,h]),null}function Ax(){return U.useEffect(()=>{Yi.initialize()},[]),r.jsx(ng,{children:r.jsx(qp,{children:r.jsx(tg,{children:r.jsxs(_p,{children:[r.jsx(Ex,{}),r.jsxs(Ep,{children:[r.jsx(Yn,{path:"/login",element:r.jsx(Sg,{})}),r.jsx(Yn,{path:"/signup",element:r.jsx(Ag,{})}),r.jsx(Yn,{path:"/rsvp/:eventId/:guestId",element:r.jsx(Hm,{})}),r.jsx(Yn,{path:"/invite/:id",element:r.jsx(Gm,{})}),r.jsx(Yn,{path:"/",element:r.jsx(fi,{children:r.jsx(hi,{children:r.jsx(Ig,{})})})}),r.jsx(Yn,{path:"/manager",element:r.jsx(J0,{to:"/",replace:!0})}),r.jsx(Yn,{path:"/event/:id",element:r.jsx(fi,{children:r.jsx(hi,{children:r.jsx(pm,{})})})}),r.jsx(Yn,{path:"/guest/event/:id",element:r.jsx(fi,{children:r.jsx(hi,{children:r.jsx(gm,{})})})}),r.jsx(Yn,{path:"/event/:eventId/wall",element:r.jsx(fi,{children:r.jsx(hi,{children:r.jsx(Ym,{})})})}),r.jsx(Yn,{path:"/scanner",element:r.jsx(fi,{children:r.jsx(hi,{children:r.jsx(Vm,{})})})}),r.jsx(Yn,{path:"/profile",element:r.jsx(fi,{children:r.jsx(hi,{children:r.jsx(yx,{})})})}),r.jsx(Yn,{path:"/notifications",element:r.jsx(fi,{children:r.jsx(hi,{children:r.jsx(vx,{})})})}),r.jsx(Yn,{path:"/contacts",element:r.jsx(fi,{children:r.jsx(hi,{children:r.jsx(Cx,{})})})}),r.jsx(Yn,{path:"/admin",element:r.jsx(fi,{children:r.jsx(hi,{children:r.jsx(Sx,{})})})})]})]})})})})}R1.createRoot(document.getElementById("root")).render(r.jsx(sr.StrictMode,{children:r.jsx(Ax,{})}));export{s0 as A,i0 as B,ga as W,kr as _,ef as b,Ki as r};
