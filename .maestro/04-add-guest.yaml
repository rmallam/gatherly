appId: com.guestscanner.app
---
# Test: User Login Flow (with Screenshots)
- launchApp:
    clearState: true
    
# Login first
# Enter email
- tapOn: 
    text: "your@email.com"
- inputText: "testuser@test.com"
- waitForAnimationToEnd

# Enter password
- tapOn:
    text: "Enter your password"
- inputText: "Test@1234"
- waitForAnimationToEnd

# Submit login
- tapOn: "Sign In"
- waitForAnimationToEnd

# Create event first
- tapOn: "New Event"
- waitForAnimationToEnd
- tapOn:
    text: "e.g. Annual Conference 2024"
- inputText: "Test Event"
- tapOn: "Create Event"
- waitForAnimationToEnd

# Open event
- tapOn: "Test Event"
- waitForAnimationToEnd


# Wait a moment for event to load
- waitForAnimationToEnd

# Wait for tabs to be visible - Overview should be the first tab
- extendedWaitUntil:
    visible: "Overview"
    timeout: 10000
- waitForAnimationToEnd

# Tap on Guests tab using the id attribute (most reliable)
# The tab button has id="tab-guests" for accessibility
- tapOn:
    id: "tab-guests"
- waitForAnimationToEnd

# Verify we successfully navigated to Guests tab by checking for Add Guest button
- extendedWaitUntil:
    visible: "Add Guest"
    timeout: 10000
- waitForAnimationToEnd

# Add guest - tap the Add Guest button
- tapOn: "Add Guest"
- waitForAnimationToEnd

# Wait for the Add Guest modal to appear
- assertVisible: "Add Guest"
- waitForAnimationToEnd

# Fill guest details - tap on the name input field
- tapOn:
    text: "John Doe"
- inputText: "Test Guest"
- waitForAnimationToEnd

# Fill phone number - tap on the phone input field
- tapOn:
    text: "9876543210"
- inputText: "1234567890"
- waitForAnimationToEnd

# Save guest - tap Add to List button
- tapOn: "Add to List"
- waitForAnimationToEnd

# Wait for guest to appear in list (this confirms the modal closed and guest was added)
- assertVisible: "Test Guest"
- waitForAnimationToEnd

# Test duplicate prevention
- tapOn: "Add Guest"
- waitForAnimationToEnd

# Wait for modal to appear
- assertVisible: "Add Guest"
- waitForAnimationToEnd

# Try to add the same guest again
- tapOn:
    text: "John Doe"
- inputText: "Test Guest"
- waitForAnimationToEnd
- tapOn: "Add to List"
- waitForAnimationToEnd

# Should show duplicate alert
- assertVisible: "This guest has already been added!"

# Success!
