# name: Security - Dependency Scanning

# # Workflow disabled - uncomment to re-enable
# # on:
# #   push:
# #     branches: [ main, develop ]
# #   pull_request:
# #     branches: [ main, develop ]
# #   schedule:
# #     # Run every Monday at 9am UTC
# # #     - cron: '0 9 * * 1'

# jobs:
#   npm-audit:
#     name: NPM Audit
#     runs-on: ubuntu-latest
    
#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v4
      
#       - name: Setup Node.js
#         uses: actions/setup-node@v4
#         with:
#           node-version: '20'
      
#       - name: Install frontend dependencies
#         working-directory: ./frontend
#         run: npm ci
      
#       - name: Run npm audit
#         working-directory: ./frontend
#         run: npm audit --audit-level=moderate
#         continue-on-error: true
      
#       - name: Install backend dependencies
#         working-directory: ./backend
#         run: npm ci
      
#       - name: Run npm audit (backend)
#         working-directory: ./backend
#         run: npm audit --audit-level=moderate
#         continue-on-error: true

#   snyk-scan:
#     name: Snyk Security Scan
#     runs-on: ubuntu-latest
#     if: ${{ vars.SNYK_TOKEN != '' }}
    
#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v4
      
#       - name: Run Snyk to check for vulnerabilities
#         uses: snyk/actions/node@master
#         continue-on-error: true
#         env:
#           SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
#         with:
#           args: --all-projects --severity-threshold=high --sarif-file-output=snyk.sarif
      
#       - name: Upload Snyk results to GitHub
#         uses: github/codeql-action/upload-sarif@v4
#         if: always() && hashFiles('snyk.sarif') != ''
#         with:
#           sarif_file: snyk.sarif
